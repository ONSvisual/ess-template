//js
import{S as fe,i as ue,s as ce,k as F,l as V,m as I,h as y,n as f,b as O,D as ne,x as je,q as te,a as U,y as x,r as le,c as Z,z as ae,W as ye,C as A,A as $,u as ke,v as Ae,d as K,B as ee,f as De,g as z,U as we,V as de,I as kl,K as wl,L as yl,M as Al,F as G,G as H,p as ie,w as ge,Q as me,H as Ne,R as be,P as Dl,T as Ge,X as Ve,e as Se,Y as El,Z as Je,_ as dl,$ as at,a0 as nt,E as Ue,o as _l,a1 as et,a2 as Xe}from"../chunks/index.da7df310.js";import{b as Le}from"../chunks/paths.13552519.js";import{T as Il,H as Sl,S as Cl}from"../chunks/Subhead.f3f9521d.js";import{l as Ll,s as Fe,a as qe,M as Ml,f as Tl,b as Rl,c as rt,A as it,H as Fl,S as Vl,P as Wl}from"../chunks/HorizontalBeeswarmKey.8b54cada.js";import{t as Ye,b as gl,e as xe,f as $e,h as se}from"../chunks/config.09e429ba.js";import{S as Ol}from"../chunks/Select.4e9371a5.js";import{g as Pl}from"../chunks/_commonjsHelpers.25897ecf.js";function Nl(e){let t;return{c(){t=F("p"),this.h()},l(l){t=V(l,"P",{class:!0});var a=I(t);a.forEach(y),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){O(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ne,o:ne,d(l){l&&y(t)}}}function zl(e,t,l){let{mainAreaName:a,comparisonAreaName:n,differenceValue:r,comparisonValue:i,indicator:s,prefix:o,suffix:c,subTextShort:u,far:d,length:_}=t;Math.pow(10,s.roundingFactor);let k;return _==="short"?k=(r==0?"Equal":r>0?d?"Far above":"Above":d?"Far below":"Below")+" "+n+"-wide average"+(r==0?".":" ("+o+Math.abs(i).toLocaleString()+c+u+")."):_==="medium"&&(k=r==0?s.label+" in "+a+" is equal to the "+n+"-wide average.":s.label+" in "+a+" is "+o+Math.abs(r).toLocaleString()+c+" "+u+(r?" higher":" lower")+" than the "+n+"-wide average."),e.$$set=m=>{"mainAreaName"in m&&l(1,a=m.mainAreaName),"comparisonAreaName"in m&&l(2,n=m.comparisonAreaName),"differenceValue"in m&&l(3,r=m.differenceValue),"comparisonValue"in m&&l(4,i=m.comparisonValue),"indicator"in m&&l(5,s=m.indicator),"prefix"in m&&l(6,o=m.prefix),"suffix"in m&&l(7,c=m.suffix),"subTextShort"in m&&l(8,u=m.subTextShort),"far"in m&&l(9,d=m.far),"length"in m&&l(10,_=m.length)},[k,a,n,r,i,s,o,c,u,d,_]}let st=class extends fe{constructor(t){super(),ue(this,t,zl,Nl,ce,{mainAreaName:1,comparisonAreaName:2,differenceValue:3,comparisonValue:4,indicator:5,prefix:6,suffix:7,subTextShort:8,far:9,length:10})}};function Bl(e){let t;return{c(){t=F("p"),this.h()},l(l){t=V(l,"P",{class:!0});var a=I(t);a.forEach(y),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){O(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ne,o:ne,d(l){l&&y(t)}}}function Kl(e,t,l){let{mainAreaName:a,comparisonAreaName:n,changeValue:r,changePercent:i,mainValue:s,mainValueInitial:o,indicator:c,prefix:u,suffix:d,subTextShort:_,length:k}=t,m;return k==="short"?c.changeSentence==="percent"?m=r===0?"No change from ":Math.abs(i)+"% "+(r>0?"increase":"descrease")+" from "+c.defaultInitialYear+" to "+c.latestYear+".":c.changeSentence==="absolute"?m=(r===0?"No change from":(r>0?"Rose by ":"Fell by ")+u+Math.abs(r.toFixed(c.roundingFactor))+d+_+" from ")+c.defaultInitialYear+" to "+c.latestYear+".":c.changeSentence==="both"&&(m=r===0?"No change between "+c.defaultInitialYear+" and "+c.latestYear+".":(r>0?"Rose from ":"Fell from ")+u+o+d+_+" in "+c.defaultInitialYear+" to "+u+s+d+_+" in "+c.latestYear+"."):k==="medium"&&(m=differenceValue==0?c.label+" in "+a+" is equal to the "+n+"-wide average.":c.label+" in "+a+" is "+u+Math.abs(differenceValue).toLocaleString()+d+" "+_+(differenceValue?" higher":" lower")+" than the "+n+"-wide average."),e.$$set=g=>{"mainAreaName"in g&&l(1,a=g.mainAreaName),"comparisonAreaName"in g&&l(2,n=g.comparisonAreaName),"changeValue"in g&&l(3,r=g.changeValue),"changePercent"in g&&l(4,i=g.changePercent),"mainValue"in g&&l(5,s=g.mainValue),"mainValueInitial"in g&&l(6,o=g.mainValueInitial),"indicator"in g&&l(7,c=g.indicator),"prefix"in g&&l(8,u=g.prefix),"suffix"in g&&l(9,d=g.suffix),"subTextShort"in g&&l(10,_=g.subTextShort),"length"in g&&l(11,k=g.length)},[m,a,n,r,i,s,o,c,u,d,_,k]}class ot extends fe{constructor(t){super(),ue(this,t,Kl,Bl,ce,{mainAreaName:1,comparisonAreaName:2,changeValue:3,changePercent:4,mainValue:5,mainValueInitial:6,indicator:7,prefix:8,suffix:9,subTextShort:10,length:11})}}function Gl(e){let t,l;return{c(){t=F("p"),l=te(e[16]),this.h()},l(a){t=V(a,"P",{class:!0});var n=I(t);l=le(n,e[16]),n.forEach(y),this.h()},h(){f(t,"class","subText svelte-1i5rdk3")},m(a,n){O(a,t,n),A(t,l)},p:ne,d(a){a&&y(t)}}}function ft(e){let t,l,a,n,r,i,s;var o=e[0].code in e[3]?e[3][e[0].code][0]:ot;function c(u){return{props:{mainAreaName:u[5],comparisonAreaName:u[2],mainValue:u[4],mainValueInitial:u[10],changeValue:u[11],changePercent:u[12],indicator:u[0],prefix:u[14],suffix:u[15],subTextShort:u[17],length:"short"}}}return o&&(i=je(o,c(e))),{c(){t=F("div"),l=F("div"),a=F("p"),n=te(e[13]),r=U(),i&&x(i.$$.fragment),this.h()},l(u){t=V(u,"DIV",{class:!0});var d=I(t);l=V(d,"DIV",{class:!0});var _=I(l);a=V(_,"P",{class:!0});var k=I(a);n=le(k,e[13]),k.forEach(y),_.forEach(y),r=Z(d),i&&ae(i.$$.fragment,d),d.forEach(y),this.h()},h(){f(a,"class","svelte-1i5rdk3"),f(l,"class",ye("headlineLabel "+(["Increasing","Falling"].includes(e[13])?null:e[13]==="Little change"?"headlineLabelOkay":e[13]==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1i5rdk3"),f(t,"class","flexV column3 svelte-1i5rdk3")},m(u,d){O(u,t,d),A(t,l),A(l,a),A(a,n),A(t,r),i&&$(i,t,null),s=!0},p(u,d){const _={};if(d&4&&(_.comparisonAreaName=u[2]),d&1&&(_.indicator=u[0]),d&1&&o!==(o=u[0].code in u[3]?u[3][u[0].code][0]:ot)){if(i){Ae();const k=i;K(k.$$.fragment,1,0,()=>{ee(k,1)}),De()}o?(i=je(o,c(u)),x(i.$$.fragment),z(i.$$.fragment,1),$(i,t,null)):i=null}else o&&i.$set(_)},i(u){s||(i&&z(i.$$.fragment,u),s=!0)},o(u){i&&K(i.$$.fragment,u),s=!1},d(u){u&&y(t),i&&ee(i)}}}function Hl(e){let t,l,a,n=e[0].label+"",r,i,s,o,c,u,d=e[14]+parseFloat(e[4].toFixed(e[4]>100?0:1)).toLocaleString()+e[15]+"",_,k,m,g,E,h,w,b,v,p,D,P=e[16]!=""&&Gl(e);var M=e[0].code in e[3]?e[3][e[0].code][0]:st;function S(L){return{props:{mainAreaName:L[5],comparisonAreaName:L[2],differenceValue:L[7],comparisonValue:L[6],indicator:L[0],prefix:L[14],suffix:L[15],subTextShort:L[17],far:L[8],length:"short"}}}M&&(v=je(M,S(e)));let j=e[1]!=null&&ft(e);return{c(){t=F("div"),l=F("h3"),a=F("a"),r=te(n),s=U(),o=F("div"),c=F("div"),u=F("h4"),_=te(d),k=U(),P&&P.c(),m=U(),g=F("div"),E=F("div"),h=F("p"),w=te(e[9]),b=U(),v&&x(v.$$.fragment),p=U(),j&&j.c(),this.h()},l(L){t=V(L,"DIV",{class:!0});var q=I(t);l=V(q,"H3",{class:!0});var Y=I(l);a=V(Y,"A",{href:!0});var re=I(a);r=le(re,n),re.forEach(y),Y.forEach(y),s=Z(q),o=V(q,"DIV",{class:!0});var W=I(o);c=V(W,"DIV",{class:!0});var J=I(c);u=V(J,"H4",{class:!0});var B=I(u);_=le(B,d),B.forEach(y),k=Z(J),P&&P.l(J),J.forEach(y),m=Z(W),g=V(W,"DIV",{class:!0});var C=I(g);E=V(C,"DIV",{class:!0});var Q=I(E);h=V(Q,"P",{class:!0});var T=I(h);w=le(T,e[9]),T.forEach(y),Q.forEach(y),b=Z(C),v&&ae(v.$$.fragment,C),C.forEach(y),p=Z(W),j&&j.l(W),W.forEach(y),q.forEach(y),this.h()},h(){f(a,"href",i=Le+"/indicators/"+e[0].code),f(l,"class","svelte-1i5rdk3"),f(u,"class","svelte-1i5rdk3"),f(c,"class","flexV column1 svelte-1i5rdk3"),f(h,"class","svelte-1i5rdk3"),f(E,"class",ye("headlineLabel "+(["Above average","Below average"].includes(e[9])?null:e[9]==="Similar to average"?"headlineLabelOkay":e[9]==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1i5rdk3"),f(g,"class","flexV column2 svelte-1i5rdk3"),f(o,"class","flexH svelte-1i5rdk3"),f(t,"class","panelContainer svelte-1i5rdk3")},m(L,q){O(L,t,q),A(t,l),A(l,a),A(a,r),A(t,s),A(t,o),A(o,c),A(c,u),A(u,_),A(c,k),P&&P.m(c,null),A(o,m),A(o,g),A(g,E),A(E,h),A(h,w),A(g,b),v&&$(v,g,null),A(o,p),j&&j.m(o,null),D=!0},p(L,[q]){(!D||q&1)&&n!==(n=L[0].label+"")&&ke(r,n),(!D||q&1&&i!==(i=Le+"/indicators/"+L[0].code))&&f(a,"href",i),L[16]!=""&&P.p(L,q);const Y={};if(q&4&&(Y.comparisonAreaName=L[2]),q&1&&(Y.indicator=L[0]),q&1&&M!==(M=L[0].code in L[3]?L[3][L[0].code][0]:st)){if(v){Ae();const re=v;K(re.$$.fragment,1,0,()=>{ee(re,1)}),De()}M?(v=je(M,S(L)),x(v.$$.fragment),z(v.$$.fragment,1),$(v,g,null)):v=null}else M&&v.$set(Y);L[1]!=null?j?(j.p(L,q),q&2&&z(j,1)):(j=ft(L),j.c(),z(j,1),j.m(o,null)):j&&(Ae(),K(j,1,1,()=>{j=null}),De())},i(L){D||(v&&z(v.$$.fragment,L),z(j),D=!0)},o(L){v&&K(v.$$.fragment,L),K(j),D=!1},d(L){L&&y(t),P&&P.d(),v&&ee(v),j&&j.d()}}}function jl(e,t,l){let{indicator:a,latestData:n,initialData:r,selectedAreas:i}=t,s=we("areas"),o={},c=Math.pow(10,a.roundingFactor),u=n.find(B=>B.areacd===i.find(C=>C.role==="main").data.areacd),d=Math.round(u.value*c)/c,_=s.find(B=>B.areacd===u.areacd).areanm,k=n.filter(B=>B.areacd===i.find(C=>C.role==="country").data.areacd),m=n.filter(B=>B.areacd===i.find(C=>C.role==="uk").data.areacd),g=n.filter(B=>B.areacd===i.find(C=>C.role==="parent").data.areacd),E=k.length>0?k[0]:m.length>0?m[0]:g.length>0?g[0]:void 0,h=Math.round(E.value*c)/c,w=s.find(B=>B.areacd===E.areacd).areanm;w=w==="United Kingdom"?"UK":w;let b=d-h,v=a.code in Ye?Ye[a.code]:gl,p=Math.abs(b)/h<v[0]/100,D=Math.abs(b)/h>v[1]/100,P=p?xe.similar:d>h?xe.high[a.highEqualsGood]:xe.low[a.highEqualsGood],M=r===void 0?null:Math.round(r.find(B=>B.areacd===i.find(C=>C.role==="main").data.areacd).value*c)/c,S=d-M,j=Math.abs(S/M*100)<1?Math.round(S/M*1e3)/10:Math.round(S/M*100),q=Math.abs(j)<v[0]?$e.similar:d>M?$e.high[a.highEqualsGood]:$e.low[a.highEqualsGood],Y=a.prefix===null?"":a.prefix==="pounds"?"£":a.prefix,re=a.suffix===null?"":a.suffix,W=a.subText===null?"":a.subText,J=a.subTextShort===null?"":a.subTextShort;return e.$$set=B=>{"indicator"in B&&l(0,a=B.indicator),"latestData"in B&&l(18,n=B.latestData),"initialData"in B&&l(1,r=B.initialData),"selectedAreas"in B&&l(19,i=B.selectedAreas)},[a,r,w,o,d,_,h,b,D,P,M,S,j,q,Y,re,W,J,n,i]}class ql extends fe{constructor(t){super(),ue(this,t,jl,Hl,ce,{indicator:0,latestData:18,initialData:1,selectedAreas:19})}}function ut(e,t,l){const a=e.slice();return a[7]=t[l],a}function ct(e){let t,l;function a(...r){return e[5](e[7],...r)}function n(...r){return e[6](e[7],...r)}return t=new ql({props:{indicator:e[2].find(a),latestData:e[1].filter(n),initialData:e[3][e[7].code],selectedAreas:e[4]}}),{c(){x(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,i){$(t,r,i),l=!0},p(r,i){e=r;const s={};i&5&&(s.indicator=e[2].find(a)),i&3&&(s.latestData=e[1].filter(n)),i&9&&(s.initialData=e[3][e[7].code]),i&16&&(s.selectedAreas=e[4]),t.$set(s)},i(r){l||(z(t.$$.fragment,r),l=!0)},o(r){K(t.$$.fragment,r),l=!1},d(r){ee(t,r)}}}function Yl(e){let t,l,a,n,r,i,s=e[0],o=[];for(let u=0;u<s.length;u+=1)o[u]=ct(ut(e,s,u));const c=u=>K(o[u],1,1,()=>{o[u]=null});return{c(){t=F("section"),l=F("h1"),a=te("Key indicators"),n=U(),r=F("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=V(u,"SECTION",{title:!0});var d=I(t);l=V(d,"H1",{});var _=I(l);a=le(_,"Key indicators"),_.forEach(y),n=Z(d),r=V(d,"DIV",{class:!0});var k=I(r);for(let m=0;m<o.length;m+=1)o[m].l(k);k.forEach(y),d.forEach(y),this.h()},h(){f(r,"class","rowsContainer"),f(t,"title","Key indicators")},m(u,d){O(u,t,d),A(t,l),A(l,a),A(t,n),A(t,r);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(r,null);i=!0},p(u,[d]){if(d&31){s=u[0];let _;for(_=0;_<s.length;_+=1){const k=ut(u,s,_);o[_]?(o[_].p(k,d),z(o[_],1)):(o[_]=ct(k),o[_].c(),z(o[_],1),o[_].m(r,null))}for(Ae(),_=s.length;_<o.length;_+=1)c(_);De()}},i(u){if(!i){for(let d=0;d<s.length;d+=1)z(o[d]);i=!0}},o(u){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)K(o[d]);i=!1},d(u){u&&y(t),de(o,u)}}}function Ul(e,t,l){let{areaKeyIndicators:a,latestData:n,trimmedIndicators:r,initialData:i,selectedAreas:s}=t;const o=(u,d)=>d.id===u.id,c=(u,d)=>d.codeId===u.id;return e.$$set=u=>{"areaKeyIndicators"in u&&l(0,a=u.areaKeyIndicators),"latestData"in u&&l(1,n=u.latestData),"trimmedIndicators"in u&&l(2,r=u.trimmedIndicators),"initialData"in u&&l(3,i=u.initialData),"selectedAreas"in u&&l(4,s=u.selectedAreas)},[a,n,r,i,s,o,c]}class Zl extends fe{constructor(t){super(),ue(this,t,Ul,Yl,ce,{areaKeyIndicators:0,latestData:1,trimmedIndicators:2,initialData:3,selectedAreas:4})}}function ht(e){let t,l,a,n,r,i,s,o,c,u,d;return{c(){t=F("summary"),l=F("h3"),a=te(e[1]),r=U(),i=F("span"),s=G("svg"),o=G("path"),this.h()},l(_){t=V(_,"SUMMARY",{class:!0});var k=I(t);l=V(k,"H3",{class:!0});var m=I(l);a=le(m,e[1]),m.forEach(y),r=Z(k),i=V(k,"SPAN",{class:!0});var g=I(i);s=H(g,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var E=I(s);o=H(E,"path",{class:!0,d:!0,transform:!0}),I(o).forEach(y),E.forEach(y),g.forEach(y),k.forEach(y),this.h()},h(){f(l,"class",n=ye("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),f(o,"class",c=ye(e[0]?" path_styling_override":"")+" svelte-lfupja"),f(o,"d",u=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),f(o,"transform",d=e[0]?null:"translate(-5.02 -1.59)"),f(s,"class","ons-svg-icon"),f(s,"viewBox","0 0 8 13"),f(s,"xmlns","http://www.w3.org/2000/svg"),f(s,"focusable","false"),f(i,"class","ons-collapsible__icon"),f(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(_,k){O(_,t,k),A(t,l),A(l,a),A(t,r),A(t,i),A(i,s),A(s,o)},p(_,k){k&2&&ke(a,_[1]),k&1&&n!==(n=ye("ons-collapsible__title"+(_[0]?" title_styling_override":""))+" svelte-lfupja")&&f(l,"class",n),k&1&&c!==(c=ye(_[0]?" path_styling_override":"")+" svelte-lfupja")&&f(o,"class",c),k&1&&u!==(u=_[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&f(o,"d",u),k&1&&d!==(d=_[0]?null:"translate(-5.02 -1.59)")&&f(o,"transform",d)},d(_){_&&y(t)}}}function Ql(e){let t,l,a,n,r,i,s=!e[3]&&ht(e);const o=e[5].default,c=kl(o,e,e[4],null);return{c(){t=F("details"),s&&s.c(),l=U(),a=F("div"),c&&c.c(),this.h()},l(u){t=V(u,"DETAILS",{class:!0});var d=I(t);s&&s.l(d),l=Z(d),a=V(d,"DIV",{class:!0});var _=I(a);c&&c.l(_),_.forEach(y),d.forEach(y),this.h()},h(){f(a,"class",n=ye(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),f(t,"class",r=ye("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(u,d){O(u,t,d),s&&s.m(t,null),A(t,l),A(t,a),c&&c.m(a,null),i=!0},p(u,[d]){u[3]?s&&(s.d(1),s=null):s?s.p(u,d):(s=ht(u),s.c(),s.m(t,l)),c&&c.p&&(!i||d&16)&&wl(c,o,u,u[4],i?Al(o,u[4],d,null):yl(u[4]),null),(!i||d&5&&n!==(n=ye(u[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(u[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&f(a,"class",n),(!i||d&1&&r!==(r=ye("ons-collapsible ons-js-collapsible"+(u[0]?" details_styling_override":""))+" svelte-lfupja"))&&f(t,"class",r),(!i||d&8)&&(t.open=u[3])},i(u){i||(z(c,u),i=!0)},o(u){K(c,u),i=!1},d(u){u&&y(t),s&&s.d(),c&&c.d(u)}}}function Jl(e,t,l){let{$$slots:a={},$$scope:n}=t,{cross:r=!1}=t,{label:i="Label"}=t,{blank:s=!1}=t,{open:o=!1}=t;return e.$$set=c=>{"cross"in c&&l(0,r=c.cross),"label"in c&&l(1,i=c.label),"blank"in c&&l(2,s=c.blank),"open"in c&&l(3,o=c.open),"$$scope"in c&&l(4,n=c.$$scope)},[r,i,s,o,n,a]}class Xl extends fe{constructor(t){super(),ue(this,t,Jl,Ql,ce,{cross:0,label:1,blank:2,open:3})}}function dt(e,t,l){const a=e.slice();return a[3]=t[l],a[5]=l,a}function xl(e){let t,l;return{c(){t=G("circle"),this.h()},l(a){t=H(a,"circle",{r:!0,fill:!0,stroke:!0});var n=I(t);n.forEach(y),this.h()},h(){f(t,"r",Ke),f(t,"fill",l=se[e[3].role]),f(t,"stroke","white")},m(a,n){O(a,t,n)},p(a,n){n&1&&l!==(l=se[a[3].role])&&f(t,"fill",l)},d(a){a&&y(t)}}}function $l(e){let t,l,a;return{c(){t=G("rect"),this.h()},l(n){t=H(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var r=I(t);r.forEach(y),this.h()},h(){f(t,"transform",l=["country","uk"].includes(e[3].role)?"rotate(45)":null),f(t,"x",-Ke),f(t,"y",-Ke),f(t,"width",2*Ke),f(t,"height",2*Ke),f(t,"fill",a=se[e[3].role]),f(t,"stroke","white")},m(n,r){O(n,t,r)},p(n,r){r&1&&l!==(l=["country","uk"].includes(n[3].role)?"rotate(45)":null)&&f(t,"transform",l),r&1&&a!==(a=se[n[3].role])&&f(t,"fill",a)},d(n){n&&y(t)}}}function _t(e){let t,l,a,n,r,i,s=e[1].find(k).areanm+"",o,c;function u(m,g){return g&1&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(m[3].role)),n?$l:xl}let d=u(e,-1),_=d(e);function k(...m){return e[2](e[3],...m)}return{c(){t=F("div"),l=G("svg"),a=G("g"),_.c(),r=U(),i=F("p"),o=te(s),c=U(),this.h()},l(m){t=V(m,"DIV",{class:!0});var g=I(t);l=H(g,"svg",{width:!0,height:!0});var E=I(l);a=H(E,"g",{transform:!0});var h=I(a);_.l(h),h.forEach(y),E.forEach(y),r=Z(g),i=V(g,"P",{style:!0,class:!0});var w=I(i);o=le(w,s),w.forEach(y),c=Z(g),g.forEach(y),this.h()},h(){f(a,"transform","translate(10,12)"),f(l,"width","20"),f(l,"height","24"),ie(i,"color",se[e[3].role]),f(i,"class","svelte-1p5l8o2"),f(t,"class","roleContainer svelte-1p5l8o2")},m(m,g){O(m,t,g),A(t,l),A(l,a),_.m(a,null),A(t,r),A(t,i),A(i,o),A(t,c)},p(m,g){e=m,d===(d=u(e,g))&&_?_.p(e,g):(_.d(1),_=d(e),_&&(_.c(),_.m(a,null))),g&1&&s!==(s=e[1].find(k).areanm+"")&&ke(o,s),g&1&&ie(i,"color",se[e[3].role])},d(m){m&&y(t),_.d()}}}function ea(e){let t,l=e[0],a=[];for(let n=0;n<l.length;n+=1)a[n]=_t(dt(e,l,n));return{c(){t=F("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){t=V(n,"DIV",{class:!0});var r=I(t);for(let i=0;i<a.length;i+=1)a[i].l(r);r.forEach(y),this.h()},h(){f(t,"class","keyContainer svelte-1p5l8o2")},m(n,r){O(n,t,r);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(t,null)},p(n,[r]){if(r&3){l=n[0];let i;for(i=0;i<l.length;i+=1){const s=dt(n,l,i);a[i]?a[i].p(s,r):(a[i]=_t(s),a[i].c(),a[i].m(t,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=l.length}},i:ne,o:ne,d(n){n&&y(t),de(a,n)}}}let Ke=6;function ta(e,t,l){let a=we("areas"),{plottedAreas:n}=t;const r=(i,s)=>s.areacd===i.areacd;return e.$$set=i=>{"plottedAreas"in i&&l(0,n=i.plottedAreas)},[n,a,r]}class la extends fe{constructor(t){super(),ue(this,t,ta,ea,ce,{plottedAreas:0})}}function aa(e){let t,l,a,n,r,i,s,o,c;function u(h){e[39](h)}function d(h){e[40](h)}function _(h){e[41](h)}function k(h){e[42](h)}function m(h){e[43](h)}function g(h){e[44](h)}let E={id:e[2],container:e[3],items:e[4],placeholder:e[5],isMulti:e[10],isSearchable:e[6],groupBy:e[22],loadOptions:e[9],getSelectionLabel:e[12],getOptionLabel:e[21],itemFilter:e[19],ariaValues:e[25],ariaListOpen:e[26],ariaFocused:e[27],noOptionsMessage:e[20],indicatorSvg:e[23],containerStyles:e[24],optionIdentifier:e[8],showIndicator:!0,isClearable:e[7]?!e[10]:!1};return e[15]!==void 0&&(E.isFocused=e[15]),e[0]!==void 0&&(E.value=e[0]),e[16]!==void 0&&(E.listOpen=e[16]),e[1]!==void 0&&(E.filterText=e[1]),e[13]!==void 0&&(E.isWaiting=e[13]),e[17]!==void 0&&(E.handleClear=e[17]),l=new Ol({props:E}),ge.push(()=>me(l,"isFocused",u)),ge.push(()=>me(l,"value",d)),ge.push(()=>me(l,"listOpen",_)),ge.push(()=>me(l,"filterText",k)),ge.push(()=>me(l,"isWaiting",m)),ge.push(()=>me(l,"handleClear",g)),l.$on("select",e[28]),l.$on("clear",e[45]),l.$on("loaded",e[46]),l.$on("error",e[47]),{c(){t=F("div"),x(l.$$.fragment),this.h()},l(h){t=V(h,"DIV",{class:!0});var w=I(t);ae(l.$$.fragment,w),w.forEach(y),this.h()},h(){f(t,"class","selectbox svelte-1w33mjb"),Ne(t,"multi-selected",e[0]&&e[10]),Ne(t,"focused",e[15]),Ne(t,"selected",e[0]&&!e[16]&&!e[10]),ie(t,"--borderColor",e[11]),ie(t,"--firstItem",e[18](0)),ie(t,"--secondItem",e[18](1)),ie(t,"--thirdItem",e[18](2)),ie(t,"--fourthItem",e[18](3))},m(h,w){O(h,t,w),$(l,t,null),e[48](t),c=!0},p(h,w){const b={};w[0]&4&&(b.id=h[2]),w[0]&8&&(b.container=h[3]),w[0]&16&&(b.items=h[4]),w[0]&32&&(b.placeholder=h[5]),w[0]&1024&&(b.isMulti=h[10]),w[0]&64&&(b.isSearchable=h[6]),w[0]&512&&(b.loadOptions=h[9]),w[0]&4096&&(b.getSelectionLabel=h[12]),w[0]&524288&&(b.itemFilter=h[19]),w[0]&1048576&&(b.noOptionsMessage=h[20]),w[0]&256&&(b.optionIdentifier=h[8]),w[0]&1152&&(b.isClearable=h[7]?!h[10]:!1),!a&&w[0]&32768&&(a=!0,b.isFocused=h[15],be(()=>a=!1)),!n&&w[0]&1&&(n=!0,b.value=h[0],be(()=>n=!1)),!r&&w[0]&65536&&(r=!0,b.listOpen=h[16],be(()=>r=!1)),!i&&w[0]&2&&(i=!0,b.filterText=h[1],be(()=>i=!1)),!s&&w[0]&8192&&(s=!0,b.isWaiting=h[13],be(()=>s=!1)),!o&&w[0]&131072&&(o=!0,b.handleClear=h[17],be(()=>o=!1)),l.$set(b),(!c||w[0]&1025)&&Ne(t,"multi-selected",h[0]&&h[10]),(!c||w[0]&32768)&&Ne(t,"focused",h[15]),(!c||w[0]&66561)&&Ne(t,"selected",h[0]&&!h[16]&&!h[10]),w[0]&2048&&ie(t,"--borderColor",h[11]),w[0]&262144&&ie(t,"--firstItem",h[18](0)),w[0]&262144&&ie(t,"--secondItem",h[18](1)),w[0]&262144&&ie(t,"--thirdItem",h[18](2)),w[0]&262144&&ie(t,"--fourthItem",h[18](3))},i(h){c||(z(l.$$.fragment,h),c=!0)},o(h){K(l.$$.fragment,h),c=!1},d(h){h&&y(t),ee(l),e[48](null)}}}function na(e,t,l){let a,n,r;const i='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',s='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',o=Dl();let{id:c=""}=t,{container:u=void 0}=t,{mode:d="default"}=t,{items:_}=t,{placeholder:k="Select one..."}=t,{value:m=null}=t,{filterText:g=""}=t,{isSearchable:E=!0}=t,{isClearable:h=!0}=t,{autoClear:w=!1}=t,{idKey:b="value"}=t,{labelKey:v="label"}=t,{groupKey:p=null}=t,{groupItems:D=!1}=t,{loadOptions:P=void 0}=t,{fontSize:M="1em"}=t,{height:S=42}=t,{isMulti:j=!1}=t,{maxSelected:L=4}=t,{colors:q=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=t,{darkMode:Y=!1}=t,{borderColor:re=Y?"white":"#206095"}=t;const W=p&&!D?R=>`${R[v]} <span class="group">${R[p]}</span>`:R=>R[v];let{getSelectionLabel:J=R=>R?W(R):null}=t;const B=D&&p?R=>R[p]:void 0,C=d=="search"?i:s,Q=`--inputFontSize: ${M}; --groupTitleFontSize: ${M}; --height: ${S}px; font-size: ${M};`,T=R=>`${R}, selected.`,oe=(R,ve)=>`You are currently focused on ${R}. There are ${ve} results available.`,pe=()=>"Select is focused, type to refine list, press down to open the menu.";let he,Me,Te,Ce,Ie;const Pe=R=>new Promise(ve=>setTimeout(ve,R));async function N(R){if(o("select",R.detail),w)Ie();else if(h){await Pe(10);let ve=he.getElementsByClassName("clearSelect")[0];ve&&(ve.tabIndex=0,ve.onkeypress=He=>{He.key=="Enter"&&Ie()},ve.removeAttribute("aria-hidden"),ve.setAttribute("aria-label","Clear selection"))}}function X(R){Me=R,l(15,Me)}function Re(R){m=R,l(0,m)}function _e(R){Te=R,l(16,Te)}function We(R){g=R,l(1,g)}function Ze(R){Ce=R,l(13,Ce)}function Qe(R){Ie=R,l(17,Ie)}function Ee(R){Ge.call(this,e,R)}function ze(R){Ge.call(this,e,R)}function Oe(R){Ge.call(this,e,R)}function Be(R){ge[R?"unshift":"push"](()=>{he=R,l(14,he)})}return e.$$set=R=>{"id"in R&&l(2,c=R.id),"container"in R&&l(3,u=R.container),"mode"in R&&l(29,d=R.mode),"items"in R&&l(4,_=R.items),"placeholder"in R&&l(5,k=R.placeholder),"value"in R&&l(0,m=R.value),"filterText"in R&&l(1,g=R.filterText),"isSearchable"in R&&l(6,E=R.isSearchable),"isClearable"in R&&l(7,h=R.isClearable),"autoClear"in R&&l(30,w=R.autoClear),"idKey"in R&&l(8,b=R.idKey),"labelKey"in R&&l(31,v=R.labelKey),"groupKey"in R&&l(32,p=R.groupKey),"groupItems"in R&&l(33,D=R.groupItems),"loadOptions"in R&&l(9,P=R.loadOptions),"fontSize"in R&&l(34,M=R.fontSize),"height"in R&&l(35,S=R.height),"isMulti"in R&&l(10,j=R.isMulti),"maxSelected"in R&&l(36,L=R.maxSelected),"colors"in R&&l(37,q=R.colors),"darkMode"in R&&l(38,Y=R.darkMode),"borderColor"in R&&l(11,re=R.borderColor),"getSelectionLabel"in R&&l(12,J=R.getSelectionLabel)},e.$$.update=()=>{e.$$.dirty[0]&536879106&&l(20,a=Ce?"Loading...":d=="search"&&g.length<3?"Enter 3 or more characters for suggestions":`No results match ${g}`),e.$$.dirty[0]&536870915|e.$$.dirty[1]&33&&l(19,n=Array.isArray(m)&&m.length>=L||d=="search"&&g.length<3?(R,ve,He)=>!1:(R,ve,He)=>`${He[v]}`.match(new RegExp(`\\b${ve}`,"i"))),e.$$.dirty[1]&64&&l(18,r=R=>q[R%q.length])},[m,g,c,u,_,k,E,h,b,P,j,re,J,Ce,he,Me,Te,Ie,r,n,a,W,B,C,Q,T,oe,pe,N,d,w,v,p,D,M,S,L,q,Y,X,Re,_e,We,Ze,Qe,Ee,ze,Oe,Be]}class ra extends fe{constructor(t){super(),ue(this,t,na,aa,ce,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function ia(e){let t,l,a,n;function r(s){e[6](s)}let i={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:e[2],isMulti:!0,maxSelected:4,placeholder:e[1]=e[1]};return e[0].custom!==void 0&&(i.value=e[0].custom),l=new ra({props:i}),ge.push(()=>me(l,"value",r)),l.$on("select",e[3]),{c(){t=F("form"),x(l.$$.fragment),this.h()},l(s){t=V(s,"FORM",{class:!0});var o=I(t);ae(l.$$.fragment,o),o.forEach(y),this.h()},h(){f(t,"class","svelte-a5e7yj")},m(s,o){O(s,t,o),$(l,t,null),n=!0},p(s,[o]){const c={};o&2&&(c.placeholder=s[1]=s[1]),!a&&o&1&&(a=!0,c.value=s[0].custom,be(()=>a=!1)),l.$set(c)},i(s){n||(z(l.$$.fragment,s),n=!0)},o(s){K(l.$$.fragment,s),n=!1},d(s){s&&y(t),ee(l)}}}function sa(e,t,l){let{areasWithData:a,checkboxedRoles:n,selectedAreas:r,altText:i=""}=t,s=we("areasParentsLookup"),o=we("areas"),c=s.filter(_=>a.includes(_.areacd)&!r.map(k=>k.data.areacd).includes(_.areacd));c.forEach(_=>{_.areanm=o.find(k=>k.areacd===_.areacd).areanm,_.parentnm=o.find(k=>_.parentcd===k.areacd)===void 0?"":o.find(k=>_.parentcd===k.areacd).areanm});function u(_){_.detail&&_.detail}function d(_){e.$$.not_equal(n.custom,_)&&(n.custom=_,l(0,n))}return e.$$set=_=>{"areasWithData"in _&&l(4,a=_.areasWithData),"checkboxedRoles"in _&&l(0,n=_.checkboxedRoles),"selectedAreas"in _&&l(5,r=_.selectedAreas),"altText"in _&&l(1,i=_.altText)},[n,i,c,u,a,r,d]}class oa extends fe{constructor(t){super(),ue(this,t,sa,ia,ce,{areasWithData:4,checkboxedRoles:0,selectedAreas:5,altText:1})}}function gt(e,t,l){const a=e.slice();return a[10]=t[l],a[11]=t,a[12]=l,a}function mt(e,t,l){const a=e.slice();return a[10]=t[l],a[13]=t,a[12]=l,a}function bt(e){let t,l,a=e[10].data.areanm+"",n,r,i;function s(){e[6].call(l,e[10])}return{c(){t=F("label"),l=F("input"),n=te(a),this.h()},l(o){t=V(o,"LABEL",{class:!0});var c=I(t);l=V(c,"INPUT",{type:!0,class:!0}),n=le(c,a),c.forEach(y),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(o,c){O(o,t,c),A(t,l),l.checked=e[0][e[10].role],A(t,n),r||(i=Ve(l,"change",s),r=!0)},p(o,c){e=o,c&3&&(l.checked=e[0][e[10].role]),c&2&&a!==(a=e[10].data.areanm+"")&&ke(n,a)},d(o){o&&y(t),r=!1,i()}}}function vt(e){let t,l,a,n,r=["neighbour","cluster"],i=[];for(let s=0;s<2;s+=1)i[s]=pt(gt(e,r,s));return{c(){t=F("p"),l=te("Related areas"),a=U();for(let s=0;s<2;s+=1)i[s].c();n=Se(),this.h()},l(s){t=V(s,"P",{class:!0});var o=I(t);l=le(o,"Related areas"),o.forEach(y),a=Z(s);for(let c=0;c<2;c+=1)i[c].l(s);n=Se(),this.h()},h(){f(t,"class","svelte-thy20g")},m(s,o){O(s,t,o),A(t,l),O(s,a,o);for(let c=0;c<2;c+=1)i[c]&&i[c].m(s,o);O(s,n,o)},p(s,o){if(o&33){r=["neighbour","cluster"];let c;for(c=0;c<2;c+=1){const u=gt(s,r,c);i[c]?i[c].p(u,o):(i[c]=pt(u),i[c].c(),i[c].m(n.parentNode,n))}for(;c<2;c+=1)i[c].d(1)}},d(s){s&&y(t),s&&y(a),de(i,s),s&&y(n)}}}function pt(e){let t,l,a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas",n,r,i,s;function o(){e[7].call(l,e[10])}return{c(){t=F("label"),l=F("input"),n=te(a),r=U(),this.h()},l(c){t=V(c,"LABEL",{class:!0});var u=I(t);l=V(u,"INPUT",{type:!0,class:!0}),n=le(u,a),r=Z(u),u.forEach(y),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(c,u){O(c,t,u),A(t,l),l.checked=e[0][e[10]],A(t,n),A(t,r),i||(s=Ve(l,"change",o),i=!0)},p(c,u){e=c,u&1&&(l.checked=e[0][e[10]]),u&32&&a!==(a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas")&&ke(n,a)},d(c){c&&y(t),i=!1,s()}}}function fa(e){let t,l,a,n,r,i,s,o,c,u=e[1],d=[];for(let g=0;g<u.length;g+=1)d[g]=bt(mt(e,u,g));let _=e[3]&&vt(e);function k(g){e[8](g)}let m={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(m.checkboxedRoles=e[0]),s=new oa({props:m}),ge.push(()=>me(s,"checkboxedRoles",k)),{c(){t=F("div"),l=F("p"),a=te("Parent areas"),n=U();for(let g=0;g<d.length;g+=1)d[g].c();r=U(),_&&_.c(),i=U(),x(s.$$.fragment),this.h()},l(g){t=V(g,"DIV",{class:!0});var E=I(t);l=V(E,"P",{class:!0});var h=I(l);a=le(h,"Parent areas"),h.forEach(y),n=Z(E);for(let w=0;w<d.length;w+=1)d[w].l(E);r=Z(E),_&&_.l(E),i=Z(E),ae(s.$$.fragment,E),E.forEach(y),this.h()},h(){f(l,"class","svelte-thy20g"),f(t,"class","comparisonInputContainer svelte-thy20g")},m(g,E){O(g,t,E),A(t,l),A(l,a),A(t,n);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(t,null);A(t,r),_&&_.m(t,null),A(t,i),$(s,t,null),c=!0},p(g,E){if(E&3){u=g[1];let w;for(w=0;w<u.length;w+=1){const b=mt(g,u,w);d[w]?d[w].p(b,E):(d[w]=bt(b),d[w].c(),d[w].m(t,r))}for(;w<d.length;w+=1)d[w].d(1);d.length=u.length}g[3]?_?_.p(g,E):(_=vt(g),_.c(),_.m(t,i)):_&&(_.d(1),_=null);const h={};E&2&&(h.selectedAreas=g[1]),E&4&&(h.areasWithData=g[2]),!o&&E&1&&(o=!0,h.checkboxedRoles=g[0],be(()=>o=!1)),s.$set(h)},i(g){c||(z(s.$$.fragment,g),c=!0)},o(g){K(s.$$.fragment,g),c=!1},d(g){g&&y(t),de(d,g),_&&_.d(),ee(s)}}}function ua(e){let t,l,a;return l=new Xl({props:{label:"Add areas to compare to "+e[4],open:ca,$$slots:{default:[fa]},$$scope:{ctx:e}}}),{c(){t=F("div"),x(l.$$.fragment),this.h()},l(n){t=V(n,"DIV",{class:!0});var r=I(t);ae(l.$$.fragment,r),r.forEach(y),this.h()},h(){f(t,"class",ye("twisty-container")+" svelte-thy20g")},m(n,r){O(n,t,r),$(l,t,null),a=!0},p(n,[r]){const i={};r&16&&(i.label="Add areas to compare to "+n[4]),r&16431&&(i.$$scope={dirty:r,ctx:n}),l.$set(i)},i(n){a||(z(l.$$.fragment,n),a=!0)},o(n){K(l.$$.fragment,n),a=!1},d(n){n&&y(t),ee(l)}}}let ca=!1;function ha(e,t,l){let{selectedAreas:a,areasWithData:n,checkboxedRoles:r,includeSiblings:i=!0,selectedArea:s,parentArea:o}=t;a.map(_=>_.role);function c(_){r[_.role]=this.checked,l(0,r)}function u(_){r[_]=this.checked,l(0,r)}function d(_){r=_,l(0,r)}return e.$$set=_=>{"selectedAreas"in _&&l(1,a=_.selectedAreas),"areasWithData"in _&&l(2,n=_.areasWithData),"checkboxedRoles"in _&&l(0,r=_.checkboxedRoles),"includeSiblings"in _&&l(3,i=_.includeSiblings),"selectedArea"in _&&l(4,s=_.selectedArea),"parentArea"in _&&l(5,o=_.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&console.log(a)},[r,a,n,i,s,o,c,u,d]}class ml extends fe{constructor(t){super(),ue(this,t,ha,ua,ce,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function kt(e,t,l){const a=e.slice();return a[5]=t[l],a[7]=l,a}function wt(e){let t,l;return{c(){t=F("p"),l=te("Compare..."),this.h()},l(a){t=V(a,"P",{class:!0});var n=I(t);l=le(n,"Compare..."),n.forEach(y),this.h()},h(){f(t,"class","svelte-46qqxz")},m(a,n){O(a,t,n),A(t,l)},d(a){a&&y(t)}}}function yt(e){let t,l,a,n,r,i=e[5].toLowerCase()+"",s,o,c,u,d,_;return u=El(e[4][0]),{c(){t=F("label"),l=F("input"),a=U(),n=F("div"),r=F("p"),s=te(i),c=U(),this.h()},l(k){t=V(k,"LABEL",{});var m=I(t);l=V(m,"INPUT",{style:!0,type:!0,name:!0}),a=Z(m),n=V(m,"DIV",{class:!0,style:!0});var g=I(n);r=V(g,"P",{class:!0});var E=I(r);s=le(E,i),E.forEach(y),g.forEach(y),c=Z(m),m.forEach(y),this.h()},h(){ie(l,"display","none"),f(l,"type","radio"),l.__value=e[7]+1,l.value=l.__value,f(l,"name","chosenChart"),f(r,"class","svelte-46qqxz"),f(n,"class","optionLabel svelte-46qqxz"),f(n,"style",o="background-color: "+(e[0]===e[7]+1?"white":"#d4d4d4")),u.p(l)},m(k,m){O(k,t,m),A(t,l),l.checked=l.__value===e[0],A(t,a),A(t,n),A(n,r),A(r,s),A(t,c),d||(_=Ve(l,"change",e[3]),d=!0)},p(k,m){m&3&&(l.checked=l.__value===k[0]),m&2&&i!==(i=k[5].toLowerCase()+"")&&ke(s,i),m&1&&o!==(o="background-color: "+(k[0]===k[7]+1?"white":"#d4d4d4"))&&f(n,"style",o)},d(k){k&&y(t),u.r(),d=!1,_()}}}function da(e){let t,l,a=e[2]&&wt(),n=e[1],r=[];for(let i=0;i<n.length;i+=1)r[i]=yt(kt(e,n,i));return{c(){t=F("div"),a&&a.c(),l=U();for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=V(i,"DIV",{class:!0});var s=I(t);a&&a.l(s),l=Z(s);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(y),this.h()},h(){f(t,"class","radioContainer svelte-46qqxz")},m(i,s){O(i,t,s),a&&a.m(t,null),A(t,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,[s]){if(i[2]?a||(a=wt(),a.c(),a.m(t,l)):a&&(a.d(1),a=null),s&3){n=i[1];let o;for(o=0;o<n.length;o+=1){const c=kt(i,n,o);r[o]?r[o].p(c,s):(r[o]=yt(c),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:ne,o:ne,d(i){i&&y(t),a&&a.d(),de(r,i)}}}function _a(e,t,l){let{optionsArray:a,chosenChart:n,compareIntroText:r=!0}=t;const i=[[]];function s(){n=this.__value,l(0,n)}return e.$$set=o=>{"optionsArray"in o&&l(1,a=o.optionsArray),"chosenChart"in o&&l(0,n=o.chosenChart),"compareIntroText"in o&&l(2,r=o.compareIntroText)},[n,a,r,s,i]}class bl extends fe{constructor(t){super(),ue(this,t,_a,da,ce,{optionsArray:1,chosenChart:0,compareIntroText:2})}}function At(e,t,l){const a=e.slice();return a[11]=t[l],a[13]=l,a}function Dt(e){let t,l=e[4],a=[];for(let n=0;n<l.length;n+=1)a[n]=Et(At(e,l,n));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();t=Se()},l(n){for(let r=0;r<a.length;r+=1)a[r].l(n);t=Se()},m(n,r){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(n,r);O(n,t,r)},p(n,r){if(r&114){l=n[4];let i;for(i=0;i<l.length;i+=1){const s=At(n,l,i);a[i]?a[i].p(s,r):(a[i]=Et(s),a[i].c(),a[i].m(t.parentNode,t))}for(;i<a.length;i+=1)a[i].d(1);a.length=l.length}},d(n){de(a,n),n&&y(t)}}}function Et(e){let t,l,a,n,r,i=e[5]+e[11].toLocaleString()+e[6]+"",s,o;return{c(){t=G("g"),l=G("line"),r=G("text"),s=te(i),this.h()},l(c){t=H(c,"g",{class:!0});var u=I(t);l=H(u,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(y),r=H(u,"text",{"text-anchor":!0,x:!0,y:!0,stroke:!0,fill:!0,"font-size":!0});var d=I(r);s=le(d,i),d.forEach(y),u.forEach(y),this.h()},h(){f(l,"x1","0"),f(l,"x2","-8"),f(l,"y1",a=e[1](e[11])),f(l,"y2",n=e[1](e[11])),f(l,"stroke","black"),f(r,"text-anchor","end"),f(r,"x",-10),f(r,"y",o=e[1](e[11])+5),f(r,"stroke","none"),f(r,"fill","#333"),f(r,"font-size","14px"),f(t,"class","tick")},m(c,u){O(c,t,u),A(t,l),A(t,r),A(r,s)},p(c,u){u&18&&a!==(a=c[1](c[11]))&&f(l,"y1",a),u&18&&n!==(n=c[1](c[11]))&&f(l,"y2",n),u&16&&i!==(i=c[5]+c[11].toLocaleString()+c[6]+"")&&ke(s,i),u&18&&o!==(o=c[1](c[11])+5)&&f(r,"y",o)},d(c){c&&y(t)}}}function ga(e){let t,l,a,n,r,i=e[3]==0&&Dt(e);return{c(){t=G("g"),l=G("line"),i&&i.c(),this.h()},l(s){t=H(s,"g",{class:!0,transform:!0});var o=I(t);l=H(o,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(y),i&&i.l(o),o.forEach(y),this.h()},h(){f(l,"x1","0"),f(l,"x2","0"),f(l,"y1",a=e[1](e[0][1])),f(l,"y2",n=e[1](e[0][0])),f(l,"stroke","black"),f(t,"class","yAxis"),f(t,"transform",r="translate("+-e[2]+",0)")},m(s,o){O(s,t,o),A(t,l),i&&i.m(t,null)},p(s,[o]){o&3&&a!==(a=s[1](s[0][1]))&&f(l,"y1",a),o&3&&n!==(n=s[1](s[0][0]))&&f(l,"y2",n),s[3]==0?i?i.p(s,o):(i=Dt(s),i.c(),i.m(t,null)):i&&(i.d(1),i=null),o&4&&r!==(r="translate("+-s[2]+",0)")&&f(t,"transform",r)},i:ne,o:ne,d(s){s&&y(t),i&&i.d()}}}function ma(e,t,l){let a,n,r,{yDomain:i,y:s,yAxisOffset:o=0,column:c=0,indicator:u}=t,d=[],_=u.prefix===null?"":u.prefix==="pounds"?"£":u.prefix,k=u.suffix===null?"":u.suffix;return e.$$set=m=>{"yDomain"in m&&l(0,i=m.yDomain),"y"in m&&l(1,s=m.y),"yAxisOffset"in m&&l(2,o=m.yAxisOffset),"column"in m&&l(3,c=m.column),"indicator"in m&&l(7,u=m.indicator)},e.$$.update=()=>{if(e.$$.dirty&1&&l(10,a=Math.abs(i[1]-i[0])),e.$$.dirty&1024&&l(9,n=10**Math.floor(Math.log10(a))),e.$$.dirty&1536&&l(8,r=a/n<=1.5?n/5:a/n<=3?n/2:a/n<=6?n:n*2),e.$$.dirty&273){l(4,d=[]);for(let m=Math.ceil(i[0]);m<=Math.floor(i[1]);m++)m%r==0&&d.push(m)}},[i,s,o,c,d,_,k,u,r,n,a]}class ba extends fe{constructor(t){super(),ue(this,t,ma,ga,ce,{yDomain:0,y:1,yAxisOffset:2,column:3,indicator:7})}}function It(e,t,l){const a=e.slice();return a[8]=t[l],a[10]=l,a}function St(e){let t,l,a,n;return{c(){t=G("line"),this.h()},l(r){t=H(r,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),I(t).forEach(y),this.h()},h(){f(t,"y1","0"),f(t,"y2",l=-e[3]),f(t,"x1",a=e[1](e[8])),f(t,"x2",n=e[1](e[8])),f(t,"stroke","black"),f(t,"opacity","0.1")},m(r,i){O(r,t,i)},p(r,i){i&8&&l!==(l=-r[3])&&f(t,"y2",l),i&2&&a!==(a=r[1](r[8]))&&f(t,"x1",a),i&2&&n!==(n=r[1](r[8]))&&f(t,"x2",n)},d(r){r&&y(t)}}}function Ct(e){let t,l,a,n,r,i=e[8]+"",s,o,c=e[4]&&St(e);return{c(){t=G("g"),l=G("line"),r=G("text"),s=te(i),c&&c.c(),this.h()},l(u){t=H(u,"g",{class:!0});var d=I(t);l=H(d,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(y),r=H(d,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var _=I(r);s=le(_,i),_.forEach(y),c&&c.l(d),d.forEach(y),this.h()},h(){f(l,"y1","0"),f(l,"y2","8"),f(l,"x1",a=e[1](e[8])),f(l,"x2",n=e[1](e[8])),f(l,"stroke","black"),f(r,"text-anchor","middle"),f(r,"y",20),f(r,"x",o=e[1](e[8])),f(r,"stroke","none"),f(r,"fill","#333"),f(r,"font-size","14px"),f(t,"class","tick")},m(u,d){O(u,t,d),A(t,l),A(t,r),A(r,s),c&&c.m(t,null)},p(u,d){d&2&&a!==(a=u[1](u[8]))&&f(l,"x1",a),d&2&&n!==(n=u[1](u[8]))&&f(l,"x2",n),d&2&&o!==(o=u[1](u[8]))&&f(r,"x",o),u[4]?c?c.p(u,d):(c=St(u),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(u){u&&y(t),c&&c.d()}}}function va(e){let t,l,a,n,r,i=e[5],s=[];for(let o=0;o<i.length;o+=1)s[o]=Ct(It(e,i,o));return{c(){t=G("g"),l=G("line");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=H(o,"g",{class:!0,transform:!0});var c=I(t);l=H(c,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(y);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(y),this.h()},h(){f(l,"y1","0"),f(l,"y2","0"),f(l,"x1",a=e[1](e[0][0])),f(l,"x2",n=e[1](e[0][1])),f(l,"stroke","black"),f(t,"class","xAxis"),f(t,"transform",r="translate(0,"+(e[2]+e[3])+")")},m(o,c){O(o,t,c),A(t,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null)},p(o,[c]){if(c&3&&a!==(a=o[1](o[0][0]))&&f(l,"x1",a),c&3&&n!==(n=o[1](o[0][1]))&&f(l,"x2",n),c&58){i=o[5];let u;for(u=0;u<i.length;u+=1){const d=It(o,i,u);s[u]?s[u].p(d,c):(s[u]=Ct(d),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}c&12&&r!==(r="translate(0,"+(o[2]+o[3])+")")&&f(t,"transform",r)},i:ne,o:ne,d(o){o&&y(t),de(s,o)}}}function pa(e,t,l){let{xDomain:a,x:n,xAxisOffset:r=0,chartHeight:i,gridlines:s=!1}=t,o=Math.abs(a[1]-a[0]),c=o>=15?5:o>=6?2:1,u=[];for(let d=Math.floor(a[0]);d<=Math.ceil(a[1]);d++)d%c==0&&u.push(d);return e.$$set=d=>{"xDomain"in d&&l(0,a=d.xDomain),"x"in d&&l(1,n=d.x),"xAxisOffset"in d&&l(2,r=d.xAxisOffset),"chartHeight"in d&&l(3,i=d.chartHeight),"gridlines"in d&&l(4,s=d.gridlines)},[a,n,r,i,s,u]}class ka extends fe{constructor(t){super(),ue(this,t,pa,va,ce,{xDomain:0,x:1,xAxisOffset:2,chartHeight:3,gridlines:4})}}function Lt(e,t,l){const a=e.slice();return a[12]=t[l],a[14]=l,a}function Mt(e){let t,l=e[2],a=[];for(let n=0;n<l.length;n+=1)a[n]=Tt(Lt(e,l,n));return{c(){t=G("g");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){t=H(n,"g",{class:!0});var r=I(t);for(let i=0;i<a.length;i+=1)a[i].l(r);r.forEach(y),this.h()},h(){f(t,"class","pointsContainer")},m(n,r){O(n,t,r);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(t,null)},p(n,r){if(r&125){l=n[2];let i;for(i=0;i<l.length;i+=1){const s=Lt(n,l,i);a[i]?a[i].p(s,r):(a[i]=Tt(s),a[i].c(),a[i].m(t,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=l.length}},d(n){n&&y(t),de(a,n)}}}function wa(e){let t,l;return{c(){t=G("circle"),this.h()},l(a){t=H(a,"circle",{r:!0,fill:!0,stroke:!0});var n=I(t);n.forEach(y),this.h()},h(){f(t,"r","3.5"),f(t,"fill",l=e[0]===e[3]?"#F39431":se[e[6].role]),f(t,"stroke","white")},m(a,n){O(a,t,n)},p(a,n){n&73&&l!==(l=a[0]===a[3]?"#F39431":se[a[6].role])&&f(t,"fill",l)},d(a){a&&y(t)}}}function ya(e){let t,l,a;return{c(){t=G("rect"),this.h()},l(n){t=H(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var r=I(t);r.forEach(y),this.h()},h(){f(t,"transform",l=["country","uk"].includes(e[6].role)?"rotate(45)":null),f(t,"x","-3"),f(t,"y","-3"),f(t,"width","6"),f(t,"height","6"),f(t,"fill",a=e[0]===e[3]?"#F39431":se[e[6].role]),f(t,"stroke","white")},m(n,r){O(n,t,r)},p(n,r){r&64&&l!==(l=["country","uk"].includes(n[6].role)?"rotate(45)":null)&&f(t,"transform",l),r&73&&a!==(a=n[0]===n[3]?"#F39431":se[n[6].role])&&f(t,"fill",a)},d(n){n&&y(t)}}}function Tt(e){let t,l,a;function n(s,o){return o&64&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[6].role)),l?ya:wa}let r=n(e,-1),i=r(e);return{c(){t=G("g"),i.c(),this.h()},l(s){t=H(s,"g",{transform:!0});var o=I(t);i.l(o),o.forEach(y),this.h()},h(){f(t,"transform",a="translate("+e[4](e[12].year)+","+e[5](e[12].value)+")")},m(s,o){O(s,t,o),i.m(t,null)},p(s,o){r===(r=n(s,o))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t,null))),o&52&&a!==(a="translate("+s[4](s[12].year)+","+s[5](s[12].value)+")")&&f(t,"transform",a)},d(s){s&&y(t),i.d()}}}function Aa(e){let t,l,a,n,r,i,s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1],o,c,u,d=s&&Mt(e);return{c(){t=G("g"),l=G("path"),d&&d.c(),this.h()},l(_){t=H(_,"g",{class:!0,opacity:!0});var k=I(t);l=H(k,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0,hoverid:!0}),I(l).forEach(y),d&&d.l(k),k.forEach(y),this.h()},h(){f(l,"d",a=e[7](e[2])),f(l,"fill","none"),f(l,"stroke",n=e[0]===e[3]?"#F39431":se[e[6].role]),f(l,"stroke-width",r=e[1]?"16px":"2px"),f(l,"opacity",i=e[1]?0:e[0]===e[3]||e[10]?1:.25),f(l,"hoverid",e[3]),f(t,"class","lineContainer"),f(t,"opacity",o=e[0]===e[3]||e[0]===null?1:.25)},m(_,k){O(_,t,k),A(t,l),d&&d.m(t,null),c||(u=[Ve(l,"mouseover",function(){Je(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)}),Ve(l,"mouseleave",function(){Je(e[1]?e[9]:null)&&(e[1]?e[9]:null).apply(this,arguments)}),Ve(l,"focus",function(){Je(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)})],c=!0)},p(_,[k]){e=_,k&132&&a!==(a=e[7](e[2]))&&f(l,"d",a),k&73&&n!==(n=e[0]===e[3]?"#F39431":se[e[6].role])&&f(l,"stroke",n),k&2&&r!==(r=e[1]?"16px":"2px")&&f(l,"stroke-width",r),k&11&&i!==(i=e[1]?0:e[0]===e[3]||e[10]?1:.25)&&f(l,"opacity",i),k&8&&f(l,"hoverid",e[3]),k&75&&(s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1]),s?d?d.p(e,k):(d=Mt(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null),k&9&&o!==(o=e[0]===e[3]||e[0]===null?1:.25)&&f(t,"opacity",o)},i:ne,o:ne,d(_){_&&y(t),d&&d.d(),c=!1,dl(u)}}}function Da(e,t,l){let a,{overlay:n=!1,lineData:r,i,hoverIndex:s,x:o,y:c,xDomain:u,area:d}=t;function _(g){l(0,s=parseFloat(Fe(this).attr("hoverid")))}function k(g){l(0,s=null)}let m=["main","parent","country","uk","custom1","custom2","custom3","custom4"];return e.$$set=g=>{"overlay"in g&&l(1,n=g.overlay),"lineData"in g&&l(2,r=g.lineData),"i"in g&&l(3,i=g.i),"hoverIndex"in g&&l(0,s=g.hoverIndex),"x"in g&&l(4,o=g.x),"y"in g&&l(5,c=g.y),"xDomain"in g&&l(11,u=g.xDomain),"area"in g&&l(6,d=g.area)},e.$$.update=()=>{e.$$.dirty&48&&l(7,a=Ll().x(g=>o(g.year)).y(g=>c(g.value)))},[s,n,r,i,o,c,d,a,_,k,m,u]}class vl extends fe{constructor(t){super(),ue(this,t,Da,Aa,ce,{overlay:1,lineData:2,i:3,hoverIndex:0,x:4,y:5,xDomain:11,area:6})}}function Rt(e,t,l){const a=e.slice();return a[3]=t[l],a}function Ft(e){let t,l=e[3].datum.areanm+"",a,n,r,i=e[3].datum.areanm+"",s,o,c,u;return{c(){t=G("text"),a=te(l),r=G("text"),s=te(i),this.h()},l(d){t=H(d,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var _=I(t);a=le(_,l),_.forEach(y),r=H(d,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var k=I(r);s=le(k,i),k.forEach(y),this.h()},h(){f(t,"y",n=e[3].y+8),f(t,"font-size","16px"),f(t,"fill","white"),f(t,"stroke","white"),f(t,"stroke-width","4px"),f(r,"y",o=e[3].y+8),f(r,"font-size","16px"),f(r,"fill",c=e[2]!=null?"#F39431":se[e[3].datum.role]),f(r,"stroke",u=e[2]!=null?"#F39431":se[e[3].datum.role]),f(r,"stroke-width","0.5px")},m(d,_){O(d,t,_),A(t,a),O(d,r,_),A(r,s)},p(d,_){_&2&&l!==(l=d[3].datum.areanm+"")&&ke(a,l),_&2&&n!==(n=d[3].y+8)&&f(t,"y",n),_&2&&i!==(i=d[3].datum.areanm+"")&&ke(s,i),_&2&&o!==(o=d[3].y+8)&&f(r,"y",o),_&6&&c!==(c=d[2]!=null?"#F39431":se[d[3].datum.role])&&f(r,"fill",c),_&6&&u!==(u=d[2]!=null?"#F39431":se[d[3].datum.role])&&f(r,"stroke",u)},d(d){d&&y(t),d&&y(r)}}}function Ea(e){let t,l,a=e[1],n=[];for(let r=0;r<a.length;r+=1)n[r]=Ft(Rt(e,a,r));return{c(){t=G("g");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){t=H(r,"g",{class:!0,transform:!0});var i=I(t);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(y),this.h()},h(){f(t,"class","labelsContainer"),f(t,"transform",l="translate("+e[0]+",0)")},m(r,i){O(r,t,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(r,[i]){if(i&6){a=r[1];let s;for(s=0;s<a.length;s+=1){const o=Rt(r,a,s);n[s]?n[s].p(o,i):(n[s]=Ft(o),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=a.length}i&1&&l!==(l="translate("+r[0]+",0)")&&f(t,"transform",l)},i:ne,o:ne,d(r){r&&y(t),de(n,r)}}}function Ia(e,t,l){let{x:a,labelPlacements:n,hoverIndex:r}=t;return e.$$set=i=>{"x"in i&&l(0,a=i.x),"labelPlacements"in i&&l(1,n=i.labelPlacements),"hoverIndex"in i&&l(2,r=i.hoverIndex)},[a,n,r]}class Sa extends fe{constructor(t){super(),ue(this,t,Ia,Ea,ce,{x:0,labelPlacements:1,hoverIndex:2})}}function Ca(e,t,l,a){e=e.map(r=>({targetY:l(r),y:l(r),height:a(r),datum:r})),e.sort((r,i)=>r.targetY-i.targetY);const n=[];for(const r of e){const i={data:[r]};for(Vt(i,t),n.push(i);n.length>1&&n[n.length-2].hi>n[n.length-1].lo;){const s=n.pop(),o=n[n.length-1];o.data.push(...s.data),Vt(o,t)}}return n.map(r=>r.data).flat()}function Vt(e,t){const l=Ma(e.data),a=La(e.data,l);e.lo=a-l/2,e.lo<t[0]?e.lo=t[0]:e.lo>t[1]-l&&(e.lo=t[1]-l),e.hi=e.lo+l,pl(e.data,e.lo,(n,r)=>{n.y=r})}function La(e,t){const l=[];return pl(e,-t/2,(a,n)=>{l.push({val:a.targetY-n,weight:1/a.height})}),Ta(l)}function pl(e,t,l){let a=t;for(const n of e)a+=n.height/2,l(n,a),a+=n.height/2}function Ma(e){let t=0;for(const l of e)t+=l.height;return t}function Ta(e){let t=0,l=0;for(const a of e)t+=a.val*a.weight,l+=a.weight;return t/l}function Wt(e,t,l){const a=e.slice();return a[22]=t[l],a[24]=l,a}function Ot(e,t,l){const a=e.slice();return a[22]=t[l],a[24]=l,a}function Pt(e){let t,l;function a(...n){return e[15](e[22],...n)}return t=new vl({props:{area:e[22],lineData:e[1].filter(a),i:e[24],hoverIndex:e[6],x:e[12],y:e[7],xDomain:e[10]}}),{c(){x(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,r){$(t,n,r),l=!0},p(n,r){e=n;const i={};r&1&&(i.area=e[22]),r&3&&(i.lineData=e[1].filter(a)),r&64&&(i.hoverIndex=e[6]),r&4096&&(i.x=e[12]),r&128&&(i.y=e[7]),r&1024&&(i.xDomain=e[10]),t.$set(i)},i(n){l||(z(t.$$.fragment,n),l=!0)},o(n){K(t.$$.fragment,n),l=!1},d(n){ee(t,n)}}}function Nt(e){let t,l,a;function n(...s){return e[16](e[22],...s)}function r(s){e[17](s)}let i={overlay:"true",area:e[22],lineData:e[1].filter(n),i:e[24],x:e[12],y:e[7],xDomain:e[10]};return e[6]!==void 0&&(i.hoverIndex=e[6]),t=new vl({props:i}),ge.push(()=>me(t,"hoverIndex",r)),{c(){x(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){$(t,s,o),a=!0},p(s,o){e=s;const c={};o&1&&(c.area=e[22]),o&3&&(c.lineData=e[1].filter(n)),o&4096&&(c.x=e[12]),o&128&&(c.y=e[7]),o&1024&&(c.xDomain=e[10]),!l&&o&64&&(l=!0,c.hoverIndex=e[6],be(()=>l=!1)),t.$set(c)},i(s){a||(z(t.$$.fragment,s),a=!0)},o(s){K(t.$$.fragment,s),a=!1},d(s){ee(t,s)}}}function Ra(e){let t,l,a,n,r,i,s,o,c,u,d,_;r=new ba({props:{yDomain:e[8],y:e[7],indicator:e[2]}}),i=new ka({props:{chartHeight:e[4],xDomain:e[10],x:e[12]}});let k=e[0].reverse(),m=[];for(let b=0;b<k.length;b+=1)m[b]=Pt(Ot(e,k,b));const g=b=>K(m[b],1,1,()=>{m[b]=null});let E=e[0],h=[];for(let b=0;b<E.length;b+=1)h[b]=Nt(Wt(e,E,b));const w=b=>K(h[b],1,1,()=>{h[b]=null});return c=new Sa({props:{x:e[12](e[10][1])+5,labelPlacements:e[11],hoverIndex:e[6]}}),{c(){t=F("div"),l=G("svg"),a=G("g"),n=G("rect"),x(r.$$.fragment),x(i.$$.fragment),s=G("g");for(let b=0;b<m.length;b+=1)m[b].c();o=G("g");for(let b=0;b<h.length;b+=1)h[b].c();x(c.$$.fragment),this.h()},l(b){t=V(b,"DIV",{class:!0});var v=I(t);l=H(v,"svg",{height:!0,width:!0});var p=I(l);a=H(p,"g",{class:!0,transform:!0});var D=I(a);n=H(D,"rect",{width:!0,height:!0,fill:!0,opacity:!0,stroke:!0}),I(n).forEach(y),ae(r.$$.fragment,D),ae(i.$$.fragment,D),s=H(D,"g",{class:!0});var P=I(s);for(let S=0;S<m.length;S+=1)m[S].l(P);P.forEach(y),o=H(D,"g",{class:!0});var M=I(o);for(let S=0;S<h.length;S+=1)h[S].l(M);M.forEach(y),ae(c.$$.fragment,D),D.forEach(y),p.forEach(y),v.forEach(y),this.h()},h(){f(n,"width",e[9]),f(n,"height",e[4]),f(n,"fill","black"),f(n,"opacity","0.02"),f(n,"stroke","none"),f(s,"class","visibleLinesGroup"),f(o,"class","overlayLinesGroup"),f(a,"class","chart-container"),f(a,"transform",u="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[13]),f(l,"width",e[3]),f(t,"class","svg-container"),at(()=>e[18].call(t))},m(b,v){O(b,t,v),A(t,l),A(l,a),A(a,n),$(r,a,null),$(i,a,null),A(a,s);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(s,null);A(a,o);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(o,null);$(c,a,null),d=nt(t,e[18].bind(t)),_=!0},p(b,[v]){(!_||v&512)&&f(n,"width",b[9]),(!_||v&16)&&f(n,"height",b[4]);const p={};v&256&&(p.yDomain=b[8]),v&128&&(p.y=b[7]),v&4&&(p.indicator=b[2]),r.$set(p);const D={};if(v&16&&(D.chartHeight=b[4]),v&1024&&(D.xDomain=b[10]),v&4096&&(D.x=b[12]),i.$set(D),v&5315){k=b[0].reverse();let M;for(M=0;M<k.length;M+=1){const S=Ot(b,k,M);m[M]?(m[M].p(S,v),z(m[M],1)):(m[M]=Pt(S),m[M].c(),z(m[M],1),m[M].m(s,null))}for(Ae(),M=k.length;M<m.length;M+=1)g(M);De()}if(v&5315){E=b[0];let M;for(M=0;M<E.length;M+=1){const S=Wt(b,E,M);h[M]?(h[M].p(S,v),z(h[M],1)):(h[M]=Nt(S),h[M].c(),z(h[M],1),h[M].m(o,null))}for(Ae(),M=E.length;M<h.length;M+=1)w(M);De()}const P={};v&5120&&(P.x=b[12](b[10][1])+5),v&2048&&(P.labelPlacements=b[11]),v&64&&(P.hoverIndex=b[6]),c.$set(P),(!_||v&32&&u!==(u="translate("+b[5].left+","+b[5].top+")"))&&f(a,"transform",u),(!_||v&8)&&f(l,"width",b[3])},i(b){if(!_){z(r.$$.fragment,b),z(i.$$.fragment,b);for(let v=0;v<k.length;v+=1)z(m[v]);for(let v=0;v<E.length;v+=1)z(h[v]);z(c.$$.fragment,b),_=!0}},o(b){K(r.$$.fragment,b),K(i.$$.fragment,b),m=m.filter(Boolean);for(let v=0;v<m.length;v+=1)K(m[v]);h=h.filter(Boolean);for(let v=0;v<h.length;v+=1)K(h[v]);K(c.$$.fragment,b),_=!1},d(b){b&&y(t),ee(r),ee(i),de(m,b),de(h,b),ee(c),d()}}}function Fa(e,t,l){let a,n,r,i,s,o,c,u,d,_,k=we("areas"),{plottedAreas:m,filteredData:g,indicator:E}=t,h=400,w=500,b=170,v=["main","parent","country","uk","custom1","custom2","custom3","custom4"];const p=(S,j)=>j.areacd===S.areacd,D=(S,j)=>j.areacd===S.areacd;function P(S){u=S,l(6,u)}function M(){h=this.clientWidth,l(3,h)}return e.$$set=S=>{"plottedAreas"in S&&l(0,m=S.plottedAreas),"filteredData"in S&&l(1,g=S.filteredData),"indicator"in S&&l(2,E=S.indicator)},e.$$.update=()=>{e.$$.dirty&40&&l(9,n=h-a.left-a.right),e.$$.dirty&32&&l(4,r=w-a.top-a.bottom),e.$$.dirty&2&&l(10,i=[Math.min(...g.map(S=>S.year)),Math.max(...g.map(S=>S.year))]),e.$$.dirty&1536&&l(12,s=qe().domain(i).range([0,n])),e.$$.dirty&6&&l(8,o=[E.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...g.map(S=>S.value))),Math.ceil(Math.max(...g.map(S=>S.value)))]),e.$$.dirty&272&&l(7,c=qe().domain(o).range([r,0])),e.$$.dirty&195&&l(14,d=m.map(S=>({...S,yPosition:c(g.find(j=>j.areacd===S.areacd&j.year===Math.max.apply(null,g.filter(L=>L.areacd===S.areacd).map(L=>L.year))).value),areanm:k.find(j=>S.areacd===j.areacd).areanm})).filter((S,j)=>u!=null?j==u:v.includes(S.role))),e.$$.dirty&16432&&l(11,_=Ca(d,[-a.top,r],S=>S.yPosition,S=>S.areanm.length>20?34:17))},l(5,a={top:10,left:80,right:b+5,bottom:40}),l(6,u=null),[m,g,E,h,r,a,u,c,o,n,i,_,s,w,d,p,D,P,M]}class Va extends fe{constructor(t){super(),ue(this,t,Fa,Ra,ce,{plottedAreas:0,filteredData:1,indicator:2})}}function Wa(e){return e.slice().sort(function(t,l){return t-l})}function Oa(e){for(var t=0,l,a=0;a<e.length;a++)(a===0||e[a]!==l)&&(l=e[a],t++);return t}function zt(e,t){for(var l=[],a=0;a<e;a++){for(var n=[],r=0;r<t;r++)n.push(0);l.push(n)}return l}function tt(e,t,l,a){var n;if(e>0){var r=(l[t]-l[e-1])/(t-e+1);n=a[t]-a[e-1]-(t-e+1)*r*r}else n=a[t]-l[t]*l[t]/(t+1);return n<0?0:n}function lt(e,t,l,a,n,r,i){if(!(e>t)){var s=Math.floor((e+t)/2);a[l][s]=a[l-1][s-1],n[l][s]=s;var o=l;e>l&&(o=Math.max(o,n[l][e-1]||0)),o=Math.max(o,n[l-1][s]||0);var c=s-1;t<a[0].length-1&&(c=Math.min(c,n[l][t+1]||0));for(var u,d,_,k,m=c;m>=o&&(u=tt(m,s,r,i),!(u+a[l-1][o-1]>=a[l][s]));--m)d=tt(o,s,r,i),_=d+a[l-1][o-1],_<a[l][s]&&(a[l][s]=_,n[l][s]=o),o++,k=u+a[l-1][m-1],k<a[l][s]&&(a[l][s]=k,n[l][s]=m);lt(e,s-1,l,a,n,r,i),lt(s+1,t,l,a,n,r,i)}}function Pa(e,t,l){for(var a=t[0].length,n=new Array(a),r=new Array(a),i=e[Math.floor(a/2)],s=0;s<a;++s)s===0?(n[0]=e[0]-i,r[0]=(e[0]-i)*(e[0]-i)):(n[s]=n[s-1]+e[s]-i,r[s]=r[s-1]+(e[s]-i)*(e[s]-i)),t[0][s]=tt(0,s,n,r),l[0][s]=0;for(var o,c=1;c<t.length;++c)c<t.length-1?o=c:o=a-1,lt(o,a-1,c,t,l,n,r)}function Na(e,t){if(t>e.length)throw new Error("Cannot generate more classes than there are data values");var l=e.length,a=Wa(e),n=Oa(a);if(n===1)return[a[0]];t=Math.min(n,t);var r=zt(t,l),i=zt(t,l);Pa(a,r,i);for(var s=[],o=i[0].length-1,c=i.length-1;c>=0;c--){var u=i[c][o];s[c]=a[u],c>0&&(o=u-1)}return s}var za=Na;const Ba=Pl(za);function Bt(e,t,l){const a=e.slice();return a[25]=t[l],a[27]=l,a}function Kt(e){let t,l,a,n,r,i,s=e[1].filter(c).length+(e[25]<10?" local authorities belong to the <span style='font-weight: bold'>"+e[0].find(u).alternativeDescription.toLowerCase()+"</span> cluster.":" local authorities are in "+e[0].find(d).alternativeDescription+".")+e[8][e[25]],o;function c(..._){return e[14](e[25],..._)}function u(..._){return e[15](e[25],..._)}function d(..._){return e[16](e[25],..._)}return{c(){t=F("div"),l=G("svg"),a=G("g"),n=G("circle"),r=U(),i=F("p"),o=U(),this.h()},l(_){t=V(_,"DIV",{class:!0,style:!0});var k=I(t);l=H(k,"svg",{width:!0,height:!0,class:!0});var m=I(l);a=H(m,"g",{transform:!0});var g=I(a);n=H(g,"circle",{r:!0,fill:!0,stroke:!0});var E=I(n);E.forEach(y),g.forEach(y),m.forEach(y),r=Z(k),i=V(k,"P",{style:!0,class:!0});var h=I(i);h.forEach(y),o=Z(k),k.forEach(y),this.h()},h(){f(n,"r",6),f(n,"fill",e[6][e[25]]),f(n,"stroke","white"),f(a,"transform","translate(10,14)"),f(l,"width","20"),f(l,"height","24"),f(l,"class","svelte-bz4r92"),ie(i,"color",e[6][e[25]]),f(i,"class","svelte-bz4r92"),f(t,"class","clusterContainer svelte-bz4r92"),ie(t,"margin-top","10px")},m(_,k){O(_,t,k),A(t,l),A(l,a),A(a,n),A(t,r),A(t,i),i.innerHTML=s,A(t,o)},p(_,k){e=_,k&3&&s!==(s=e[1].filter(c).length+(e[25]<10?" local authorities belong to the <span style='font-weight: bold'>"+e[0].find(u).alternativeDescription.toLowerCase()+"</span> cluster.":" local authorities are in "+e[0].find(d).alternativeDescription+".")+e[8][e[25]])&&(i.innerHTML=s)},d(_){_&&y(t)}}}function Gt(e){let t,l;return t=new Rl({props:{id:"geojson",type:"geojson",data:e[4],promoteId:"areacd",$$slots:{default:[Ka]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,n){$(t,a,n),l=!0},p(a,n){const r={};n&16&&(r.data=a[4]),n&268435500&&(r.$$scope={dirty:n,ctx:a}),t.$set(r)},i(a){l||(z(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){ee(t,a)}}}function Ht(e){let t,l,a,n;return t=new rt({props:{id:"fill",type:"fill",data:e[5],idKey:"id",paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]},hover:!0,hovered:e[3],select:!0,selected:e[2]}}),t.$on("hover",e[17]),t.$on("select",e[18]),a=new rt({props:{id:"line",type:"line",paint:{"line-color":"black"}}}),{c(){x(t.$$.fragment),l=U(),x(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Z(r),ae(a.$$.fragment,r)},m(r,i){$(t,r,i),O(r,l,i),$(a,r,i),n=!0},p(r,i){const s={};i&32&&(s.data=r[5]),i&8&&(s.hovered=r[3]),i&4&&(s.selected=r[2]),t.$set(s)},i(r){n||(z(t.$$.fragment,r),z(a.$$.fragment,r),n=!0)},o(r){K(t.$$.fragment,r),K(a.$$.fragment,r),n=!1},d(r){ee(t,r),r&&y(l),ee(a,r)}}}function Ka(e){let t,l,a=e[5]&&Ht(e);return{c(){a&&a.c(),t=Se()},l(n){a&&a.l(n),t=Se()},m(n,r){a&&a.m(n,r),O(n,t,r),l=!0},p(n,r){n[5]?a?(a.p(n,r),r&32&&z(a,1)):(a=Ht(n),a.c(),z(a,1),a.m(t.parentNode,t)):a&&(Ae(),K(a,1,1,()=>{a=null}),De())},i(n){l||(z(a),l=!0)},o(n){K(a),l=!1},d(n){a&&a.d(n),n&&y(t)}}}function Ga(e){let t,l,a=e[4]&&Gt(e);return{c(){a&&a.c(),t=Se()},l(n){a&&a.l(n),t=Se()},m(n,r){a&&a.m(n,r),O(n,t,r),l=!0},p(n,r){n[4]?a?(a.p(n,r),r&16&&z(a,1)):(a=Gt(n),a.c(),z(a,1),a.m(t.parentNode,t)):a&&(Ae(),K(a,1,1,()=>{a=null}),De())},i(n){l||(z(a),l=!0)},o(n){K(a),l=!1},d(n){a&&a.d(n),n&&y(t)}}}function Ha(e){let t,l,a,n,r,i,s,o,c,u,d,_,k,m,g=[1,2,3,4],E=[];for(let h=0;h<4;h+=1)E[h]=Kt(Bt(e,g,h));return u=new Ml({props:{location:{bounds:e[7].ew},controls:!0,style:"https://bothness.github.io/ons-basemaps/data/style-omt.json",$$slots:{default:[Ga]},$$scope:{ctx:e}}}),{c(){t=F("section"),l=F("h1"),a=te("Compare geographically"),n=U(),r=F("div"),i=F("div"),s=F("div");for(let h=0;h<4;h+=1)E[h].c();o=U(),c=F("div"),x(u.$$.fragment),d=U(),_=F("img"),this.h()},l(h){t=V(h,"SECTION",{title:!0,class:!0});var w=I(t);l=V(w,"H1",{});var b=I(l);a=le(b,"Compare geographically"),b.forEach(y),n=Z(w),r=V(w,"DIV",{class:!0});var v=I(r);i=V(v,"DIV",{class:!0});var p=I(i);s=V(p,"DIV",{class:!0});var D=I(s);for(let M=0;M<4;M+=1)E[M].l(D);D.forEach(y),p.forEach(y),o=Z(v),c=V(v,"DIV",{class:!0,style:!0});var P=I(c);ae(u.$$.fragment,P),P.forEach(y),v.forEach(y),d=Z(w),_=V(w,"IMG",{style:!0,width:!0,src:!0,alt:!0}),w.forEach(y),this.h()},h(){f(s,"class","clustersDescriptionContainer svelte-bz4r92"),f(i,"class","chartLegend svelte-bz4r92"),f(c,"class","mapContainer svelte-bz4r92"),ie(c,"opacity","0.75"),f(r,"class","container svelte-bz4r92"),ie(_,"padding-top","10px"),f(_,"width","75%"),Ue(_.src,k=`${Le}/img/image1.png`)||f(_,"src",k),f(_,"alt","download buttons"),f(t,"title","Map"),f(t,"class","svelte-bz4r92")},m(h,w){O(h,t,w),A(t,l),A(l,a),A(t,n),A(t,r),A(r,i),A(i,s);for(let b=0;b<4;b+=1)E[b]&&E[b].m(s,null);A(r,o),A(r,c),$(u,c,null),A(t,d),A(t,_),m=!0},p(h,[w]){if(w&323){g=[1,2,3,4];let v;for(v=0;v<4;v+=1){const p=Bt(h,g,v);E[v]?E[v].p(p,w):(E[v]=Kt(p),E[v].c(),E[v].m(s,null))}for(;v<4;v+=1)E[v].d(1)}const b={};w&268435516&&(b.$$scope={dirty:w,ctx:h}),u.$set(b)},i(h){m||(z(u.$$.fragment,h),m=!0)},o(h){K(u.$$.fragment,h),m=!1},d(h){h&&y(t),de(E,h),ee(u)}}}function ja(e,t,l){let{geoType:a="ltla"}=t,{year:n=2023}=t,{data:r=[]}=t,{idKey:i="areacd"}=t,{valueKey:s="value"}=t,{colors:o=["#ffffcc","#41b6c4","#2c7fb8","#253494"]}=t,{selected:c=null}=t,{hovered:u=null}=t,{clustersLookup:d}=t;d=d.filter(L=>L.model==="health"||L.model==="all");let _={1:"#2166AC",2:"#ED7320",3:"#746CB1",4:"#B2182B",99:"#2c7fb8",999:"#41b6c4",9999:"#A8BD3A"},k,m,g;const E={uk:[[-9,49],[2,61]],ew:[[-6,50],[2,56]]};function h(L,q,Y){return _[L]}function w(L,q,Y,re){let W=L.map(C=>({id:C[q],value:C[Y]})),J=W.map(C=>C.value).sort((C,Q)=>C-Q),B=[...Ba(J,5),J[J.length-1]];return W.forEach(C=>C.color=h(C.value)),{mapdata:W,breaks:B}}function b(L,q,Y,re){const W=w(L,q,Y);l(5,g=W.mapdata)}function v(L,q){if(k){const Y=Tl(k,L);Y.features=Y.features.filter(re=>!0),l(4,m=Y)}}_l(async()=>{k=await(await fetch(`${Le}/data/topojson/topo.json`)).json(),v(a)});let p={1:" These areas are primarily located in the south of England.",2:"",3:" Bristol is the only local authority in this group outside of London.",4:" These are mostly low-income, urban areas in the north of England.",99:" ",999:" ",9999:" "};const D=(L,q)=>q.health===L,P=(L,q)=>q.id===L,M=(L,q)=>q.id===L;function S(L){Ge.call(this,e,L)}function j(L){Ge.call(this,e,L)}return e.$$set=L=>{"geoType"in L&&l(9,a=L.geoType),"year"in L&&l(10,n=L.year),"data"in L&&l(1,r=L.data),"idKey"in L&&l(11,i=L.idKey),"valueKey"in L&&l(12,s=L.valueKey),"colors"in L&&l(13,o=L.colors),"selected"in L&&l(2,c=L.selected),"hovered"in L&&l(3,u=L.hovered),"clustersLookup"in L&&l(0,d=L.clustersLookup)},e.$$.update=()=>{e.$$.dirty&1&&console.log(d),e.$$.dirty&14338&&b(r,i,s),e.$$.dirty&1536&&v(a)},[d,r,c,u,m,g,_,E,p,a,n,i,s,o,D,P,M,S,j]}class qa extends fe{constructor(t){super(),ue(this,t,ja,Ha,ce,{geoType:9,year:10,data:1,idKey:11,valueKey:12,colors:13,selected:2,hovered:3,clustersLookup:0})}}function jt(e){let t,l=e[1].unit+"",a;return{c(){t=F("p"),a=te(l),this.h()},l(n){t=V(n,"P",{class:!0});var r=I(t);a=le(r,l),r.forEach(y),this.h()},h(){f(t,"class","svelte-awo2mx")},m(n,r){O(n,t,r),A(t,a)},p(n,r){r&2&&l!==(l=n[1].unit+"")&&ke(a,l)},d(n){n&&y(t)}}}function Ya(e){let t,l;return t=new qa({props:{selectedAreas:e[5],filteredData:e[11]}}),{c(){x(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,n){$(t,a,n),l=!0},p(a,n){const r={};n&32&&(r.selectedAreas=a[5]),n&2048&&(r.filteredData=a[11]),t.$set(r)},i(a){l||(z(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){ee(t,a)}}}function Ua(e){return{c:ne,l:ne,m:ne,p:ne,i:ne,o:ne,d:ne}}function Za(e){let t,l;return t=new Va({props:{plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){x(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,n){$(t,a,n),l=!0},p(a,n){const r={};n&512&&(r.plottedAreas=a[9]),n&2048&&(r.filteredData=a[11]),n&2&&(r.indicator=a[1]),t.$set(r)},i(a){l||(z(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){ee(t,a)}}}function Qa(e){let t,l,a,n,r,i,s=e[1].label+"",o,c,u,d,_,k,m,g,E,h,w,b,v,p,D;function P(W){e[15](W)}let M={optionsArray:e[12]};e[8]!==void 0&&(M.chosenChart=e[8]),l=new bl({props:M}),ge.push(()=>me(l,"chosenChart",P));let S=e[1].unit!=null&&jt(e);function j(W){e[17](W)}let L={selectedAreas:e[5].filter(e[16]),areasWithData:e[10],selectedArea:e[6],parentArea:e[7]};e[0]!==void 0&&(L.checkboxedRoles=e[0]),d=new ml({props:L}),ge.push(()=>me(d,"checkboxedRoles",j));const q=[Za,Ua,Ya],Y=[];function re(W,J){return W[12][W[8]-1]==="Over time"?0:W[12][W[8]-1]==="To other areas"?1:W[12][W[8]-1]==="Geographically"?2:-1}return~(m=re(e))&&(g=Y[m]=q[m](e)),{c(){t=F("div"),x(l.$$.fragment),n=U(),r=F("div"),i=F("h3"),o=te(s),c=U(),S&&S.c(),u=U(),x(d.$$.fragment),k=U(),g&&g.c(),E=U(),h=F("p"),w=te("Source: Office for National Statistics"),b=U(),v=F("img"),this.h()},l(W){t=V(W,"DIV",{class:!0});var J=I(t);ae(l.$$.fragment,J),n=Z(J),r=V(J,"DIV",{class:!0});var B=I(r);i=V(B,"H3",{class:!0});var C=I(i);o=le(C,s),C.forEach(y),c=Z(B),S&&S.l(B),u=Z(B),ae(d.$$.fragment,B),k=Z(B),g&&g.l(B),E=Z(B),h=V(B,"P",{class:!0});var Q=I(h);w=le(Q,"Source: Office for National Statistics"),Q.forEach(y),B.forEach(y),b=Z(J),v=V(J,"IMG",{style:!0,width:!0,src:!0,alt:!0}),J.forEach(y),this.h()},h(){f(i,"class","svelte-awo2mx"),f(h,"class","svelte-awo2mx"),f(r,"class","chartOutlineGroup svelte-awo2mx"),ie(v,"padding-top","10px"),f(v,"width","75%"),Ue(v.src,p=`${Le}/img/image1.png`)||f(v,"src",p),f(v,"alt","download buttons"),f(t,"class","mainChartContainer")},m(W,J){O(W,t,J),$(l,t,null),A(t,n),A(t,r),A(r,i),A(i,o),A(r,c),S&&S.m(r,null),A(r,u),$(d,r,null),A(r,k),~m&&Y[m].m(r,null),A(r,E),A(r,h),A(h,w),A(t,b),A(t,v),D=!0},p(W,[J]){const B={};!a&&J&256&&(a=!0,B.chosenChart=W[8],be(()=>a=!1)),l.$set(B),(!D||J&2)&&s!==(s=W[1].label+"")&&ke(o,s),W[1].unit!=null?S?S.p(W,J):(S=jt(W),S.c(),S.m(r,u)):S&&(S.d(1),S=null);const C={};J&60&&(C.selectedAreas=W[5].filter(W[16])),J&1024&&(C.areasWithData=W[10]),J&64&&(C.selectedArea=W[6]),J&128&&(C.parentArea=W[7]),!_&&J&1&&(_=!0,C.checkboxedRoles=W[0],be(()=>_=!1)),d.$set(C);let Q=m;m=re(W),m===Q?~m&&Y[m].p(W,J):(g&&(Ae(),K(Y[Q],1,1,()=>{Y[Q]=null}),De()),~m?(g=Y[m],g?g.p(W,J):(g=Y[m]=q[m](W),g.c()),z(g,1),g.m(r,E)):g=null)},i(W){D||(z(l.$$.fragment,W),z(d.$$.fragment,W),z(g),D=!0)},o(W){K(l.$$.fragment,W),K(d.$$.fragment,W),K(g),D=!1},d(W){W&&y(t),ee(l),S&&S.d(),ee(d),~m&&Y[m].d()}}}function Ja(e,t,l){let a,n,r,i,{indicator:s,latestData:o,otherData:c,initialData:u,selectedAreas:d,checkboxedRoles:_,siblingAreas:k,selectedArea:m,parentArea:g}=t,E=1,h=[...c,...u].filter(p=>p.areacd===d.find(D=>D.role==="main").data.areacd).length>0?["Over time","To other areas","To other metrics","Geographically"]:["To other areas","To other metrics","Geographically"];function w(p){E=p,l(8,E)}const b=p=>[...o,...c,...u].filter(D=>p.data.areacd===D.areacd).length>0&p.role!=="main";function v(p){_=p,l(0,_)}return e.$$set=p=>{"indicator"in p&&l(1,s=p.indicator),"latestData"in p&&l(2,o=p.latestData),"otherData"in p&&l(3,c=p.otherData),"initialData"in p&&l(4,u=p.initialData),"selectedAreas"in p&&l(5,d=p.selectedAreas),"checkboxedRoles"in p&&l(0,_=p.checkboxedRoles),"siblingAreas"in p&&l(13,k=p.siblingAreas),"selectedArea"in p&&l(6,m=p.selectedArea),"parentArea"in p&&l(7,g=p.parentArea)},e.$$.update=()=>{e.$$.dirty&284&&l(14,a=(h[E-1]==="Over time"?[...o,...u,...c]:h[E-1]==="To other areas"?[...o,...u]:o).sort((p,D)=>p.year-D.year)),e.$$.dirty&16384&&l(10,n=[...new Set(a.map(p=>p.areacd))]),e.$$.dirty&9249&&l(9,r=[...d.map(p=>p.role==="main"||_[p.role]?{role:p.role,areacd:p.data.areacd}:null).filter(p=>p!=null),..._.custom===null||_.custom===void 0?[]:_.custom.map((p,D)=>({role:"custom"+(D+1),areacd:p.areacd})),..._.neighbour?k.neighbours.map(p=>({role:"neighbour",areacd:p})):[],..._.cluster?k.similar.map(p=>({role:"cluster",areacd:p})):[]].filter(p=>n.includes(p.areacd))),e.$$.dirty&16896&&l(11,i=a.filter(p=>r.map(D=>D.areacd).includes(p.areacd)))},[_,s,o,c,u,d,m,g,E,r,n,i,h,k,a,w,b,v]}class Xa extends fe{constructor(t){super(),ue(this,t,Ja,Qa,ce,{indicator:1,latestData:2,otherData:3,initialData:4,selectedAreas:5,checkboxedRoles:0,siblingAreas:13,selectedArea:6,parentArea:7})}}function qt(e,t,l){const a=e.slice();return a[14]=t[l],a[16]=l,a}function Yt(e){let t,l,a=e[14].indicator.label+"",n,r,i,s,o=e[14].prefix+e[14].value+e[14].suffix+"",c,u,d=e[14].subTextShort+"",_,k,m=e[14].comparison+"",g,E,h,w=e[14].change+"",b,v;return{c(){t=F("div"),l=F("p"),n=te(a),r=U(),i=F("div"),s=F("p"),c=U(),u=F("p"),_=U(),k=F("p"),g=te(m),E=U(),h=F("p"),b=te(w),v=U(),this.h()},l(p){t=V(p,"DIV",{class:!0,style:!0});var D=I(t);l=V(D,"P",{class:!0});var P=I(l);n=le(P,a),P.forEach(y),r=Z(D),i=V(D,"DIV",{class:!0});var M=I(i);s=V(M,"P",{class:!0});var S=I(s);S.forEach(y),c=Z(M),u=V(M,"P",{class:!0});var j=I(u);j.forEach(y),M.forEach(y),_=Z(D),k=V(D,"P",{class:!0});var L=I(k);g=le(L,m),L.forEach(y),E=Z(D),h=V(D,"P",{class:!0});var q=I(h);b=le(q,w),q.forEach(y),v=Z(D),D.forEach(y),this.h()},h(){f(l,"class","col1 svelte-17dtptv"),f(s,"class","mainValue svelte-17dtptv"),f(u,"class","subText svelte-17dtptv"),f(i,"class","col2 svelte-17dtptv"),f(k,"class","col3 "+(["Above average","Below average"].includes(e[14].comparison)?null:e[14].comparison==="Similar to average"?"headlineLabelOkay":e[14].comparison==="Worse than average"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(h,"class","col4 "+(["Increasing","Falling"].includes(e[14].change)?null:e[14].change==="Little change"?"headlineLabelOkay":e[14].change==="Worsening"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(t,"class","rowContainer svelte-17dtptv"),ie(t,"grid-template-columns","[line1] "+e[0]+"px [line2] "+e[2]+"px [line3] "+e[4]+"px [line4] "+e[3]+"px [end]"),ie(t,"background-color",e[16]%2===0?"#fafafa":"#ffffff")},m(p,D){O(p,t,D),A(t,l),A(l,n),A(t,r),A(t,i),A(i,s),s.innerHTML=o,A(i,c),A(i,u),u.innerHTML=d,A(t,_),A(t,k),A(k,g),A(t,E),A(t,h),A(h,b),A(t,v)},p(p,D){D&29&&ie(t,"grid-template-columns","[line1] "+p[0]+"px [line2] "+p[2]+"px [line3] "+p[4]+"px [line4] "+p[3]+"px [end]")},d(p){p&&y(t)}}}function xa(e){let t,l,a,n,r,i=e[5],s=[];for(let o=0;o<i.length;o+=1)s[o]=Yt(qt(e,i,o));return{c(){t=F("div");for(let o=0;o<s.length;o+=1)s[o].c();a=U(),n=F("img"),this.h()},l(o){t=V(o,"DIV",{class:!0});var c=I(t);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(y),a=Z(o),n=V(o,"IMG",{style:!0,width:!0,src:!0,alt:!0}),this.h()},h(){f(t,"class","keyFiguresListContainer svelte-17dtptv"),at(()=>e[12].call(t)),ie(n,"padding-top","10px"),f(n,"width","75%"),Ue(n.src,r=`${Le}/img/image1.png`)||f(n,"src",r),f(n,"alt","download buttons")},m(o,c){O(o,t,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);l=nt(t,e[12].bind(t)),O(o,a,c),O(o,n,c)},p(o,[c]){if(c&61){i=o[5];let u;for(u=0;u<i.length;u+=1){const d=qt(o,i,u);s[u]?s[u].p(d,c):(s[u]=Yt(d),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}},i:ne,o:ne,d(o){o&&y(t),de(s,o),l(),o&&y(a),o&&y(n)}}}function $a(e){const t=e.split(" ");let l="";for(const a of t){const n=a.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");n.length>l.length&&(l=n)}return l.length}function en(e,t,l){let a,n,r,{indicators:i,latestData:s,initialData:o,selectedAreas:c,col1Width:u}=t,d=0,_=0,k={T:[["Worse than average","Better than average"],["Improving","Worsening"]],F:[["Better than average","Worse than average"],["Worsening","Improving"]],I:[["Above average","Below average"],["Increasing","Falling"]]},m=[];i.forEach(h=>{Math.pow(10,h.roundingFactor);let w=s.filter(p=>p.codeId===h.id),b=c.find(p=>p.role==="main").data.areacd,v=w.filter(p=>p.areacd===b);if(v=v.length>0?v[0].value:void 0,v!=null){let p=w.filter(pe=>pe.areacd===c.find(he=>he.role==="country").data.areacd),D=w.filter(pe=>pe.areacd===c.find(he=>he.role==="uk").data.areacd),P=w.filter(pe=>pe.areacd===c.find(he=>he.role==="parent").data.areacd),M=p.length>0?p[0]:D.length>0?D[0]:P.length>0?P[0]:void 0,S=M!=null?M.value:void 0,L=(h.code in o?o[h.code]:[]).filter(pe=>pe.areacd===b);L=L.length>0?L[0].value:void 0;let q=h.code in Ye?Ye[h.code]:gl,re=(v===void 0||S===void 0?!0:Math.abs(v-S)/S<q[0]/100)?"Similar to average":v<S?k[h.highEqualsGood][0][0]:k[h.highEqualsGood][0][1],J=(v===void 0||L===void 0?!0:Math.abs(v-L)/L<q[0]/100)?"Little change":v<L?k[h.highEqualsGood][1][0]:k[h.highEqualsGood][1][1];l(10,d=Math.max(h.label.length,d)),l(11,_=Math.max($a(h.label),_));let B=h.prefix===null?"":h.prefix==="pounds"?"£":h.prefix,C=h.suffix===null?"":h.suffix,Q=h.subText===null?"":h.subText,T=h.subTextShort===null?"":h.subTextShort,oe=Math.pow(10,h.roundingFactor);m.push({indicator:h,comparison:re,change:J,value:(Math.round(v*oe)/oe).toLocaleString(),prefix:B,suffix:C,subText:Q,subTextShort:T})}});let g=400;function E(){g=this.clientWidth,l(1,g)}return e.$$set=h=>{"indicators"in h&&l(6,i=h.indicators),"latestData"in h&&l(7,s=h.latestData),"initialData"in h&&l(8,o=h.initialData),"selectedAreas"in h&&l(9,c=h.selectedAreas),"col1Width"in h&&l(0,u=h.col1Width)},e.$$.update=()=>{e.$$.dirty&3072&&l(0,u=d>45||_>10?250:d>30?210:180),e.$$.dirty&7&&l(4,n=(g-u-a)/2),e.$$.dirty&7&&l(3,r=(g-u-a)/2)},l(2,a=120),[u,g,a,r,n,m,i,s,o,c,d,_,E]}class tn extends fe{constructor(t){super(),ue(this,t,en,xa,ce,{indicators:6,latestData:7,initialData:8,selectedAreas:9,col1Width:0})}}function Ut(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Zt(e,t,l){const a=e.slice();return a[45]=t[l],a[48]=t,a[47]=l,a}function Qt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Jt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Xt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function xt(e){let t,l,a,n,r,i;return{c(){t=G("g"),l=G("circle"),this.h()},l(s){t=H(s,"g",{transform:!0});var o=I(t);l=H(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),I(l).forEach(y),o.forEach(y),this.h()},h(){f(l,"hoverid",e[47]),f(l,"r","5"),f(l,"stroke","none"),f(l,"fill","#6e6e6e"),f(l,"fill-opacity",a=e[9]===null?.15:.05),f(t,"transform",n="translate("+e[45].x+","+e[14](e[45].y)+")")},m(s,o){O(s,t,o),A(t,l),r||(i=[Ve(l,"mouseover",e[21]),Ve(l,"mouseleave",e[22])],r=!0)},p(s,o){o[0]&512&&a!==(a=s[9]===null?.15:.05)&&f(l,"fill-opacity",a),o[0]&16400&&n!==(n="translate("+s[45].x+","+s[14](s[45].y)+")")&&f(t,"transform",n)},d(s){s&&y(t),r=!1,dl(i)}}}function $t(e){let t,l,a;return{c(){t=G("circle"),this.h()},l(n){t=H(n,"circle",{transform:!0,labelid:!0,"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(t).forEach(y),this.h()},h(){f(t,"transform",l="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")"),f(t,"labelid",e[47]),f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",a=se[e[45].datum.role]),f(t,"opacity","0")},m(n,r){O(n,t,r)},p(n,r){r[0]&4256&&l!==(l="translate("+n[45].x+","+(n[7]/2+n[45].y-n[12])+")")&&f(t,"transform",l),r[0]&32&&a!==(a=se[n[45].datum.role])&&f(t,"fill",a)},d(n){n&&y(t)}}}function ln(e){let t,l;return{c(){t=G("circle"),this.h()},l(a){t=H(a,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(t).forEach(y),this.h()},h(){f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",l=se[e[45].datum.role]),f(t,"opacity","1")},m(a,n){O(a,t,n)},p(a,n){n[0]&32&&l!==(l=se[a[45].datum.role])&&f(t,"fill",l)},d(a){a&&y(t)}}}function an(e){let t,l,a;return{c(){t=G("rect"),this.h()},l(n){t=H(n,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var r=I(t);r.forEach(y),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[45].datum.role)?"rotate(45)":null),f(t,"x",-5),f(t,"y",-5),f(t,"width",10),f(t,"height",10),f(t,"fill",a=se[e[45].datum.role]),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"opacity","1")},m(n,r){O(n,t,r)},p(n,r){r[0]&32&&l!==(l=["country","uk"].includes(n[45].datum.role)?"rotate(45)":null)&&f(t,"transform",l),r[0]&32&&a!==(a=se[n[45].datum.role])&&f(t,"fill",a)},d(n){n&&y(t)}}}function el(e){let t,l,a;function n(s,o){return o[0]&32&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[45].datum.role)),l?an:ln}let r=n(e,[-1,-1]),i=r(e);return{c(){t=G("g"),i.c(),this.h()},l(s){t=H(s,"g",{transform:!0});var o=I(t);i.l(o),o.forEach(y),this.h()},h(){f(t,"transform",a="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")")},m(s,o){O(s,t,o),i.m(t,null)},p(s,o){r===(r=n(s,o))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t,null))),o[0]&4256&&a!==(a="translate("+s[45].x+","+(s[7]/2+s[45].y-s[12])+")")&&f(t,"transform",a)},d(s){s&&y(t),i.d()}}}function tl(e){let t,l,a,n,r,i,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,c,u,d;function _(){e[36].call(i,e[47])}return{c(){t=G("g"),l=G("rect"),i=G("text"),o=te(s),this.h()},l(k){t=H(k,"g",{class:!0});var m=I(t);l=H(m,"rect",{labelid:!0,transform:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(l).forEach(y),i=H(m,"text",{labelid:!0,transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var g=I(i);o=le(g,s),g.forEach(y),m.forEach(y),this.h()},h(){f(l,"labelid",e[47]),f(l,"transform",a=e[20](e[13][e[47]],e[47])),f(l,"x","0"),f(l,"y","0"),f(l,"width",n=e[13].length>e[47]?e[13][e[47]].width+6:0),f(l,"height","18.5"),f(l,"rx","3px"),f(l,"stroke",r=se[e[45].datum.role]),f(l,"fill","white"),f(l,"stroke-width","1px"),f(l,"pointer-events","none"),f(i,"labelid",e[47]),f(i,"transform",c=e[20](e[13][e[47]],e[47])),f(i,"x","3"),f(i,"y","14"),f(i,"text-anchor","start"),f(i,"fill",u=se[e[45].datum.role]),f(i,"font-size","14px"),f(i,"pointer-events","none"),f(t,"class","labelGroup")},m(k,m){O(k,t,m),A(t,l),A(t,i),A(i,o),d=et.observe(i,_.bind(i))},p(k,m){e=k,m[0]&8192&&a!==(a=e[20](e[13][e[47]],e[47]))&&f(l,"transform",a),m[0]&8192&&n!==(n=e[13].length>e[47]?e[13][e[47]].width+6:0)&&f(l,"width",n),m[0]&32&&r!==(r=se[e[45].datum.role])&&f(l,"stroke",r),m[0]&32&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&ke(o,s),m[0]&8192&&c!==(c=e[20](e[13][e[47]],e[47]))&&f(i,"transform",c),m[0]&32&&u!==(u=se[e[45].datum.role])&&f(i,"fill",u)},d(k){k&&y(t),d()}}}function ll(e){let t,l,a,n,r,i,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,c,u,d,_,k,m,g=e[15].find(v).areanm+"",E,h,w,b;function v(...p){return e[38](e[45],...p)}return{c(){t=G("g"),l=G("circle"),a=G("g"),n=G("rect"),i=G("text"),o=te(s),u=G("g"),d=G("rect"),m=G("text"),E=te(g),this.h()},l(p){t=H(p,"g",{transform:!0});var D=I(t);l=H(D,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}),I(l).forEach(y),a=H(D,"g",{class:!0});var P=I(a);n=H(P,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(n).forEach(y),i=H(P,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var M=I(i);o=le(M,s),M.forEach(y),P.forEach(y),u=H(D,"g",{class:!0});var S=I(u);d=H(S,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(d).forEach(y),m=H(S,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var j=I(m);E=le(j,g),j.forEach(y),S.forEach(y),D.forEach(y),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","7"),f(l,"stroke","white"),f(l,"stroke-width","1.5px"),f(l,"fill","#F39431"),f(l,"fill-opacity","1"),f(n,"x","5"),f(n,"y","5"),f(n,"width",r=parseFloat(e[10]===void 0?100:e[10].width)+6),f(n,"height","18.5"),f(n,"rx","3px"),f(n,"stroke","#F39431"),f(n,"fill","white"),f(n,"stroke-width","1px"),f(n,"pointer-events","none"),f(i,"x","8"),f(i,"y","19"),f(i,"text-anchor","start"),f(i,"fill","#F39431"),f(i,"font-size","14px"),f(i,"pointer-events","none"),f(a,"class","hoverLabelGroup1"),f(d,"x",_=-(parseFloat(e[11]===void 0?100:e[11].width)+6)),f(d,"y","-22"),f(d,"width",k=parseFloat(e[11]===void 0?100:e[11].width)+6),f(d,"height","18.5"),f(d,"rx","3px"),f(d,"stroke","#F39431"),f(d,"fill","white"),f(d,"stroke-width","1px"),f(d,"pointer-events","none"),f(m,"x",h=-(parseFloat(e[11]===void 0?100:e[11].width)+3)),f(m,"y","-8"),f(m,"text-anchor","start"),f(m,"fill","#F39431"),f(m,"font-size","14px"),f(m,"pointer-events","none"),f(u,"class","hoverLabelGroup2"),f(t,"transform",b="translate("+e[45].x+","+e[14](e[45].y)+")")},m(p,D){O(p,t,D),A(t,l),A(t,a),A(a,n),A(a,i),A(i,o),c=et.observe(i,e[37].bind(i)),A(t,u),A(u,d),A(u,m),A(m,E),w=et.observe(m,e[39].bind(m))},p(p,D){e=p,D[0]&1024&&r!==(r=parseFloat(e[10]===void 0?100:e[10].width)+6)&&f(n,"width",r),D[0]&16&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&ke(o,s),D[0]&2048&&_!==(_=-(parseFloat(e[11]===void 0?100:e[11].width)+6))&&f(d,"x",_),D[0]&2048&&k!==(k=parseFloat(e[11]===void 0?100:e[11].width)+6)&&f(d,"width",k),D[0]&16&&g!==(g=e[15].find(v).areanm+"")&&ke(E,g),D[0]&2048&&h!==(h=-(parseFloat(e[11]===void 0?100:e[11].width)+3))&&f(m,"x",h),D[0]&16400&&b!==(b="translate("+e[45].x+","+e[14](e[45].y)+")")&&f(t,"transform",b)},d(p){p&&y(t),c(),w()}}}function al(e){let t,l=e[9]===e[47]&&ll(e);return{c(){l&&l.c(),t=Se()},l(a){l&&l.l(a),t=Se()},m(a,n){l&&l.m(a,n),O(a,t,n)},p(a,n){a[9]===a[47]?l?l.p(a,n):(l=ll(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&y(t)}}}function nn(e){let t,l,a=e[0].label+"",n,r,i,s,o,c,u,d,_,k,m,g,E,h,w,b,v,p,D,P,M=e[4],S=[];for(let C=0;C<M.length;C+=1)S[C]=xt(Xt(e,M,C));let j=e[5],L=[];for(let C=0;C<j.length;C+=1)L[C]=$t(Jt(e,j,C));let q=e[5],Y=[];for(let C=0;C<q.length;C+=1)Y[C]=el(Qt(e,q,C));let re=e[5],W=[];for(let C=0;C<re.length;C+=1)W[C]=tl(Zt(e,re,C));let J=e[4],B=[];for(let C=0;C<J.length;C+=1)B[C]=al(Ut(e,J,C));return{c(){t=F("div"),l=F("p"),n=te(a),r=U(),i=F("div"),s=G("svg"),o=G("g"),c=G("g");for(let C=0;C<S.length;C+=1)S[C].c();u=G("g"),d=G("line"),m=G("g");for(let C=0;C<L.length;C+=1)L[C].c();g=G("g");for(let C=0;C<Y.length;C+=1)Y[C].c();h=G("g");for(let C=0;C<W.length;C+=1)W[C].c();b=G("g");for(let C=0;C<B.length;C+=1)B[C].c();this.h()},l(C){t=V(C,"DIV",{class:!0,style:!0});var Q=I(t);l=V(Q,"P",{class:!0});var T=I(l);n=le(T,a),T.forEach(y),r=Z(Q),i=V(Q,"DIV",{class:!0});var oe=I(i);s=H(oe,"svg",{class:!0,height:!0,width:!0});var pe=I(s);o=H(pe,"g",{class:!0,transform:!0});var he=I(o);c=H(he,"g",{class:!0});var Me=I(c);for(let X=0;X<S.length;X+=1)S[X].l(Me);Me.forEach(y),u=H(he,"g",{class:!0,transform:!0});var Te=I(u);d=H(Te,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),I(d).forEach(y),Te.forEach(y),m=H(he,"g",{class:!0});var Ce=I(m);for(let X=0;X<L.length;X+=1)L[X].l(Ce);Ce.forEach(y),g=H(he,"g",{class:!0,opacity:!0});var Ie=I(g);for(let X=0;X<Y.length;X+=1)Y[X].l(Ie);Ie.forEach(y),h=H(he,"g",{class:!0,opacity:!0});var Pe=I(h);for(let X=0;X<W.length;X+=1)W[X].l(Pe);Pe.forEach(y),b=H(he,"g",{class:!0});var N=I(b);for(let X=0;X<B.length;X+=1)B[X].l(N);N.forEach(y),he.forEach(y),pe.forEach(y),oe.forEach(y),Q.forEach(y),this.h()},h(){f(l,"class","col1 svelte-1fguf2k"),f(c,"class","backgroundCirclesGroup"),f(d,"x1","0"),f(d,"x2","0"),f(d,"y1","-10"),f(d,"y2",_=e[7]+10),f(d,"stroke","#871A5B"),f(d,"stroke-width","1.5px"),f(u,"class","medianLineGroup"),f(u,"transform",k="translate("+e[6](0)+",0)"),f(m,"class","labelsCirclesGroup"),f(g,"class","primaryCirclesGroup"),f(g,"opacity",E=e[9]===null?1:.1),f(h,"class","labelsGroup"),f(h,"opacity",w=e[9]===null?1:0),f(b,"class","hoverCirclesGroup"),f(o,"class","chart-container"),f(o,"transform",v="translate("+e[8].left+","+e[8].top+")"),f(s,"class",p=ye("beeswarm-row-svg-"+e[0].id)+" svelte-1fguf2k"),f(s,"height",e[16]),f(s,"width",D=e[3]-e[1]),f(i,"class","svg-container"),f(t,"class","rowContainer svelte-1fguf2k"),ie(t,"grid-template-columns","[line1] "+e[1]+"px [line2] "+(e[3]-e[1])+"px [end]"),ie(t,"background-color",e[2]%2===0?"#fafafa":"#ffffff"),at(()=>e[40].call(t))},m(C,Q){O(C,t,Q),A(t,l),A(l,n),A(t,r),A(t,i),A(i,s),A(s,o),A(o,c);for(let T=0;T<S.length;T+=1)S[T]&&S[T].m(c,null);A(o,u),A(u,d),A(o,m);for(let T=0;T<L.length;T+=1)L[T]&&L[T].m(m,null);A(o,g);for(let T=0;T<Y.length;T+=1)Y[T]&&Y[T].m(g,null);A(o,h);for(let T=0;T<W.length;T+=1)W[T]&&W[T].m(h,null);A(o,b);for(let T=0;T<B.length;T+=1)B[T]&&B[T].m(b,null);P=nt(t,e[40].bind(t))},p(C,Q){if(Q[0]&1&&a!==(a=C[0].label+"")&&ke(n,a),Q[0]&6308368){M=C[4];let T;for(T=0;T<M.length;T+=1){const oe=Xt(C,M,T);S[T]?S[T].p(oe,Q):(S[T]=xt(oe),S[T].c(),S[T].m(c,null))}for(;T<S.length;T+=1)S[T].d(1);S.length=M.length}if(Q[0]&128&&_!==(_=C[7]+10)&&f(d,"y2",_),Q[0]&64&&k!==(k="translate("+C[6](0)+",0)")&&f(u,"transform",k),Q[0]&4256){j=C[5];let T;for(T=0;T<j.length;T+=1){const oe=Jt(C,j,T);L[T]?L[T].p(oe,Q):(L[T]=$t(oe),L[T].c(),L[T].m(m,null))}for(;T<L.length;T+=1)L[T].d(1);L.length=j.length}if(Q[0]&4256){q=C[5];let T;for(T=0;T<q.length;T+=1){const oe=Qt(C,q,T);Y[T]?Y[T].p(oe,Q):(Y[T]=el(oe),Y[T].c(),Y[T].m(g,null))}for(;T<Y.length;T+=1)Y[T].d(1);Y.length=q.length}if(Q[0]&512&&E!==(E=C[9]===null?1:.1)&&f(g,"opacity",E),Q[0]&1974304){re=C[5];let T;for(T=0;T<re.length;T+=1){const oe=Zt(C,re,T);W[T]?W[T].p(oe,Q):(W[T]=tl(oe),W[T].c(),W[T].m(h,null))}for(;T<W.length;T+=1)W[T].d(1);W.length=re.length}if(Q[0]&512&&w!==(w=C[9]===null?1:0)&&f(h,"opacity",w),Q[0]&970256){J=C[4];let T;for(T=0;T<J.length;T+=1){const oe=Ut(C,J,T);B[T]?B[T].p(oe,Q):(B[T]=al(oe),B[T].c(),B[T].m(b,null))}for(;T<B.length;T+=1)B[T].d(1);B.length=J.length}Q[0]&256&&v!==(v="translate("+C[8].left+","+C[8].top+")")&&f(o,"transform",v),Q[0]&1&&p!==(p=ye("beeswarm-row-svg-"+C[0].id)+" svelte-1fguf2k")&&f(s,"class",p),Q[0]&10&&D!==(D=C[3]-C[1])&&f(s,"width",D),Q[0]&10&&ie(t,"grid-template-columns","[line1] "+C[1]+"px [line2] "+(C[3]-C[1])+"px [end]"),Q[0]&4&&ie(t,"background-color",C[2]%2===0?"#fafafa":"#ffffff")},i:ne,o:ne,d(C){C&&y(t),de(S,C),de(L,C),de(Y,C),de(W,C),de(B,C),P()}}}function nl(e,t,l,a,n,r,i,s){return console.log(e,t,l,a,n,r,i,s),e<r&&t>n&&l<s&&a>i}function rn(e,t){const l=e.map(n=>n[t]);l.sort((n,r)=>n-r);const a=l.length;if(a%2===0){const n=l[a/2-1],r=l[a/2];return(n+r)/2}else return l[Math.floor(a/2)]}function sn(e,t,l){let a,n,r,i,s,o,c,u,d,_,k,m,g,E,h,w=we("areas"),{filteredData:b,selectedAreas:v,areasWithData:p,plottedAreas:D,siblingAreas:P,selectedArea:M,indicator:S,col1Width:j,rowNumb:L}=t,q=500,Y=60,re=S.prefix===null?"":S.prefix==="pounds"?"£":S.prefix,W=S.suffix===null?"":S.suffix;S.subText===null||S.subText,S.subTextShort===null||S.subTextShort;let J=Math.pow(10,S.roundingFactor),B=!1;_l(()=>{B=!0});const C=(N,X)=>{if(B){let _e=parseFloat(N.width),We=[{x:-_e-10,y:0,name:"topLeft"},{x:-_e-10,y:20,name:"bottomLeft"},{x:-_e-10,y:10,name:"left"},{x:2,y:0,name:"topRight"},{x:2,y:20,name:"bottomRight"},{x:-_e/2,y:-3,name:"top"},{x:-_e/2,y:24,name:"bottom"},{x:8,y:10,name:"right"},{x:-_e-2,y:-10,name:"furtherTopLeft"},{x:-_e-2,y:30,name:"furtherBottomLeft"},{x:-_e-18,y:10,name:"furtherLeft"},{x:-_e-12,y:0,name:"bottomFurtherLeft"},{x:-_e-12,y:0,name:"topFurtherLeft"},{x:0,y:-10,name:"furtherTopRight"},{x:0,y:30,name:"furtherBottomRight"},{x:10,y:0,name:"topFurtherRight"},{x:10,y:20,name:"bottomFurtherRight"},{x:10,y:-10,name:"furtherTopFurtherRight"},{x:-_e-12,y:-10,name:"furtherTopFurtherLeft"},{x:10,y:30,name:"furtherBottomFurtherRight"},{x:-_e-12,y:30,name:"furtherBottomFurtherLeft"},{x:-_e/2,y:-13,name:"furtherTop"},{x:-_e/2,y:34,name:"furtherBottom"},{x:28,y:10,name:"furtherRight"},{x:-_e/2,y:-23,name:"furtherFurtherTop"},{x:-_e/2,y:44,name:"furtherFurtherBottom"},{x:-_e-28,y:10,name:"furtherFurtherLeft"},{x:28,y:10,name:"furtherFurtherRight"}],Ze=Fe(".beeswarm-row-svg-"+S.id).selectAll(".labelGroup").selectAll("rect"),Qe=Fe(".beeswarm-row-svg-"+S.id).select(".labelsCirclesGroup").selectAll("circle");for(var Re=0;Re<We.length;Re++){let Ee={x1:g[X].x+We[Re].x,x2:g[X].x+We[Re].x+_e,y1:g[X].y-h+We[Re].y,y2:g[X].y-h+We[Re].y+18.5},ze=!0;if(Ze.each(function(){let Oe=Fe(this);const Be=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let R=Fe(this).attr("transform").match(Be);nl(Ee.x1,Ee.x2,Ee.y1,Ee.y2,parseFloat(R[1]),parseFloat(R[1])+parseFloat(Oe.attr("width")),parseFloat(R[2]),parseFloat(R[2])+18.5)&Oe.attr("labelid")!=X&&(ze=!1)}),Qe.each(function(){let Oe=Fe(this);const Be=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let R=Fe(this).attr("transform").match(Be),ve=parseFloat(Oe.attr("r"))+3;nl(Ee.x1,Ee.x2,Ee.y1,Ee.y2,parseFloat(R[1])-ve,parseFloat(R[1])+ve,parseFloat(R[2])-ve,parseFloat(R[2])+ve)&Oe.attr("labelid")!=X&&(ze=!1)}),ze)return"translate("+Ee.x1+","+Ee.y1+")"}return"translate(200,0)"}else return"translate(0,0)"};let Q=null;function T(N){l(9,Q=parseFloat(Fe(this).attr("hoverid")))}function oe(N){l(9,Q=null)}let pe,he;function Me(N){var X;E[N]=(X=Xe.entries.get(this))==null?void 0:X.contentRect,l(13,E)}function Te(){var N;pe=(N=Xe.entries.get(this))==null?void 0:N.contentRect,l(10,pe)}const Ce=(N,X)=>X.areacd===N.datum.areacd;function Ie(){var N;he=(N=Xe.entries.get(this))==null?void 0:N.contentRect,l(11,he)}function Pe(){q=this.clientWidth,l(3,q)}return e.$$set=N=>{"filteredData"in N&&l(23,b=N.filteredData),"selectedAreas"in N&&l(24,v=N.selectedAreas),"areasWithData"in N&&l(25,p=N.areasWithData),"plottedAreas"in N&&l(26,D=N.plottedAreas),"siblingAreas"in N&&l(27,P=N.siblingAreas),"selectedArea"in N&&l(28,M=N.selectedArea),"indicator"in N&&l(0,S=N.indicator),"col1Width"in N&&l(1,j=N.col1Width),"rowNumb"in N&&l(2,L=N.rowNumb)},e.$$.update=()=>{e.$$.dirty[0]&266&&l(31,n=q-a.left-a.right-j),e.$$.dirty[0]&256&&l(7,r=Y-a.top-a.bottom),e.$$.dirty[0]&159383552&&l(35,i=b.filter(N=>P.siblings.includes(N.areacd)||N.areacd===v.find(X=>X.role==="main").data.areacd)),e.$$.dirty[1]&16&&l(34,s=rn(i,"value")),e.$$.dirty[1]&24&&l(33,o=Math.max(Math.abs(s-Math.min(...i.map(N=>N.value))),Math.abs(s-Math.max(...i.map(N=>N.value))))),e.$$.dirty[1]&12,e.$$.dirty[1]&28&&l(30,c=i.map(N=>({...N,calcYValue:(N.value-s)/o}))),e.$$.dirty[0]&75497472|e.$$.dirty[1]&12&&l(29,u=D.map(N=>({...N,value:b.filter(X=>X.areacd===N.areacd).length>0?b.find(X=>X.areacd===N.areacd).value:null,calcYValue:b.filter(X=>X.areacd===N.areacd).length>0?(b.find(X=>X.areacd===N.areacd).value-s)/o:null})).filter(N=>N.value!==null).sort((N,X)=>N.calcYValue-X.calcYValue)),e.$$.dirty[1]&3&&l(6,_=qe().domain(d).range([0,n])),e.$$.dirty[0]&1073741889&&l(4,k=new it(c,4,N=>_((N.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(N.calcYValue),S.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&144&&l(14,m=qe().domain([Math.min(...k.map(N=>N.y)),Math.max(...k.map(N=>N.y))]).range([0,r])),e.$$.dirty[0]&536870977&&l(5,g=new it(u,7,N=>_((N.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(N.calcYValue),S.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&32&&l(12,h=Math.min(...g.map(N=>N.y))+(Math.max(...g.map(N=>N.y))-Math.min(...g.map(N=>N.y)))/2),e.$$.dirty[0]&16&&console.log(k)},l(8,a={top:10,left:10,right:10,bottom:10}),l(32,d=[-1,1]),l(13,E=[]),[S,j,L,q,k,g,_,r,a,Q,pe,he,h,E,m,w,Y,re,W,J,C,T,oe,b,v,p,D,P,M,u,c,n,d,o,s,i,Me,Te,Ce,Ie,Pe]}class on extends fe{constructor(t){super(),ue(this,t,sn,nn,ce,{filteredData:23,selectedAreas:24,areasWithData:25,plottedAreas:26,siblingAreas:27,selectedArea:28,indicator:0,col1Width:1,rowNumb:2},null,[-1,-1])}}function rl(e,t,l){const a=e.slice();return a[15]=t[l],a[17]=l,a}function il(e){let t,l;function a(...n){return e[14](e[15],...n)}return t=new on({props:{indicator:e[15],filteredData:e[1].filter(a),selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5],col1Width:e[7],rowNumb:e[17]}}),{c(){x(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,r){$(t,n,r),l=!0},p(n,r){e=n;const i={};r&4&&(i.indicator=e[15]),r&6&&(i.filteredData=e[1].filter(a)),r&8&&(i.selectedAreas=e[3]),r&256&&(i.areasWithData=e[8]),r&512&&(i.plottedAreas=e[9]),r&16&&(i.siblingAreas=e[4]),r&32&&(i.selectedArea=e[5]),r&128&&(i.col1Width=e[7]),t.$set(i)},i(n){l||(z(t.$$.fragment,n),l=!0)},o(n){K(t.$$.fragment,n),l=!1},d(n){ee(t,n)}}}function fn(e){let t,l,a,n,r,i,s,o,c,u,d,_,k;function m(b){e[13](b)}let g={selectedAreas:e[3].filter(e[12]),areasWithData:e[8],includeSiblings:!1,selectedArea:e[5],parentArea:e[6]};e[0]!==void 0&&(g.checkboxedRoles=e[0]),l=new ml({props:g}),ge.push(()=>me(l,"checkboxedRoles",m)),r=new la({props:{plottedAreas:e[9]}}),o=new Fl({props:{filteredData:e[10],selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5]}});let E=e[2].filter(sl),h=[];for(let b=0;b<E.length;b+=1)h[b]=il(rl(e,E,b));const w=b=>K(h[b],1,1,()=>{h[b]=null});return{c(){t=F("div"),x(l.$$.fragment),n=U(),x(r.$$.fragment),i=U(),s=F("div"),x(o.$$.fragment),c=U();for(let b=0;b<h.length;b+=1)h[b].c();u=U(),d=F("img"),this.h()},l(b){t=V(b,"DIV",{class:!0});var v=I(t);ae(l.$$.fragment,v),n=Z(v),ae(r.$$.fragment,v),i=Z(v),s=V(v,"DIV",{class:!0});var p=I(s);ae(o.$$.fragment,p),p.forEach(y),c=Z(v);for(let D=0;D<h.length;D+=1)h[D].l(v);v.forEach(y),u=Z(b),d=V(b,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){f(s,"class","keyContainer svelte-f2pwib"),f(t,"class","beeswarmRowsContainer svelte-f2pwib"),ie(d,"padding-top","10px"),f(d,"width","75%"),Ue(d.src,_=`${Le}/img/image1.png`)||f(d,"src",_),f(d,"alt","download buttons"),f(d,"class","svelte-f2pwib")},m(b,v){O(b,t,v),$(l,t,null),A(t,n),$(r,t,null),A(t,i),A(t,s),$(o,s,null),A(t,c);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);O(b,u,v),O(b,d,v),k=!0},p(b,[v]){const p={};v&10&&(p.selectedAreas=b[3].filter(b[12])),v&256&&(p.areasWithData=b[8]),v&32&&(p.selectedArea=b[5]),v&64&&(p.parentArea=b[6]),!a&&v&1&&(a=!0,p.checkboxedRoles=b[0],be(()=>a=!1)),l.$set(p);const D={};v&512&&(D.plottedAreas=b[9]),r.$set(D);const P={};if(v&8&&(P.selectedAreas=b[3]),v&256&&(P.areasWithData=b[8]),v&512&&(P.plottedAreas=b[9]),v&16&&(P.siblingAreas=b[4]),v&32&&(P.selectedArea=b[5]),o.$set(P),v&958){E=b[2].filter(sl);let M;for(M=0;M<E.length;M+=1){const S=rl(b,E,M);h[M]?(h[M].p(S,v),z(h[M],1)):(h[M]=il(S),h[M].c(),z(h[M],1),h[M].m(t,null))}for(Ae(),M=E.length;M<h.length;M+=1)w(M);De()}},i(b){if(!k){z(l.$$.fragment,b),z(r.$$.fragment,b),z(o.$$.fragment,b);for(let v=0;v<E.length;v+=1)z(h[v]);k=!0}},o(b){K(l.$$.fragment,b),K(r.$$.fragment,b),K(o.$$.fragment,b),h=h.filter(Boolean);for(let v=0;v<h.length;v+=1)K(h[v]);k=!1},d(b){b&&y(t),ee(l),ee(r),ee(o),de(h,b),b&&y(u),b&&y(d)}}}const sl=e=>e.includeAsBeeswarm==="T";function un(e,t,l){let a,n,r=we("beeswarmKeyData"),{trimmedIndicators:i,latestData:s,indicators:o,selectedAreas:c,siblingAreas:u,checkboxedRoles:d,selectedArea:_,parentArea:k,col1Width:m}=t;const g=w=>s.filter(b=>w.data.areacd===b.areacd).length>0&w.role!=="main";function E(w){d=w,l(0,d)}const h=(w,b)=>b.codeId===w.id;return e.$$set=w=>{"trimmedIndicators"in w&&l(11,i=w.trimmedIndicators),"latestData"in w&&l(1,s=w.latestData),"indicators"in w&&l(2,o=w.indicators),"selectedAreas"in w&&l(3,c=w.selectedAreas),"siblingAreas"in w&&l(4,u=w.siblingAreas),"checkboxedRoles"in w&&l(0,d=w.checkboxedRoles),"selectedArea"in w&&l(5,_=w.selectedArea),"parentArea"in w&&l(6,k=w.parentArea),"col1Width"in w&&l(7,m=w.col1Width)},e.$$.update=()=>{e.$$.dirty&4&&console.log(o),e.$$.dirty&2&&l(8,a=[...new Set(s.map(w=>w.areacd))]),e.$$.dirty&265&&l(9,n=[...c.map(w=>w.role==="main"||d[w.role]?{role:w.role,areacd:w.data.areacd}:null).filter(w=>w!=null),...d.custom===null||d.custom===void 0?[]:d.custom.map((w,b)=>({role:"custom"+(b+1),areacd:w.areacd}))].filter(w=>a.includes(w.areacd)))},console.log(r),[d,s,o,c,u,_,k,m,a,n,r,i,g,E,h]}class cn extends fe{constructor(t){super(),ue(this,t,un,fn,ce,{trimmedIndicators:11,latestData:1,indicators:2,selectedAreas:3,siblingAreas:4,checkboxedRoles:0,selectedArea:5,parentArea:6,col1Width:7})}}function hn(e){let t,l,a;function n(i){e[16](i)}let r={trimmedIndicators:e[4],latestData:e[1],indicators:[...e[5],...e[6],...e[7]],selectedAreas:e[3],siblingAreas:e[8],selectedArea:e[9],parentArea:e[10],col1Width:e[11]};return e[0]!==void 0&&(r.checkboxedRoles=e[0]),t=new cn({props:r}),ge.push(()=>me(t,"checkboxedRoles",n)),{c(){x(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,s){$(t,i,s),a=!0},p(i,s){const o={};s&16&&(o.trimmedIndicators=i[4]),s&2&&(o.latestData=i[1]),s&224&&(o.indicators=[...i[5],...i[6],...i[7]]),s&8&&(o.selectedAreas=i[3]),s&256&&(o.siblingAreas=i[8]),s&512&&(o.selectedArea=i[9]),s&1024&&(o.parentArea=i[10]),s&2048&&(o.col1Width=i[11]),!l&&s&1&&(l=!0,o.checkboxedRoles=i[0],be(()=>l=!1)),t.$set(o)},i(i){a||(z(t.$$.fragment,i),a=!0)},o(i){K(t.$$.fragment,i),a=!1},d(i){ee(t,i)}}}function dn(e){let t,l,a;function n(i){e[15](i)}let r={indicators:[...e[5],...e[6],...e[7]],latestData:e[1],initialData:e[2],selectedAreas:e[3]};return e[11]!==void 0&&(r.col1Width=e[11]),t=new tn({props:r}),ge.push(()=>me(t,"col1Width",n)),{c(){x(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,s){$(t,i,s),a=!0},p(i,s){const o={};s&224&&(o.indicators=[...i[5],...i[6],...i[7]]),s&2&&(o.latestData=i[1]),s&4&&(o.initialData=i[2]),s&8&&(o.selectedAreas=i[3]),!l&&s&2048&&(l=!0,o.col1Width=i[11],be(()=>l=!1)),t.$set(o)},i(i){a||(z(t.$$.fragment,i),a=!0)},o(i){K(t.$$.fragment,i),a=!1},d(i){ee(t,i)}}}function _n(e){let t,l,a,n,r,i,s;function o(k){e[14](k)}let c={compareIntroText:!1,optionsArray:e[13]};e[12]!==void 0&&(c.chosenChart=e[12]),l=new bl({props:c}),ge.push(()=>me(l,"chosenChart",o));const u=[dn,hn],d=[];function _(k,m){return k[13][k[12]-1]==="Summary"?0:k[13][k[12]-1]==="Compared to other areas"?1:-1}return~(r=_(e))&&(i=d[r]=u[r](e)),{c(){t=F("div"),x(l.$$.fragment),n=U(),i&&i.c(),this.h()},l(k){t=V(k,"DIV",{class:!0});var m=I(t);ae(l.$$.fragment,m),n=Z(m),i&&i.l(m),m.forEach(y),this.h()},h(){f(t,"class","mainListContainer svelte-1ahp7ns")},m(k,m){O(k,t,m),$(l,t,null),A(t,n),~r&&d[r].m(t,null),s=!0},p(k,[m]){const g={};!a&&m&4096&&(a=!0,g.chosenChart=k[12],be(()=>a=!1)),l.$set(g);let E=r;r=_(k),r===E?~r&&d[r].p(k,m):(i&&(Ae(),K(d[E],1,1,()=>{d[E]=null}),De()),~r?(i=d[r],i?i.p(k,m):(i=d[r]=u[r](k),i.c()),z(i,1),i.m(t,null)):i=null)},i(k){s||(z(l.$$.fragment,k),z(i),s=!0)},o(k){K(l.$$.fragment,k),K(i),s=!1},d(k){k&&y(t),ee(l),~r&&d[r].d()}}}function gn(e,t,l){let{latestData:a,initialData:n,selectedAreas:r,trimmedIndicators:i,primaryIndicators:s,secondaryIndicators:o,otherIndicators:c,siblingAreas:u,checkboxedRoles:d,selectedArea:_,parentArea:k}=t,m=1,g=["Summary","Compared to other areas"],E;function h(v){m=v,l(12,m)}function w(v){E=v,l(11,E)}function b(v){d=v,l(0,d)}return e.$$set=v=>{"latestData"in v&&l(1,a=v.latestData),"initialData"in v&&l(2,n=v.initialData),"selectedAreas"in v&&l(3,r=v.selectedAreas),"trimmedIndicators"in v&&l(4,i=v.trimmedIndicators),"primaryIndicators"in v&&l(5,s=v.primaryIndicators),"secondaryIndicators"in v&&l(6,o=v.secondaryIndicators),"otherIndicators"in v&&l(7,c=v.otherIndicators),"siblingAreas"in v&&l(8,u=v.siblingAreas),"checkboxedRoles"in v&&l(0,d=v.checkboxedRoles),"selectedArea"in v&&l(9,_=v.selectedArea),"parentArea"in v&&l(10,k=v.parentArea)},e.$$.update=()=>{e.$$.dirty&2048&&console.log(E)},[d,a,n,r,i,s,o,c,u,_,k,E,m,g,h,w,b]}class mn extends fe{constructor(t){super(),ue(this,t,gn,_n,ce,{latestData:1,initialData:2,selectedAreas:3,trimmedIndicators:4,primaryIndicators:5,secondaryIndicators:6,otherIndicators:7,siblingAreas:8,checkboxedRoles:0,selectedArea:9,parentArea:10})}}function ol(e,t,l){const a=e.slice();return a[19]=t[l],a}function fl(e){let t,l,a;function n(...s){return e[17](e[19],...s)}function r(s){e[18](s)}let i={indicator:e[19],latestData:e[1].filter(n),otherData:e[19].code in e[4]?e[4][e[19].code]:[],initialData:e[19].code in e[5]?e[5][e[19].code]:[],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};return e[2]!==void 0&&(i.checkboxedRoles=e[2]),t=new Xa({props:i}),ge.push(()=>me(t,"checkboxedRoles",r)),{c(){x(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){$(t,s,o),a=!0},p(s,o){e=s;const c={};o&2&&(c.latestData=e[1].filter(n)),o&16&&(c.otherData=e[19].code in e[4]?e[4][e[19].code]:[]),o&32&&(c.initialData=e[19].code in e[5]?e[5][e[19].code]:[]),o&8&&(c.selectedAreas=e[3]),o&64&&(c.siblingAreas=e[6]),!l&&o&4&&(l=!0,c.checkboxedRoles=e[2],be(()=>l=!1)),t.$set(c)},i(s){a||(z(t.$$.fragment,s),a=!0)},o(s){K(t.$$.fragment,s),a=!1},d(s){ee(t,s)}}}function bn(e){let t,l,a,n,r,i=(e[0]in e[13]?e[13][e[0]]:"")+"",s,o,c,u,d;function _(h){e[16](h)}let k={indicators:[...e[8],...e[9],...e[10]],latestData:e[1],initialData:e[5],selectedAreas:e[3],trimmedIndicators:e[7],primaryIndicators:e[8],secondaryIndicators:e[9],otherIndicators:e[10],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};e[2]!==void 0&&(k.checkboxedRoles=e[2]),o=new mn({props:k}),ge.push(()=>me(o,"checkboxedRoles",_));let m=e[8],g=[];for(let h=0;h<m.length;h+=1)g[h]=fl(ol(e,m,h));const E=h=>K(g[h],1,1,()=>{g[h]=null});return{c(){t=F("section"),l=F("h1"),a=te(e[0]),n=U(),r=F("p"),s=U(),x(o.$$.fragment),u=U();for(let h=0;h<g.length;h+=1)g[h].c();this.h()},l(h){t=V(h,"SECTION",{title:!0,class:!0});var w=I(t);l=V(w,"H1",{});var b=I(l);a=le(b,e[0]),b.forEach(y),n=Z(w),r=V(w,"P",{});var v=I(r);v.forEach(y),s=Z(w),ae(o.$$.fragment,w),u=Z(w);for(let p=0;p<g.length;p+=1)g[p].l(w);w.forEach(y),this.h()},h(){f(t,"title",e[0]),f(t,"class","svelte-v10b0q")},m(h,w){O(h,t,w),A(t,l),A(l,a),A(t,n),A(t,r),r.innerHTML=i,A(t,s),$(o,t,null),A(t,u);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(t,null);d=!0},p(h,[w]){(!d||w&1)&&ke(a,h[0]),(!d||w&1)&&i!==(i=(h[0]in h[13]?h[13][h[0]]:"")+"")&&(r.innerHTML=i);const b={};if(w&2&&(b.latestData=h[1]),w&32&&(b.initialData=h[5]),w&8&&(b.selectedAreas=h[3]),w&64&&(b.siblingAreas=h[6]),!c&&w&4&&(c=!0,b.checkboxedRoles=h[2],be(()=>c=!1)),o.$set(b),w&6526){m=h[8];let v;for(v=0;v<m.length;v+=1){const p=ol(h,m,v);g[v]?(g[v].p(p,w),z(g[v],1)):(g[v]=fl(p),g[v].c(),z(g[v],1),g[v].m(t,null))}for(Ae(),v=m.length;v<g.length;v+=1)E(v);De()}(!d||w&1)&&f(t,"title",h[0])},i(h){if(!d){z(o.$$.fragment,h);for(let w=0;w<m.length;w+=1)z(g[w]);d=!0}},o(h){K(o.$$.fragment,h),g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)K(g[w]);d=!1},d(h){h&&y(t),ee(o),de(g,h)}}}function vn(e,t,l){let{sectionName:a,sectionIndicators:n,indicators:r,selectedAreas:i,latestData:s,otherData:o,initialData:c,checkboxedRoles:u,siblingAreas:d}=t;a=a[0].toUpperCase()+a.substring(1),s=s.filter(D=>n.map(P=>P.id).includes(D.codeId));const _=r.filter(D=>n.map(P=>P.id).includes(D.id)),k=_.filter(D=>n.filter(P=>P.priority==="p").map(P=>P.id).includes(D.id)),m=_.filter(D=>n.filter(P=>P.priority==="s").map(P=>P.id).includes(D.id)),g=_.filter(D=>![...k.map(P=>P.id),...m.map(P=>P.id)].includes(D.id));let E=i.find(D=>D.role==="main").data.areanm,h=i.find(D=>D.role==="parent").data.areanm,w={Demographics:"[Dummy text] "+E+" is a rural area in "+h+". It is a popular retirement destination.",Economy:"[Dummy text] "+E+" has above average employment. Its primary industry is retail.",Health:"[Dummy text] "+E+" is an ageing area with above average level of deprivation.",Connectivity:"[Dummy text] "+E+" is a rural area in "+h+".",Skills:"[Dummy text] "+E+" has an above average level of deprivation.",Education:"[Dummy text] "+E+" has a low student population. The area has an above average number of people who do not hold qualifications.",Wellbeing:"[Dummy text] "+E+" has an above average level of deprivation and above average employment."};function b(D){u=D,l(2,u)}const v=(D,P)=>P.codeId===D.id;function p(D){u=D,l(2,u)}return e.$$set=D=>{"sectionName"in D&&l(0,a=D.sectionName),"sectionIndicators"in D&&l(14,n=D.sectionIndicators),"indicators"in D&&l(15,r=D.indicators),"selectedAreas"in D&&l(3,i=D.selectedAreas),"latestData"in D&&l(1,s=D.latestData),"otherData"in D&&l(4,o=D.otherData),"initialData"in D&&l(5,c=D.initialData),"checkboxedRoles"in D&&l(2,u=D.checkboxedRoles),"siblingAreas"in D&&l(6,d=D.siblingAreas)},[a,s,u,i,o,c,d,_,k,m,g,E,h,w,n,r,b,v,p]}class pn extends fe{constructor(t){super(),ue(this,t,vn,bn,ce,{sectionName:0,sectionIndicators:14,indicators:15,selectedAreas:3,latestData:1,otherData:4,initialData:5,checkboxedRoles:2,siblingAreas:6})}}function ul(e,t,l){const a=e.slice();return a[18]=t[l],a}function kn(e){let t=e[5].find(In).data.areanm+"",l;return{c(){l=te(t)},l(a){l=le(a,t)},m(a,n){O(a,l,n)},p:ne,d(a){a&&y(l)}}}function wn(e){let t,l=e[5].find(Sn).data.areanm+"",a;return{c(){t=te("Get localised data, insights and trends for "),a=te(l)},l(n){t=le(n,"Get localised data, insights and trends for "),a=le(n,l)},m(n,r){O(n,t,r),O(n,a,r)},p:ne,d(n){n&&y(t),n&&y(a)}}}function yn(e){let t,l,a,n;return t=new Sl({props:{$$slots:{default:[kn]},$$scope:{ctx:e}}}),a=new Cl({props:{$$slots:{default:[wn]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment),l=U(),x(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Z(r),ae(a.$$.fragment,r)},m(r,i){$(t,r,i),O(r,l,i),$(a,r,i),n=!0},p(r,i){const s={};i&2097152&&(s.$$scope={dirty:i,ctx:r}),t.$set(s);const o={};i&2097152&&(o.$$scope={dirty:i,ctx:r}),a.$set(o)},i(r){n||(z(t.$$.fragment,r),z(a.$$.fragment,r),n=!0)},o(r){K(t.$$.fragment,r),K(a.$$.fragment,r),n=!1},d(r){ee(t,r),r&&y(l),ee(a,r)}}}function cl(e){let t,l,a;function n(...s){return e[8](e[18],...s)}function r(s){e[9](s)}let i={sectionName:e[18],sectionIndicators:e[0].configData.areaSections.filter(n),indicators:e[4],selectedAreas:e[5],latestData:e[3],initialData:e[0].preloadedData.initialData,otherData:e[0].preloadedData.otherData,siblingAreas:e[1]};return e[2]!==void 0&&(i.checkboxedRoles=e[2]),t=new pn({props:i}),ge.push(()=>me(t,"checkboxedRoles",r)),{c(){x(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){$(t,s,o),a=!0},p(s,o){e=s;const c={};o&1&&(c.sectionName=e[18]),o&1&&(c.sectionIndicators=e[0].configData.areaSections.filter(n)),o&1&&(c.initialData=e[0].preloadedData.initialData),o&1&&(c.otherData=e[0].preloadedData.otherData),o&2&&(c.siblingAreas=e[1]),!l&&o&4&&(l=!0,c.checkboxedRoles=e[2],be(()=>l=!1)),t.$set(c)},i(s){a||(z(t.$$.fragment,s),a=!0)},o(s){K(t.$$.fragment,s),a=!1},d(s){ee(t,s)}}}function An(e){let t;return{c(){t=te("Find parent, child and neighbouring areas")},l(l){t=le(l,"Find parent, child and neighbouring areas")},m(l,a){O(l,t,a)},d(l){l&&y(t)}}}function Dn(e){let t,l,a,n,r,i,s,o,c,u,d,_,k;t=new Zl({props:{areaKeyIndicators:e[0].configData.areaKeyIndicators,latestData:e[3].filter(e[6]),initialData:e[0].preloadedData.initialData,trimmedIndicators:e[4].filter(e[7]),selectedAreas:e[5]}});let m=[...new Set(e[0].configData.areaSections.map(hl))],g=[];for(let h=0;h<m.length;h+=1)g[h]=cl(ul(e,m,h));const E=h=>K(g[h],1,1,()=>{g[h]=null});return r=new Wl({props:{$$slots:{default:[An]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment),l=U();for(let h=0;h<g.length;h+=1)g[h].c();a=U(),n=F("section"),x(r.$$.fragment),i=U(),s=F("section"),o=F("h2"),c=te("Get the data"),u=U(),d=F("p"),_=te("Here, you can find information and links to the data."),this.h()},l(h){ae(t.$$.fragment,h),l=Z(h);for(let D=0;D<g.length;D+=1)g[D].l(h);a=Z(h),n=V(h,"SECTION",{title:!0,class:!0});var w=I(n);ae(r.$$.fragment,w),w.forEach(y),i=Z(h),s=V(h,"SECTION",{title:!0,class:!0});var b=I(s);o=V(b,"H2",{class:!0});var v=I(o);c=le(v,"Get the data"),v.forEach(y),u=Z(b),d=V(b,"P",{});var p=I(d);_=le(p,"Here, you can find information and links to the data."),p.forEach(y),b.forEach(y),this.h()},h(){f(n,"title","Related areas"),f(n,"class","svelte-r2srs5"),f(o,"class","ons-u-mt-xl"),f(s,"title","Get the data"),f(s,"class","svelte-r2srs5")},m(h,w){$(t,h,w),O(h,l,w);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(h,w);O(h,a,w),O(h,n,w),$(r,n,null),O(h,i,w),O(h,s,w),A(s,o),A(o,c),A(s,u),A(s,d),A(d,_),k=!0},p(h,w){const b={};if(w&1&&(b.areaKeyIndicators=h[0].configData.areaKeyIndicators),w&1&&(b.latestData=h[3].filter(h[6])),w&1&&(b.initialData=h[0].preloadedData.initialData),w&1&&(b.trimmedIndicators=h[4].filter(h[7])),t.$set(b),w&63){m=[...new Set(h[0].configData.areaSections.map(hl))];let p;for(p=0;p<m.length;p+=1){const D=ul(h,m,p);g[p]?(g[p].p(D,w),z(g[p],1)):(g[p]=cl(D),g[p].c(),z(g[p],1),g[p].m(a.parentNode,a))}for(Ae(),p=m.length;p<g.length;p+=1)E(p);De()}const v={};w&2097152&&(v.$$scope={dirty:w,ctx:h}),r.$set(v)},i(h){if(!k){z(t.$$.fragment,h);for(let w=0;w<m.length;w+=1)z(g[w]);z(r.$$.fragment,h),k=!0}},o(h){K(t.$$.fragment,h),g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)K(g[w]);K(r.$$.fragment,h),k=!1},d(h){ee(t,h),h&&y(l),de(g,h),h&&y(a),h&&y(n),ee(r),h&&y(i),h&&y(s)}}}function En(e){let t,l,a,n;return t=new Il({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Le}/`},{label:"Find a local area",url:`${Le}/areas`},{label:e[5].find(Cn).data.areanm}],$$slots:{default:[yn]},$$scope:{ctx:e}}}),a=new Vl({props:{contentsLabel:"Explore this area",$$slots:{default:[Dn]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment),l=U(),x(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Z(r),ae(a.$$.fragment,r)},m(r,i){$(t,r,i),O(r,l,i),$(a,r,i),n=!0},p(r,[i]){const s={};i&2097152&&(s.$$scope={dirty:i,ctx:r}),t.$set(s);const o={};i&2097159&&(o.$$scope={dirty:i,ctx:r}),a.$set(o)},i(r){n||(z(t.$$.fragment,r),z(a.$$.fragment,r),n=!0)},o(r){K(t.$$.fragment,r),K(a.$$.fragment,r),n=!1},d(r){ee(t,r),r&&y(l),ee(a,r)}}}const In=e=>e.role==="main",Sn=e=>e.role==="main",Cn=e=>e.role==="main",hl=e=>e.section;function Ln(e,t,l){let a,{data:n}=t;console.log(n);let r=we("latestDataAreas"),i=we("areas"),s=we("areasParentsLookup"),o=we("areasGeogLevel"),c=we("indicatorsAreas"),u=we("areasGeogInfo"),d=s.find(p=>p.areacd===n.areaCode),_=[];_.push({data:i.find(p=>p.areacd===n.areaCode),role:"main"}),_.push({data:i.find(p=>p.areacd===d.parentcd),role:"parent"}),d.countrycd!==null&d.parentcd!==d.countrycd&&_.push({data:i.find(p=>p.areacd===d.countrycd),role:"country"}),d.parentcd!=="K02000001"&&_.push({data:i.find(p=>p.areacd==="K02000001"),role:"uk"});let k=o.find(p=>p.areacd===n.areaCode).level,m=o.filter(p=>["uk","country"].includes(k)?p.level===k:k==="region"?["region","country"].includes(p.level):k==="both"?["both","lower"].includes(p.level):["both",k].includes(p.level)),g=u.find(p=>p.areacd===n.areaCode).headline,E={};E.neighbours=s.filter(p=>p.areacd!=n.areaCode&p.parentcd===d.parentcd&m.map(D=>D.areacd).includes(p.areacd)).map(p=>p.areacd),E.similar=g===null?[]:u.filter(p=>p.areacd!=n.areaCode&p.headline===g&m.map(D=>D.areacd).includes(p.areacd)).map(p=>p.areacd),E.siblings=s.filter(p=>p.areacd!=n.areaCode&m.map(D=>D.areacd).includes(p.areacd)).map(p=>p.areacd);const h=p=>n.configData.areaKeyIndicators.map(D=>D.id).includes(p.codeId),w=p=>n.configData.areaKeyIndicators.map(D=>D.id).includes(p.id),b=(p,D)=>D.section===p;function v(p){a=p,l(2,a)}return e.$$set=p=>{"data"in p&&l(0,n=p.data)},l(2,a={parent:!0,country:!0,uk:!0,neighbour:!1,cluster:!1,custom:null}),console.log(_),[n,E,a,r,c,_,h,w,b,v]}class Nn extends fe{constructor(t){super(),ue(this,t,Ln,En,ce,{data:0})}}export{Nn as component};
