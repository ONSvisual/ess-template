//js
import{S as ue,i as de,s as he,w as q,Q as $,F as oe,q as ae,y as U,G as fe,m as E,h as D,r as le,z as Q,n as v,W as ce,b as P,C,X as pt,A as X,u as be,R as ee,g as F,d as B,B as J,Y as wt,k as V,a as O,l as M,c as K,p as Z,Z as Ge,_ as Te,I as St,K as It,L as At,M as Dt,H as me,P as Ct,T as Re,U as ie,V as ve,$ as at,e as We,D as _e,v as Ve,f as Me,E as yt}from"../chunks/index.fbe12a3f.js";import{b as Le}from"../chunks/paths.98525b8d.js";import{T as Rt,H as Lt,S as Et}from"../chunks/Subhead.546df5c9.js";import{B as Gt,P as Tt,H as Vt,C as Mt,A as ze,l as lt,a as Wt,R as zt,S as Pt,b as Ft}from"../chunks/CircleLabels.5e12fb13.js";import{a as Ae,r as De,c as Ee}from"../chunks/utils.969a0ea4.js";import{m as Pe,b as ge}from"../chunks/config.024f8fcf.js";import{S as Ht}from"../chunks/Select.b06be71c.js";function Bt(e){let t,a,l,i,s,o,f,d,c,h,k,m,p,S,r=e[18]+Ae(De(e[5],e[6].decimalPlaces))+e[17]+"",u,n,g,_,w,G,z,R,W,H,Y,x,T;function ne(b){e[29](b)}function y(b){e[30](b)}let N={backgroundCirclesStep2:e[15],x:e[8],y:e[7],radius:"4",index:e[2]};return e[0]!==void 0&&(N.hoverIndex=e[0]),e[1]!==void 0&&(N.hoverChartIndex=e[1]),w=new Gt({props:N}),q.push(()=>$(w,"hoverIndex",ne)),q.push(()=>$(w,"hoverChartIndex",y)),R=new Tt({props:{primaryCirclesStep2:e[19],hoverIndex:e[0],checkboxedRoles:e[10],chartHeight:e[11]}}),W=new Vt({props:{backgroundCirclesStep2:e[15].filter(e[31]),x:e[8],y:e[7],hoverIndex:e[0]}}),H=new Mt({props:{index:e[2],primaryCirclesStep2:e[19],backgroundCirclesStep2:e[15].filter(e[32]),hoverIndex:e[0],checkboxedRoles:e[10],metadata:e[6],x:e[8],hoverChartIndex:e[1]}}),{c(){t=oe("svg"),a=oe("g"),l=oe("line"),c=oe("rect"),S=oe("text"),u=ae(r),U(w.$$.fragment),U(R.$$.fragment),U(W.$$.fragment),U(H.$$.fragment),this.h()},l(b){t=fe(b,"svg",{class:!0,height:!0,width:!0});var L=E(t);a=fe(L,"g",{class:!0,transform:!0});var te=E(a);l=fe(te,"line",{opacity:!0,class:!0,x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0,"pointer-events":!0}),E(l).forEach(D),c=fe(te,"rect",{transform:!0,opacity:!0,x:!0,width:!0,y:!0,height:!0,class:!0,stroke:!0,"stroke-width":!0,fill:!0,rx:!0}),E(c).forEach(D),S=fe(te,"text",{transform:!0,opacity:!0,class:!0,fill:!0,"stroke-width":!0,"pointer-events":!0,"text-anchor":!0,"font-size":!0});var se=E(S);u=le(se,r),se.forEach(D),Q(w.$$.fragment,te),Q(R.$$.fragment,te),Q(W.$$.fragment,te),Q(H.$$.fragment,te),te.forEach(D),L.forEach(D),this.h()},h(){v(l,"opacity",i=e[0]==null?1:0),v(l,"class","medianLine"),v(l,"x1",s=e[12]/2),v(l,"x2",o=e[12]/2),v(l,"y1",f=-e[4].top),v(l,"y2",d=-e[4].top-20+e[14]),v(l,"stroke","#F66068"),v(l,"stroke-width","2.5px"),v(l,"pointer-events","none"),v(c,"transform",h="translate("+e[12]/2+",-15)"),v(c,"opacity",k=e[0]==null?1:0),v(c,"x",m=-parseFloat(e[16]===void 0?100:e[16].width)/2-3),v(c,"width",p=parseFloat(e[16]===void 0?100:e[16].width)+6),v(c,"y","-14"),v(c,"height","18"),v(c,"class","medianLine"),v(c,"stroke","#F66068"),v(c,"stroke-width","1.5px"),v(c,"fill","white"),v(c,"rx","5px"),v(S,"transform",n="translate("+e[12]/2+",-15)"),v(S,"opacity",g=e[0]==null?1:0),v(S,"class","medianLine"),v(S,"fill","#F66068"),v(S,"stroke-width","0px"),v(S,"pointer-events","none"),v(S,"text-anchor","middle"),v(S,"font-size","14px"),v(a,"class","chart-container"),v(a,"transform",Y="translate("+(e[4].left+e[13])+","+e[4].top+")"),v(t,"class",x=ce("beeswarm-row-svg-"+e[2])+" svelte-eq4eax"),v(t,"height",e[9]),v(t,"width",e[3])},m(b,L){P(b,t,L),C(t,a),C(a,l),C(a,c),C(a,S),C(S,u),_=pt.observe(S,e[28].bind(S)),X(w,a,null),X(R,a,null),X(W,a,null),X(H,a,null),T=!0},p(b,L){(!T||L[0]&1&&i!==(i=b[0]==null?1:0))&&v(l,"opacity",i),(!T||L[0]&4096&&s!==(s=b[12]/2))&&v(l,"x1",s),(!T||L[0]&4096&&o!==(o=b[12]/2))&&v(l,"x2",o),(!T||L[0]&16&&f!==(f=-b[4].top))&&v(l,"y1",f),(!T||L[0]&16400&&d!==(d=-b[4].top-20+b[14]))&&v(l,"y2",d),(!T||L[0]&4096&&h!==(h="translate("+b[12]/2+",-15)"))&&v(c,"transform",h),(!T||L[0]&1&&k!==(k=b[0]==null?1:0))&&v(c,"opacity",k),(!T||L[0]&65536&&m!==(m=-parseFloat(b[16]===void 0?100:b[16].width)/2-3))&&v(c,"x",m),(!T||L[0]&65536&&p!==(p=parseFloat(b[16]===void 0?100:b[16].width)+6))&&v(c,"width",p),(!T||L[0]&393312)&&r!==(r=b[18]+Ae(De(b[5],b[6].decimalPlaces))+b[17]+"")&&be(u,r),(!T||L[0]&4096&&n!==(n="translate("+b[12]/2+",-15)"))&&v(S,"transform",n),(!T||L[0]&1&&g!==(g=b[0]==null?1:0))&&v(S,"opacity",g);const te={};L[0]&32768&&(te.backgroundCirclesStep2=b[15]),L[0]&256&&(te.x=b[8]),L[0]&128&&(te.y=b[7]),L[0]&4&&(te.index=b[2]),!G&&L[0]&1&&(G=!0,te.hoverIndex=b[0],ee(()=>G=!1)),!z&&L[0]&2&&(z=!0,te.hoverChartIndex=b[1],ee(()=>z=!1)),w.$set(te);const se={};L[0]&524288&&(se.primaryCirclesStep2=b[19]),L[0]&1&&(se.hoverIndex=b[0]),L[0]&1024&&(se.checkboxedRoles=b[10]),L[0]&2048&&(se.chartHeight=b[11]),R.$set(se);const A={};L[0]&32769&&(A.backgroundCirclesStep2=b[15].filter(b[31])),L[0]&256&&(A.x=b[8]),L[0]&128&&(A.y=b[7]),L[0]&1&&(A.hoverIndex=b[0]),W.$set(A);const j={};L[0]&4&&(j.index=b[2]),L[0]&524288&&(j.primaryCirclesStep2=b[19]),L[0]&32769&&(j.backgroundCirclesStep2=b[15].filter(b[32])),L[0]&1&&(j.hoverIndex=b[0]),L[0]&1024&&(j.checkboxedRoles=b[10]),L[0]&64&&(j.metadata=b[6]),L[0]&256&&(j.x=b[8]),L[0]&2&&(j.hoverChartIndex=b[1]),H.$set(j),(!T||L[0]&8208&&Y!==(Y="translate("+(b[4].left+b[13])+","+b[4].top+")"))&&v(a,"transform",Y),(!T||L[0]&4&&x!==(x=ce("beeswarm-row-svg-"+b[2])+" svelte-eq4eax"))&&v(t,"class",x),(!T||L[0]&512)&&v(t,"height",b[9]),(!T||L[0]&8)&&v(t,"width",b[3])},i(b){T||(F(w.$$.fragment,b),F(R.$$.fragment,b),F(W.$$.fragment,b),F(H.$$.fragment,b),T=!0)},o(b){B(w.$$.fragment,b),B(R.$$.fragment,b),B(W.$$.fragment,b),B(H.$$.fragment,b),T=!1},d(b){b&&D(t),_(),J(w),J(R),J(W),J(H)}}}function Ot(e,t,a){let l,i,s,o,f,d,c,{index:h,width:k,outerPadding:m,data:p,medianValue:S,medianAbsoluteDeviation:r,metadata:u,y:n,xDomainGlobal:g,x:_,height:w,checkboxedRoles:G,hoverIndex:z,chartHeight:R,chartWidth:W,spaceForAreasBeyondScale:H,selectedAreas:Y=[],rowHeight:x,backgroundData:T,hoverChartIndex:ne}=t,y;function N(){var A;y=(A=wt.entries.get(this))==null?void 0:A.contentRect,a(16,y)}function b(A){z=A,a(0,z)}function L(A){ne=A,a(1,ne)}const te=(A,j)=>A.datum.areacd===z,se=(A,j)=>A.datum.areacd===z;return e.$$set=A=>{"index"in A&&a(2,h=A.index),"width"in A&&a(3,k=A.width),"outerPadding"in A&&a(4,m=A.outerPadding),"data"in A&&a(21,p=A.data),"medianValue"in A&&a(5,S=A.medianValue),"medianAbsoluteDeviation"in A&&a(22,r=A.medianAbsoluteDeviation),"metadata"in A&&a(6,u=A.metadata),"y"in A&&a(7,n=A.y),"xDomainGlobal"in A&&a(20,g=A.xDomainGlobal),"x"in A&&a(8,_=A.x),"height"in A&&a(9,w=A.height),"checkboxedRoles"in A&&a(10,G=A.checkboxedRoles),"hoverIndex"in A&&a(0,z=A.hoverIndex),"chartHeight"in A&&a(11,R=A.chartHeight),"chartWidth"in A&&a(12,W=A.chartWidth),"spaceForAreasBeyondScale"in A&&a(13,H=A.spaceForAreasBeyondScale),"selectedAreas"in A&&a(23,Y=A.selectedAreas),"rowHeight"in A&&a(14,x=A.rowHeight),"backgroundData"in A&&a(24,T=A.backgroundData),"hoverChartIndex"in A&&a(1,ne=A.hoverChartIndex)},e.$$.update=()=>{e.$$.dirty[0]&20971552&&a(27,l=T.map(A=>({...A,calcYValue:(A.value-S)/r}))),e.$$.dirty[0]&134230144&&a(15,i=new ze(l,4,A=>n(A.calcYValue)>W?W+H/2:n(A.calcYValue)<0?-H/2:n(A.calcYValue)).calculateYPositions()),e.$$.dirty[0]&1081344&&a(20,g[0]=i!=null?Math.min(...i.map(A=>A.y),g[0]):g[0],g),e.$$.dirty[0]&1081344&&a(20,g[1]=i!=null?Math.max(...i.map(A=>A.y),g[1]):g[1],g),e.$$.dirty[0]&10486784&&a(26,s=p.filter(A=>(G.custom!=null?G.custom:[]).map(j=>j.areacd).includes(A.areacd)||Y.filter(j=>G[j.role]).map(j=>j.data.areacd).includes(A.areacd))),e.$$.dirty[0]&79691808&&a(25,o=s.map(A=>({...A,role:Y.filter(j=>j.data.areacd===A.areacd).length>0?Y.find(j=>j.data.areacd===A.areacd).role:"custom",calcYValue:(A.value-S)/r}))),e.$$.dirty[0]&33566848&&a(19,f=new ze(o,8.5,A=>n(A.calcYValue)>W?W+H/2:n(A.calcYValue)<0?-H/2:n(A.calcYValue)).calculateYPositions()),e.$$.dirty[0]&2097152&&Ee(p,"value"),e.$$.dirty[0]&64&&a(18,d=u.prefix===null?"":u.prefix),e.$$.dirty[0]&64&&a(17,c=u.suffix===null?"":u.suffix)},[z,ne,h,k,m,S,u,n,_,w,G,R,W,H,x,i,y,c,d,f,g,p,r,Y,T,o,s,l,N,b,L,te,se]}class Kt extends ue{constructor(t){super(),de(this,t,Ot,Bt,he,{index:2,width:3,outerPadding:4,data:21,medianValue:5,medianAbsoluteDeviation:22,metadata:6,y:7,xDomainGlobal:20,x:8,height:9,checkboxedRoles:10,hoverIndex:0,chartHeight:11,chartWidth:12,spaceForAreasBeyondScale:13,selectedAreas:23,rowHeight:14,backgroundData:24,hoverChartIndex:1},null,[-1,-1])}}function Nt(e){let t,a,l,i,s,o,f,d,c,h;function k(r){e[25](r)}function m(r){e[26](r)}function p(r){e[27](r)}let S={width:e[16]-e[9],index:e[7],outerPadding:e[10],backgroundData:e[19],data:e[4],medianValue:e[0],medianAbsoluteDeviation:e[22],metadata:e[6],y:e[21],x:e[14],height:e[15],checkboxedRoles:e[8],chartHeight:e[12],chartWidth:e[11],areasSameGeog:e[17],spaceForAreasBeyondScale:e[13],showGroupMedianLine:!1,selectedAreas:e[18],rowHeight:e[20]};return e[1]!==void 0&&(S.xDomainGlobal=e[1]),e[2]!==void 0&&(S.hoverIndex=e[2]),e[3]!==void 0&&(S.hoverChartIndex=e[3]),s=new Kt({props:S}),q.push(()=>$(s,"xDomainGlobal",k)),q.push(()=>$(s,"hoverIndex",m)),q.push(()=>$(s,"hoverChartIndex",p)),{c(){t=V("div"),a=V("p"),l=ae(e[5]),i=O(),U(s.$$.fragment),this.h()},l(r){t=M(r,"DIV",{class:!0,style:!0});var u=E(t);a=M(u,"P",{class:!0,style:!0});var n=E(a);l=le(n,e[5]),n.forEach(D),i=K(u),Q(s.$$.fragment,u),u.forEach(D),this.h()},h(){v(a,"class","col1 svelte-10yflbp"),Z(a,"width",e[9]),v(t,"class","row svelte-10yflbp"),Z(t,"background-color",e[7]%2===0?"#fafafa":"#ffffff"),Ge(()=>e[28].call(t))},m(r,u){P(r,t,u),C(t,a),C(a,l),C(t,i),X(s,t,null),c=Te(t,e[28].bind(t)),h=!0},p(r,[u]){(!h||u&32)&&be(l,r[5]),(!h||u&512)&&Z(a,"width",r[9]);const n={};u&66048&&(n.width=r[16]-r[9]),u&128&&(n.index=r[7]),u&1024&&(n.outerPadding=r[10]),u&524288&&(n.backgroundData=r[19]),u&16&&(n.data=r[4]),u&1&&(n.medianValue=r[0]),u&4194304&&(n.medianAbsoluteDeviation=r[22]),u&64&&(n.metadata=r[6]),u&2097152&&(n.y=r[21]),u&16384&&(n.x=r[14]),u&32768&&(n.height=r[15]),u&256&&(n.checkboxedRoles=r[8]),u&4096&&(n.chartHeight=r[12]),u&2048&&(n.chartWidth=r[11]),u&131072&&(n.areasSameGeog=r[17]),u&8192&&(n.spaceForAreasBeyondScale=r[13]),u&262144&&(n.selectedAreas=r[18]),u&1048576&&(n.rowHeight=r[20]),!o&&u&2&&(o=!0,n.xDomainGlobal=r[1],ee(()=>o=!1)),!f&&u&4&&(f=!0,n.hoverIndex=r[2],ee(()=>f=!1)),!d&&u&8&&(d=!0,n.hoverChartIndex=r[3],ee(()=>d=!1)),s.$set(n),(!h||u&128)&&Z(t,"background-color",r[7]%2===0?"#fafafa":"#ffffff")},i(r){h||(F(s.$$.fragment,r),h=!0)},o(r){B(s.$$.fragment,r),h=!1},d(r){r&&D(t),J(s),c()}}}function jt(e,t,a){let l,i,s,o,f,{data:d,name:c,medianValue:h,metadata:k,index:m,checkboxedRoles:p,col1Width:S,outerPadding:r,chartWidth:u,chartHeight:n,spaceForAreasBeyondScale:g,xDomainGlobal:_,x:w,height:G,width:z,hoverIndex:R,hoverChartIndex:W,areasSameGeog:H,selectedAreas:Y}=t,x=100;function T(b){_=b,a(1,_)}function ne(b){R=b,a(2,R)}function y(b){W=b,a(3,W)}function N(){x=this.clientHeight,a(20,x)}return e.$$set=b=>{"data"in b&&a(4,d=b.data),"name"in b&&a(5,c=b.name),"medianValue"in b&&a(0,h=b.medianValue),"metadata"in b&&a(6,k=b.metadata),"index"in b&&a(7,m=b.index),"checkboxedRoles"in b&&a(8,p=b.checkboxedRoles),"col1Width"in b&&a(9,S=b.col1Width),"outerPadding"in b&&a(10,r=b.outerPadding),"chartWidth"in b&&a(11,u=b.chartWidth),"chartHeight"in b&&a(12,n=b.chartHeight),"spaceForAreasBeyondScale"in b&&a(13,g=b.spaceForAreasBeyondScale),"xDomainGlobal"in b&&a(1,_=b.xDomainGlobal),"x"in b&&a(14,w=b.x),"height"in b&&a(15,G=b.height),"width"in b&&a(16,z=b.width),"hoverIndex"in b&&a(2,R=b.hoverIndex),"hoverChartIndex"in b&&a(3,W=b.hoverChartIndex),"areasSameGeog"in b&&a(17,H=b.areasSameGeog),"selectedAreas"in b&&a(18,Y=b.selectedAreas)},e.$$.update=()=>{e.$$.dirty&131088&&a(19,l=d.filter(b=>H.includes(b.areacd))),e.$$.dirty&524288&&a(0,h=Ee(l,"value")),e.$$.dirty&524289&&Math.max(Math.abs(h-Math.min(...l.map(b=>b.value))),Math.abs(h-Math.max(...l.map(b=>b.value)))),e.$$.dirty&524289&&a(24,i=l.map(b=>Math.abs(b.value-h))),e.$$.dirty&16777216&&a(22,s=Ee(i)),e.$$.dirty&64&&a(23,o=[-k.polarity*Pe,k.polarity*Pe]),e.$$.dirty&8388608&&console.log(o),e.$$.dirty&8390656&&a(21,f=lt().domain(o).range([0,u]))},[h,_,R,W,d,c,k,m,p,S,r,u,n,g,w,G,z,H,Y,l,x,f,s,o,i,T,ne,y,N]}class Yt extends ue{constructor(t){super(),de(this,t,jt,Nt,he,{data:4,name:5,medianValue:0,metadata:6,index:7,checkboxedRoles:8,col1Width:9,outerPadding:10,chartWidth:11,chartHeight:12,spaceForAreasBeyondScale:13,xDomainGlobal:1,x:14,height:15,width:16,hoverIndex:2,hoverChartIndex:3,areasSameGeog:17,selectedAreas:18})}}function Fe(e){let t,a,l,i,s,o,f,d,c,h,k;return{c(){t=V("summary"),a=V("h3"),l=ae(e[1]),s=O(),o=V("span"),f=oe("svg"),d=oe("path"),this.h()},l(m){t=M(m,"SUMMARY",{class:!0});var p=E(t);a=M(p,"H3",{class:!0});var S=E(a);l=le(S,e[1]),S.forEach(D),s=K(p),o=M(p,"SPAN",{class:!0});var r=E(o);f=fe(r,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var u=E(f);d=fe(u,"path",{class:!0,d:!0,transform:!0}),E(d).forEach(D),u.forEach(D),r.forEach(D),p.forEach(D),this.h()},h(){v(a,"class",i=ce("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),v(d,"class",c=ce(e[0]?" path_styling_override":"")+" svelte-lfupja"),v(d,"d",h=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),v(d,"transform",k=e[0]?null:"translate(-5.02 -1.59)"),v(f,"class","ons-svg-icon"),v(f,"viewBox","0 0 8 13"),v(f,"xmlns","http://www.w3.org/2000/svg"),v(f,"focusable","false"),v(o,"class","ons-collapsible__icon"),v(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(m,p){P(m,t,p),C(t,a),C(a,l),C(t,s),C(t,o),C(o,f),C(f,d)},p(m,p){p&2&&be(l,m[1]),p&1&&i!==(i=ce("ons-collapsible__title"+(m[0]?" title_styling_override":""))+" svelte-lfupja")&&v(a,"class",i),p&1&&c!==(c=ce(m[0]?" path_styling_override":"")+" svelte-lfupja")&&v(d,"class",c),p&1&&h!==(h=m[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&v(d,"d",h),p&1&&k!==(k=m[0]?null:"translate(-5.02 -1.59)")&&v(d,"transform",k)},d(m){m&&D(t)}}}function Zt(e){let t,a,l,i,s,o,f=!e[3]&&Fe(e);const d=e[5].default,c=St(d,e,e[4],null);return{c(){t=V("details"),f&&f.c(),a=O(),l=V("div"),c&&c.c(),this.h()},l(h){t=M(h,"DETAILS",{class:!0});var k=E(t);f&&f.l(k),a=K(k),l=M(k,"DIV",{class:!0});var m=E(l);c&&c.l(m),m.forEach(D),k.forEach(D),this.h()},h(){v(l,"class",i=ce(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),v(t,"class",s=ce("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(h,k){P(h,t,k),f&&f.m(t,null),C(t,a),C(t,l),c&&c.m(l,null),o=!0},p(h,[k]){h[3]?f&&(f.d(1),f=null):f?f.p(h,k):(f=Fe(h),f.c(),f.m(t,a)),c&&c.p&&(!o||k&16)&&It(c,d,h,h[4],o?Dt(d,h[4],k,null):At(h[4]),null),(!o||k&5&&i!==(i=ce(h[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(h[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&v(l,"class",i),(!o||k&1&&s!==(s=ce("ons-collapsible ons-js-collapsible"+(h[0]?" details_styling_override":""))+" svelte-lfupja"))&&v(t,"class",s),(!o||k&8)&&(t.open=h[3])},i(h){o||(F(c,h),o=!0)},o(h){B(c,h),o=!1},d(h){h&&D(t),f&&f.d(),c&&c.d(h)}}}function qt(e,t,a){let{$$slots:l={},$$scope:i}=t,{cross:s=!1}=t,{label:o="Label"}=t,{blank:f=!1}=t,{open:d=!1}=t;return e.$$set=c=>{"cross"in c&&a(0,s=c.cross),"label"in c&&a(1,o=c.label),"blank"in c&&a(2,f=c.blank),"open"in c&&a(3,d=c.open),"$$scope"in c&&a(4,i=c.$$scope)},[s,o,f,d,i,l]}class Ut extends ue{constructor(t){super(),de(this,t,qt,Zt,he,{cross:0,label:1,blank:2,open:3})}}function Qt(e){let t,a,l,i,s,o,f,d,c;function h(n){e[39](n)}function k(n){e[40](n)}function m(n){e[41](n)}function p(n){e[42](n)}function S(n){e[43](n)}function r(n){e[44](n)}let u={id:e[2],container:e[3],items:e[4],placeholder:e[5],isMulti:e[10],isSearchable:e[6],groupBy:e[22],loadOptions:e[9],getSelectionLabel:e[12],getOptionLabel:e[21],itemFilter:e[19],ariaValues:e[25],ariaListOpen:e[26],ariaFocused:e[27],noOptionsMessage:e[20],indicatorSvg:e[23],containerStyles:e[24],optionIdentifier:e[8],showIndicator:!0,isClearable:e[7]?!e[10]:!1};return e[15]!==void 0&&(u.isFocused=e[15]),e[0]!==void 0&&(u.value=e[0]),e[16]!==void 0&&(u.listOpen=e[16]),e[1]!==void 0&&(u.filterText=e[1]),e[13]!==void 0&&(u.isWaiting=e[13]),e[17]!==void 0&&(u.handleClear=e[17]),a=new Ht({props:u}),q.push(()=>$(a,"isFocused",h)),q.push(()=>$(a,"value",k)),q.push(()=>$(a,"listOpen",m)),q.push(()=>$(a,"filterText",p)),q.push(()=>$(a,"isWaiting",S)),q.push(()=>$(a,"handleClear",r)),a.$on("select",e[28]),a.$on("clear",e[45]),a.$on("loaded",e[46]),a.$on("error",e[47]),{c(){t=V("div"),U(a.$$.fragment),this.h()},l(n){t=M(n,"DIV",{class:!0});var g=E(t);Q(a.$$.fragment,g),g.forEach(D),this.h()},h(){v(t,"class","selectbox svelte-1w33mjb"),me(t,"multi-selected",e[0]&&e[10]),me(t,"focused",e[15]),me(t,"selected",e[0]&&!e[16]&&!e[10]),Z(t,"--borderColor",e[11]),Z(t,"--firstItem",e[18](0)),Z(t,"--secondItem",e[18](1)),Z(t,"--thirdItem",e[18](2)),Z(t,"--fourthItem",e[18](3))},m(n,g){P(n,t,g),X(a,t,null),e[48](t),c=!0},p(n,g){const _={};g[0]&4&&(_.id=n[2]),g[0]&8&&(_.container=n[3]),g[0]&16&&(_.items=n[4]),g[0]&32&&(_.placeholder=n[5]),g[0]&1024&&(_.isMulti=n[10]),g[0]&64&&(_.isSearchable=n[6]),g[0]&512&&(_.loadOptions=n[9]),g[0]&4096&&(_.getSelectionLabel=n[12]),g[0]&524288&&(_.itemFilter=n[19]),g[0]&1048576&&(_.noOptionsMessage=n[20]),g[0]&256&&(_.optionIdentifier=n[8]),g[0]&1152&&(_.isClearable=n[7]?!n[10]:!1),!l&&g[0]&32768&&(l=!0,_.isFocused=n[15],ee(()=>l=!1)),!i&&g[0]&1&&(i=!0,_.value=n[0],ee(()=>i=!1)),!s&&g[0]&65536&&(s=!0,_.listOpen=n[16],ee(()=>s=!1)),!o&&g[0]&2&&(o=!0,_.filterText=n[1],ee(()=>o=!1)),!f&&g[0]&8192&&(f=!0,_.isWaiting=n[13],ee(()=>f=!1)),!d&&g[0]&131072&&(d=!0,_.handleClear=n[17],ee(()=>d=!1)),a.$set(_),(!c||g[0]&1025)&&me(t,"multi-selected",n[0]&&n[10]),(!c||g[0]&32768)&&me(t,"focused",n[15]),(!c||g[0]&66561)&&me(t,"selected",n[0]&&!n[16]&&!n[10]),g[0]&2048&&Z(t,"--borderColor",n[11]),g[0]&262144&&Z(t,"--firstItem",n[18](0)),g[0]&262144&&Z(t,"--secondItem",n[18](1)),g[0]&262144&&Z(t,"--thirdItem",n[18](2)),g[0]&262144&&Z(t,"--fourthItem",n[18](3))},i(n){c||(F(a.$$.fragment,n),c=!0)},o(n){B(a.$$.fragment,n),c=!1},d(n){n&&D(t),J(a),e[48](null)}}}function Xt(e,t,a){let l,i,s;const o='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',f='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',d=Ct();let{id:c=""}=t,{container:h=void 0}=t,{mode:k="default"}=t,{items:m}=t,{placeholder:p="Select one..."}=t,{value:S=null}=t,{filterText:r=""}=t,{isSearchable:u=!0}=t,{isClearable:n=!0}=t,{autoClear:g=!1}=t,{idKey:_="value"}=t,{labelKey:w="label"}=t,{groupKey:G=null}=t,{groupItems:z=!1}=t,{loadOptions:R=void 0}=t,{fontSize:W="1em"}=t,{height:H=42}=t,{isMulti:Y=!1}=t,{maxSelected:x=4}=t,{colors:T=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=t,{darkMode:ne=!1}=t,{borderColor:y=ne?"white":"#206095"}=t;const N=G&&!z?I=>`${I[w]} <span class="group">${I[G]}</span>`:I=>I[w];let{getSelectionLabel:b=I=>I?N(I):null}=t;const L=z&&G?I=>I[G]:void 0,te=k=="search"?o:f,se=`--inputFontSize: ${W}; --groupTitleFontSize: ${W}; --height: ${H}px; font-size: ${W};`,A=I=>`${I}, selected.`,j=(I,re)=>`You are currently focused on ${I}. There are ${re} results available.`,rt=()=>"Select is focused, type to refine list, press down to open the menu.";let we,Ce,ye,Se,ke;const ot=I=>new Promise(re=>setTimeout(re,I));async function ft(I){if(d("select",I.detail),g)ke();else if(n){await ot(10);let re=we.getElementsByClassName("clearSelect")[0];re&&(re.tabIndex=0,re.onkeypress=Ie=>{Ie.key=="Enter"&&ke()},re.removeAttribute("aria-hidden"),re.setAttribute("aria-label","Clear selection"))}}function ct(I){Ce=I,a(15,Ce)}function ut(I){S=I,a(0,S)}function dt(I){ye=I,a(16,ye)}function ht(I){r=I,a(1,r)}function _t(I){Se=I,a(13,Se)}function mt(I){ke=I,a(17,ke)}function gt(I){Re.call(this,e,I)}function bt(I){Re.call(this,e,I)}function vt(I){Re.call(this,e,I)}function kt(I){q[I?"unshift":"push"](()=>{we=I,a(14,we)})}return e.$$set=I=>{"id"in I&&a(2,c=I.id),"container"in I&&a(3,h=I.container),"mode"in I&&a(29,k=I.mode),"items"in I&&a(4,m=I.items),"placeholder"in I&&a(5,p=I.placeholder),"value"in I&&a(0,S=I.value),"filterText"in I&&a(1,r=I.filterText),"isSearchable"in I&&a(6,u=I.isSearchable),"isClearable"in I&&a(7,n=I.isClearable),"autoClear"in I&&a(30,g=I.autoClear),"idKey"in I&&a(8,_=I.idKey),"labelKey"in I&&a(31,w=I.labelKey),"groupKey"in I&&a(32,G=I.groupKey),"groupItems"in I&&a(33,z=I.groupItems),"loadOptions"in I&&a(9,R=I.loadOptions),"fontSize"in I&&a(34,W=I.fontSize),"height"in I&&a(35,H=I.height),"isMulti"in I&&a(10,Y=I.isMulti),"maxSelected"in I&&a(36,x=I.maxSelected),"colors"in I&&a(37,T=I.colors),"darkMode"in I&&a(38,ne=I.darkMode),"borderColor"in I&&a(11,y=I.borderColor),"getSelectionLabel"in I&&a(12,b=I.getSelectionLabel)},e.$$.update=()=>{e.$$.dirty[0]&536879106&&a(20,l=Se?"Loading...":k=="search"&&r.length<3?"Enter 3 or more characters for suggestions":`No results match ${r}`),e.$$.dirty[0]&536870915|e.$$.dirty[1]&33&&a(19,i=Array.isArray(S)&&S.length>=x||k=="search"&&r.length<3?(I,re,Ie)=>!1:(I,re,Ie)=>`${Ie[w]}`.match(new RegExp(`\\b${re}`,"i"))),e.$$.dirty[1]&64&&a(18,s=I=>T[I%T.length])},[S,r,c,h,m,p,u,n,_,R,Y,y,b,Se,we,Ce,ye,ke,s,i,l,N,L,te,se,A,j,rt,ft,k,g,w,G,z,W,H,x,T,ne,ct,ut,dt,ht,_t,mt,gt,bt,vt,kt]}class Jt extends ue{constructor(t){super(),de(this,t,Xt,Qt,he,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function xt(e){let t,a,l,i;function s(f){e[6](f)}let o={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:e[1],isMulti:!0,maxSelected:4,placeholder:"Add additional comparison areas"};return e[0].custom!==void 0&&(o.value=e[0].custom),a=new Jt({props:o}),q.push(()=>$(a,"value",s)),a.$on("select",e[2]),{c(){t=V("form"),U(a.$$.fragment),this.h()},l(f){t=M(f,"FORM",{class:!0});var d=E(t);Q(a.$$.fragment,d),d.forEach(D),this.h()},h(){v(t,"class","svelte-a5e7yj")},m(f,d){P(f,t,d),X(a,t,null),i=!0},p(f,[d]){const c={};!l&&d&1&&(l=!0,c.value=f[0].custom,ee(()=>l=!1)),a.$set(c)},i(f){i||(F(a.$$.fragment,f),i=!0)},o(f){B(a.$$.fragment,f),i=!1},d(f){f&&D(t),J(a)}}}function $t(e,t,a){let{areasWithData:l,checkboxedRoles:i,selectedAreas:s,altText:o=""}=t,f=ie("areasParentsLookup"),d=ie("areas"),c=f.filter(m=>l.includes(m.areacd)&!s.map(p=>p.data.areacd).includes(m.areacd));c.forEach(m=>{m.areanm=d.find(p=>p.areacd===m.areacd).areanm,m.parentnm=d.find(p=>m.parentcd===p.areacd)===void 0?"":d.find(p=>m.parentcd===p.areacd).areanm});function h(m){m.detail&&m.detail}function k(m){e.$$.not_equal(i.custom,m)&&(i.custom=m,a(0,i))}return e.$$set=m=>{"areasWithData"in m&&a(3,l=m.areasWithData),"checkboxedRoles"in m&&a(0,i=m.checkboxedRoles),"selectedAreas"in m&&a(4,s=m.selectedAreas),"altText"in m&&a(5,o=m.altText)},[i,c,h,l,s,o,k]}class ea extends ue{constructor(t){super(),de(this,t,$t,xt,he,{areasWithData:3,checkboxedRoles:0,selectedAreas:4,altText:5})}}function He(e,t,a){const l=e.slice();return l[10]=t[a],l[11]=t,l[12]=a,l}function Be(e,t,a){const l=e.slice();return l[10]=t[a],l[13]=t,l[12]=a,l}function Oe(e){let t,a,l=e[10].data.areanm+"",i,s,o;function f(){e[6].call(a,e[10])}return{c(){t=V("label"),a=V("input"),i=ae(l),this.h()},l(d){t=M(d,"LABEL",{class:!0});var c=E(t);a=M(c,"INPUT",{type:!0,class:!0}),i=le(c,l),c.forEach(D),this.h()},h(){v(a,"type","checkbox"),v(a,"class","svelte-thy20g"),v(t,"class","svelte-thy20g")},m(d,c){P(d,t,c),C(t,a),a.checked=e[0][e[10].role],C(t,i),s||(o=at(a,"change",f),s=!0)},p(d,c){e=d,c&3&&(a.checked=e[0][e[10].role]),c&2&&l!==(l=e[10].data.areanm+"")&&be(i,l)},d(d){d&&D(t),s=!1,o()}}}function Ke(e){let t,a,l,i,s=["neighbour","cluster"],o=[];for(let f=0;f<2;f+=1)o[f]=Ne(He(e,s,f));return{c(){t=V("p"),a=ae("Related areas"),l=O();for(let f=0;f<2;f+=1)o[f].c();i=We(),this.h()},l(f){t=M(f,"P",{class:!0});var d=E(t);a=le(d,"Related areas"),d.forEach(D),l=K(f);for(let c=0;c<2;c+=1)o[c].l(f);i=We(),this.h()},h(){v(t,"class","svelte-thy20g")},m(f,d){P(f,t,d),C(t,a),P(f,l,d);for(let c=0;c<2;c+=1)o[c]&&o[c].m(f,d);P(f,i,d)},p(f,d){if(d&33){s=["neighbour","cluster"];let c;for(c=0;c<2;c+=1){const h=He(f,s,c);o[c]?o[c].p(h,d):(o[c]=Ne(h),o[c].c(),o[c].m(i.parentNode,i))}for(;c<2;c+=1)o[c].d(1)}},d(f){f&&D(t),f&&D(l),ve(o,f),f&&D(i)}}}function Ne(e){let t,a,l=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas",i,s,o,f;function d(){e[7].call(a,e[10])}return{c(){t=V("label"),a=V("input"),i=ae(l),s=O(),this.h()},l(c){t=M(c,"LABEL",{class:!0});var h=E(t);a=M(h,"INPUT",{type:!0,class:!0}),i=le(h,l),s=K(h),h.forEach(D),this.h()},h(){v(a,"type","checkbox"),v(a,"class","svelte-thy20g"),v(t,"class","svelte-thy20g")},m(c,h){P(c,t,h),C(t,a),a.checked=e[0][e[10]],C(t,i),C(t,s),o||(f=at(a,"change",d),o=!0)},p(c,h){e=c,h&1&&(a.checked=e[0][e[10]]),h&32&&l!==(l=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas")&&be(i,l)},d(c){c&&D(t),o=!1,f()}}}function ta(e){let t,a,l,i,s,o,f,d,c,h=e[1],k=[];for(let r=0;r<h.length;r+=1)k[r]=Oe(Be(e,h,r));let m=e[3]&&Ke(e);function p(r){e[8](r)}let S={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(S.checkboxedRoles=e[0]),f=new ea({props:S}),q.push(()=>$(f,"checkboxedRoles",p)),{c(){t=V("div"),a=V("p"),l=ae("Parent areas"),i=O();for(let r=0;r<k.length;r+=1)k[r].c();s=O(),m&&m.c(),o=O(),U(f.$$.fragment),this.h()},l(r){t=M(r,"DIV",{class:!0});var u=E(t);a=M(u,"P",{class:!0});var n=E(a);l=le(n,"Parent areas"),n.forEach(D),i=K(u);for(let g=0;g<k.length;g+=1)k[g].l(u);s=K(u),m&&m.l(u),o=K(u),Q(f.$$.fragment,u),u.forEach(D),this.h()},h(){v(a,"class","svelte-thy20g"),v(t,"class","comparisonInputContainer svelte-thy20g")},m(r,u){P(r,t,u),C(t,a),C(a,l),C(t,i);for(let n=0;n<k.length;n+=1)k[n]&&k[n].m(t,null);C(t,s),m&&m.m(t,null),C(t,o),X(f,t,null),c=!0},p(r,u){if(u&3){h=r[1];let g;for(g=0;g<h.length;g+=1){const _=Be(r,h,g);k[g]?k[g].p(_,u):(k[g]=Oe(_),k[g].c(),k[g].m(t,s))}for(;g<k.length;g+=1)k[g].d(1);k.length=h.length}r[3]?m?m.p(r,u):(m=Ke(r),m.c(),m.m(t,o)):m&&(m.d(1),m=null);const n={};u&2&&(n.selectedAreas=r[1]),u&4&&(n.areasWithData=r[2]),!d&&u&1&&(d=!0,n.checkboxedRoles=r[0],ee(()=>d=!1)),f.$set(n)},i(r){c||(F(f.$$.fragment,r),c=!0)},o(r){B(f.$$.fragment,r),c=!1},d(r){r&&D(t),ve(k,r),m&&m.d(),J(f)}}}function aa(e){let t,a,l;return a=new Ut({props:{label:"Add areas to compare to "+e[4],open:la,$$slots:{default:[ta]},$$scope:{ctx:e}}}),{c(){t=V("div"),U(a.$$.fragment),this.h()},l(i){t=M(i,"DIV",{class:!0});var s=E(t);Q(a.$$.fragment,s),s.forEach(D),this.h()},h(){v(t,"class",ce("twisty-container")+" svelte-thy20g")},m(i,s){P(i,t,s),X(a,t,null),l=!0},p(i,[s]){const o={};s&16&&(o.label="Add areas to compare to "+i[4]),s&16431&&(o.$$scope={dirty:s,ctx:i}),a.$set(o)},i(i){l||(F(a.$$.fragment,i),l=!0)},o(i){B(a.$$.fragment,i),l=!1},d(i){i&&D(t),J(a)}}}let la=!1;function na(e,t,a){let{selectedAreas:l,areasWithData:i,checkboxedRoles:s,includeSiblings:o=!0,selectedArea:f,parentArea:d}=t;l.map(m=>m.role);function c(m){s[m.role]=this.checked,a(0,s)}function h(m){s[m]=this.checked,a(0,s)}function k(m){s=m,a(0,s)}return e.$$set=m=>{"selectedAreas"in m&&a(1,l=m.selectedAreas),"areasWithData"in m&&a(2,i=m.areasWithData),"checkboxedRoles"in m&&a(0,s=m.checkboxedRoles),"includeSiblings"in m&&a(3,o=m.includeSiblings),"selectedArea"in m&&a(4,f=m.selectedArea),"parentArea"in m&&a(5,d=m.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&console.log(l)},[s,l,i,o,f,d,c,h,k]}class ia extends ue{constructor(t){super(),de(this,t,na,aa,he,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function je(e,t,a){const l=e.slice();return l[3]=t[a],l[5]=a,l}function sa(e){let t,a;return{c(){t=oe("circle"),this.h()},l(l){t=fe(l,"circle",{r:!0,fill:!0,stroke:!0});var i=E(t);i.forEach(D),this.h()},h(){v(t,"r",pe),v(t,"fill",a=ge[e[3].role]),v(t,"stroke","white")},m(l,i){P(l,t,i)},p(l,i){i&1&&a!==(a=ge[l[3].role])&&v(t,"fill",a)},d(l){l&&D(t)}}}function ra(e){let t,a,l;return{c(){t=oe("rect"),this.h()},l(i){t=fe(i,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var s=E(t);s.forEach(D),this.h()},h(){v(t,"transform",a=["country","uk"].includes(e[3].role)?"rotate(45)":null),v(t,"x",-pe),v(t,"y",-pe),v(t,"width",2*pe),v(t,"height",2*pe),v(t,"fill",l=ge[e[3].role]),v(t,"stroke","white")},m(i,s){P(i,t,s)},p(i,s){s&1&&a!==(a=["country","uk"].includes(i[3].role)?"rotate(45)":null)&&v(t,"transform",a),s&1&&l!==(l=ge[i[3].role])&&v(t,"fill",l)},d(i){i&&D(t)}}}function Ye(e){let t,a,l,i,s,o,f=e[1].find(p).areanm+"",d,c;function h(S,r){return r&1&&(i=null),i==null&&(i=!!["parent","country","uk"].includes(S[3].role)),i?ra:sa}let k=h(e,-1),m=k(e);function p(...S){return e[2](e[3],...S)}return{c(){t=V("div"),a=oe("svg"),l=oe("g"),m.c(),s=O(),o=V("p"),d=ae(f),c=O(),this.h()},l(S){t=M(S,"DIV",{class:!0});var r=E(t);a=fe(r,"svg",{width:!0,height:!0});var u=E(a);l=fe(u,"g",{transform:!0});var n=E(l);m.l(n),n.forEach(D),u.forEach(D),s=K(r),o=M(r,"P",{style:!0,class:!0});var g=E(o);d=le(g,f),g.forEach(D),c=K(r),r.forEach(D),this.h()},h(){v(l,"transform","translate(10,12)"),v(a,"width","20"),v(a,"height","24"),Z(o,"color",ge[e[3].role]),v(o,"class","svelte-1p5l8o2"),v(t,"class","roleContainer svelte-1p5l8o2")},m(S,r){P(S,t,r),C(t,a),C(a,l),m.m(l,null),C(t,s),C(t,o),C(o,d),C(t,c)},p(S,r){e=S,k===(k=h(e,r))&&m?m.p(e,r):(m.d(1),m=k(e),m&&(m.c(),m.m(l,null))),r&1&&f!==(f=e[1].find(p).areanm+"")&&be(d,f),r&1&&Z(o,"color",ge[e[3].role])},d(S){S&&D(t),m.d()}}}function oa(e){let t,a=e[0],l=[];for(let i=0;i<a.length;i+=1)l[i]=Ye(je(e,a,i));return{c(){t=V("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){t=M(i,"DIV",{class:!0});var s=E(t);for(let o=0;o<l.length;o+=1)l[o].l(s);s.forEach(D),this.h()},h(){v(t,"class","keyContainer svelte-1p5l8o2")},m(i,s){P(i,t,s);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(i,[s]){if(s&3){a=i[0];let o;for(o=0;o<a.length;o+=1){const f=je(i,a,o);l[o]?l[o].p(f,s):(l[o]=Ye(f),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},i:_e,o:_e,d(i){i&&D(t),ve(l,i)}}}let pe=6;function fa(e,t,a){let l=ie("areas"),{plottedAreas:i}=t;const s=(o,f)=>f.areacd===o.areacd;return e.$$set=o=>{"plottedAreas"in o&&a(0,i=o.plottedAreas)},[i,l,s]}class ca extends ue{constructor(t){super(),de(this,t,fa,oa,he,{plottedAreas:0})}}function Ze(e,t,a){const l=e.slice();return l[28]=t[a],l[30]=a,l}function qe(e){let t,a,l,i,s,o;function f(...r){return e[19](e[28],...r)}function d(...r){return e[20](e[28],...r)}function c(...r){return e[21](e[28],...r)}function h(r){e[22](r)}function k(r){e[23](r)}function m(r){e[24](r)}function p(r){e[25](r)}let S={selectedAreas:e[1],areasSameGeog:e[4],index:e[30],data:e[2].filter(f),name:e[13].find(d).label,metadata:e[13].find(c),col1Width:it,outerPadding:e[15],chartWidth:e[12],chartHeight:e[7],spaceForAreasBeyondScale:st,x:e[11],height:nt,width:e[5]};return e[0]!==void 0&&(S.checkboxedRoles=e[0]),e[6]!==void 0&&(S.xDomainGlobal=e[6]),e[8]!==void 0&&(S.hoverIndex=e[8]),e[9]!==void 0&&(S.hoverChart=e[9]),t=new Yt({props:S}),q.push(()=>$(t,"checkboxedRoles",h)),q.push(()=>$(t,"xDomainGlobal",k)),q.push(()=>$(t,"hoverIndex",m)),q.push(()=>$(t,"hoverChart",p)),{c(){U(t.$$.fragment)},l(r){Q(t.$$.fragment,r)},m(r,u){X(t,r,u),o=!0},p(r,u){e=r;const n={};u&2&&(n.selectedAreas=e[1]),u&16&&(n.areasSameGeog=e[4]),u&14&&(n.data=e[2].filter(f)),u&14&&(n.name=e[13].find(d).label),u&14&&(n.metadata=e[13].find(c)),u&4096&&(n.chartWidth=e[12]),u&128&&(n.chartHeight=e[7]),u&2048&&(n.x=e[11]),u&32&&(n.width=e[5]),!a&&u&1&&(a=!0,n.checkboxedRoles=e[0],ee(()=>a=!1)),!l&&u&64&&(l=!0,n.xDomainGlobal=e[6],ee(()=>l=!1)),!i&&u&256&&(i=!0,n.hoverIndex=e[8],ee(()=>i=!1)),!s&&u&512&&(s=!0,n.hoverChart=e[9],ee(()=>s=!1)),t.$set(n)},i(r){o||(F(t.$$.fragment,r),o=!0)},o(r){B(t.$$.fragment,r),o=!1},d(r){J(t,r)}}}function ua(e){let t,a,l,i,s,o,f,d,c,h,k,m,p;a=new Wt({});function S(_){e[17](_)}let r={selectedAreas:e[1].filter(e[16]),areasWithData:e[2].map(Ue),selectedArea:e[1].find(Qe).data.areanm,parentArea:e[1].find(Xe).data.areanm,includeSiblings:!1};e[0]!==void 0&&(r.checkboxedRoles=e[0]),i=new ia({props:r}),q.push(()=>$(i,"checkboxedRoles",S)),f=new ca({props:{plottedAreas:e[10]}});let u=e[3].filter(e[18]),n=[];for(let _=0;_<u.length;_+=1)n[_]=qe(Ze(e,u,_));const g=_=>B(n[_],1,1,()=>{n[_]=null});return{c(){t=V("div"),U(a.$$.fragment),l=O(),U(i.$$.fragment),o=O(),U(f.$$.fragment),d=O(),c=V("div");for(let _=0;_<n.length;_+=1)n[_].c();h=O(),k=V("div"),this.h()},l(_){t=M(_,"DIV",{class:!0});var w=E(t);Q(a.$$.fragment,w),l=K(w),Q(i.$$.fragment,w),o=K(w),Q(f.$$.fragment,w),d=K(w),c=M(w,"DIV",{style:!0});var G=E(c);for(let R=0;R<n.length;R+=1)n[R].l(G);G.forEach(D),h=K(w),k=M(w,"DIV",{class:!0});var z=E(k);z.forEach(D),w.forEach(D),this.h()},h(){Z(c,"margin-top","30px"),Z(c,"margin-bottom","30px"),v(k,"class","svgs-container"),v(t,"class","visualisation-container svelte-1v2sdro"),Ge(()=>e[26].call(t))},m(_,w){P(_,t,w),X(a,t,null),C(t,l),X(i,t,null),C(t,o),X(f,t,null),C(t,d),C(t,c);for(let G=0;G<n.length;G+=1)n[G]&&n[G].m(c,null);C(t,h),C(t,k),m=Te(t,e[26].bind(t)),p=!0},p(_,[w]){const G={};w&6&&(G.selectedAreas=_[1].filter(_[16])),w&4&&(G.areasWithData=_[2].map(Ue)),w&2&&(G.selectedArea=_[1].find(Qe).data.areanm),w&2&&(G.parentArea=_[1].find(Xe).data.areanm),!s&&w&1&&(s=!0,G.checkboxedRoles=_[0],ee(()=>s=!1)),i.$set(G);const z={};if(w&1024&&(z.plottedAreas=_[10]),f.$set(z),w&64511){u=_[3].filter(_[18]);let R;for(R=0;R<u.length;R+=1){const W=Ze(_,u,R);n[R]?(n[R].p(W,w),F(n[R],1)):(n[R]=qe(W),n[R].c(),F(n[R],1),n[R].m(c,null))}for(Ve(),R=u.length;R<n.length;R+=1)g(R);Me()}},i(_){if(!p){F(a.$$.fragment,_),F(i.$$.fragment,_),F(f.$$.fragment,_);for(let w=0;w<u.length;w+=1)F(n[w]);p=!0}},o(_){B(a.$$.fragment,_),B(i.$$.fragment,_),B(f.$$.fragment,_),n=n.filter(Boolean);for(let w=0;w<n.length;w+=1)B(n[w]);p=!1},d(_){_&&D(t),J(a),J(i),J(f),ve(n,_),m()}}}let nt=100,it=250,st=20;const Ue=e=>e.areacd,Qe=e=>e.role==="main",Xe=e=>e.role==="parent";function da(e,t,a){let l,i,s,o,{selectedAreas:f,latestData:d,indicatorsList:c,areasSameGeog:h,checkboxedRoles:k}=t,m=ie("indicatorsMetadata"),p=ie("indicators");ie("periodsLookup");let S=1e3,r={top:25,left:0,right:0,bottom:15},u=[-1,1],n=null,g=null;const _=y=>d.filter(N=>y.data.areacd===N.areacd).length>0&y.role!=="main";function w(y){k=y,a(0,k)}const G=y=>d.filter(N=>N.id===y&N.areacd===f.find(b=>b.role==="main").data.areacd).length>0,z=(y,N)=>N.id===y,R=(y,N)=>N.code==p.find(b=>b.id==y).code,W=(y,N)=>N.code===p.find(b=>b.id==y).code;function H(y){k=y,a(0,k)}function Y(y){u=y,a(6,u)}function x(y){n=y,a(8,n)}function T(y){g=y,a(9,g)}function ne(){S=this.clientWidth,a(5,S)}return e.$$set=y=>{"selectedAreas"in y&&a(1,f=y.selectedAreas),"latestData"in y&&a(2,d=y.latestData),"indicatorsList"in y&&a(3,c=y.indicatorsList),"areasSameGeog"in y&&a(4,h=y.areasSameGeog),"checkboxedRoles"in y&&a(0,k=y.checkboxedRoles)},e.$$.update=()=>{e.$$.dirty&32&&a(12,l=S-r.left-r.right-it-st*2),e.$$.dirty&192&&a(11,s=lt().domain(u).range([0,i])),e.$$.dirty&7&&a(10,o=[...f.map(y=>y.role==="main"||k[y.role]?{role:y.role,areacd:y.data.areacd}:null).filter(y=>y!=null),...k.custom===null||k.custom===void 0?[]:k.custom.map((y,N)=>({role:"custom"+(N+1),areacd:y.areacd}))].filter(y=>d.map(N=>N.areacd).includes(y.areacd)))},a(7,i=nt-r.top-r.bottom),[k,f,d,c,h,S,u,i,n,g,o,s,l,m,p,r,_,w,G,z,R,W,H,Y,x,T,ne]}class ha extends ue{constructor(t){super(),de(this,t,da,ua,he,{selectedAreas:1,latestData:2,indicatorsList:3,areasSameGeog:4,checkboxedRoles:0})}}function Je(e,t,a){const l=e.slice();return l[13]=t[a],l[15]=a,l}function _a(e){let t,a=e[13].changeText+"",l;return{c(){t=V("p"),l=ae(a),this.h()},l(i){t=M(i,"P",{class:!0});var s=E(t);l=le(s,a),s.forEach(D),this.h()},h(){v(t,"class","col4 "+(["Increasing","Falling"].includes(e[13].changeText)?null:e[13].changeText==="Little change"?"headlineLabelOkay":e[13].changeText==="Worsening"?"headlineLabelBad":"headlineLabelGood")+" svelte-1dv2u9a")},m(i,s){P(i,t,s),C(t,l)},p:_e,d(i){i&&D(t)}}}function xe(e){let t,a,l=e[13].label+"",i,s,o,f,d=e[13].mainText+"",c,h,k=e[13].subText+"",m,p,S=e[13].comparisonText+"",r,u,n,g=e[13].initialValue!=null&&_a(e);return{c(){t=V("div"),a=V("p"),i=ae(l),s=O(),o=V("div"),f=V("p"),c=O(),h=V("p"),m=O(),p=V("p"),r=ae(S),u=O(),g&&g.c(),n=O(),this.h()},l(_){t=M(_,"DIV",{class:!0,style:!0});var w=E(t);a=M(w,"P",{class:!0});var G=E(a);i=le(G,l),G.forEach(D),s=K(w),o=M(w,"DIV",{class:!0});var z=E(o);f=M(z,"P",{class:!0});var R=E(f);R.forEach(D),c=K(z),h=M(z,"P",{class:!0});var W=E(h);W.forEach(D),z.forEach(D),m=K(w),p=M(w,"P",{class:!0});var H=E(p);r=le(H,S),H.forEach(D),u=K(w),g&&g.l(w),n=K(w),w.forEach(D),this.h()},h(){v(a,"class","col1 svelte-1dv2u9a"),v(f,"class","mainValue svelte-1dv2u9a"),v(h,"class","subText svelte-1dv2u9a"),v(o,"class","col2 svelte-1dv2u9a"),v(p,"class","col3 "+(["Above average","Below average"].includes(e[13].comparisonText)?null:e[13].comparisonText==="Similar to average"?"headlineLabelOkay":e[13].comparisonText==="Worse than average"?"headlineLabelBad":"headlineLabelGood")+" svelte-1dv2u9a"),v(t,"class","rowContainer svelte-1dv2u9a"),Z(t,"grid-template-columns","[line1] "+e[2]+"px [line2] "+e[1]+"px [line3] "+e[4]+"px [line4] "+e[3]+"px [end]"),Z(t,"background-color",e[15]%2===0?"#fafafa":"#ffffff")},m(_,w){P(_,t,w),C(t,a),C(a,i),C(t,s),C(t,o),C(o,f),f.innerHTML=d,C(o,c),C(o,h),h.innerHTML=k,C(t,m),C(t,p),C(p,r),C(t,u),g&&g.m(t,null),C(t,n)},p(_,w){_[13].initialValue!=null&&g.p(_,w),w&30&&Z(t,"grid-template-columns","[line1] "+_[2]+"px [line2] "+_[1]+"px [line3] "+_[4]+"px [line4] "+_[3]+"px [end]")},d(_){_&&D(t),g&&g.d()}}}function ma(e){let t,a,l,i,s,o=e[5].filter($e),f=[];for(let d=0;d<o.length;d+=1)f[d]=xe(Je(e,o,d));return{c(){t=V("div");for(let d=0;d<f.length;d+=1)f[d].c();l=O(),i=V("img"),this.h()},l(d){t=M(d,"DIV",{class:!0});var c=E(t);for(let h=0;h<f.length;h+=1)f[h].l(c);c.forEach(D),l=K(d),i=M(d,"IMG",{style:!0,width:!0,src:!0,alt:!0}),this.h()},h(){v(t,"class","keyFiguresListContainer svelte-1dv2u9a"),Ge(()=>e[10].call(t)),Z(i,"padding-top","10px"),v(i,"width","75%"),yt(i.src,s=`${Le}/img/image1.png`)||v(i,"src",s),v(i,"alt","download buttons")},m(d,c){P(d,t,c);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(t,null);a=Te(t,e[10].bind(t)),P(d,l,c),P(d,i,c)},p(d,[c]){if(c&62){o=d[5].filter($e);let h;for(h=0;h<o.length;h+=1){const k=Je(d,o,h);f[h]?f[h].p(k,c):(f[h]=xe(k),f[h].c(),f[h].m(t,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=o.length}},i:_e,o:_e,d(d){d&&D(t),ve(f,d),a(),d&&D(l),d&&D(i)}}}const $e=e=>e.mainText!="No data";function ga(e,t,a){let l,i,s,o,{width:f=400,indicators:d,latestData:c,initialData:h,selectedAreas:k}=t,m=ie("indicatorsMetadata"),p=ie("indicatorsCalculations").filter(u=>d.includes(u.id)),S=[];p.forEach(u=>{let n=m.find(T=>T.code==u.code);u.medianValue=u.ltCount>200?u.ltMedian:u.utCount>140?u.utMedian:u.ukValue!="NA"?u.ukValue:u.gbValue!="NA"?u.gbValue:u.ewValue!="NA"?u.ewValue:u.engValue!="NA"?u.engValue:null,u.label=m.find(T=>T.code==u.code).label;let g=h.filter(T=>u.id===T.id),_=c.filter(T=>u.id===T.id),w=_.length>0?_[0].value:null,G=g.length>0?g[0].value:null,z=w!=null&G!=null?100*(w-G)/G:null,R=w!=null?100*(w-u.medianValue)/u.medianValue:null,W=z!=null?Math.abs(z)<n.similarThreshold?"Little change":z>0?n.polarity==1?"Improving":"Worsening":n.polarity==1?"Worsening":"Improving":null,H=R!=null?Math.abs(R)<n.similarThreshold?"Similar to average":R>0?n.polarity==1?"Better than average":"Worse than average":n.polarity==1?"Worse than average":"Better than average":null,Y=n.prefix===null?"":n.prefix,x=n.suffix===null?"":n.suffix;u.mainText=w!=null?Y+Ae(De(w,n.decimalPlaces))+x:"No data",u.secondaryValue=G!=null?Y+Ae(De(G,n.decimalPlaces))+x:"No data",u.latestValue=w,u.initialValue=G,u.changeText=W,u.comparisonText=H,u.prefix=Y,u.suffix=x,u.subText=n.subText,S.push(u)});function r(){f=this.clientWidth,a(0,f)}return e.$$set=u=>{"width"in u&&a(0,f=u.width),"indicators"in u&&a(6,d=u.indicators),"latestData"in u&&a(7,c=u.latestData),"initialData"in u&&a(8,h=u.initialData),"selectedAreas"in u&&a(9,k=u.selectedAreas)},e.$$.update=()=>{e.$$.dirty&128&&console.log(c),e.$$.dirty&7&&a(4,s=(f-l-i)/2),e.$$.dirty&7&&a(3,o=(f-l-i)/2)},a(2,l=250),a(1,i=140),[f,i,l,o,s,S,d,c,h,k,r]}class ba extends ue{constructor(t){super(),de(this,t,ga,ma,he,{width:0,indicators:6,latestData:7,initialData:8,selectedAreas:9})}}function va(e){let t,a,l;function i(o){e[13](o)}let s={selectedAreas:e[5],latestData:e[1],indicatorsList:e[3],areasSameGeog:e[4]};return e[0]!==void 0&&(s.checkboxedRoles=e[0]),t=new ha({props:s}),q.push(()=>$(t,"checkboxedRoles",i)),{c(){U(t.$$.fragment)},l(o){Q(t.$$.fragment,o)},m(o,f){X(t,o,f),l=!0},p(o,f){const d={};f&32&&(d.selectedAreas=o[5]),f&2&&(d.latestData=o[1]),f&8&&(d.indicatorsList=o[3]),f&16&&(d.areasSameGeog=o[4]),!a&&f&1&&(a=!0,d.checkboxedRoles=o[0],ee(()=>a=!1)),t.$set(d)},i(o){l||(F(t.$$.fragment,o),l=!0)},o(o){B(t.$$.fragment,o),l=!1},d(o){J(t,o)}}}function ka(e){let t,a;return t=new ba({props:{indicators:e[3],latestData:e[1].filter(e[11]),initialData:e[2].filter(e[12]),selectedAreas:e[5]}}),{c(){U(t.$$.fragment)},l(l){Q(t.$$.fragment,l)},m(l,i){X(t,l,i),a=!0},p(l,i){const s={};i&8&&(s.indicators=l[3]),i&34&&(s.latestData=l[1].filter(l[11])),i&36&&(s.initialData=l[2].filter(l[12])),i&32&&(s.selectedAreas=l[5]),t.$set(s)},i(l){a||(F(t.$$.fragment,l),a=!0)},o(l){B(t.$$.fragment,l),a=!1},d(l){J(t,l)}}}function pa(e){let t,a,l,i,s,o,f,d,c,h,k;function m(n){e[10](n)}let p={asButtons:!0,name:"selectMapOption",optionsArray:e[8]};e[6]!==void 0&&(p.chosenId=e[6]),s=new zt({props:p}),q.push(()=>$(s,"chosenId",m));const S=[ka,va],r=[];function u(n,g){return n[6]==0?0:1}return c=u(e),h=r[c]=S[c](e),{c(){t=V("section"),a=V("h1"),l=ae(e[7]),i=O(),U(s.$$.fragment),f=O(),d=V("div"),h.c(),this.h()},l(n){t=M(n,"SECTION",{title:!0,class:!0});var g=E(t);a=M(g,"H1",{});var _=E(a);l=le(_,e[7]),_.forEach(D),i=K(g),Q(s.$$.fragment,g),f=K(g),d=M(g,"DIV",{class:!0});var w=E(d);h.l(w),w.forEach(D),g.forEach(D),this.h()},h(){v(d,"class","info-rows-container"),v(t,"title",e[7]),v(t,"class","svelte-yd7y")},m(n,g){P(n,t,g),C(t,a),C(a,l),C(t,i),X(s,t,null),C(t,f),C(t,d),r[c].m(d,null),k=!0},p(n,[g]){const _={};!o&&g&64&&(o=!0,_.chosenId=n[6],ee(()=>o=!1)),s.$set(_);let w=c;c=u(n),c===w?r[c].p(n,g):(Ve(),B(r[w],1,1,()=>{r[w]=null}),Me(),h=r[c],h?h.p(n,g):(h=r[c]=S[c](n),h.c()),F(h,1),h.m(d,null))},i(n){k||(F(s.$$.fragment,n),F(h),k=!0)},o(n){B(s.$$.fragment,n),B(h),k=!1},d(n){n&&D(t),J(s),r[c].d()}}}function wa(e,t,a){let{topic:l,latestData:i,initialData:s,indicatorsList:o,areasSameGeog:f,checkboxedRoles:d,selectedAreas:c}=t,h=l[0].toUpperCase()+l.substring(1);console.log(i),console.log(c);let k=0,m=["Summary","Beeswarm"];function p(n){k=n,a(6,k)}const S=n=>n.areacd===c.find(g=>g.role==="main").data.areacd,r=n=>n.areacd===c.find(g=>g.role==="main").data.areacd;function u(n){d=n,a(0,d)}return e.$$set=n=>{"topic"in n&&a(9,l=n.topic),"latestData"in n&&a(1,i=n.latestData),"initialData"in n&&a(2,s=n.initialData),"indicatorsList"in n&&a(3,o=n.indicatorsList),"areasSameGeog"in n&&a(4,f=n.areasSameGeog),"checkboxedRoles"in n&&a(0,d=n.checkboxedRoles),"selectedAreas"in n&&a(5,c=n.selectedAreas)},[d,i,s,o,f,c,k,h,m,l,p,S,r,u]}class Sa extends ue{constructor(t){super(),de(this,t,wa,pa,he,{topic:9,latestData:1,initialData:2,indicatorsList:3,areasSameGeog:4,checkboxedRoles:0,selectedAreas:5})}}function et(e,t,a){const l=e.slice();return l[17]=t[a],l}function Ia(e){let t=e[3].areanm+"",a;return{c(){a=ae(t)},l(l){a=le(l,t)},m(l,i){P(l,a,i)},p:_e,d(l){l&&D(a)}}}function Aa(e){let t,a=e[3].areanm+"",l;return{c(){t=ae("Get localised data, insights and trends for "),l=ae(a)},l(i){t=le(i,"Get localised data, insights and trends for "),l=le(i,a)},m(i,s){P(i,t,s),P(i,l,s)},p:_e,d(i){i&&D(t),i&&D(l)}}}function Da(e){let t,a,l,i;return t=new Lt({props:{$$slots:{default:[Ia]},$$scope:{ctx:e}}}),l=new Et({props:{$$slots:{default:[Aa]},$$scope:{ctx:e}}}),{c(){U(t.$$.fragment),a=O(),U(l.$$.fragment)},l(s){Q(t.$$.fragment,s),a=K(s),Q(l.$$.fragment,s)},m(s,o){X(t,s,o),P(s,a,o),X(l,s,o),i=!0},p(s,o){const f={};o&1048576&&(f.$$scope={dirty:o,ctx:s}),t.$set(f);const d={};o&1048576&&(d.$$scope={dirty:o,ctx:s}),l.$set(d)},i(s){i||(F(t.$$.fragment,s),F(l.$$.fragment,s),i=!0)},o(s){B(t.$$.fragment,s),B(l.$$.fragment,s),i=!1},d(s){J(t,s),s&&D(a),J(l,s)}}}function tt(e){let t,a,l;function i(...d){return e[7](e[17],...d)}function s(...d){return e[8](e[17],...d)}function o(d){e[9](d)}let f={topic:e[17],latestData:e[0].latestData.filter(i),initialData:e[0].initialData.filter(s),indicatorsList:e[1][e[17]],areasSameGeog:e[5],selectedAreas:e[6]};return e[2]!==void 0&&(f.checkboxedRoles=e[2]),t=new Sa({props:f}),q.push(()=>$(t,"checkboxedRoles",o)),{c(){U(t.$$.fragment)},l(d){Q(t.$$.fragment,d)},m(d,c){X(t,d,c),l=!0},p(d,c){e=d;const h={};c&3&&(h.latestData=e[0].latestData.filter(i)),c&3&&(h.initialData=e[0].initialData.filter(s)),c&2&&(h.indicatorsList=e[1][e[17]]),!a&&c&4&&(a=!0,h.checkboxedRoles=e[2],ee(()=>a=!1)),t.$set(h)},i(d){l||(F(t.$$.fragment,d),l=!0)},o(d){B(t.$$.fragment,d),l=!1},d(d){J(t,d)}}}function Ca(e){let t;return{c(){t=ae("Find parent, child and neighbouring areas")},l(a){t=le(a,"Find parent, child and neighbouring areas")},m(a,l){P(a,t,l)},d(a){a&&D(t)}}}function ya(e){let t,a,l,i,s,o,f,d,c,h,k,m=e[4],p=[];for(let r=0;r<m.length;r+=1)p[r]=tt(et(e,m,r));const S=r=>B(p[r],1,1,()=>{p[r]=null});return l=new Ft({props:{$$slots:{default:[Ca]},$$scope:{ctx:e}}}),{c(){for(let r=0;r<p.length;r+=1)p[r].c();t=O(),a=V("section"),U(l.$$.fragment),i=O(),s=V("section"),o=V("h2"),f=ae("Get the data"),d=O(),c=V("p"),h=ae("Here, you can find information and links to the data."),this.h()},l(r){for(let w=0;w<p.length;w+=1)p[w].l(r);t=K(r),a=M(r,"SECTION",{title:!0,class:!0});var u=E(a);Q(l.$$.fragment,u),u.forEach(D),i=K(r),s=M(r,"SECTION",{title:!0,class:!0});var n=E(s);o=M(n,"H2",{class:!0});var g=E(o);f=le(g,"Get the data"),g.forEach(D),d=K(n),c=M(n,"P",{});var _=E(c);h=le(_,"Here, you can find information and links to the data."),_.forEach(D),n.forEach(D),this.h()},h(){v(a,"title","Related areas"),v(a,"class","svelte-r2srs5"),v(o,"class","ons-u-mt-xl"),v(s,"title","Get the data"),v(s,"class","svelte-r2srs5")},m(r,u){for(let n=0;n<p.length;n+=1)p[n]&&p[n].m(r,u);P(r,t,u),P(r,a,u),X(l,a,null),P(r,i,u),P(r,s,u),C(s,o),C(o,f),C(s,d),C(s,c),C(c,h),k=!0},p(r,u){if(u&119){m=r[4];let g;for(g=0;g<m.length;g+=1){const _=et(r,m,g);p[g]?(p[g].p(_,u),F(p[g],1)):(p[g]=tt(_),p[g].c(),F(p[g],1),p[g].m(t.parentNode,t))}for(Ve(),g=m.length;g<p.length;g+=1)S(g);Me()}const n={};u&1048576&&(n.$$scope={dirty:u,ctx:r}),l.$set(n)},i(r){if(!k){for(let u=0;u<m.length;u+=1)F(p[u]);F(l.$$.fragment,r),k=!0}},o(r){p=p.filter(Boolean);for(let u=0;u<p.length;u+=1)B(p[u]);B(l.$$.fragment,r),k=!1},d(r){ve(p,r),r&&D(t),r&&D(a),J(l),r&&D(i),r&&D(s)}}}function Ra(e){let t,a,l,i;return t=new Rt({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Le}/`},{label:"Find a local area",url:`${Le}/areas`},{label:e[3].areanm}],$$slots:{default:[Da]},$$scope:{ctx:e}}}),l=new Pt({props:{contentsLabel:"Explore this area",$$slots:{default:[ya]},$$scope:{ctx:e}}}),{c(){U(t.$$.fragment),a=O(),U(l.$$.fragment)},l(s){Q(t.$$.fragment,s),a=K(s),Q(l.$$.fragment,s)},m(s,o){X(t,s,o),P(s,a,o),X(l,s,o),i=!0},p(s,[o]){const f={};o&1048576&&(f.$$scope={dirty:o,ctx:s}),t.$set(f);const d={};o&1048583&&(d.$$scope={dirty:o,ctx:s}),l.$set(d)},i(s){i||(F(t.$$.fragment,s),F(l.$$.fragment,s),i=!0)},o(s){B(t.$$.fragment,s),B(l.$$.fragment,s),i=!1},d(s){J(t,s),s&&D(a),J(l,s)}}}function La(e,t,a){let l,{data:i}=t,s=ie("areas"),o=ie("areasGeogLevel");ie("areasGeogInfo");let f=ie("areasParentsLookup"),d=ie("indicators"),c=s.find(_=>_.areacd===i.areacd),h=[...new Set(d.map(_=>_.topic))],k={};h.forEach(_=>{a(1,k[_]=d.filter(w=>w.topic===_).map(w=>w.id),k)});let m=o.find(_=>_.areacd===c.areacd).level,p=o.filter(_=>["uk","country"].includes(m)?_.level===m:m==="region"?["region","country"].includes(_.level):m==="both"?["both","lower"].includes(_.level):["both",m].includes(_.level)).map(_=>_.areacd),S=f.find(_=>_.areacd===c.areacd),r=[];r.push({data:c,role:"main"}),r.push({data:s.find(_=>_.areacd===S.parentcd),role:"parent"}),S.countrycd!==null&S.parentcd!==S.countrycd&&r.push({data:s.find(_=>_.areacd===S.countrycd),role:"country"}),S.parentcd!=="K02000001"&&r.push({data:s.find(_=>_.areacd==="K02000001"),role:"uk"});const u=(_,w)=>k[_].includes(w.id),n=(_,w)=>k[_].includes(w.id);function g(_){l=_,a(2,l)}return e.$$set=_=>{"data"in _&&a(0,i=_.data)},console.log(o),a(2,l={main:!0,parent:!1,country:!1,uk:!1,neighbour:!1,cluster:!1,custom:null}),[i,k,l,c,h,p,r,u,n,g]}class Pa extends ue{constructor(t){super(),de(this,t,La,Ra,he,{data:0})}}export{Pa as component};
