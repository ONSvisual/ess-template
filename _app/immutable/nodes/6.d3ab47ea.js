//js
import{S as ie,i as se,s as oe,k as O,l as N,m as E,h as w,n as f,b as W,D as ne,x as Ye,q as te,a as U,y as x,r as le,c as Z,z as ae,W as Ae,C as I,A as $,u as pe,v as De,d as q,B as ee,f as Ie,g as K,U as ye,V as ce,I as Cl,K as Ll,L as Fl,M as Rl,F as z,G,p as he,w as _e,Q as ge,H as Oe,R as be,P as Tl,T as Qe,X as Se,e as we,Y as Wl,Z as Je,_ as lt,$ as je,a0 as Ue,E as at,o as Vl,a1 as tt,a2 as xe}from"../chunks/index.6a4f6cb0.js";import{b as Pe}from"../chunks/paths.9ac01811.js";import{T as Pl,H as Bl,S as Ol}from"../chunks/Subhead.b7dea8eb.js";import{l as Nl,s as Le,a as Ne,A as nt,H as zl,S as Gl,P as Hl}from"../chunks/HorizontalBeeswarmKey.a3b71583.js";import{t as qe,b as yl,e as $e,f as et,h as re}from"../chunks/config.09e429ba.js";import{S as Kl}from"../chunks/Select.56325261.js";function Yl(e){let t;return{c(){t=O("p"),this.h()},l(l){t=N(l,"P",{class:!0});var a=E(t);a.forEach(w),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){W(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ne,o:ne,d(l){l&&w(t)}}}function ql(e,t,l){let{mainAreaName:a,comparisonAreaName:n,differenceValue:i,comparisonValue:r,indicator:s,prefix:o,suffix:c,subTextShort:u,far:d,length:_}=t;Math.pow(10,s.roundingFactor);let p;return _==="short"?p=(i==0?"Equal":i>0?d?"Far above":"Above":d?"Far below":"Below")+" "+n+"-wide average"+(i==0?".":" ("+o+Math.abs(r).toLocaleString()+c+u+")."):_==="medium"&&(p=i==0?s.label+" in "+a+" is equal to the "+n+"-wide average.":s.label+" in "+a+" is "+o+Math.abs(i).toLocaleString()+c+" "+u+(i?" higher":" lower")+" than the "+n+"-wide average."),e.$$set=v=>{"mainAreaName"in v&&l(1,a=v.mainAreaName),"comparisonAreaName"in v&&l(2,n=v.comparisonAreaName),"differenceValue"in v&&l(3,i=v.differenceValue),"comparisonValue"in v&&l(4,r=v.comparisonValue),"indicator"in v&&l(5,s=v.indicator),"prefix"in v&&l(6,o=v.prefix),"suffix"in v&&l(7,c=v.suffix),"subTextShort"in v&&l(8,u=v.subTextShort),"far"in v&&l(9,d=v.far),"length"in v&&l(10,_=v.length)},[p,a,n,i,r,s,o,c,u,d,_]}let rt=class extends ie{constructor(t){super(),se(this,t,ql,Yl,oe,{mainAreaName:1,comparisonAreaName:2,differenceValue:3,comparisonValue:4,indicator:5,prefix:6,suffix:7,subTextShort:8,far:9,length:10})}};function jl(e){let t;return{c(){t=O("p"),this.h()},l(l){t=N(l,"P",{class:!0});var a=E(t);a.forEach(w),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){W(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ne,o:ne,d(l){l&&w(t)}}}function Ul(e,t,l){let{mainAreaName:a,comparisonAreaName:n,changeValue:i,changePercent:r,mainValue:s,mainValueInitial:o,indicator:c,prefix:u,suffix:d,subTextShort:_,length:p}=t,v;return p==="short"?c.changeSentence==="percent"?v=i===0?"No change from ":Math.abs(r)+"% "+(i>0?"increase":"descrease")+" from "+c.defaultInitialYear+" to "+c.latestYear+".":c.changeSentence==="absolute"?v=(i===0?"No change from":(i>0?"Rose by ":"Fell by ")+u+Math.abs(i.toFixed(c.roundingFactor))+d+_+" from ")+c.defaultInitialYear+" to "+c.latestYear+".":c.changeSentence==="both"&&(v=i===0?"No change between "+c.defaultInitialYear+" and "+c.latestYear+".":(i>0?"Rose from ":"Fell from ")+u+o+d+_+" in "+c.defaultInitialYear+" to "+u+s+d+_+" in "+c.latestYear+"."):p==="medium"&&(v=differenceValue==0?c.label+" in "+a+" is equal to the "+n+"-wide average.":c.label+" in "+a+" is "+u+Math.abs(differenceValue).toLocaleString()+d+" "+_+(differenceValue?" higher":" lower")+" than the "+n+"-wide average."),e.$$set=g=>{"mainAreaName"in g&&l(1,a=g.mainAreaName),"comparisonAreaName"in g&&l(2,n=g.comparisonAreaName),"changeValue"in g&&l(3,i=g.changeValue),"changePercent"in g&&l(4,r=g.changePercent),"mainValue"in g&&l(5,s=g.mainValue),"mainValueInitial"in g&&l(6,o=g.mainValueInitial),"indicator"in g&&l(7,c=g.indicator),"prefix"in g&&l(8,u=g.prefix),"suffix"in g&&l(9,d=g.suffix),"subTextShort"in g&&l(10,_=g.subTextShort),"length"in g&&l(11,p=g.length)},[v,a,n,i,r,s,o,c,u,d,_,p]}class it extends ie{constructor(t){super(),se(this,t,Ul,jl,oe,{mainAreaName:1,comparisonAreaName:2,changeValue:3,changePercent:4,mainValue:5,mainValueInitial:6,indicator:7,prefix:8,suffix:9,subTextShort:10,length:11})}}function Zl(e){let t,l;return{c(){t=O("p"),l=te(e[16]),this.h()},l(a){t=N(a,"P",{class:!0});var n=E(t);l=le(n,e[16]),n.forEach(w),this.h()},h(){f(t,"class","subText svelte-1i5rdk3")},m(a,n){W(a,t,n),I(t,l)},p:ne,d(a){a&&w(t)}}}function st(e){let t,l,a,n,i,r,s;var o=e[0].code in e[3]?e[3][e[0].code][0]:it;function c(u){return{props:{mainAreaName:u[5],comparisonAreaName:u[2],mainValue:u[4],mainValueInitial:u[10],changeValue:u[11],changePercent:u[12],indicator:u[0],prefix:u[14],suffix:u[15],subTextShort:u[17],length:"short"}}}return o&&(r=Ye(o,c(e))),{c(){t=O("div"),l=O("div"),a=O("p"),n=te(e[13]),i=U(),r&&x(r.$$.fragment),this.h()},l(u){t=N(u,"DIV",{class:!0});var d=E(t);l=N(d,"DIV",{class:!0});var _=E(l);a=N(_,"P",{class:!0});var p=E(a);n=le(p,e[13]),p.forEach(w),_.forEach(w),i=Z(d),r&&ae(r.$$.fragment,d),d.forEach(w),this.h()},h(){f(a,"class","svelte-1i5rdk3"),f(l,"class",Ae("headlineLabel "+(["Increasing","Falling"].includes(e[13])?null:e[13]==="Little change"?"headlineLabelOkay":e[13]==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1i5rdk3"),f(t,"class","flexV column3 svelte-1i5rdk3")},m(u,d){W(u,t,d),I(t,l),I(l,a),I(a,n),I(t,i),r&&$(r,t,null),s=!0},p(u,d){const _={};if(d&4&&(_.comparisonAreaName=u[2]),d&1&&(_.indicator=u[0]),d&1&&o!==(o=u[0].code in u[3]?u[3][u[0].code][0]:it)){if(r){De();const p=r;q(p.$$.fragment,1,0,()=>{ee(p,1)}),Ie()}o?(r=Ye(o,c(u)),x(r.$$.fragment),K(r.$$.fragment,1),$(r,t,null)):r=null}else o&&r.$set(_)},i(u){s||(r&&K(r.$$.fragment,u),s=!0)},o(u){r&&q(r.$$.fragment,u),s=!1},d(u){u&&w(t),r&&ee(r)}}}function Xl(e){let t,l,a,n=e[0].label+"",i,r,s,o,c,u,d=e[14]+parseFloat(e[4].toFixed(e[4]>100?0:1)).toLocaleString()+e[15]+"",_,p,v,g,A,h,m,b,y,k,D,T=e[16]!=""&&Zl(e);var M=e[0].code in e[3]?e[3][e[0].code][0]:rt;function F(R){return{props:{mainAreaName:R[5],comparisonAreaName:R[2],differenceValue:R[7],comparisonValue:R[6],indicator:R[0],prefix:R[14],suffix:R[15],subTextShort:R[17],far:R[8],length:"short"}}}M&&(y=Ye(M,F(e)));let V=e[1]!=null&&st(e);return{c(){t=O("div"),l=O("h3"),a=O("a"),i=te(n),s=U(),o=O("div"),c=O("div"),u=O("h4"),_=te(d),p=U(),T&&T.c(),v=U(),g=O("div"),A=O("div"),h=O("p"),m=te(e[9]),b=U(),y&&x(y.$$.fragment),k=U(),V&&V.c(),this.h()},l(R){t=N(R,"DIV",{class:!0});var P=E(t);l=N(P,"H3",{class:!0});var j=E(l);a=N(j,"A",{href:!0});var fe=E(a);i=le(fe,n),fe.forEach(w),j.forEach(w),s=Z(P),o=N(P,"DIV",{class:!0});var H=E(o);c=N(H,"DIV",{class:!0});var J=E(c);u=N(J,"H4",{class:!0});var Y=E(u);_=le(Y,d),Y.forEach(w),p=Z(J),T&&T.l(J),J.forEach(w),v=Z(H),g=N(H,"DIV",{class:!0});var S=E(g);A=N(S,"DIV",{class:!0});var X=E(A);h=N(X,"P",{class:!0});var C=E(h);m=le(C,e[9]),C.forEach(w),X.forEach(w),b=Z(S),y&&ae(y.$$.fragment,S),S.forEach(w),k=Z(H),V&&V.l(H),H.forEach(w),P.forEach(w),this.h()},h(){f(a,"href",r=Pe+"/indicators/"+e[0].code),f(l,"class","svelte-1i5rdk3"),f(u,"class","svelte-1i5rdk3"),f(c,"class","flexV column1 svelte-1i5rdk3"),f(h,"class","svelte-1i5rdk3"),f(A,"class",Ae("headlineLabel "+(["Above average","Below average"].includes(e[9])?null:e[9]==="Similar to average"?"headlineLabelOkay":e[9]==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1i5rdk3"),f(g,"class","flexV column2 svelte-1i5rdk3"),f(o,"class","flexH svelte-1i5rdk3"),f(t,"class","panelContainer svelte-1i5rdk3")},m(R,P){W(R,t,P),I(t,l),I(l,a),I(a,i),I(t,s),I(t,o),I(o,c),I(c,u),I(u,_),I(c,p),T&&T.m(c,null),I(o,v),I(o,g),I(g,A),I(A,h),I(h,m),I(g,b),y&&$(y,g,null),I(o,k),V&&V.m(o,null),D=!0},p(R,[P]){(!D||P&1)&&n!==(n=R[0].label+"")&&pe(i,n),(!D||P&1&&r!==(r=Pe+"/indicators/"+R[0].code))&&f(a,"href",r),R[16]!=""&&T.p(R,P);const j={};if(P&4&&(j.comparisonAreaName=R[2]),P&1&&(j.indicator=R[0]),P&1&&M!==(M=R[0].code in R[3]?R[3][R[0].code][0]:rt)){if(y){De();const fe=y;q(fe.$$.fragment,1,0,()=>{ee(fe,1)}),Ie()}M?(y=Ye(M,F(R)),x(y.$$.fragment),K(y.$$.fragment,1),$(y,g,null)):y=null}else M&&y.$set(j);R[1]!=null?V?(V.p(R,P),P&2&&K(V,1)):(V=st(R),V.c(),K(V,1),V.m(o,null)):V&&(De(),q(V,1,1,()=>{V=null}),Ie())},i(R){D||(y&&K(y.$$.fragment,R),K(V),D=!0)},o(R){y&&q(y.$$.fragment,R),q(V),D=!1},d(R){R&&w(t),T&&T.d(),y&&ee(y),V&&V.d()}}}function Ql(e,t,l){let{indicator:a,latestData:n,initialData:i,selectedAreas:r}=t,s=ye("areas"),o={},c=Math.pow(10,a.roundingFactor),u=n.find(Y=>Y.areacd===r.find(S=>S.role==="main").data.areacd),d=Math.round(u.value*c)/c,_=s.find(Y=>Y.areacd===u.areacd).areanm,p=n.filter(Y=>Y.areacd===r.find(S=>S.role==="country").data.areacd),v=n.filter(Y=>Y.areacd===r.find(S=>S.role==="uk").data.areacd),g=n.filter(Y=>Y.areacd===r.find(S=>S.role==="parent").data.areacd),A=p.length>0?p[0]:v.length>0?v[0]:g.length>0?g[0]:void 0,h=Math.round(A.value*c)/c,m=s.find(Y=>Y.areacd===A.areacd).areanm;m=m==="United Kingdom"?"UK":m;let b=d-h,y=a.code in qe?qe[a.code]:yl,k=Math.abs(b)/h<y[0]/100,D=Math.abs(b)/h>y[1]/100,T=k?$e.similar:d>h?$e.high[a.highEqualsGood]:$e.low[a.highEqualsGood],M=i===void 0?null:Math.round(i.find(Y=>Y.areacd===r.find(S=>S.role==="main").data.areacd).value*c)/c,F=d-M,V=Math.abs(F/M*100)<1?Math.round(F/M*1e3)/10:Math.round(F/M*100),P=Math.abs(V)<y[0]?et.similar:d>M?et.high[a.highEqualsGood]:et.low[a.highEqualsGood],j=a.prefix===null?"":a.prefix==="pounds"?"£":a.prefix,fe=a.suffix===null?"":a.suffix,H=a.subText===null?"":a.subText,J=a.subTextShort===null?"":a.subTextShort;return e.$$set=Y=>{"indicator"in Y&&l(0,a=Y.indicator),"latestData"in Y&&l(18,n=Y.latestData),"initialData"in Y&&l(1,i=Y.initialData),"selectedAreas"in Y&&l(19,r=Y.selectedAreas)},[a,i,m,o,d,_,h,b,D,T,M,F,V,P,j,fe,H,J,n,r]}class Jl extends ie{constructor(t){super(),se(this,t,Ql,Xl,oe,{indicator:0,latestData:18,initialData:1,selectedAreas:19})}}function ot(e,t,l){const a=e.slice();return a[7]=t[l],a}function ft(e){let t,l;function a(...i){return e[5](e[7],...i)}function n(...i){return e[6](e[7],...i)}return t=new Jl({props:{indicator:e[2].find(a),latestData:e[1].filter(n),initialData:e[3][e[7].code],selectedAreas:e[4]}}),{c(){x(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,r){$(t,i,r),l=!0},p(i,r){e=i;const s={};r&5&&(s.indicator=e[2].find(a)),r&3&&(s.latestData=e[1].filter(n)),r&9&&(s.initialData=e[3][e[7].code]),r&16&&(s.selectedAreas=e[4]),t.$set(s)},i(i){l||(K(t.$$.fragment,i),l=!0)},o(i){q(t.$$.fragment,i),l=!1},d(i){ee(t,i)}}}function xl(e){let t,l,a,n,i,r,s=e[0],o=[];for(let u=0;u<s.length;u+=1)o[u]=ft(ot(e,s,u));const c=u=>q(o[u],1,1,()=>{o[u]=null});return{c(){t=O("section"),l=O("h1"),a=te("Key indicators"),n=U(),i=O("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=N(u,"SECTION",{title:!0});var d=E(t);l=N(d,"H1",{});var _=E(l);a=le(_,"Key indicators"),_.forEach(w),n=Z(d),i=N(d,"DIV",{class:!0});var p=E(i);for(let v=0;v<o.length;v+=1)o[v].l(p);p.forEach(w),d.forEach(w),this.h()},h(){f(i,"class","rowsContainer"),f(t,"title","Key indicators")},m(u,d){W(u,t,d),I(t,l),I(l,a),I(t,n),I(t,i);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(i,null);r=!0},p(u,[d]){if(d&31){s=u[0];let _;for(_=0;_<s.length;_+=1){const p=ot(u,s,_);o[_]?(o[_].p(p,d),K(o[_],1)):(o[_]=ft(p),o[_].c(),K(o[_],1),o[_].m(i,null))}for(De(),_=s.length;_<o.length;_+=1)c(_);Ie()}},i(u){if(!r){for(let d=0;d<s.length;d+=1)K(o[d]);r=!0}},o(u){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)q(o[d]);r=!1},d(u){u&&w(t),ce(o,u)}}}function $l(e,t,l){let{areaKeyIndicators:a,latestData:n,trimmedIndicators:i,initialData:r,selectedAreas:s}=t;const o=(u,d)=>d.id===u.id,c=(u,d)=>d.codeId===u.id;return e.$$set=u=>{"areaKeyIndicators"in u&&l(0,a=u.areaKeyIndicators),"latestData"in u&&l(1,n=u.latestData),"trimmedIndicators"in u&&l(2,i=u.trimmedIndicators),"initialData"in u&&l(3,r=u.initialData),"selectedAreas"in u&&l(4,s=u.selectedAreas)},[a,n,i,r,s,o,c]}class ea extends ie{constructor(t){super(),se(this,t,$l,xl,oe,{areaKeyIndicators:0,latestData:1,trimmedIndicators:2,initialData:3,selectedAreas:4})}}function ut(e){let t,l,a,n,i,r,s,o,c,u,d;return{c(){t=O("summary"),l=O("h3"),a=te(e[1]),i=U(),r=O("span"),s=z("svg"),o=z("path"),this.h()},l(_){t=N(_,"SUMMARY",{class:!0});var p=E(t);l=N(p,"H3",{class:!0});var v=E(l);a=le(v,e[1]),v.forEach(w),i=Z(p),r=N(p,"SPAN",{class:!0});var g=E(r);s=G(g,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var A=E(s);o=G(A,"path",{class:!0,d:!0,transform:!0}),E(o).forEach(w),A.forEach(w),g.forEach(w),p.forEach(w),this.h()},h(){f(l,"class",n=Ae("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),f(o,"class",c=Ae(e[0]?" path_styling_override":"")+" svelte-lfupja"),f(o,"d",u=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),f(o,"transform",d=e[0]?null:"translate(-5.02 -1.59)"),f(s,"class","ons-svg-icon"),f(s,"viewBox","0 0 8 13"),f(s,"xmlns","http://www.w3.org/2000/svg"),f(s,"focusable","false"),f(r,"class","ons-collapsible__icon"),f(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(_,p){W(_,t,p),I(t,l),I(l,a),I(t,i),I(t,r),I(r,s),I(s,o)},p(_,p){p&2&&pe(a,_[1]),p&1&&n!==(n=Ae("ons-collapsible__title"+(_[0]?" title_styling_override":""))+" svelte-lfupja")&&f(l,"class",n),p&1&&c!==(c=Ae(_[0]?" path_styling_override":"")+" svelte-lfupja")&&f(o,"class",c),p&1&&u!==(u=_[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&f(o,"d",u),p&1&&d!==(d=_[0]?null:"translate(-5.02 -1.59)")&&f(o,"transform",d)},d(_){_&&w(t)}}}function ta(e){let t,l,a,n,i,r,s=!e[3]&&ut(e);const o=e[5].default,c=Cl(o,e,e[4],null);return{c(){t=O("details"),s&&s.c(),l=U(),a=O("div"),c&&c.c(),this.h()},l(u){t=N(u,"DETAILS",{class:!0});var d=E(t);s&&s.l(d),l=Z(d),a=N(d,"DIV",{class:!0});var _=E(a);c&&c.l(_),_.forEach(w),d.forEach(w),this.h()},h(){f(a,"class",n=Ae(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),f(t,"class",i=Ae("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(u,d){W(u,t,d),s&&s.m(t,null),I(t,l),I(t,a),c&&c.m(a,null),r=!0},p(u,[d]){u[3]?s&&(s.d(1),s=null):s?s.p(u,d):(s=ut(u),s.c(),s.m(t,l)),c&&c.p&&(!r||d&16)&&Ll(c,o,u,u[4],r?Rl(o,u[4],d,null):Fl(u[4]),null),(!r||d&5&&n!==(n=Ae(u[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(u[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&f(a,"class",n),(!r||d&1&&i!==(i=Ae("ons-collapsible ons-js-collapsible"+(u[0]?" details_styling_override":""))+" svelte-lfupja"))&&f(t,"class",i),(!r||d&8)&&(t.open=u[3])},i(u){r||(K(c,u),r=!0)},o(u){q(c,u),r=!1},d(u){u&&w(t),s&&s.d(),c&&c.d(u)}}}function la(e,t,l){let{$$slots:a={},$$scope:n}=t,{cross:i=!1}=t,{label:r="Label"}=t,{blank:s=!1}=t,{open:o=!1}=t;return e.$$set=c=>{"cross"in c&&l(0,i=c.cross),"label"in c&&l(1,r=c.label),"blank"in c&&l(2,s=c.blank),"open"in c&&l(3,o=c.open),"$$scope"in c&&l(4,n=c.$$scope)},[i,r,s,o,n,a]}class aa extends ie{constructor(t){super(),se(this,t,la,ta,oe,{cross:0,label:1,blank:2,open:3})}}function ct(e,t,l){const a=e.slice();return a[3]=t[l],a[5]=l,a}function na(e){let t,l;return{c(){t=z("circle"),this.h()},l(a){t=G(a,"circle",{r:!0,fill:!0,stroke:!0});var n=E(t);n.forEach(w),this.h()},h(){f(t,"r",He),f(t,"fill",l=re[e[3].role]),f(t,"stroke","white")},m(a,n){W(a,t,n)},p(a,n){n&1&&l!==(l=re[a[3].role])&&f(t,"fill",l)},d(a){a&&w(t)}}}function ra(e){let t,l,a;return{c(){t=z("rect"),this.h()},l(n){t=G(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=E(t);i.forEach(w),this.h()},h(){f(t,"transform",l=["country","uk"].includes(e[3].role)?"rotate(45)":null),f(t,"x",-He),f(t,"y",-He),f(t,"width",2*He),f(t,"height",2*He),f(t,"fill",a=re[e[3].role]),f(t,"stroke","white")},m(n,i){W(n,t,i)},p(n,i){i&1&&l!==(l=["country","uk"].includes(n[3].role)?"rotate(45)":null)&&f(t,"transform",l),i&1&&a!==(a=re[n[3].role])&&f(t,"fill",a)},d(n){n&&w(t)}}}function ht(e){let t,l,a,n,i,r,s=e[1].find(p).areanm+"",o,c;function u(v,g){return g&1&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(v[3].role)),n?ra:na}let d=u(e,-1),_=d(e);function p(...v){return e[2](e[3],...v)}return{c(){t=O("div"),l=z("svg"),a=z("g"),_.c(),i=U(),r=O("p"),o=te(s),c=U(),this.h()},l(v){t=N(v,"DIV",{class:!0});var g=E(t);l=G(g,"svg",{width:!0,height:!0});var A=E(l);a=G(A,"g",{transform:!0});var h=E(a);_.l(h),h.forEach(w),A.forEach(w),i=Z(g),r=N(g,"P",{style:!0,class:!0});var m=E(r);o=le(m,s),m.forEach(w),c=Z(g),g.forEach(w),this.h()},h(){f(a,"transform","translate(10,12)"),f(l,"width","20"),f(l,"height","24"),he(r,"color",re[e[3].role]),f(r,"class","svelte-1p5l8o2"),f(t,"class","roleContainer svelte-1p5l8o2")},m(v,g){W(v,t,g),I(t,l),I(l,a),_.m(a,null),I(t,i),I(t,r),I(r,o),I(t,c)},p(v,g){e=v,d===(d=u(e,g))&&_?_.p(e,g):(_.d(1),_=d(e),_&&(_.c(),_.m(a,null))),g&1&&s!==(s=e[1].find(p).areanm+"")&&pe(o,s),g&1&&he(r,"color",re[e[3].role])},d(v){v&&w(t),_.d()}}}function ia(e){let t,l=e[0],a=[];for(let n=0;n<l.length;n+=1)a[n]=ht(ct(e,l,n));return{c(){t=O("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){t=N(n,"DIV",{class:!0});var i=E(t);for(let r=0;r<a.length;r+=1)a[r].l(i);i.forEach(w),this.h()},h(){f(t,"class","keyContainer svelte-1p5l8o2")},m(n,i){W(n,t,i);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(t,null)},p(n,[i]){if(i&3){l=n[0];let r;for(r=0;r<l.length;r+=1){const s=ct(n,l,r);a[r]?a[r].p(s,i):(a[r]=ht(s),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}},i:ne,o:ne,d(n){n&&w(t),ce(a,n)}}}let He=6;function sa(e,t,l){let a=ye("areas"),{plottedAreas:n}=t;const i=(r,s)=>s.areacd===r.areacd;return e.$$set=r=>{"plottedAreas"in r&&l(0,n=r.plottedAreas)},[n,a,i]}class oa extends ie{constructor(t){super(),se(this,t,sa,ia,oe,{plottedAreas:0})}}function fa(e){let t,l,a,n,i,r,s,o,c;function u(h){e[39](h)}function d(h){e[40](h)}function _(h){e[41](h)}function p(h){e[42](h)}function v(h){e[43](h)}function g(h){e[44](h)}let A={id:e[2],container:e[3],items:e[4],placeholder:e[5],isMulti:e[10],isSearchable:e[6],groupBy:e[22],loadOptions:e[9],getSelectionLabel:e[12],getOptionLabel:e[21],itemFilter:e[19],ariaValues:e[25],ariaListOpen:e[26],ariaFocused:e[27],noOptionsMessage:e[20],indicatorSvg:e[23],containerStyles:e[24],optionIdentifier:e[8],showIndicator:!0,isClearable:e[7]?!e[10]:!1};return e[15]!==void 0&&(A.isFocused=e[15]),e[0]!==void 0&&(A.value=e[0]),e[16]!==void 0&&(A.listOpen=e[16]),e[1]!==void 0&&(A.filterText=e[1]),e[13]!==void 0&&(A.isWaiting=e[13]),e[17]!==void 0&&(A.handleClear=e[17]),l=new Kl({props:A}),_e.push(()=>ge(l,"isFocused",u)),_e.push(()=>ge(l,"value",d)),_e.push(()=>ge(l,"listOpen",_)),_e.push(()=>ge(l,"filterText",p)),_e.push(()=>ge(l,"isWaiting",v)),_e.push(()=>ge(l,"handleClear",g)),l.$on("select",e[28]),l.$on("clear",e[45]),l.$on("loaded",e[46]),l.$on("error",e[47]),{c(){t=O("div"),x(l.$$.fragment),this.h()},l(h){t=N(h,"DIV",{class:!0});var m=E(t);ae(l.$$.fragment,m),m.forEach(w),this.h()},h(){f(t,"class","selectbox svelte-1w33mjb"),Oe(t,"multi-selected",e[0]&&e[10]),Oe(t,"focused",e[15]),Oe(t,"selected",e[0]&&!e[16]&&!e[10]),he(t,"--borderColor",e[11]),he(t,"--firstItem",e[18](0)),he(t,"--secondItem",e[18](1)),he(t,"--thirdItem",e[18](2)),he(t,"--fourthItem",e[18](3))},m(h,m){W(h,t,m),$(l,t,null),e[48](t),c=!0},p(h,m){const b={};m[0]&4&&(b.id=h[2]),m[0]&8&&(b.container=h[3]),m[0]&16&&(b.items=h[4]),m[0]&32&&(b.placeholder=h[5]),m[0]&1024&&(b.isMulti=h[10]),m[0]&64&&(b.isSearchable=h[6]),m[0]&512&&(b.loadOptions=h[9]),m[0]&4096&&(b.getSelectionLabel=h[12]),m[0]&524288&&(b.itemFilter=h[19]),m[0]&1048576&&(b.noOptionsMessage=h[20]),m[0]&256&&(b.optionIdentifier=h[8]),m[0]&1152&&(b.isClearable=h[7]?!h[10]:!1),!a&&m[0]&32768&&(a=!0,b.isFocused=h[15],be(()=>a=!1)),!n&&m[0]&1&&(n=!0,b.value=h[0],be(()=>n=!1)),!i&&m[0]&65536&&(i=!0,b.listOpen=h[16],be(()=>i=!1)),!r&&m[0]&2&&(r=!0,b.filterText=h[1],be(()=>r=!1)),!s&&m[0]&8192&&(s=!0,b.isWaiting=h[13],be(()=>s=!1)),!o&&m[0]&131072&&(o=!0,b.handleClear=h[17],be(()=>o=!1)),l.$set(b),(!c||m[0]&1025)&&Oe(t,"multi-selected",h[0]&&h[10]),(!c||m[0]&32768)&&Oe(t,"focused",h[15]),(!c||m[0]&66561)&&Oe(t,"selected",h[0]&&!h[16]&&!h[10]),m[0]&2048&&he(t,"--borderColor",h[11]),m[0]&262144&&he(t,"--firstItem",h[18](0)),m[0]&262144&&he(t,"--secondItem",h[18](1)),m[0]&262144&&he(t,"--thirdItem",h[18](2)),m[0]&262144&&he(t,"--fourthItem",h[18](3))},i(h){c||(K(l.$$.fragment,h),c=!0)},o(h){q(l.$$.fragment,h),c=!1},d(h){h&&w(t),ee(l),e[48](null)}}}function ua(e,t,l){let a,n,i;const r='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',s='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',o=Tl();let{id:c=""}=t,{container:u=void 0}=t,{mode:d="default"}=t,{items:_}=t,{placeholder:p="Select one..."}=t,{value:v=null}=t,{filterText:g=""}=t,{isSearchable:A=!0}=t,{isClearable:h=!0}=t,{autoClear:m=!1}=t,{idKey:b="value"}=t,{labelKey:y="label"}=t,{groupKey:k=null}=t,{groupItems:D=!1}=t,{loadOptions:T=void 0}=t,{fontSize:M="1em"}=t,{height:F=42}=t,{isMulti:V=!1}=t,{maxSelected:R=4}=t,{colors:P=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=t,{darkMode:j=!1}=t,{borderColor:fe=j?"white":"#206095"}=t;const H=k&&!D?L=>`${L[y]} <span class="group">${L[k]}</span>`:L=>L[y];let{getSelectionLabel:J=L=>L?H(L):null}=t;const Y=D&&k?L=>L[k]:void 0,S=d=="search"?r:s,X=`--inputFontSize: ${M}; --groupTitleFontSize: ${M}; --height: ${F}px; font-size: ${M};`,C=L=>`${L}, selected.`,ue=(L,ve)=>`You are currently focused on ${L}. There are ${ve} results available.`,ke=()=>"Select is focused, type to refine list, press down to open the menu.";let de,Fe,Re,Ce,Me;const Be=L=>new Promise(ve=>setTimeout(ve,L));async function B(L){if(o("select",L.detail),m)Me();else if(h){await Be(10);let ve=de.getElementsByClassName("clearSelect")[0];ve&&(ve.tabIndex=0,ve.onkeypress=Ke=>{Ke.key=="Enter"&&Me()},ve.removeAttribute("aria-hidden"),ve.setAttribute("aria-label","Clear selection"))}}function Q(L){Fe=L,l(15,Fe)}function Te(L){v=L,l(0,v)}function me(L){Re=L,l(16,Re)}function We(L){g=L,l(1,g)}function Ze(L){Ce=L,l(13,Ce)}function Xe(L){Me=L,l(17,Me)}function Ee(L){Qe.call(this,e,L)}function ze(L){Qe.call(this,e,L)}function Ve(L){Qe.call(this,e,L)}function Ge(L){_e[L?"unshift":"push"](()=>{de=L,l(14,de)})}return e.$$set=L=>{"id"in L&&l(2,c=L.id),"container"in L&&l(3,u=L.container),"mode"in L&&l(29,d=L.mode),"items"in L&&l(4,_=L.items),"placeholder"in L&&l(5,p=L.placeholder),"value"in L&&l(0,v=L.value),"filterText"in L&&l(1,g=L.filterText),"isSearchable"in L&&l(6,A=L.isSearchable),"isClearable"in L&&l(7,h=L.isClearable),"autoClear"in L&&l(30,m=L.autoClear),"idKey"in L&&l(8,b=L.idKey),"labelKey"in L&&l(31,y=L.labelKey),"groupKey"in L&&l(32,k=L.groupKey),"groupItems"in L&&l(33,D=L.groupItems),"loadOptions"in L&&l(9,T=L.loadOptions),"fontSize"in L&&l(34,M=L.fontSize),"height"in L&&l(35,F=L.height),"isMulti"in L&&l(10,V=L.isMulti),"maxSelected"in L&&l(36,R=L.maxSelected),"colors"in L&&l(37,P=L.colors),"darkMode"in L&&l(38,j=L.darkMode),"borderColor"in L&&l(11,fe=L.borderColor),"getSelectionLabel"in L&&l(12,J=L.getSelectionLabel)},e.$$.update=()=>{e.$$.dirty[0]&536879106&&l(20,a=Ce?"Loading...":d=="search"&&g.length<3?"Enter 3 or more characters for suggestions":`No results match ${g}`),e.$$.dirty[0]&536870915|e.$$.dirty[1]&33&&l(19,n=Array.isArray(v)&&v.length>=R||d=="search"&&g.length<3?(L,ve,Ke)=>!1:(L,ve,Ke)=>`${Ke[y]}`.match(new RegExp(`\\b${ve}`,"i"))),e.$$.dirty[1]&64&&l(18,i=L=>P[L%P.length])},[v,g,c,u,_,p,A,h,b,T,V,fe,J,Ce,de,Fe,Re,Me,i,n,a,H,Y,S,X,C,ue,ke,B,d,m,y,k,D,M,F,R,P,j,Q,Te,me,We,Ze,Xe,Ee,ze,Ve,Ge]}class ca extends ie{constructor(t){super(),se(this,t,ua,fa,oe,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function ha(e){let t,l,a,n;function i(s){e[6](s)}let r={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:e[2],isMulti:!0,maxSelected:4,placeholder:e[1]=e[1]};return e[0].custom!==void 0&&(r.value=e[0].custom),l=new ca({props:r}),_e.push(()=>ge(l,"value",i)),l.$on("select",e[3]),{c(){t=O("form"),x(l.$$.fragment),this.h()},l(s){t=N(s,"FORM",{class:!0});var o=E(t);ae(l.$$.fragment,o),o.forEach(w),this.h()},h(){f(t,"class","svelte-a5e7yj")},m(s,o){W(s,t,o),$(l,t,null),n=!0},p(s,[o]){const c={};o&2&&(c.placeholder=s[1]=s[1]),!a&&o&1&&(a=!0,c.value=s[0].custom,be(()=>a=!1)),l.$set(c)},i(s){n||(K(l.$$.fragment,s),n=!0)},o(s){q(l.$$.fragment,s),n=!1},d(s){s&&w(t),ee(l)}}}function da(e,t,l){let{areasWithData:a,checkboxedRoles:n,selectedAreas:i,altText:r=""}=t,s=ye("areasParentsLookup"),o=ye("areas"),c=s.filter(_=>a.includes(_.areacd)&!i.map(p=>p.data.areacd).includes(_.areacd));c.forEach(_=>{_.areanm=o.find(p=>p.areacd===_.areacd).areanm,_.parentnm=o.find(p=>_.parentcd===p.areacd)===void 0?"":o.find(p=>_.parentcd===p.areacd).areanm});function u(_){_.detail&&_.detail}function d(_){e.$$.not_equal(n.custom,_)&&(n.custom=_,l(0,n))}return e.$$set=_=>{"areasWithData"in _&&l(4,a=_.areasWithData),"checkboxedRoles"in _&&l(0,n=_.checkboxedRoles),"selectedAreas"in _&&l(5,i=_.selectedAreas),"altText"in _&&l(1,r=_.altText)},[n,r,c,u,a,i,d]}class _a extends ie{constructor(t){super(),se(this,t,da,ha,oe,{areasWithData:4,checkboxedRoles:0,selectedAreas:5,altText:1})}}function dt(e,t,l){const a=e.slice();return a[10]=t[l],a[11]=t,a[12]=l,a}function _t(e,t,l){const a=e.slice();return a[10]=t[l],a[13]=t,a[12]=l,a}function mt(e){let t,l,a=e[10].data.areanm+"",n,i,r;function s(){e[6].call(l,e[10])}return{c(){t=O("label"),l=O("input"),n=te(a),this.h()},l(o){t=N(o,"LABEL",{class:!0});var c=E(t);l=N(c,"INPUT",{type:!0,class:!0}),n=le(c,a),c.forEach(w),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(o,c){W(o,t,c),I(t,l),l.checked=e[0][e[10].role],I(t,n),i||(r=Se(l,"change",s),i=!0)},p(o,c){e=o,c&3&&(l.checked=e[0][e[10].role]),c&2&&a!==(a=e[10].data.areanm+"")&&pe(n,a)},d(o){o&&w(t),i=!1,r()}}}function gt(e){let t,l,a,n,i=["neighbour","cluster"],r=[];for(let s=0;s<2;s+=1)r[s]=bt(dt(e,i,s));return{c(){t=O("p"),l=te("Related areas"),a=U();for(let s=0;s<2;s+=1)r[s].c();n=we(),this.h()},l(s){t=N(s,"P",{class:!0});var o=E(t);l=le(o,"Related areas"),o.forEach(w),a=Z(s);for(let c=0;c<2;c+=1)r[c].l(s);n=we(),this.h()},h(){f(t,"class","svelte-thy20g")},m(s,o){W(s,t,o),I(t,l),W(s,a,o);for(let c=0;c<2;c+=1)r[c]&&r[c].m(s,o);W(s,n,o)},p(s,o){if(o&33){i=["neighbour","cluster"];let c;for(c=0;c<2;c+=1){const u=dt(s,i,c);r[c]?r[c].p(u,o):(r[c]=bt(u),r[c].c(),r[c].m(n.parentNode,n))}for(;c<2;c+=1)r[c].d(1)}},d(s){s&&w(t),s&&w(a),ce(r,s),s&&w(n)}}}function bt(e){let t,l,a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas",n,i,r,s;function o(){e[7].call(l,e[10])}return{c(){t=O("label"),l=O("input"),n=te(a),i=U(),this.h()},l(c){t=N(c,"LABEL",{class:!0});var u=E(t);l=N(u,"INPUT",{type:!0,class:!0}),n=le(u,a),i=Z(u),u.forEach(w),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(c,u){W(c,t,u),I(t,l),l.checked=e[0][e[10]],I(t,n),I(t,i),r||(s=Se(l,"change",o),r=!0)},p(c,u){e=c,u&1&&(l.checked=e[0][e[10]]),u&32&&a!==(a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas")&&pe(n,a)},d(c){c&&w(t),r=!1,s()}}}function ma(e){let t,l,a,n,i,r,s,o,c,u=e[1],d=[];for(let g=0;g<u.length;g+=1)d[g]=mt(_t(e,u,g));let _=e[3]&&gt(e);function p(g){e[8](g)}let v={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(v.checkboxedRoles=e[0]),s=new _a({props:v}),_e.push(()=>ge(s,"checkboxedRoles",p)),{c(){t=O("div"),l=O("p"),a=te("Parent areas"),n=U();for(let g=0;g<d.length;g+=1)d[g].c();i=U(),_&&_.c(),r=U(),x(s.$$.fragment),this.h()},l(g){t=N(g,"DIV",{class:!0});var A=E(t);l=N(A,"P",{class:!0});var h=E(l);a=le(h,"Parent areas"),h.forEach(w),n=Z(A);for(let m=0;m<d.length;m+=1)d[m].l(A);i=Z(A),_&&_.l(A),r=Z(A),ae(s.$$.fragment,A),A.forEach(w),this.h()},h(){f(l,"class","svelte-thy20g"),f(t,"class","comparisonInputContainer svelte-thy20g")},m(g,A){W(g,t,A),I(t,l),I(l,a),I(t,n);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(t,null);I(t,i),_&&_.m(t,null),I(t,r),$(s,t,null),c=!0},p(g,A){if(A&3){u=g[1];let m;for(m=0;m<u.length;m+=1){const b=_t(g,u,m);d[m]?d[m].p(b,A):(d[m]=mt(b),d[m].c(),d[m].m(t,i))}for(;m<d.length;m+=1)d[m].d(1);d.length=u.length}g[3]?_?_.p(g,A):(_=gt(g),_.c(),_.m(t,r)):_&&(_.d(1),_=null);const h={};A&2&&(h.selectedAreas=g[1]),A&4&&(h.areasWithData=g[2]),!o&&A&1&&(o=!0,h.checkboxedRoles=g[0],be(()=>o=!1)),s.$set(h)},i(g){c||(K(s.$$.fragment,g),c=!0)},o(g){q(s.$$.fragment,g),c=!1},d(g){g&&w(t),ce(d,g),_&&_.d(),ee(s)}}}function ga(e){let t,l,a;return l=new aa({props:{label:"Add areas to compare to "+e[4],open:ba,$$slots:{default:[ma]},$$scope:{ctx:e}}}),{c(){t=O("div"),x(l.$$.fragment),this.h()},l(n){t=N(n,"DIV",{class:!0});var i=E(t);ae(l.$$.fragment,i),i.forEach(w),this.h()},h(){f(t,"class",Ae("twisty-container")+" svelte-thy20g")},m(n,i){W(n,t,i),$(l,t,null),a=!0},p(n,[i]){const r={};i&16&&(r.label="Add areas to compare to "+n[4]),i&16431&&(r.$$scope={dirty:i,ctx:n}),l.$set(r)},i(n){a||(K(l.$$.fragment,n),a=!0)},o(n){q(l.$$.fragment,n),a=!1},d(n){n&&w(t),ee(l)}}}let ba=!1;function va(e,t,l){let{selectedAreas:a,areasWithData:n,checkboxedRoles:i,includeSiblings:r=!0,selectedArea:s,parentArea:o}=t;a.map(_=>_.role);function c(_){i[_.role]=this.checked,l(0,i)}function u(_){i[_]=this.checked,l(0,i)}function d(_){i=_,l(0,i)}return e.$$set=_=>{"selectedAreas"in _&&l(1,a=_.selectedAreas),"areasWithData"in _&&l(2,n=_.areasWithData),"checkboxedRoles"in _&&l(0,i=_.checkboxedRoles),"includeSiblings"in _&&l(3,r=_.includeSiblings),"selectedArea"in _&&l(4,s=_.selectedArea),"parentArea"in _&&l(5,o=_.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&console.log(a)},[i,a,n,r,s,o,c,u,d]}class wl extends ie{constructor(t){super(),se(this,t,va,ga,oe,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function vt(e,t,l){const a=e.slice();return a[5]=t[l],a[7]=l,a}function pt(e){let t,l;return{c(){t=O("p"),l=te("Compare..."),this.h()},l(a){t=N(a,"P",{class:!0});var n=E(t);l=le(n,"Compare..."),n.forEach(w),this.h()},h(){f(t,"class","svelte-46qqxz")},m(a,n){W(a,t,n),I(t,l)},d(a){a&&w(t)}}}function kt(e){let t,l,a,n,i,r=e[5].toLowerCase()+"",s,o,c,u,d,_;return u=Wl(e[4][0]),{c(){t=O("label"),l=O("input"),a=U(),n=O("div"),i=O("p"),s=te(r),c=U(),this.h()},l(p){t=N(p,"LABEL",{});var v=E(t);l=N(v,"INPUT",{style:!0,type:!0,name:!0}),a=Z(v),n=N(v,"DIV",{class:!0,style:!0});var g=E(n);i=N(g,"P",{class:!0});var A=E(i);s=le(A,r),A.forEach(w),g.forEach(w),c=Z(v),v.forEach(w),this.h()},h(){he(l,"display","none"),f(l,"type","radio"),l.__value=e[7]+1,l.value=l.__value,f(l,"name","chosenChart"),f(i,"class","svelte-46qqxz"),f(n,"class","optionLabel svelte-46qqxz"),f(n,"style",o="background-color: "+(e[0]===e[7]+1?"white":"#d4d4d4")),u.p(l)},m(p,v){W(p,t,v),I(t,l),l.checked=l.__value===e[0],I(t,a),I(t,n),I(n,i),I(i,s),I(t,c),d||(_=Se(l,"change",e[3]),d=!0)},p(p,v){v&3&&(l.checked=l.__value===p[0]),v&2&&r!==(r=p[5].toLowerCase()+"")&&pe(s,r),v&1&&o!==(o="background-color: "+(p[0]===p[7]+1?"white":"#d4d4d4"))&&f(n,"style",o)},d(p){p&&w(t),u.r(),d=!1,_()}}}function pa(e){let t,l,a=e[2]&&pt(),n=e[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=kt(vt(e,n,r));return{c(){t=O("div"),a&&a.c(),l=U();for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=N(r,"DIV",{class:!0});var s=E(t);a&&a.l(s),l=Z(s);for(let o=0;o<i.length;o+=1)i[o].l(s);s.forEach(w),this.h()},h(){f(t,"class","radioContainer svelte-46qqxz")},m(r,s){W(r,t,s),a&&a.m(t,null),I(t,l);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null)},p(r,[s]){if(r[2]?a||(a=pt(),a.c(),a.m(t,l)):a&&(a.d(1),a=null),s&3){n=r[1];let o;for(o=0;o<n.length;o+=1){const c=vt(r,n,o);i[o]?i[o].p(c,s):(i[o]=kt(c),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:ne,o:ne,d(r){r&&w(t),a&&a.d(),ce(i,r)}}}function ka(e,t,l){let{optionsArray:a,chosenChart:n,compareIntroText:i=!0}=t;const r=[[]];function s(){n=this.__value,l(0,n)}return e.$$set=o=>{"optionsArray"in o&&l(1,a=o.optionsArray),"chosenChart"in o&&l(0,n=o.chosenChart),"compareIntroText"in o&&l(2,i=o.compareIntroText)},[n,a,i,s,r]}class Al extends ie{constructor(t){super(),se(this,t,ka,pa,oe,{optionsArray:1,chosenChart:0,compareIntroText:2})}}function yt(e,t,l){const a=e.slice();return a[11]=t[l],a[13]=l,a}function wt(e){let t,l=e[4],a=[];for(let n=0;n<l.length;n+=1)a[n]=At(yt(e,l,n));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();t=we()},l(n){for(let i=0;i<a.length;i+=1)a[i].l(n);t=we()},m(n,i){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(n,i);W(n,t,i)},p(n,i){if(i&114){l=n[4];let r;for(r=0;r<l.length;r+=1){const s=yt(n,l,r);a[r]?a[r].p(s,i):(a[r]=At(s),a[r].c(),a[r].m(t.parentNode,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}},d(n){ce(a,n),n&&w(t)}}}function At(e){let t,l,a,n,i,r=e[5]+e[11].toLocaleString()+e[6]+"",s,o;return{c(){t=z("g"),l=z("line"),i=z("text"),s=te(r),this.h()},l(c){t=G(c,"g",{class:!0});var u=E(t);l=G(u,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),E(l).forEach(w),i=G(u,"text",{"text-anchor":!0,x:!0,y:!0,stroke:!0,fill:!0,"font-size":!0});var d=E(i);s=le(d,r),d.forEach(w),u.forEach(w),this.h()},h(){f(l,"x1","0"),f(l,"x2","-8"),f(l,"y1",a=e[1](e[11])),f(l,"y2",n=e[1](e[11])),f(l,"stroke","black"),f(i,"text-anchor","end"),f(i,"x",-10),f(i,"y",o=e[1](e[11])+5),f(i,"stroke","none"),f(i,"fill","#333"),f(i,"font-size","14px"),f(t,"class","tick")},m(c,u){W(c,t,u),I(t,l),I(t,i),I(i,s)},p(c,u){u&18&&a!==(a=c[1](c[11]))&&f(l,"y1",a),u&18&&n!==(n=c[1](c[11]))&&f(l,"y2",n),u&16&&r!==(r=c[5]+c[11].toLocaleString()+c[6]+"")&&pe(s,r),u&18&&o!==(o=c[1](c[11])+5)&&f(i,"y",o)},d(c){c&&w(t)}}}function ya(e){let t,l,a,n,i,r=e[3]==0&&wt(e);return{c(){t=z("g"),l=z("line"),r&&r.c(),this.h()},l(s){t=G(s,"g",{class:!0,transform:!0});var o=E(t);l=G(o,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),E(l).forEach(w),r&&r.l(o),o.forEach(w),this.h()},h(){f(l,"x1","0"),f(l,"x2","0"),f(l,"y1",a=e[1](e[0][1])),f(l,"y2",n=e[1](e[0][0])),f(l,"stroke","black"),f(t,"class","yAxis"),f(t,"transform",i="translate("+-e[2]+",0)")},m(s,o){W(s,t,o),I(t,l),r&&r.m(t,null)},p(s,[o]){o&3&&a!==(a=s[1](s[0][1]))&&f(l,"y1",a),o&3&&n!==(n=s[1](s[0][0]))&&f(l,"y2",n),s[3]==0?r?r.p(s,o):(r=wt(s),r.c(),r.m(t,null)):r&&(r.d(1),r=null),o&4&&i!==(i="translate("+-s[2]+",0)")&&f(t,"transform",i)},i:ne,o:ne,d(s){s&&w(t),r&&r.d()}}}function wa(e,t,l){let a,n,i,{yDomain:r,y:s,yAxisOffset:o=0,column:c=0,indicator:u}=t,d=[],_=u.prefix===null?"":u.prefix==="pounds"?"£":u.prefix,p=u.suffix===null?"":u.suffix;return e.$$set=v=>{"yDomain"in v&&l(0,r=v.yDomain),"y"in v&&l(1,s=v.y),"yAxisOffset"in v&&l(2,o=v.yAxisOffset),"column"in v&&l(3,c=v.column),"indicator"in v&&l(7,u=v.indicator)},e.$$.update=()=>{if(e.$$.dirty&1&&l(10,a=Math.abs(r[1]-r[0])),e.$$.dirty&1024&&l(9,n=10**Math.floor(Math.log10(a))),e.$$.dirty&1536&&l(8,i=a/n<=1.5?n/5:a/n<=3?n/2:a/n<=6?n:n*2),e.$$.dirty&273){l(4,d=[]);for(let v=Math.ceil(r[0]);v<=Math.floor(r[1]);v++)v%i==0&&d.push(v)}},[r,s,o,c,d,_,p,u,i,n,a]}class Dl extends ie{constructor(t){super(),se(this,t,wa,ya,oe,{yDomain:0,y:1,yAxisOffset:2,column:3,indicator:7})}}function Dt(e,t,l){const a=e.slice();return a[8]=t[l],a[10]=l,a}function It(e){let t,l,a,n;return{c(){t=z("line"),this.h()},l(i){t=G(i,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),E(t).forEach(w),this.h()},h(){f(t,"y1","0"),f(t,"y2",l=-e[3]),f(t,"x1",a=e[1](e[8])),f(t,"x2",n=e[1](e[8])),f(t,"stroke","black"),f(t,"opacity","0.1")},m(i,r){W(i,t,r)},p(i,r){r&8&&l!==(l=-i[3])&&f(t,"y2",l),r&2&&a!==(a=i[1](i[8]))&&f(t,"x1",a),r&2&&n!==(n=i[1](i[8]))&&f(t,"x2",n)},d(i){i&&w(t)}}}function Et(e){let t,l,a,n,i,r=e[8]+"",s,o,c=e[4]&&It(e);return{c(){t=z("g"),l=z("line"),i=z("text"),s=te(r),c&&c.c(),this.h()},l(u){t=G(u,"g",{class:!0});var d=E(t);l=G(d,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),E(l).forEach(w),i=G(d,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var _=E(i);s=le(_,r),_.forEach(w),c&&c.l(d),d.forEach(w),this.h()},h(){f(l,"y1","0"),f(l,"y2","8"),f(l,"x1",a=e[1](e[8])),f(l,"x2",n=e[1](e[8])),f(l,"stroke","black"),f(i,"text-anchor","middle"),f(i,"y",20),f(i,"x",o=e[1](e[8])),f(i,"stroke","none"),f(i,"fill","#333"),f(i,"font-size","14px"),f(t,"class","tick")},m(u,d){W(u,t,d),I(t,l),I(t,i),I(i,s),c&&c.m(t,null)},p(u,d){d&2&&a!==(a=u[1](u[8]))&&f(l,"x1",a),d&2&&n!==(n=u[1](u[8]))&&f(l,"x2",n),d&2&&o!==(o=u[1](u[8]))&&f(i,"x",o),u[4]?c?c.p(u,d):(c=It(u),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},d(u){u&&w(t),c&&c.d()}}}function Aa(e){let t,l,a,n,i,r=e[5],s=[];for(let o=0;o<r.length;o+=1)s[o]=Et(Dt(e,r,o));return{c(){t=z("g"),l=z("line");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=G(o,"g",{class:!0,transform:!0});var c=E(t);l=G(c,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),E(l).forEach(w);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(w),this.h()},h(){f(l,"y1","0"),f(l,"y2","0"),f(l,"x1",a=e[1](e[0][0])),f(l,"x2",n=e[1](e[0][1])),f(l,"stroke","black"),f(t,"class","xAxis"),f(t,"transform",i="translate(0,"+(e[2]+e[3])+")")},m(o,c){W(o,t,c),I(t,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null)},p(o,[c]){if(c&3&&a!==(a=o[1](o[0][0]))&&f(l,"x1",a),c&3&&n!==(n=o[1](o[0][1]))&&f(l,"x2",n),c&58){r=o[5];let u;for(u=0;u<r.length;u+=1){const d=Dt(o,r,u);s[u]?s[u].p(d,c):(s[u]=Et(d),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}c&12&&i!==(i="translate(0,"+(o[2]+o[3])+")")&&f(t,"transform",i)},i:ne,o:ne,d(o){o&&w(t),ce(s,o)}}}function Da(e,t,l){let{xDomain:a,x:n,xAxisOffset:i=0,chartHeight:r,gridlines:s=!1}=t,o=Math.abs(a[1]-a[0]),c=o>=15?5:o>=6?2:1,u=[];for(let d=Math.floor(a[0]);d<=Math.ceil(a[1]);d++)d%c==0&&u.push(d);return e.$$set=d=>{"xDomain"in d&&l(0,a=d.xDomain),"x"in d&&l(1,n=d.x),"xAxisOffset"in d&&l(2,i=d.xAxisOffset),"chartHeight"in d&&l(3,r=d.chartHeight),"gridlines"in d&&l(4,s=d.gridlines)},[a,n,i,r,s,u]}class Ia extends ie{constructor(t){super(),se(this,t,Da,Aa,oe,{xDomain:0,x:1,xAxisOffset:2,chartHeight:3,gridlines:4})}}function St(e,t,l){const a=e.slice();return a[12]=t[l],a[14]=l,a}function Mt(e){let t,l=e[2],a=[];for(let n=0;n<l.length;n+=1)a[n]=Ct(St(e,l,n));return{c(){t=z("g");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){t=G(n,"g",{class:!0});var i=E(t);for(let r=0;r<a.length;r+=1)a[r].l(i);i.forEach(w),this.h()},h(){f(t,"class","pointsContainer")},m(n,i){W(n,t,i);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(t,null)},p(n,i){if(i&125){l=n[2];let r;for(r=0;r<l.length;r+=1){const s=St(n,l,r);a[r]?a[r].p(s,i):(a[r]=Ct(s),a[r].c(),a[r].m(t,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}},d(n){n&&w(t),ce(a,n)}}}function Ea(e){let t,l;return{c(){t=z("circle"),this.h()},l(a){t=G(a,"circle",{r:!0,fill:!0,stroke:!0});var n=E(t);n.forEach(w),this.h()},h(){f(t,"r","3.5"),f(t,"fill",l=e[0]===e[3]?"#F39431":re[e[6].role]),f(t,"stroke","white")},m(a,n){W(a,t,n)},p(a,n){n&73&&l!==(l=a[0]===a[3]?"#F39431":re[a[6].role])&&f(t,"fill",l)},d(a){a&&w(t)}}}function Sa(e){let t,l,a;return{c(){t=z("rect"),this.h()},l(n){t=G(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=E(t);i.forEach(w),this.h()},h(){f(t,"transform",l=["country","uk"].includes(e[6].role)?"rotate(45)":null),f(t,"x","-3"),f(t,"y","-3"),f(t,"width","6"),f(t,"height","6"),f(t,"fill",a=e[0]===e[3]?"#F39431":re[e[6].role]),f(t,"stroke","white")},m(n,i){W(n,t,i)},p(n,i){i&64&&l!==(l=["country","uk"].includes(n[6].role)?"rotate(45)":null)&&f(t,"transform",l),i&73&&a!==(a=n[0]===n[3]?"#F39431":re[n[6].role])&&f(t,"fill",a)},d(n){n&&w(t)}}}function Ct(e){let t,l,a;function n(s,o){return o&64&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[6].role)),l?Sa:Ea}let i=n(e,-1),r=i(e);return{c(){t=z("g"),r.c(),this.h()},l(s){t=G(s,"g",{transform:!0});var o=E(t);r.l(o),o.forEach(w),this.h()},h(){f(t,"transform",a="translate("+e[4](e[12].year)+","+e[5](e[12].value)+")")},m(s,o){W(s,t,o),r.m(t,null)},p(s,o){i===(i=n(s,o))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(t,null))),o&52&&a!==(a="translate("+s[4](s[12].year)+","+s[5](s[12].value)+")")&&f(t,"transform",a)},d(s){s&&w(t),r.d()}}}function Ma(e){let t,l,a,n,i,r,s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1],o,c,u,d=s&&Mt(e);return{c(){t=z("g"),l=z("path"),d&&d.c(),this.h()},l(_){t=G(_,"g",{class:!0,opacity:!0});var p=E(t);l=G(p,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0,hoverid:!0}),E(l).forEach(w),d&&d.l(p),p.forEach(w),this.h()},h(){f(l,"d",a=e[7](e[2])),f(l,"fill","none"),f(l,"stroke",n=e[0]===e[3]?"#F39431":re[e[6].role]),f(l,"stroke-width",i=e[1]?"16px":"2px"),f(l,"opacity",r=e[1]?0:e[0]===e[3]||e[10]?1:.25),f(l,"hoverid",e[3]),f(t,"class","lineContainer"),f(t,"opacity",o=e[0]===e[3]||e[0]===null?1:.25)},m(_,p){W(_,t,p),I(t,l),d&&d.m(t,null),c||(u=[Se(l,"mouseover",function(){Je(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)}),Se(l,"mouseleave",function(){Je(e[1]?e[9]:null)&&(e[1]?e[9]:null).apply(this,arguments)}),Se(l,"focus",function(){Je(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)})],c=!0)},p(_,[p]){e=_,p&132&&a!==(a=e[7](e[2]))&&f(l,"d",a),p&73&&n!==(n=e[0]===e[3]?"#F39431":re[e[6].role])&&f(l,"stroke",n),p&2&&i!==(i=e[1]?"16px":"2px")&&f(l,"stroke-width",i),p&11&&r!==(r=e[1]?0:e[0]===e[3]||e[10]?1:.25)&&f(l,"opacity",r),p&8&&f(l,"hoverid",e[3]),p&75&&(s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1]),s?d?d.p(e,p):(d=Mt(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null),p&9&&o!==(o=e[0]===e[3]||e[0]===null?1:.25)&&f(t,"opacity",o)},i:ne,o:ne,d(_){_&&w(t),d&&d.d(),c=!1,lt(u)}}}function Ca(e,t,l){let a,{overlay:n=!1,lineData:i,i:r,hoverIndex:s,x:o,y:c,xDomain:u,area:d}=t;function _(g){l(0,s=parseFloat(Le(this).attr("hoverid")))}function p(g){l(0,s=null)}let v=["main","parent","country","uk","custom1","custom2","custom3","custom4"];return e.$$set=g=>{"overlay"in g&&l(1,n=g.overlay),"lineData"in g&&l(2,i=g.lineData),"i"in g&&l(3,r=g.i),"hoverIndex"in g&&l(0,s=g.hoverIndex),"x"in g&&l(4,o=g.x),"y"in g&&l(5,c=g.y),"xDomain"in g&&l(11,u=g.xDomain),"area"in g&&l(6,d=g.area)},e.$$.update=()=>{e.$$.dirty&48&&l(7,a=Nl().x(g=>o(g.year)).y(g=>c(g.value)))},[s,n,i,r,o,c,d,a,_,p,v,u]}class Il extends ie{constructor(t){super(),se(this,t,Ca,Ma,oe,{overlay:1,lineData:2,i:3,hoverIndex:0,x:4,y:5,xDomain:11,area:6})}}function Lt(e,t,l){const a=e.slice();return a[3]=t[l],a}function Ft(e){let t,l=e[3].datum.areanm+"",a,n,i,r=e[3].datum.areanm+"",s,o,c,u;return{c(){t=z("text"),a=te(l),i=z("text"),s=te(r),this.h()},l(d){t=G(d,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var _=E(t);a=le(_,l),_.forEach(w),i=G(d,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var p=E(i);s=le(p,r),p.forEach(w),this.h()},h(){f(t,"y",n=e[3].y+8),f(t,"font-size","16px"),f(t,"fill","white"),f(t,"stroke","white"),f(t,"stroke-width","4px"),f(i,"y",o=e[3].y+8),f(i,"font-size","16px"),f(i,"fill",c=e[2]!=null?"#F39431":re[e[3].datum.role]),f(i,"stroke",u=e[2]!=null?"#F39431":re[e[3].datum.role]),f(i,"stroke-width","0.5px")},m(d,_){W(d,t,_),I(t,a),W(d,i,_),I(i,s)},p(d,_){_&2&&l!==(l=d[3].datum.areanm+"")&&pe(a,l),_&2&&n!==(n=d[3].y+8)&&f(t,"y",n),_&2&&r!==(r=d[3].datum.areanm+"")&&pe(s,r),_&2&&o!==(o=d[3].y+8)&&f(i,"y",o),_&6&&c!==(c=d[2]!=null?"#F39431":re[d[3].datum.role])&&f(i,"fill",c),_&6&&u!==(u=d[2]!=null?"#F39431":re[d[3].datum.role])&&f(i,"stroke",u)},d(d){d&&w(t),d&&w(i)}}}function La(e){let t,l,a=e[1],n=[];for(let i=0;i<a.length;i+=1)n[i]=Ft(Lt(e,a,i));return{c(){t=z("g");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){t=G(i,"g",{class:!0,transform:!0});var r=E(t);for(let s=0;s<n.length;s+=1)n[s].l(r);r.forEach(w),this.h()},h(){f(t,"class","labelsContainer"),f(t,"transform",l="translate("+e[0]+",0)")},m(i,r){W(i,t,r);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(i,[r]){if(r&6){a=i[1];let s;for(s=0;s<a.length;s+=1){const o=Lt(i,a,s);n[s]?n[s].p(o,r):(n[s]=Ft(o),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=a.length}r&1&&l!==(l="translate("+i[0]+",0)")&&f(t,"transform",l)},i:ne,o:ne,d(i){i&&w(t),ce(n,i)}}}function Fa(e,t,l){let{x:a,labelPlacements:n,hoverIndex:i}=t;return e.$$set=r=>{"x"in r&&l(0,a=r.x),"labelPlacements"in r&&l(1,n=r.labelPlacements),"hoverIndex"in r&&l(2,i=r.hoverIndex)},[a,n,i]}class El extends ie{constructor(t){super(),se(this,t,Fa,La,oe,{x:0,labelPlacements:1,hoverIndex:2})}}function Sl(e,t,l,a){e=e.map(i=>({targetY:l(i),y:l(i),height:a(i),datum:i})),e.sort((i,r)=>i.targetY-r.targetY);const n=[];for(const i of e){const r={data:[i]};for(Rt(r,t),n.push(r);n.length>1&&n[n.length-2].hi>n[n.length-1].lo;){const s=n.pop(),o=n[n.length-1];o.data.push(...s.data),Rt(o,t)}}return n.map(i=>i.data).flat()}function Rt(e,t){const l=Ta(e.data),a=Ra(e.data,l);e.lo=a-l/2,e.lo<t[0]?e.lo=t[0]:e.lo>t[1]-l&&(e.lo=t[1]-l),e.hi=e.lo+l,Ml(e.data,e.lo,(n,i)=>{n.y=i})}function Ra(e,t){const l=[];return Ml(e,-t/2,(a,n)=>{l.push({val:a.targetY-n,weight:1/a.height})}),Wa(l)}function Ml(e,t,l){let a=t;for(const n of e)a+=n.height/2,l(n,a),a+=n.height/2}function Ta(e){let t=0;for(const l of e)t+=l.height;return t}function Wa(e){let t=0,l=0;for(const a of e)t+=a.val*a.weight,l+=a.weight;return t/l}function Tt(e,t,l){const a=e.slice();return a[23]=t[l],a[25]=l,a}function Wt(e,t,l){const a=e.slice();return a[23]=t[l],a[25]=l,a}function Vt(e){let t,l;function a(...n){return e[15](e[23],...n)}return t=new Il({props:{area:e[23],lineData:e[1].filter(a),i:e[25],hoverIndex:e[6],x:e[12],y:e[7],xDomain:e[10]}}),{c(){x(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,i){$(t,n,i),l=!0},p(n,i){e=n;const r={};i&1&&(r.area=e[23]),i&3&&(r.lineData=e[1].filter(a)),i&64&&(r.hoverIndex=e[6]),i&4096&&(r.x=e[12]),i&128&&(r.y=e[7]),i&1024&&(r.xDomain=e[10]),t.$set(r)},i(n){l||(K(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){ee(t,n)}}}function Pt(e){let t,l,a;function n(...s){return e[16](e[23],...s)}function i(s){e[17](s)}let r={overlay:"true",area:e[23],lineData:e[1].filter(n),i:e[25],x:e[12],y:e[7],xDomain:e[10]};return e[6]!==void 0&&(r.hoverIndex=e[6]),t=new Il({props:r}),_e.push(()=>ge(t,"hoverIndex",i)),{c(){x(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){$(t,s,o),a=!0},p(s,o){e=s;const c={};o&1&&(c.area=e[23]),o&3&&(c.lineData=e[1].filter(n)),o&4096&&(c.x=e[12]),o&128&&(c.y=e[7]),o&1024&&(c.xDomain=e[10]),!l&&o&64&&(l=!0,c.hoverIndex=e[6],be(()=>l=!1)),t.$set(c)},i(s){a||(K(t.$$.fragment,s),a=!0)},o(s){q(t.$$.fragment,s),a=!1},d(s){ee(t,s)}}}function Va(e){let t,l,a,n,i,r,s,o,c,u,d,_;i=new Dl({props:{yDomain:e[8],y:e[7],indicator:e[2]}}),r=new Ia({props:{chartHeight:e[4],xDomain:e[10],x:e[12]}});let p=e[0].reverse(),v=[];for(let b=0;b<p.length;b+=1)v[b]=Vt(Wt(e,p,b));const g=b=>q(v[b],1,1,()=>{v[b]=null});let A=e[0],h=[];for(let b=0;b<A.length;b+=1)h[b]=Pt(Tt(e,A,b));const m=b=>q(h[b],1,1,()=>{h[b]=null});return c=new El({props:{x:e[12](e[10][1])+5,labelPlacements:e[11],hoverIndex:e[6]}}),{c(){t=O("div"),l=z("svg"),a=z("g"),n=z("rect"),x(i.$$.fragment),x(r.$$.fragment),s=z("g");for(let b=0;b<v.length;b+=1)v[b].c();o=z("g");for(let b=0;b<h.length;b+=1)h[b].c();x(c.$$.fragment),this.h()},l(b){t=N(b,"DIV",{class:!0});var y=E(t);l=G(y,"svg",{height:!0,width:!0});var k=E(l);a=G(k,"g",{class:!0,transform:!0});var D=E(a);n=G(D,"rect",{width:!0,height:!0,fill:!0,opacity:!0,stroke:!0}),E(n).forEach(w),ae(i.$$.fragment,D),ae(r.$$.fragment,D),s=G(D,"g",{class:!0});var T=E(s);for(let F=0;F<v.length;F+=1)v[F].l(T);T.forEach(w),o=G(D,"g",{class:!0});var M=E(o);for(let F=0;F<h.length;F+=1)h[F].l(M);M.forEach(w),ae(c.$$.fragment,D),D.forEach(w),k.forEach(w),y.forEach(w),this.h()},h(){f(n,"width",e[9]),f(n,"height",e[4]),f(n,"fill","black"),f(n,"opacity","0.02"),f(n,"stroke","none"),f(s,"class","visibleLinesGroup"),f(o,"class","overlayLinesGroup"),f(a,"class","chart-container"),f(a,"transform",u="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[13]),f(l,"width",e[3]),f(t,"class","svg-container"),je(()=>e[18].call(t))},m(b,y){W(b,t,y),I(t,l),I(l,a),I(a,n),$(i,a,null),$(r,a,null),I(a,s);for(let k=0;k<v.length;k+=1)v[k]&&v[k].m(s,null);I(a,o);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(o,null);$(c,a,null),d=Ue(t,e[18].bind(t)),_=!0},p(b,[y]){(!_||y&512)&&f(n,"width",b[9]),(!_||y&16)&&f(n,"height",b[4]);const k={};y&256&&(k.yDomain=b[8]),y&128&&(k.y=b[7]),y&4&&(k.indicator=b[2]),i.$set(k);const D={};if(y&16&&(D.chartHeight=b[4]),y&1024&&(D.xDomain=b[10]),y&4096&&(D.x=b[12]),r.$set(D),y&5315){p=b[0].reverse();let M;for(M=0;M<p.length;M+=1){const F=Wt(b,p,M);v[M]?(v[M].p(F,y),K(v[M],1)):(v[M]=Vt(F),v[M].c(),K(v[M],1),v[M].m(s,null))}for(De(),M=p.length;M<v.length;M+=1)g(M);Ie()}if(y&5315){A=b[0];let M;for(M=0;M<A.length;M+=1){const F=Tt(b,A,M);h[M]?(h[M].p(F,y),K(h[M],1)):(h[M]=Pt(F),h[M].c(),K(h[M],1),h[M].m(o,null))}for(De(),M=A.length;M<h.length;M+=1)m(M);Ie()}const T={};y&5120&&(T.x=b[12](b[10][1])+5),y&2048&&(T.labelPlacements=b[11]),y&64&&(T.hoverIndex=b[6]),c.$set(T),(!_||y&32&&u!==(u="translate("+b[5].left+","+b[5].top+")"))&&f(a,"transform",u),(!_||y&8)&&f(l,"width",b[3])},i(b){if(!_){K(i.$$.fragment,b),K(r.$$.fragment,b);for(let y=0;y<p.length;y+=1)K(v[y]);for(let y=0;y<A.length;y+=1)K(h[y]);K(c.$$.fragment,b),_=!0}},o(b){q(i.$$.fragment,b),q(r.$$.fragment,b),v=v.filter(Boolean);for(let y=0;y<v.length;y+=1)q(v[y]);h=h.filter(Boolean);for(let y=0;y<h.length;y+=1)q(h[y]);q(c.$$.fragment,b),_=!1},d(b){b&&w(t),ee(i),ee(r),ce(v,b),ce(h,b),ee(c),d()}}}function Pa(e,t,l){let a,n,i,r,s,o,c,u,d,_,p=ye("areas"),{plottedAreas:v,filteredData:g,indicator:A}=t,h=400,m=500,b=170,y=["main","parent","country","uk","custom1","custom2","custom3","custom4"],k=Math.max.apply(null,g.map(V=>V.year));const D=(V,R)=>R.areacd===V.areacd,T=(V,R)=>R.areacd===V.areacd;function M(V){u=V,l(6,u)}function F(){h=this.clientWidth,l(3,h)}return e.$$set=V=>{"plottedAreas"in V&&l(0,v=V.plottedAreas),"filteredData"in V&&l(1,g=V.filteredData),"indicator"in V&&l(2,A=V.indicator)},e.$$.update=()=>{e.$$.dirty&40&&l(9,n=h-a.left-a.right),e.$$.dirty&32&&l(4,i=m-a.top-a.bottom),e.$$.dirty&2&&l(10,r=[Math.min(...g.map(V=>V.year)),Math.max(...g.map(V=>V.year))]),e.$$.dirty&1536&&l(12,s=Ne().domain(r).range([0,n])),e.$$.dirty&6&&l(8,o=[A.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...g.map(V=>V.value))),Math.ceil(Math.max(...g.map(V=>V.value)))]),e.$$.dirty&272&&l(7,c=Ne().domain(o).range([i,0])),e.$$.dirty&195&&l(14,d=v.map(V=>({...V,yPosition:g.filter(R=>R.areacd===V.areacd&R.year===k).length>0?c(g.filter(R=>R.areacd===V.areacd&R.year===k)).value:0,areanm:p.find(R=>V.areacd===R.areacd).areanm})).filter((V,R)=>u!=null?R==u:y.includes(V.role))),e.$$.dirty&16432&&l(11,_=Sl(d,[-a.top,i],V=>V.yPosition,V=>V.areanm.length>20?34:17))},l(5,a={top:10,left:80,right:b+5,bottom:40}),l(6,u=null),[v,g,A,h,i,a,u,c,o,n,r,_,s,m,d,D,T,M,F]}class Ba extends ie{constructor(t){super(),se(this,t,Pa,Va,oe,{plottedAreas:0,filteredData:1,indicator:2})}}function Bt(e,t,l){const a=e.slice();return a[10]=t[l],a[12]=l,a}function Ot(e,t,l){const a=e.slice();return a[10]=t[l],a[12]=l,a}function Nt(e){let t,l,a,n=e[1],i=[];for(let o=0;o<n.length;o+=1)i[o]=zt(Ot(e,n,o));let r=e[1],s=[];for(let o=0;o<r.length;o+=1)s[o]=Gt(Bt(e,r,o));return{c(){t=z("g");for(let o=0;o<i.length;o+=1)i[o].c();l=U(),a=z("g");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=G(o,"g",{class:!0});var c=E(t);for(let d=0;d<i.length;d+=1)i[d].l(c);c.forEach(w),l=Z(o),a=G(o,"g",{class:!0});var u=E(a);for(let d=0;d<s.length;d+=1)s[d].l(u);u.forEach(w),this.h()},h(){f(t,"class","overlayCirclesContainer"),f(a,"class","visibleCirclesContainer")},m(o,c){W(o,t,c);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);W(o,l,c),W(o,a,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,null)},p(o,c){if(c&14){n=o[1];let u;for(u=0;u<n.length;u+=1){const d=Ot(o,n,u);i[u]?i[u].p(d,c):(i[u]=zt(d),i[u].c(),i[u].m(t,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=n.length}if(c&3){r=o[1];let u;for(u=0;u<r.length;u+=1){const d=Bt(o,r,u);s[u]?s[u].p(d,c):(s[u]=Gt(d),s[u].c(),s[u].m(a,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}},d(o){o&&w(t),ce(i,o),o&&w(l),o&&w(a),ce(s,o)}}}function zt(e){let t,l,a,n,i,r;return{c(){t=z("g"),l=z("circle"),this.h()},l(s){t=G(s,"g",{transform:!0});var o=E(t);l=G(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0}),E(l).forEach(w),o.forEach(w),this.h()},h(){f(l,"hoverid",e[12]),f(l,"r",a=1.5*e[10].datum.radius),f(l,"stroke","none"),f(l,"fill","white"),f(t,"transform",n="translate("+e[10].y+","+e[10].x+")")},m(s,o){W(s,t,o),I(t,l),i||(r=[Se(l,"mouseover",e[2]),Se(l,"mouseleave",e[3]),Se(l,"focus",e[2])],i=!0)},p(s,o){o&2&&a!==(a=1.5*s[10].datum.radius)&&f(l,"r",a),o&2&&n!==(n="translate("+s[10].y+","+s[10].x+")")&&f(t,"transform",n)},d(s){s&&w(t),i=!1,lt(r)}}}function Oa(e){let t,l,a,n;return{c(){t=z("circle"),this.h()},l(i){t=G(i,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,opacity:!0});var r=E(t);r.forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"r",l=e[0]===e[12]?e[10].datum.radius+3:e[10].datum.radius),f(t,"fill",a=e[0]===e[12]?"#F39431":re[e[10].datum.role]),f(t,"stroke","white"),f(t,"opacity",n=e[0]===e[12]||e[0]===null?1:.2)},m(i,r){W(i,t,r)},p(i,r){r&3&&l!==(l=i[0]===i[12]?i[10].datum.radius+3:i[10].datum.radius)&&f(t,"r",l),r&3&&a!==(a=i[0]===i[12]?"#F39431":re[i[10].datum.role])&&f(t,"fill",a),r&1&&n!==(n=i[0]===i[12]||i[0]===null?1:.2)&&f(t,"opacity",n)},d(i){i&&w(t)}}}function Na(e){let t,l,a,n,i,r,s,o;return{c(){t=z("rect"),this.h()},l(c){t=G(c,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,opacity:!0});var u=E(t);u.forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[10].datum.role)?"rotate(45)":null),f(t,"x",a=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),f(t,"y",n=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),f(t,"width",i=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),f(t,"height",r=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),f(t,"fill",s=e[0]===e[12]?"#F39431":re[e[10].datum.role]),f(t,"stroke","white"),f(t,"opacity",o=e[0]===e[12]||e[0]===null?1:.2)},m(c,u){W(c,t,u)},p(c,u){u&2&&l!==(l=["country","uk"].includes(c[10].datum.role)?"rotate(45)":null)&&f(t,"transform",l),u&3&&a!==(a=c[0]===c[12]?-.75*c[10].datum.radius-3:-.75*c[10].datum.radius)&&f(t,"x",a),u&3&&n!==(n=c[0]===c[12]?-.75*c[10].datum.radius-3:-.75*c[10].datum.radius)&&f(t,"y",n),u&3&&i!==(i=c[0]===c[12]?c[10].datum.radius*1.5+6:c[10].datum.radius*1.5)&&f(t,"width",i),u&3&&r!==(r=c[0]===c[12]?c[10].datum.radius*1.5+6:c[10].datum.radius*1.5)&&f(t,"height",r),u&3&&s!==(s=c[0]===c[12]?"#F39431":re[c[10].datum.role])&&f(t,"fill",s),u&1&&o!==(o=c[0]===c[12]||c[0]===null?1:.2)&&f(t,"opacity",o)},d(c){c&&w(t)}}}function Gt(e){let t,l,a;function n(s,o){return o&2&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[10].datum.role)),l?Na:Oa}let i=n(e,-1),r=i(e);return{c(){t=z("g"),r.c(),this.h()},l(s){t=G(s,"g",{transform:!0});var o=E(t);r.l(o),o.forEach(w),this.h()},h(){f(t,"transform",a="translate("+e[10].y+","+e[10].x+")")},m(s,o){W(s,t,o),r.m(t,null)},p(s,o){i===(i=n(s,o))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(t,null))),o&2&&a!==(a="translate("+s[10].y+","+s[10].x+")")&&f(t,"transform",a)},d(s){s&&w(t),r.d()}}}function za(e){let t,l=e[1].length>0&&Nt(e);return{c(){l&&l.c(),t=we()},l(a){l&&l.l(a),t=we()},m(a,n){l&&l.m(a,n),W(a,t,n)},p(a,[n]){a[1].length>0?l?l.p(a,n):(l=Nt(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:ne,o:ne,d(a){l&&l.d(a),a&&w(t)}}}let Ht=1,Kt=1,Ga=0;function Ha(e,t,l){let a,{circleData:n,plottedAreas:i,y:r,hoverIndex:s,lineData:o}=t;class c{constructor(v,g,A){this.items=v,this.radiusFun=g,this.xFun=A,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,Ht),this.maxR=Math.max(...v.map(h=>g(h))),this.rng=this._sfc32(1,2,3,Ht)}calculateYPositions(){let v=this.items.map((h,m)=>({datum:h,originalIndex:m,x:this.xFun(h),y:null,placed:!1})).sort((h,m)=>h.x-m.x);v.forEach(function(h,m){h.index=m});let g=this.tieBreakFn;v.forEach(function(h){h.tieBreaker=g(h.x)});let A=[...v].sort((h,m)=>{let b=this.radiusFun(h.datum)+h.tieBreaker*Kt;return this.radiusFun(m.datum)+m.tieBreaker*Kt-b});for(let h of A)h.placed=!0,h.y=this._getBestYPosition(h,v);return v.sort((h,m)=>h.originalIndex-m.originalIndex),v.map(h=>({datum:h.datum,x:h.x,y:h.y}))}_sfc32(v,g,A,h){let m=function(){v>>>=0,g>>>=0,A>>>=0,h>>>=0;var b=v+g|0;return v=g^g>>>9,g=A+(A<<3)|0,A=A<<21|A>>>11,h=h+1|0,b=b+h|0,A=A+b|0,(b>>>0)/4294967296};for(let b=0;b<10;b++)m();return m}_getBestYPosition(v,g){let A=[];for(let m of[-1,1]){let b,y=this.radiusFun(v.datum);for(let k=v.index+m;k>=0&&k<g.length&&(b=Math.abs(v.x-g[k].x))<y+this.maxR;k+=m){let D=g[k];if(!D.placed)continue;let T=y+this.radiusFun(D.datum);if(b>=y+this.radiusFun(D.datum))continue;let M=Math.sqrt(T*T-b*b),F=[D.y-M,D.y+M];A.push(F)}}if(A.length==0)return this.radiusFun(v.datum)*(this.rng()-.5)*Ga;let h=A.flat();h.push(0),h.sort((m,b)=>{let y=Math.abs(m),k=Math.abs(b);return y<k?-1:y>k?1:m-b});for(let m=0;m<h.length;m++){let b=h[m];if(A.every(y=>b<=y[0]||b>=y[1]))return b}}}let u=["main","parent","country","uk","custom1","custom2","custom3","custom4"];function d(p){l(0,s=parseFloat(Le(this).attr("hoverid")))}function _(p){l(0,s=null)}return e.$$set=p=>{"circleData"in p&&l(5,n=p.circleData),"plottedAreas"in p&&l(6,i=p.plottedAreas),"y"in p&&l(7,r=p.y),"hoverIndex"in p&&l(0,s=p.hoverIndex),"lineData"in p&&l(4,o=p.lineData)},e.$$.update=()=>{e.$$.dirty&224&&l(1,a=new c(i,p=>"radius"in p?p.radius*1.1:5,p=>r(n.find(v=>v.areacd===p.areacd).value)).calculateYPositions()),e.$$.dirty&3&&l(4,o=s===null?a.filter(p=>u.includes(p.datum.role)):[a[s]])},[s,a,d,_,o,n,i,r]}class Ka extends ie{constructor(t){super(),se(this,t,Ha,za,oe,{circleData:5,plottedAreas:6,y:7,hoverIndex:0,lineData:4})}}function Yt(e,t,l){const a=e.slice();return a[10]=t[l],a}function qt(e){let t,l=e[0][0].map(Ut),a=[];for(let n=0;n<l.length;n+=1)a[n]=jt(Yt(e,l,n));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();t=we()},l(n){for(let i=0;i<a.length;i+=1)a[i].l(n);t=we()},m(n,i){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(n,i);W(n,t,i)},p(n,i){if(i&15){l=n[0][0].map(Ut);let r;for(r=0;r<l.length;r+=1){const s=Yt(n,l,r);a[r]?a[r].p(s,i):(a[r]=jt(s),a[r].c(),a[r].m(t.parentNode,t))}for(;r<a.length;r+=1)a[r].d(1);a.length=l.length}},d(n){ce(a,n),n&&w(t)}}}function jt(e){let t,l,a,n,i,r;function s(..._){return e[4](e[10],..._)}function o(..._){return e[5](e[10],..._)}function c(..._){return e[6](e[10],..._)}function u(..._){return e[7](e[10],..._)}function d(..._){return e[8](e[10],..._)}return{c(){t=z("line"),this.h()},l(_){t=G(_,"line",{x1:!0,x2:!0,y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),E(t).forEach(w),this.h()},h(){f(t,"x1",l=e[0][0].find(s).y+e[1]),f(t,"x2",a=e[0][1].find(o).y+e[2]),f(t,"y1",n=e[0][0].find(c).x),f(t,"y2",i=e[0][1].find(u).x),f(t,"stroke-width","3px"),f(t,"stroke",r=e[3]!=null?"#F39431":re[e[0][0].find(d).datum.role])},m(_,p){W(_,t,p)},p(_,p){e=_,p&3&&l!==(l=e[0][0].find(s).y+e[1])&&f(t,"x1",l),p&5&&a!==(a=e[0][1].find(o).y+e[2])&&f(t,"x2",a),p&1&&n!==(n=e[0][0].find(c).x)&&f(t,"y1",n),p&1&&i!==(i=e[0][1].find(u).x)&&f(t,"y2",i),p&9&&r!==(r=e[3]!=null?"#F39431":re[e[0][0].find(d).datum.role])&&f(t,"stroke",r)},d(_){_&&w(t)}}}function Ya(e){let t,l=e[0][0].length===e[0][1].length&&qt(e);return{c(){t=z("g"),l&&l.c(),this.h()},l(a){t=G(a,"g",{class:!0});var n=E(t);l&&l.l(n),n.forEach(w),this.h()},h(){f(t,"class","slopeLinesContainer")},m(a,n){W(a,t,n),l&&l.m(t,null)},p(a,[n]){a[0][0].length===a[0][1].length?l?l.p(a,n):(l=qt(a),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:ne,o:ne,d(a){a&&w(t),l&&l.d()}}}const Ut=e=>e.datum.areacd;function qa(e,t,l){let{lineDataArray:a,x1:n,x2:i,hoverIndex:r}=t;const s=(_,p)=>p.datum.areacd==_,o=(_,p)=>p.datum.areacd==_,c=(_,p)=>p.datum.areacd==_,u=(_,p)=>p.datum.areacd==_,d=(_,p)=>p.datum.areacd==_;return e.$$set=_=>{"lineDataArray"in _&&l(0,a=_.lineDataArray),"x1"in _&&l(1,n=_.x1),"x2"in _&&l(2,i=_.x2),"hoverIndex"in _&&l(3,r=_.hoverIndex)},[a,n,i,r,s,o,c,u,d]}class ja extends ie{constructor(t){super(),se(this,t,qa,Ya,oe,{lineDataArray:0,x1:1,x2:2,hoverIndex:3})}}function Zt(e,t,l){const a=e.slice();return a[25]=t[l],a[26]=t,a[27]=l,a}function Xt(e){let t,l;return t=new ja({props:{lineDataArray:e[11],x1:e[13](e[7][0]),x2:e[13](e[7][1]),hoverIndex:e[6]}}),{c(){x(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,n){$(t,a,n),l=!0},p(a,n){const i={};n&2048&&(i.lineDataArray=a[11]),n&8320&&(i.x1=a[13](a[7][0])),n&8320&&(i.x2=a[13](a[7][1])),n&64&&(i.hoverIndex=a[6]),t.$set(i)},i(a){l||(K(t.$$.fragment,a),l=!0)},o(a){q(t.$$.fragment,a),l=!1},d(a){ee(t,a)}}}function Qt(e){let t,l,a,n,i,r=e[25]+"",s,o,c,u,d,_;function p(...h){return e[18](e[25],...h)}function v(h){e[19](h)}function g(h){e[20](h,e[27])}let A={plottedAreas:e[0],circleData:e[1].filter(p),y:e[8]};return e[6]!==void 0&&(A.hoverIndex=e[6]),e[11][e[27]]!==void 0&&(A.lineData=e[11][e[27]]),o=new Ka({props:A}),_e.push(()=>ge(o,"hoverIndex",v)),_e.push(()=>ge(o,"lineData",g)),{c(){t=z("g"),l=z("line"),i=z("text"),s=te(r),x(o.$$.fragment),this.h()},l(h){t=G(h,"g",{transform:!0});var m=E(t);l=G(m,"line",{y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),E(l).forEach(w),i=G(m,"text",{y:!0,"text-anchor":!0,"font-size":!0,fill:!0});var b=E(i);s=le(b,r),b.forEach(w),ae(o.$$.fragment,m),m.forEach(w),this.h()},h(){f(l,"y1",a=e[8](e[9][0])),f(l,"y2",n=e[8](e[9][1])-20),f(l,"stroke-width","1px"),f(l,"stroke","black"),f(i,"y","-30"),f(i,"text-anchor","middle"),f(i,"font-size","14px"),f(i,"fill","black"),f(t,"transform",d="translate("+e[13](e[25])+",0)")},m(h,m){W(h,t,m),I(t,l),I(t,i),I(i,s),$(o,t,null),_=!0},p(h,m){e=h,(!_||m&768&&a!==(a=e[8](e[9][0])))&&f(l,"y1",a),(!_||m&768&&n!==(n=e[8](e[9][1])-20))&&f(l,"y2",n),(!_||m&128)&&r!==(r=e[25]+"")&&pe(s,r);const b={};m&1&&(b.plottedAreas=e[0]),m&130&&(b.circleData=e[1].filter(p)),m&256&&(b.y=e[8]),!c&&m&64&&(c=!0,b.hoverIndex=e[6],be(()=>c=!1)),!u&&m&2048&&(u=!0,b.lineData=e[11][e[27]],be(()=>u=!1)),o.$set(b),(!_||m&8320&&d!==(d="translate("+e[13](e[25])+",0)"))&&f(t,"transform",d)},i(h){_||(K(o.$$.fragment,h),_=!0)},o(h){q(o.$$.fragment,h),_=!1},d(h){h&&w(t),ee(o)}}}function Ua(e){let t,l,a,n,i,r,s,o,c,u,d,_,p;i=new Dl({props:{yDomain:e[9],y:e[8],indicator:e[2]}});let v=e[7][1]!=e[7][0]&&Xt(e),g=e[7][0]===e[7][1]?[e[7][0]]:e[7],A=[];for(let m=0;m<g.length;m+=1)A[m]=Qt(Zt(e,g,m));const h=m=>q(A[m],1,1,()=>{A[m]=null});return u=new El({props:{x:e[13](e[7][1])+35+(e[11][1].length>0?Math.max(...e[11][1].map(Jt)):0),labelPlacements:e[12],hoverIndex:e[6]}}),{c(){t=O("div"),l=z("svg"),a=z("g"),n=z("g"),x(i.$$.fragment),r=z("rect"),v&&v.c(),o=we();for(let m=0;m<A.length;m+=1)A[m].c();c=we(),x(u.$$.fragment),this.h()},l(m){t=N(m,"DIV",{class:!0});var b=E(t);l=G(b,"svg",{height:!0,width:!0});var y=E(l);a=G(y,"g",{class:!0,transform:!0});var k=E(a);n=G(k,"g",{transform:!0});var D=E(n);ae(i.$$.fragment,D),D.forEach(w),r=G(k,"rect",{x:!0,width:!0,height:!0,stroke:!0,fill:!0,opacity:!0}),E(r).forEach(w),v&&v.l(k),o=we();for(let T=0;T<A.length;T+=1)A[T].l(k);c=we(),ae(u.$$.fragment,k),k.forEach(w),y.forEach(w),b.forEach(w),this.h()},h(){f(n,"transform","translate("+-e[15]+",0)"),f(r,"x",-e[15]/2),f(r,"width",s=e[10]+e[15]),f(r,"height",e[4]),f(r,"stroke","none"),f(r,"fill","black"),f(r,"opacity","0.02"),f(a,"class","chart-container"),f(a,"transform",d="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[14]),f(l,"width",e[3]),f(t,"class","svg-container"),je(()=>e[21].call(t))},m(m,b){W(m,t,b),I(t,l),I(l,a),I(a,n),$(i,n,null),I(a,r),v&&v.m(a,null),I(a,o);for(let y=0;y<A.length;y+=1)A[y]&&A[y].m(a,null);I(a,c),$(u,a,null),_=Ue(t,e[21].bind(t)),p=!0},p(m,[b]){const y={};if(b&512&&(y.yDomain=m[9]),b&256&&(y.y=m[8]),b&4&&(y.indicator=m[2]),i.$set(y),(!p||b&1024&&s!==(s=m[10]+m[15]))&&f(r,"width",s),(!p||b&16)&&f(r,"height",m[4]),m[7][1]!=m[7][0]?v?(v.p(m,b),b&128&&K(v,1)):(v=Xt(m),v.c(),K(v,1),v.m(a,o)):v&&(De(),q(v,1,1,()=>{v=null}),Ie()),b&11203){g=m[7][0]===m[7][1]?[m[7][0]]:m[7];let D;for(D=0;D<g.length;D+=1){const T=Zt(m,g,D);A[D]?(A[D].p(T,b),K(A[D],1)):(A[D]=Qt(T),A[D].c(),K(A[D],1),A[D].m(a,c))}for(De(),D=g.length;D<A.length;D+=1)h(D);Ie()}const k={};b&10368&&(k.x=m[13](m[7][1])+35+(m[11][1].length>0?Math.max(...m[11][1].map(Jt)):0)),b&4096&&(k.labelPlacements=m[12]),b&64&&(k.hoverIndex=m[6]),u.$set(k),(!p||b&32&&d!==(d="translate("+m[5].left+","+m[5].top+")"))&&f(a,"transform",d),(!p||b&8)&&f(l,"width",m[3])},i(m){if(!p){K(i.$$.fragment,m),K(v);for(let b=0;b<g.length;b+=1)K(A[b]);K(u.$$.fragment,m),p=!0}},o(m){q(i.$$.fragment,m),q(v),A=A.filter(Boolean);for(let b=0;b<A.length;b+=1)q(A[b]);q(u.$$.fragment,m),p=!1},d(m){m&&w(t),ee(i),v&&v.d(),ce(A,m),ee(u),_()}}}const Jt=e=>e.y;function Za(e,t,l){let a,n,i,r,s,o,c,u,d,_,p=ye("areas"),{plottedAreas:v,filteredData:g,indicator:A,selectedAreas:h}=t,m=400,b=470,y=220,k=120,D=["main","parent","country","uk","custom1","custom2","custom3","custom4"],T=[[],[]];const M=(P,j)=>j.year==P;function F(P){u=P,l(6,u)}function V(P,j){e.$$.not_equal(T[j],P)&&(T[j]=P,l(11,T))}function R(){m=this.clientWidth,l(3,m)}return e.$$set=P=>{"plottedAreas"in P&&l(0,v=P.plottedAreas),"filteredData"in P&&l(1,g=P.filteredData),"indicator"in P&&l(2,A=P.indicator),"selectedAreas"in P&&l(16,h=P.selectedAreas)},e.$$.update=()=>{e.$$.dirty&40&&l(10,n=m-a.left-a.right),e.$$.dirty&32&&l(4,i=b-a.top-a.bottom),e.$$.dirty&2&&l(7,r=[Math.min(...g.map(P=>P.year)),Math.max(...g.map(P=>P.year))]),e.$$.dirty&1152&&l(13,s=Ne().domain(r).range([0,n])),e.$$.dirty&6&&l(9,o=[A.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...g.map(P=>P.value))),Math.ceil(Math.max(...g.map(P=>P.value)))]),e.$$.dirty&528&&l(8,c=Ne().domain(o).range([i,0])),e.$$.dirty&1&&l(0,v=v.map(P=>({...P,radius:D.includes(P.role)?10:6}))),e.$$.dirty&451&&l(17,d=v.map(P=>({...P,yPosition:g.filter(j=>j.areacd===P.areacd&j.year===r[1]).length>0?c(g.find(j=>j.areacd===P.areacd&j.year===r[1]).value):0,areanm:p.find(j=>P.areacd===j.areacd).areanm})).filter((P,j)=>u!=null?j==u:D.includes(P.role))),e.$$.dirty&131120&&l(12,_=Sl(d,[-a.top,i],P=>P.yPosition,P=>P.areanm.length>20?34:17))},l(5,a={top:40,left:200,right:y+5,bottom:40}),l(6,u=null),[v,g,A,m,i,a,u,r,c,o,n,T,_,s,b,k,h,d,M,F,V,R]}class Xa extends ie{constructor(t){super(),se(this,t,Za,Ua,oe,{plottedAreas:0,filteredData:1,indicator:2,selectedAreas:16})}}function xt(e){let t,l=e[1].unit+"",a;return{c(){t=O("p"),a=te(l),this.h()},l(n){t=N(n,"P",{class:!0});var i=E(t);a=le(i,l),i.forEach(w),this.h()},h(){f(t,"class","svelte-awo2mx")},m(n,i){W(n,t,i),I(t,a)},p(n,i){i&2&&l!==(l=n[1].unit+"")&&pe(a,l)},d(n){n&&w(t)}}}function Qa(e){return{c:ne,l:ne,m:ne,p:ne,i:ne,o:ne,d:ne}}function Ja(e){let t,l;return t=new Xa({props:{selectedAreas:e[5],plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){x(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,n){$(t,a,n),l=!0},p(a,n){const i={};n&32&&(i.selectedAreas=a[5]),n&512&&(i.plottedAreas=a[9]),n&2048&&(i.filteredData=a[11]),n&2&&(i.indicator=a[1]),t.$set(i)},i(a){l||(K(t.$$.fragment,a),l=!0)},o(a){q(t.$$.fragment,a),l=!1},d(a){ee(t,a)}}}function xa(e){let t,l;return t=new Ba({props:{plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){x(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,n){$(t,a,n),l=!0},p(a,n){const i={};n&512&&(i.plottedAreas=a[9]),n&2048&&(i.filteredData=a[11]),n&2&&(i.indicator=a[1]),t.$set(i)},i(a){l||(K(t.$$.fragment,a),l=!0)},o(a){q(t.$$.fragment,a),l=!1},d(a){ee(t,a)}}}function $a(e){let t,l,a,n,i,r,s=e[1].label+"",o,c,u,d,_,p,v,g,A,h,m,b,y,k,D;function T(H){e[15](H)}let M={optionsArray:e[12]};e[8]!==void 0&&(M.chosenChart=e[8]),l=new Al({props:M}),_e.push(()=>ge(l,"chosenChart",T));let F=e[1].unit!=null&&xt(e);function V(H){e[17](H)}let R={selectedAreas:e[5].filter(e[16]),areasWithData:e[10],selectedArea:e[6],parentArea:e[7]};e[0]!==void 0&&(R.checkboxedRoles=e[0]),d=new wl({props:R}),_e.push(()=>ge(d,"checkboxedRoles",V));const P=[xa,Ja,Qa],j=[];function fe(H,J){return H[12][H[8]-1]==="Over time"?0:H[12][H[8]-1]==="To other areas"?1:H[12][H[8]-1]==="Geographically"?2:-1}return~(v=fe(e))&&(g=j[v]=P[v](e)),{c(){t=O("div"),x(l.$$.fragment),n=U(),i=O("div"),r=O("h3"),o=te(s),c=U(),F&&F.c(),u=U(),x(d.$$.fragment),p=U(),g&&g.c(),A=U(),h=O("p"),m=te("Source: Office for National Statistics"),b=U(),y=O("img"),this.h()},l(H){t=N(H,"DIV",{class:!0});var J=E(t);ae(l.$$.fragment,J),n=Z(J),i=N(J,"DIV",{class:!0});var Y=E(i);r=N(Y,"H3",{class:!0});var S=E(r);o=le(S,s),S.forEach(w),c=Z(Y),F&&F.l(Y),u=Z(Y),ae(d.$$.fragment,Y),p=Z(Y),g&&g.l(Y),A=Z(Y),h=N(Y,"P",{class:!0});var X=E(h);m=le(X,"Source: Office for National Statistics"),X.forEach(w),Y.forEach(w),b=Z(J),y=N(J,"IMG",{style:!0,width:!0,src:!0,alt:!0}),J.forEach(w),this.h()},h(){f(r,"class","svelte-awo2mx"),f(h,"class","svelte-awo2mx"),f(i,"class","chartOutlineGroup svelte-awo2mx"),he(y,"padding-top","10px"),f(y,"width","75%"),at(y.src,k=`${Pe}/img/image1.png`)||f(y,"src",k),f(y,"alt","download buttons"),f(t,"class","mainChartContainer")},m(H,J){W(H,t,J),$(l,t,null),I(t,n),I(t,i),I(i,r),I(r,o),I(i,c),F&&F.m(i,null),I(i,u),$(d,i,null),I(i,p),~v&&j[v].m(i,null),I(i,A),I(i,h),I(h,m),I(t,b),I(t,y),D=!0},p(H,[J]){const Y={};!a&&J&256&&(a=!0,Y.chosenChart=H[8],be(()=>a=!1)),l.$set(Y),(!D||J&2)&&s!==(s=H[1].label+"")&&pe(o,s),H[1].unit!=null?F?F.p(H,J):(F=xt(H),F.c(),F.m(i,u)):F&&(F.d(1),F=null);const S={};J&60&&(S.selectedAreas=H[5].filter(H[16])),J&1024&&(S.areasWithData=H[10]),J&64&&(S.selectedArea=H[6]),J&128&&(S.parentArea=H[7]),!_&&J&1&&(_=!0,S.checkboxedRoles=H[0],be(()=>_=!1)),d.$set(S);let X=v;v=fe(H),v===X?~v&&j[v].p(H,J):(g&&(De(),q(j[X],1,1,()=>{j[X]=null}),Ie()),~v?(g=j[v],g?g.p(H,J):(g=j[v]=P[v](H),g.c()),K(g,1),g.m(i,A)):g=null)},i(H){D||(K(l.$$.fragment,H),K(d.$$.fragment,H),K(g),D=!0)},o(H){q(l.$$.fragment,H),q(d.$$.fragment,H),q(g),D=!1},d(H){H&&w(t),ee(l),F&&F.d(),ee(d),~v&&j[v].d()}}}function en(e,t,l){let a,n,i,r,{indicator:s,latestData:o,otherData:c,initialData:u,selectedAreas:d,checkboxedRoles:_,siblingAreas:p,selectedArea:v,parentArea:g}=t,A=1,h=[...c,...u].filter(k=>k.areacd===d.find(D=>D.role==="main").data.areacd).length>0?["Over time","To other areas","To other metrics","Geographically"]:["To other areas","To other metrics","Geographically"];function m(k){A=k,l(8,A)}const b=k=>[...o,...c,...u].filter(D=>k.data.areacd===D.areacd).length>0&k.role!=="main";function y(k){_=k,l(0,_)}return e.$$set=k=>{"indicator"in k&&l(1,s=k.indicator),"latestData"in k&&l(2,o=k.latestData),"otherData"in k&&l(3,c=k.otherData),"initialData"in k&&l(4,u=k.initialData),"selectedAreas"in k&&l(5,d=k.selectedAreas),"checkboxedRoles"in k&&l(0,_=k.checkboxedRoles),"siblingAreas"in k&&l(13,p=k.siblingAreas),"selectedArea"in k&&l(6,v=k.selectedArea),"parentArea"in k&&l(7,g=k.parentArea)},e.$$.update=()=>{e.$$.dirty&284&&l(14,a=(h[A-1]==="Over time"?[...o,...u,...c]:h[A-1]==="To other areas"?[...o,...u]:o).sort((k,D)=>k.year-D.year)),e.$$.dirty&16384&&l(10,n=[...new Set(a.map(k=>k.areacd))]),e.$$.dirty&9249&&l(9,i=[...d.map(k=>k.role==="main"||_[k.role]?{role:k.role,areacd:k.data.areacd}:null).filter(k=>k!=null),..._.custom===null||_.custom===void 0?[]:_.custom.map((k,D)=>({role:"custom"+(D+1),areacd:k.areacd})),..._.neighbour?p.neighbours.map(k=>({role:"neighbour",areacd:k})):[],..._.cluster?p.similar.map(k=>({role:"cluster",areacd:k})):[]].filter(k=>n.includes(k.areacd))),e.$$.dirty&16896&&l(11,r=a.filter(k=>i.map(D=>D.areacd).includes(k.areacd)))},[_,s,o,c,u,d,v,g,A,i,n,r,h,p,a,m,b,y]}class tn extends ie{constructor(t){super(),se(this,t,en,$a,oe,{indicator:1,latestData:2,otherData:3,initialData:4,selectedAreas:5,checkboxedRoles:0,siblingAreas:13,selectedArea:6,parentArea:7})}}function $t(e,t,l){const a=e.slice();return a[14]=t[l],a[16]=l,a}function el(e){let t,l,a=e[14].indicator.label+"",n,i,r,s,o=e[14].prefix+e[14].value+e[14].suffix+"",c,u,d=e[14].subTextShort+"",_,p,v=e[14].comparison+"",g,A,h,m=e[14].change+"",b,y;return{c(){t=O("div"),l=O("p"),n=te(a),i=U(),r=O("div"),s=O("p"),c=U(),u=O("p"),_=U(),p=O("p"),g=te(v),A=U(),h=O("p"),b=te(m),y=U(),this.h()},l(k){t=N(k,"DIV",{class:!0,style:!0});var D=E(t);l=N(D,"P",{class:!0});var T=E(l);n=le(T,a),T.forEach(w),i=Z(D),r=N(D,"DIV",{class:!0});var M=E(r);s=N(M,"P",{class:!0});var F=E(s);F.forEach(w),c=Z(M),u=N(M,"P",{class:!0});var V=E(u);V.forEach(w),M.forEach(w),_=Z(D),p=N(D,"P",{class:!0});var R=E(p);g=le(R,v),R.forEach(w),A=Z(D),h=N(D,"P",{class:!0});var P=E(h);b=le(P,m),P.forEach(w),y=Z(D),D.forEach(w),this.h()},h(){f(l,"class","col1 svelte-17dtptv"),f(s,"class","mainValue svelte-17dtptv"),f(u,"class","subText svelte-17dtptv"),f(r,"class","col2 svelte-17dtptv"),f(p,"class","col3 "+(["Above average","Below average"].includes(e[14].comparison)?null:e[14].comparison==="Similar to average"?"headlineLabelOkay":e[14].comparison==="Worse than average"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(h,"class","col4 "+(["Increasing","Falling"].includes(e[14].change)?null:e[14].change==="Little change"?"headlineLabelOkay":e[14].change==="Worsening"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(t,"class","rowContainer svelte-17dtptv"),he(t,"grid-template-columns","[line1] "+e[0]+"px [line2] "+e[2]+"px [line3] "+e[4]+"px [line4] "+e[3]+"px [end]"),he(t,"background-color",e[16]%2===0?"#fafafa":"#ffffff")},m(k,D){W(k,t,D),I(t,l),I(l,n),I(t,i),I(t,r),I(r,s),s.innerHTML=o,I(r,c),I(r,u),u.innerHTML=d,I(t,_),I(t,p),I(p,g),I(t,A),I(t,h),I(h,b),I(t,y)},p(k,D){D&29&&he(t,"grid-template-columns","[line1] "+k[0]+"px [line2] "+k[2]+"px [line3] "+k[4]+"px [line4] "+k[3]+"px [end]")},d(k){k&&w(t)}}}function ln(e){let t,l,a,n,i,r=e[5],s=[];for(let o=0;o<r.length;o+=1)s[o]=el($t(e,r,o));return{c(){t=O("div");for(let o=0;o<s.length;o+=1)s[o].c();a=U(),n=O("img"),this.h()},l(o){t=N(o,"DIV",{class:!0});var c=E(t);for(let u=0;u<s.length;u+=1)s[u].l(c);c.forEach(w),a=Z(o),n=N(o,"IMG",{style:!0,width:!0,src:!0,alt:!0}),this.h()},h(){f(t,"class","keyFiguresListContainer svelte-17dtptv"),je(()=>e[12].call(t)),he(n,"padding-top","10px"),f(n,"width","75%"),at(n.src,i=`${Pe}/img/image1.png`)||f(n,"src",i),f(n,"alt","download buttons")},m(o,c){W(o,t,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);l=Ue(t,e[12].bind(t)),W(o,a,c),W(o,n,c)},p(o,[c]){if(c&61){r=o[5];let u;for(u=0;u<r.length;u+=1){const d=$t(o,r,u);s[u]?s[u].p(d,c):(s[u]=el(d),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}},i:ne,o:ne,d(o){o&&w(t),ce(s,o),l(),o&&w(a),o&&w(n)}}}function an(e){const t=e.split(" ");let l="";for(const a of t){const n=a.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");n.length>l.length&&(l=n)}return l.length}function nn(e,t,l){let a,n,i,{indicators:r,latestData:s,initialData:o,selectedAreas:c,col1Width:u}=t,d=0,_=0,p={T:[["Worse than average","Better than average"],["Improving","Worsening"]],F:[["Better than average","Worse than average"],["Worsening","Improving"]],I:[["Above average","Below average"],["Increasing","Falling"]]},v=[];r.forEach(h=>{Math.pow(10,h.roundingFactor);let m=s.filter(k=>k.codeId===h.id),b=c.find(k=>k.role==="main").data.areacd,y=m.filter(k=>k.areacd===b);if(y=y.length>0?y[0].value:void 0,y!=null){let k=m.filter(ke=>ke.areacd===c.find(de=>de.role==="country").data.areacd),D=m.filter(ke=>ke.areacd===c.find(de=>de.role==="uk").data.areacd),T=m.filter(ke=>ke.areacd===c.find(de=>de.role==="parent").data.areacd),M=k.length>0?k[0]:D.length>0?D[0]:T.length>0?T[0]:void 0,F=M!=null?M.value:void 0,R=(h.code in o?o[h.code]:[]).filter(ke=>ke.areacd===b);R=R.length>0?R[0].value:void 0;let P=h.code in qe?qe[h.code]:yl,fe=(y===void 0||F===void 0?!0:Math.abs(y-F)/F<P[0]/100)?"Similar to average":y<F?p[h.highEqualsGood][0][0]:p[h.highEqualsGood][0][1],J=(y===void 0||R===void 0?!0:Math.abs(y-R)/R<P[0]/100)?"Little change":y<R?p[h.highEqualsGood][1][0]:p[h.highEqualsGood][1][1];l(10,d=Math.max(h.label.length,d)),l(11,_=Math.max(an(h.label),_));let Y=h.prefix===null?"":h.prefix==="pounds"?"£":h.prefix,S=h.suffix===null?"":h.suffix,X=h.subText===null?"":h.subText,C=h.subTextShort===null?"":h.subTextShort,ue=Math.pow(10,h.roundingFactor);v.push({indicator:h,comparison:fe,change:J,value:(Math.round(y*ue)/ue).toLocaleString(),prefix:Y,suffix:S,subText:X,subTextShort:C})}});let g=400;function A(){g=this.clientWidth,l(1,g)}return e.$$set=h=>{"indicators"in h&&l(6,r=h.indicators),"latestData"in h&&l(7,s=h.latestData),"initialData"in h&&l(8,o=h.initialData),"selectedAreas"in h&&l(9,c=h.selectedAreas),"col1Width"in h&&l(0,u=h.col1Width)},e.$$.update=()=>{e.$$.dirty&3072&&l(0,u=d>45||_>10?250:d>30?210:180),e.$$.dirty&7&&l(4,n=(g-u-a)/2),e.$$.dirty&7&&l(3,i=(g-u-a)/2)},l(2,a=120),[u,g,a,i,n,v,r,s,o,c,d,_,A]}class rn extends ie{constructor(t){super(),se(this,t,nn,ln,oe,{indicators:6,latestData:7,initialData:8,selectedAreas:9,col1Width:0})}}function tl(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function ll(e,t,l){const a=e.slice();return a[45]=t[l],a[48]=t,a[47]=l,a}function al(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function nl(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function rl(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function il(e){let t,l,a,n,i,r;return{c(){t=z("g"),l=z("circle"),this.h()},l(s){t=G(s,"g",{transform:!0});var o=E(t);l=G(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),E(l).forEach(w),o.forEach(w),this.h()},h(){f(l,"hoverid",e[47]),f(l,"r","5"),f(l,"stroke","none"),f(l,"fill","#6e6e6e"),f(l,"fill-opacity",a=e[9]===null?.15:.05),f(t,"transform",n="translate("+e[45].x+","+e[14](e[45].y)+")")},m(s,o){W(s,t,o),I(t,l),i||(r=[Se(l,"mouseover",e[21]),Se(l,"mouseleave",e[22])],i=!0)},p(s,o){o[0]&512&&a!==(a=s[9]===null?.15:.05)&&f(l,"fill-opacity",a),o[0]&16400&&n!==(n="translate("+s[45].x+","+s[14](s[45].y)+")")&&f(t,"transform",n)},d(s){s&&w(t),i=!1,lt(r)}}}function sl(e){let t,l,a;return{c(){t=z("circle"),this.h()},l(n){t=G(n,"circle",{transform:!0,labelid:!0,"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),E(t).forEach(w),this.h()},h(){f(t,"transform",l="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")"),f(t,"labelid",e[47]),f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",a=re[e[45].datum.role]),f(t,"opacity","0")},m(n,i){W(n,t,i)},p(n,i){i[0]&4256&&l!==(l="translate("+n[45].x+","+(n[7]/2+n[45].y-n[12])+")")&&f(t,"transform",l),i[0]&32&&a!==(a=re[n[45].datum.role])&&f(t,"fill",a)},d(n){n&&w(t)}}}function sn(e){let t,l;return{c(){t=z("circle"),this.h()},l(a){t=G(a,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),E(t).forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",l=re[e[45].datum.role]),f(t,"opacity","1")},m(a,n){W(a,t,n)},p(a,n){n[0]&32&&l!==(l=re[a[45].datum.role])&&f(t,"fill",l)},d(a){a&&w(t)}}}function on(e){let t,l,a;return{c(){t=z("rect"),this.h()},l(n){t=G(n,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var i=E(t);i.forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[45].datum.role)?"rotate(45)":null),f(t,"x",-5),f(t,"y",-5),f(t,"width",10),f(t,"height",10),f(t,"fill",a=re[e[45].datum.role]),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"opacity","1")},m(n,i){W(n,t,i)},p(n,i){i[0]&32&&l!==(l=["country","uk"].includes(n[45].datum.role)?"rotate(45)":null)&&f(t,"transform",l),i[0]&32&&a!==(a=re[n[45].datum.role])&&f(t,"fill",a)},d(n){n&&w(t)}}}function ol(e){let t,l,a;function n(s,o){return o[0]&32&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[45].datum.role)),l?on:sn}let i=n(e,[-1,-1]),r=i(e);return{c(){t=z("g"),r.c(),this.h()},l(s){t=G(s,"g",{transform:!0});var o=E(t);r.l(o),o.forEach(w),this.h()},h(){f(t,"transform",a="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")")},m(s,o){W(s,t,o),r.m(t,null)},p(s,o){i===(i=n(s,o))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(t,null))),o[0]&4256&&a!==(a="translate("+s[45].x+","+(s[7]/2+s[45].y-s[12])+")")&&f(t,"transform",a)},d(s){s&&w(t),r.d()}}}function fl(e){let t,l,a,n,i,r,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,c,u,d;function _(){e[36].call(r,e[47])}return{c(){t=z("g"),l=z("rect"),r=z("text"),o=te(s),this.h()},l(p){t=G(p,"g",{class:!0});var v=E(t);l=G(v,"rect",{labelid:!0,transform:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),E(l).forEach(w),r=G(v,"text",{labelid:!0,transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var g=E(r);o=le(g,s),g.forEach(w),v.forEach(w),this.h()},h(){f(l,"labelid",e[47]),f(l,"transform",a=e[20](e[13][e[47]],e[47])),f(l,"x","0"),f(l,"y","0"),f(l,"width",n=e[13].length>e[47]?e[13][e[47]].width+6:0),f(l,"height","18.5"),f(l,"rx","3px"),f(l,"stroke",i=re[e[45].datum.role]),f(l,"fill","white"),f(l,"stroke-width","1px"),f(l,"pointer-events","none"),f(r,"labelid",e[47]),f(r,"transform",c=e[20](e[13][e[47]],e[47])),f(r,"x","3"),f(r,"y","14"),f(r,"text-anchor","start"),f(r,"fill",u=re[e[45].datum.role]),f(r,"font-size","14px"),f(r,"pointer-events","none"),f(t,"class","labelGroup")},m(p,v){W(p,t,v),I(t,l),I(t,r),I(r,o),d=tt.observe(r,_.bind(r))},p(p,v){e=p,v[0]&8192&&a!==(a=e[20](e[13][e[47]],e[47]))&&f(l,"transform",a),v[0]&8192&&n!==(n=e[13].length>e[47]?e[13][e[47]].width+6:0)&&f(l,"width",n),v[0]&32&&i!==(i=re[e[45].datum.role])&&f(l,"stroke",i),v[0]&32&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&pe(o,s),v[0]&8192&&c!==(c=e[20](e[13][e[47]],e[47]))&&f(r,"transform",c),v[0]&32&&u!==(u=re[e[45].datum.role])&&f(r,"fill",u)},d(p){p&&w(t),d()}}}function ul(e){let t,l,a,n,i,r,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,c,u,d,_,p,v,g=e[15].find(y).areanm+"",A,h,m,b;function y(...k){return e[38](e[45],...k)}return{c(){t=z("g"),l=z("circle"),a=z("g"),n=z("rect"),r=z("text"),o=te(s),u=z("g"),d=z("rect"),v=z("text"),A=te(g),this.h()},l(k){t=G(k,"g",{transform:!0});var D=E(t);l=G(D,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}),E(l).forEach(w),a=G(D,"g",{class:!0});var T=E(a);n=G(T,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),E(n).forEach(w),r=G(T,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var M=E(r);o=le(M,s),M.forEach(w),T.forEach(w),u=G(D,"g",{class:!0});var F=E(u);d=G(F,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),E(d).forEach(w),v=G(F,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var V=E(v);A=le(V,g),V.forEach(w),F.forEach(w),D.forEach(w),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","7"),f(l,"stroke","white"),f(l,"stroke-width","1.5px"),f(l,"fill","#F39431"),f(l,"fill-opacity","1"),f(n,"x","5"),f(n,"y","5"),f(n,"width",i=parseFloat(e[10]===void 0?100:e[10].width)+6),f(n,"height","18.5"),f(n,"rx","3px"),f(n,"stroke","#F39431"),f(n,"fill","white"),f(n,"stroke-width","1px"),f(n,"pointer-events","none"),f(r,"x","8"),f(r,"y","19"),f(r,"text-anchor","start"),f(r,"fill","#F39431"),f(r,"font-size","14px"),f(r,"pointer-events","none"),f(a,"class","hoverLabelGroup1"),f(d,"x",_=-(parseFloat(e[11]===void 0?100:e[11].width)+6)),f(d,"y","-22"),f(d,"width",p=parseFloat(e[11]===void 0?100:e[11].width)+6),f(d,"height","18.5"),f(d,"rx","3px"),f(d,"stroke","#F39431"),f(d,"fill","white"),f(d,"stroke-width","1px"),f(d,"pointer-events","none"),f(v,"x",h=-(parseFloat(e[11]===void 0?100:e[11].width)+3)),f(v,"y","-8"),f(v,"text-anchor","start"),f(v,"fill","#F39431"),f(v,"font-size","14px"),f(v,"pointer-events","none"),f(u,"class","hoverLabelGroup2"),f(t,"transform",b="translate("+e[45].x+","+e[14](e[45].y)+")")},m(k,D){W(k,t,D),I(t,l),I(t,a),I(a,n),I(a,r),I(r,o),c=tt.observe(r,e[37].bind(r)),I(t,u),I(u,d),I(u,v),I(v,A),m=tt.observe(v,e[39].bind(v))},p(k,D){e=k,D[0]&1024&&i!==(i=parseFloat(e[10]===void 0?100:e[10].width)+6)&&f(n,"width",i),D[0]&16&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&pe(o,s),D[0]&2048&&_!==(_=-(parseFloat(e[11]===void 0?100:e[11].width)+6))&&f(d,"x",_),D[0]&2048&&p!==(p=parseFloat(e[11]===void 0?100:e[11].width)+6)&&f(d,"width",p),D[0]&16&&g!==(g=e[15].find(y).areanm+"")&&pe(A,g),D[0]&2048&&h!==(h=-(parseFloat(e[11]===void 0?100:e[11].width)+3))&&f(v,"x",h),D[0]&16400&&b!==(b="translate("+e[45].x+","+e[14](e[45].y)+")")&&f(t,"transform",b)},d(k){k&&w(t),c(),m()}}}function cl(e){let t,l=e[9]===e[47]&&ul(e);return{c(){l&&l.c(),t=we()},l(a){l&&l.l(a),t=we()},m(a,n){l&&l.m(a,n),W(a,t,n)},p(a,n){a[9]===a[47]?l?l.p(a,n):(l=ul(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&w(t)}}}function fn(e){let t,l,a=e[0].label+"",n,i,r,s,o,c,u,d,_,p,v,g,A,h,m,b,y,k,D,T,M=e[4],F=[];for(let S=0;S<M.length;S+=1)F[S]=il(rl(e,M,S));let V=e[5],R=[];for(let S=0;S<V.length;S+=1)R[S]=sl(nl(e,V,S));let P=e[5],j=[];for(let S=0;S<P.length;S+=1)j[S]=ol(al(e,P,S));let fe=e[5],H=[];for(let S=0;S<fe.length;S+=1)H[S]=fl(ll(e,fe,S));let J=e[4],Y=[];for(let S=0;S<J.length;S+=1)Y[S]=cl(tl(e,J,S));return{c(){t=O("div"),l=O("p"),n=te(a),i=U(),r=O("div"),s=z("svg"),o=z("g"),c=z("g");for(let S=0;S<F.length;S+=1)F[S].c();u=z("g"),d=z("line"),v=z("g");for(let S=0;S<R.length;S+=1)R[S].c();g=z("g");for(let S=0;S<j.length;S+=1)j[S].c();h=z("g");for(let S=0;S<H.length;S+=1)H[S].c();b=z("g");for(let S=0;S<Y.length;S+=1)Y[S].c();this.h()},l(S){t=N(S,"DIV",{class:!0,style:!0});var X=E(t);l=N(X,"P",{class:!0});var C=E(l);n=le(C,a),C.forEach(w),i=Z(X),r=N(X,"DIV",{class:!0});var ue=E(r);s=G(ue,"svg",{class:!0,height:!0,width:!0});var ke=E(s);o=G(ke,"g",{class:!0,transform:!0});var de=E(o);c=G(de,"g",{class:!0});var Fe=E(c);for(let Q=0;Q<F.length;Q+=1)F[Q].l(Fe);Fe.forEach(w),u=G(de,"g",{class:!0,transform:!0});var Re=E(u);d=G(Re,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),E(d).forEach(w),Re.forEach(w),v=G(de,"g",{class:!0});var Ce=E(v);for(let Q=0;Q<R.length;Q+=1)R[Q].l(Ce);Ce.forEach(w),g=G(de,"g",{class:!0,opacity:!0});var Me=E(g);for(let Q=0;Q<j.length;Q+=1)j[Q].l(Me);Me.forEach(w),h=G(de,"g",{class:!0,opacity:!0});var Be=E(h);for(let Q=0;Q<H.length;Q+=1)H[Q].l(Be);Be.forEach(w),b=G(de,"g",{class:!0});var B=E(b);for(let Q=0;Q<Y.length;Q+=1)Y[Q].l(B);B.forEach(w),de.forEach(w),ke.forEach(w),ue.forEach(w),X.forEach(w),this.h()},h(){f(l,"class","col1 svelte-1fguf2k"),f(c,"class","backgroundCirclesGroup"),f(d,"x1","0"),f(d,"x2","0"),f(d,"y1","-10"),f(d,"y2",_=e[7]+10),f(d,"stroke","#871A5B"),f(d,"stroke-width","1.5px"),f(u,"class","medianLineGroup"),f(u,"transform",p="translate("+e[6](0)+",0)"),f(v,"class","labelsCirclesGroup"),f(g,"class","primaryCirclesGroup"),f(g,"opacity",A=e[9]===null?1:.1),f(h,"class","labelsGroup"),f(h,"opacity",m=e[9]===null?1:0),f(b,"class","hoverCirclesGroup"),f(o,"class","chart-container"),f(o,"transform",y="translate("+e[8].left+","+e[8].top+")"),f(s,"class",k=Ae("beeswarm-row-svg-"+e[0].id)+" svelte-1fguf2k"),f(s,"height",e[16]),f(s,"width",D=e[3]-e[1]),f(r,"class","svg-container"),f(t,"class","rowContainer svelte-1fguf2k"),he(t,"grid-template-columns","[line1] "+e[1]+"px [line2] "+(e[3]-e[1])+"px [end]"),he(t,"background-color",e[2]%2===0?"#fafafa":"#ffffff"),je(()=>e[40].call(t))},m(S,X){W(S,t,X),I(t,l),I(l,n),I(t,i),I(t,r),I(r,s),I(s,o),I(o,c);for(let C=0;C<F.length;C+=1)F[C]&&F[C].m(c,null);I(o,u),I(u,d),I(o,v);for(let C=0;C<R.length;C+=1)R[C]&&R[C].m(v,null);I(o,g);for(let C=0;C<j.length;C+=1)j[C]&&j[C].m(g,null);I(o,h);for(let C=0;C<H.length;C+=1)H[C]&&H[C].m(h,null);I(o,b);for(let C=0;C<Y.length;C+=1)Y[C]&&Y[C].m(b,null);T=Ue(t,e[40].bind(t))},p(S,X){if(X[0]&1&&a!==(a=S[0].label+"")&&pe(n,a),X[0]&6308368){M=S[4];let C;for(C=0;C<M.length;C+=1){const ue=rl(S,M,C);F[C]?F[C].p(ue,X):(F[C]=il(ue),F[C].c(),F[C].m(c,null))}for(;C<F.length;C+=1)F[C].d(1);F.length=M.length}if(X[0]&128&&_!==(_=S[7]+10)&&f(d,"y2",_),X[0]&64&&p!==(p="translate("+S[6](0)+",0)")&&f(u,"transform",p),X[0]&4256){V=S[5];let C;for(C=0;C<V.length;C+=1){const ue=nl(S,V,C);R[C]?R[C].p(ue,X):(R[C]=sl(ue),R[C].c(),R[C].m(v,null))}for(;C<R.length;C+=1)R[C].d(1);R.length=V.length}if(X[0]&4256){P=S[5];let C;for(C=0;C<P.length;C+=1){const ue=al(S,P,C);j[C]?j[C].p(ue,X):(j[C]=ol(ue),j[C].c(),j[C].m(g,null))}for(;C<j.length;C+=1)j[C].d(1);j.length=P.length}if(X[0]&512&&A!==(A=S[9]===null?1:.1)&&f(g,"opacity",A),X[0]&1974304){fe=S[5];let C;for(C=0;C<fe.length;C+=1){const ue=ll(S,fe,C);H[C]?H[C].p(ue,X):(H[C]=fl(ue),H[C].c(),H[C].m(h,null))}for(;C<H.length;C+=1)H[C].d(1);H.length=fe.length}if(X[0]&512&&m!==(m=S[9]===null?1:0)&&f(h,"opacity",m),X[0]&970256){J=S[4];let C;for(C=0;C<J.length;C+=1){const ue=tl(S,J,C);Y[C]?Y[C].p(ue,X):(Y[C]=cl(ue),Y[C].c(),Y[C].m(b,null))}for(;C<Y.length;C+=1)Y[C].d(1);Y.length=J.length}X[0]&256&&y!==(y="translate("+S[8].left+","+S[8].top+")")&&f(o,"transform",y),X[0]&1&&k!==(k=Ae("beeswarm-row-svg-"+S[0].id)+" svelte-1fguf2k")&&f(s,"class",k),X[0]&10&&D!==(D=S[3]-S[1])&&f(s,"width",D),X[0]&10&&he(t,"grid-template-columns","[line1] "+S[1]+"px [line2] "+(S[3]-S[1])+"px [end]"),X[0]&4&&he(t,"background-color",S[2]%2===0?"#fafafa":"#ffffff")},i:ne,o:ne,d(S){S&&w(t),ce(F,S),ce(R,S),ce(j,S),ce(H,S),ce(Y,S),T()}}}function hl(e,t,l,a,n,i,r,s){return console.log(e,t,l,a,n,i,r,s),e<i&&t>n&&l<s&&a>r}function un(e,t){const l=e.map(n=>n[t]);l.sort((n,i)=>n-i);const a=l.length;if(a%2===0){const n=l[a/2-1],i=l[a/2];return(n+i)/2}else return l[Math.floor(a/2)]}function cn(e,t,l){let a,n,i,r,s,o,c,u,d,_,p,v,g,A,h,m=ye("areas"),{filteredData:b,selectedAreas:y,areasWithData:k,plottedAreas:D,siblingAreas:T,selectedArea:M,indicator:F,col1Width:V,rowNumb:R}=t,P=500,j=60,fe=F.prefix===null?"":F.prefix==="pounds"?"£":F.prefix,H=F.suffix===null?"":F.suffix;F.subText===null||F.subText,F.subTextShort===null||F.subTextShort;let J=Math.pow(10,F.roundingFactor),Y=!1;Vl(()=>{Y=!0});const S=(B,Q)=>{if(Y){let me=parseFloat(B.width),We=[{x:-me-10,y:0,name:"topLeft"},{x:-me-10,y:20,name:"bottomLeft"},{x:-me-10,y:10,name:"left"},{x:2,y:0,name:"topRight"},{x:2,y:20,name:"bottomRight"},{x:-me/2,y:-3,name:"top"},{x:-me/2,y:24,name:"bottom"},{x:8,y:10,name:"right"},{x:-me-2,y:-10,name:"furtherTopLeft"},{x:-me-2,y:30,name:"furtherBottomLeft"},{x:-me-18,y:10,name:"furtherLeft"},{x:-me-12,y:0,name:"bottomFurtherLeft"},{x:-me-12,y:0,name:"topFurtherLeft"},{x:0,y:-10,name:"furtherTopRight"},{x:0,y:30,name:"furtherBottomRight"},{x:10,y:0,name:"topFurtherRight"},{x:10,y:20,name:"bottomFurtherRight"},{x:10,y:-10,name:"furtherTopFurtherRight"},{x:-me-12,y:-10,name:"furtherTopFurtherLeft"},{x:10,y:30,name:"furtherBottomFurtherRight"},{x:-me-12,y:30,name:"furtherBottomFurtherLeft"},{x:-me/2,y:-13,name:"furtherTop"},{x:-me/2,y:34,name:"furtherBottom"},{x:28,y:10,name:"furtherRight"},{x:-me/2,y:-23,name:"furtherFurtherTop"},{x:-me/2,y:44,name:"furtherFurtherBottom"},{x:-me-28,y:10,name:"furtherFurtherLeft"},{x:28,y:10,name:"furtherFurtherRight"}],Ze=Le(".beeswarm-row-svg-"+F.id).selectAll(".labelGroup").selectAll("rect"),Xe=Le(".beeswarm-row-svg-"+F.id).select(".labelsCirclesGroup").selectAll("circle");for(var Te=0;Te<We.length;Te++){let Ee={x1:g[Q].x+We[Te].x,x2:g[Q].x+We[Te].x+me,y1:g[Q].y-h+We[Te].y,y2:g[Q].y-h+We[Te].y+18.5},ze=!0;if(Ze.each(function(){let Ve=Le(this);const Ge=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let L=Le(this).attr("transform").match(Ge);hl(Ee.x1,Ee.x2,Ee.y1,Ee.y2,parseFloat(L[1]),parseFloat(L[1])+parseFloat(Ve.attr("width")),parseFloat(L[2]),parseFloat(L[2])+18.5)&Ve.attr("labelid")!=Q&&(ze=!1)}),Xe.each(function(){let Ve=Le(this);const Ge=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let L=Le(this).attr("transform").match(Ge),ve=parseFloat(Ve.attr("r"))+3;hl(Ee.x1,Ee.x2,Ee.y1,Ee.y2,parseFloat(L[1])-ve,parseFloat(L[1])+ve,parseFloat(L[2])-ve,parseFloat(L[2])+ve)&Ve.attr("labelid")!=Q&&(ze=!1)}),ze)return"translate("+Ee.x1+","+Ee.y1+")"}return"translate(200,0)"}else return"translate(0,0)"};let X=null;function C(B){l(9,X=parseFloat(Le(this).attr("hoverid")))}function ue(B){l(9,X=null)}let ke,de;function Fe(B){var Q;A[B]=(Q=xe.entries.get(this))==null?void 0:Q.contentRect,l(13,A)}function Re(){var B;ke=(B=xe.entries.get(this))==null?void 0:B.contentRect,l(10,ke)}const Ce=(B,Q)=>Q.areacd===B.datum.areacd;function Me(){var B;de=(B=xe.entries.get(this))==null?void 0:B.contentRect,l(11,de)}function Be(){P=this.clientWidth,l(3,P)}return e.$$set=B=>{"filteredData"in B&&l(23,b=B.filteredData),"selectedAreas"in B&&l(24,y=B.selectedAreas),"areasWithData"in B&&l(25,k=B.areasWithData),"plottedAreas"in B&&l(26,D=B.plottedAreas),"siblingAreas"in B&&l(27,T=B.siblingAreas),"selectedArea"in B&&l(28,M=B.selectedArea),"indicator"in B&&l(0,F=B.indicator),"col1Width"in B&&l(1,V=B.col1Width),"rowNumb"in B&&l(2,R=B.rowNumb)},e.$$.update=()=>{e.$$.dirty[0]&266&&l(31,n=P-a.left-a.right-V),e.$$.dirty[0]&256&&l(7,i=j-a.top-a.bottom),e.$$.dirty[0]&159383552&&l(35,r=b.filter(B=>T.siblings.includes(B.areacd)||B.areacd===y.find(Q=>Q.role==="main").data.areacd)),e.$$.dirty[1]&16&&l(34,s=un(r,"value")),e.$$.dirty[1]&24&&l(33,o=Math.max(Math.abs(s-Math.min(...r.map(B=>B.value))),Math.abs(s-Math.max(...r.map(B=>B.value))))),e.$$.dirty[1]&12,e.$$.dirty[1]&28&&l(30,c=r.map(B=>({...B,calcYValue:(B.value-s)/o}))),e.$$.dirty[0]&75497472|e.$$.dirty[1]&12&&l(29,u=D.map(B=>({...B,value:b.filter(Q=>Q.areacd===B.areacd).length>0?b.find(Q=>Q.areacd===B.areacd).value:null,calcYValue:b.filter(Q=>Q.areacd===B.areacd).length>0?(b.find(Q=>Q.areacd===B.areacd).value-s)/o:null})).filter(B=>B.value!==null).sort((B,Q)=>B.calcYValue-Q.calcYValue)),e.$$.dirty[1]&3&&l(6,_=Ne().domain(d).range([0,n])),e.$$.dirty[0]&1073741889&&l(4,p=new nt(c,4,B=>_((B.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(B.calcYValue),F.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&144&&l(14,v=Ne().domain([Math.min(...p.map(B=>B.y)),Math.max(...p.map(B=>B.y))]).range([0,i])),e.$$.dirty[0]&536870977&&l(5,g=new nt(u,7,B=>_((B.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(B.calcYValue),F.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&32&&l(12,h=Math.min(...g.map(B=>B.y))+(Math.max(...g.map(B=>B.y))-Math.min(...g.map(B=>B.y)))/2),e.$$.dirty[0]&16&&console.log(p)},l(8,a={top:10,left:10,right:10,bottom:10}),l(32,d=[-1,1]),l(13,A=[]),[F,V,R,P,p,g,_,i,a,X,ke,de,h,A,v,m,j,fe,H,J,S,C,ue,b,y,k,D,T,M,u,c,n,d,o,s,r,Fe,Re,Ce,Me,Be]}class hn extends ie{constructor(t){super(),se(this,t,cn,fn,oe,{filteredData:23,selectedAreas:24,areasWithData:25,plottedAreas:26,siblingAreas:27,selectedArea:28,indicator:0,col1Width:1,rowNumb:2},null,[-1,-1])}}function dl(e,t,l){const a=e.slice();return a[15]=t[l],a[17]=l,a}function _l(e){let t,l;function a(...n){return e[14](e[15],...n)}return t=new hn({props:{indicator:e[15],filteredData:e[1].filter(a),selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5],col1Width:e[7],rowNumb:e[17]}}),{c(){x(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,i){$(t,n,i),l=!0},p(n,i){e=n;const r={};i&4&&(r.indicator=e[15]),i&6&&(r.filteredData=e[1].filter(a)),i&8&&(r.selectedAreas=e[3]),i&256&&(r.areasWithData=e[8]),i&512&&(r.plottedAreas=e[9]),i&16&&(r.siblingAreas=e[4]),i&32&&(r.selectedArea=e[5]),i&128&&(r.col1Width=e[7]),t.$set(r)},i(n){l||(K(t.$$.fragment,n),l=!0)},o(n){q(t.$$.fragment,n),l=!1},d(n){ee(t,n)}}}function dn(e){let t,l,a,n,i,r,s,o,c,u,d,_,p;function v(b){e[13](b)}let g={selectedAreas:e[3].filter(e[12]),areasWithData:e[8],includeSiblings:!1,selectedArea:e[5],parentArea:e[6]};e[0]!==void 0&&(g.checkboxedRoles=e[0]),l=new wl({props:g}),_e.push(()=>ge(l,"checkboxedRoles",v)),i=new oa({props:{plottedAreas:e[9]}}),o=new zl({props:{filteredData:e[10],selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5]}});let A=e[2].filter(ml),h=[];for(let b=0;b<A.length;b+=1)h[b]=_l(dl(e,A,b));const m=b=>q(h[b],1,1,()=>{h[b]=null});return{c(){t=O("div"),x(l.$$.fragment),n=U(),x(i.$$.fragment),r=U(),s=O("div"),x(o.$$.fragment),c=U();for(let b=0;b<h.length;b+=1)h[b].c();u=U(),d=O("img"),this.h()},l(b){t=N(b,"DIV",{class:!0});var y=E(t);ae(l.$$.fragment,y),n=Z(y),ae(i.$$.fragment,y),r=Z(y),s=N(y,"DIV",{class:!0});var k=E(s);ae(o.$$.fragment,k),k.forEach(w),c=Z(y);for(let D=0;D<h.length;D+=1)h[D].l(y);y.forEach(w),u=Z(b),d=N(b,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){f(s,"class","keyContainer svelte-f2pwib"),f(t,"class","beeswarmRowsContainer svelte-f2pwib"),he(d,"padding-top","10px"),f(d,"width","75%"),at(d.src,_=`${Pe}/img/image1.png`)||f(d,"src",_),f(d,"alt","download buttons"),f(d,"class","svelte-f2pwib")},m(b,y){W(b,t,y),$(l,t,null),I(t,n),$(i,t,null),I(t,r),I(t,s),$(o,s,null),I(t,c);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(t,null);W(b,u,y),W(b,d,y),p=!0},p(b,[y]){const k={};y&10&&(k.selectedAreas=b[3].filter(b[12])),y&256&&(k.areasWithData=b[8]),y&32&&(k.selectedArea=b[5]),y&64&&(k.parentArea=b[6]),!a&&y&1&&(a=!0,k.checkboxedRoles=b[0],be(()=>a=!1)),l.$set(k);const D={};y&512&&(D.plottedAreas=b[9]),i.$set(D);const T={};if(y&8&&(T.selectedAreas=b[3]),y&256&&(T.areasWithData=b[8]),y&512&&(T.plottedAreas=b[9]),y&16&&(T.siblingAreas=b[4]),y&32&&(T.selectedArea=b[5]),o.$set(T),y&958){A=b[2].filter(ml);let M;for(M=0;M<A.length;M+=1){const F=dl(b,A,M);h[M]?(h[M].p(F,y),K(h[M],1)):(h[M]=_l(F),h[M].c(),K(h[M],1),h[M].m(t,null))}for(De(),M=A.length;M<h.length;M+=1)m(M);Ie()}},i(b){if(!p){K(l.$$.fragment,b),K(i.$$.fragment,b),K(o.$$.fragment,b);for(let y=0;y<A.length;y+=1)K(h[y]);p=!0}},o(b){q(l.$$.fragment,b),q(i.$$.fragment,b),q(o.$$.fragment,b),h=h.filter(Boolean);for(let y=0;y<h.length;y+=1)q(h[y]);p=!1},d(b){b&&w(t),ee(l),ee(i),ee(o),ce(h,b),b&&w(u),b&&w(d)}}}const ml=e=>e.includeAsBeeswarm==="T";function _n(e,t,l){let a,n,i=ye("beeswarmKeyData"),{trimmedIndicators:r,latestData:s,indicators:o,selectedAreas:c,siblingAreas:u,checkboxedRoles:d,selectedArea:_,parentArea:p,col1Width:v}=t;const g=m=>s.filter(b=>m.data.areacd===b.areacd).length>0&m.role!=="main";function A(m){d=m,l(0,d)}const h=(m,b)=>b.codeId===m.id;return e.$$set=m=>{"trimmedIndicators"in m&&l(11,r=m.trimmedIndicators),"latestData"in m&&l(1,s=m.latestData),"indicators"in m&&l(2,o=m.indicators),"selectedAreas"in m&&l(3,c=m.selectedAreas),"siblingAreas"in m&&l(4,u=m.siblingAreas),"checkboxedRoles"in m&&l(0,d=m.checkboxedRoles),"selectedArea"in m&&l(5,_=m.selectedArea),"parentArea"in m&&l(6,p=m.parentArea),"col1Width"in m&&l(7,v=m.col1Width)},e.$$.update=()=>{e.$$.dirty&4&&console.log(o),e.$$.dirty&2&&l(8,a=[...new Set(s.map(m=>m.areacd))]),e.$$.dirty&265&&l(9,n=[...c.map(m=>m.role==="main"||d[m.role]?{role:m.role,areacd:m.data.areacd}:null).filter(m=>m!=null),...d.custom===null||d.custom===void 0?[]:d.custom.map((m,b)=>({role:"custom"+(b+1),areacd:m.areacd}))].filter(m=>a.includes(m.areacd)))},console.log(i),[d,s,o,c,u,_,p,v,a,n,i,r,g,A,h]}class mn extends ie{constructor(t){super(),se(this,t,_n,dn,oe,{trimmedIndicators:11,latestData:1,indicators:2,selectedAreas:3,siblingAreas:4,checkboxedRoles:0,selectedArea:5,parentArea:6,col1Width:7})}}function gn(e){let t,l,a;function n(r){e[16](r)}let i={trimmedIndicators:e[4],latestData:e[1],indicators:[...e[5],...e[6],...e[7]],selectedAreas:e[3],siblingAreas:e[8],selectedArea:e[9],parentArea:e[10],col1Width:e[11]};return e[0]!==void 0&&(i.checkboxedRoles=e[0]),t=new mn({props:i}),_e.push(()=>ge(t,"checkboxedRoles",n)),{c(){x(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,s){$(t,r,s),a=!0},p(r,s){const o={};s&16&&(o.trimmedIndicators=r[4]),s&2&&(o.latestData=r[1]),s&224&&(o.indicators=[...r[5],...r[6],...r[7]]),s&8&&(o.selectedAreas=r[3]),s&256&&(o.siblingAreas=r[8]),s&512&&(o.selectedArea=r[9]),s&1024&&(o.parentArea=r[10]),s&2048&&(o.col1Width=r[11]),!l&&s&1&&(l=!0,o.checkboxedRoles=r[0],be(()=>l=!1)),t.$set(o)},i(r){a||(K(t.$$.fragment,r),a=!0)},o(r){q(t.$$.fragment,r),a=!1},d(r){ee(t,r)}}}function bn(e){let t,l,a;function n(r){e[15](r)}let i={indicators:[...e[5],...e[6],...e[7]],latestData:e[1],initialData:e[2],selectedAreas:e[3]};return e[11]!==void 0&&(i.col1Width=e[11]),t=new rn({props:i}),_e.push(()=>ge(t,"col1Width",n)),{c(){x(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,s){$(t,r,s),a=!0},p(r,s){const o={};s&224&&(o.indicators=[...r[5],...r[6],...r[7]]),s&2&&(o.latestData=r[1]),s&4&&(o.initialData=r[2]),s&8&&(o.selectedAreas=r[3]),!l&&s&2048&&(l=!0,o.col1Width=r[11],be(()=>l=!1)),t.$set(o)},i(r){a||(K(t.$$.fragment,r),a=!0)},o(r){q(t.$$.fragment,r),a=!1},d(r){ee(t,r)}}}function vn(e){let t,l,a,n,i,r,s;function o(p){e[14](p)}let c={compareIntroText:!1,optionsArray:e[13]};e[12]!==void 0&&(c.chosenChart=e[12]),l=new Al({props:c}),_e.push(()=>ge(l,"chosenChart",o));const u=[bn,gn],d=[];function _(p,v){return p[13][p[12]-1]==="Summary"?0:p[13][p[12]-1]==="Compared to other areas"?1:-1}return~(i=_(e))&&(r=d[i]=u[i](e)),{c(){t=O("div"),x(l.$$.fragment),n=U(),r&&r.c(),this.h()},l(p){t=N(p,"DIV",{class:!0});var v=E(t);ae(l.$$.fragment,v),n=Z(v),r&&r.l(v),v.forEach(w),this.h()},h(){f(t,"class","mainListContainer svelte-1ahp7ns")},m(p,v){W(p,t,v),$(l,t,null),I(t,n),~i&&d[i].m(t,null),s=!0},p(p,[v]){const g={};!a&&v&4096&&(a=!0,g.chosenChart=p[12],be(()=>a=!1)),l.$set(g);let A=i;i=_(p),i===A?~i&&d[i].p(p,v):(r&&(De(),q(d[A],1,1,()=>{d[A]=null}),Ie()),~i?(r=d[i],r?r.p(p,v):(r=d[i]=u[i](p),r.c()),K(r,1),r.m(t,null)):r=null)},i(p){s||(K(l.$$.fragment,p),K(r),s=!0)},o(p){q(l.$$.fragment,p),q(r),s=!1},d(p){p&&w(t),ee(l),~i&&d[i].d()}}}function pn(e,t,l){let{latestData:a,initialData:n,selectedAreas:i,trimmedIndicators:r,primaryIndicators:s,secondaryIndicators:o,otherIndicators:c,siblingAreas:u,checkboxedRoles:d,selectedArea:_,parentArea:p}=t,v=1,g=["Summary","Compared to other areas"],A;function h(y){v=y,l(12,v)}function m(y){A=y,l(11,A)}function b(y){d=y,l(0,d)}return e.$$set=y=>{"latestData"in y&&l(1,a=y.latestData),"initialData"in y&&l(2,n=y.initialData),"selectedAreas"in y&&l(3,i=y.selectedAreas),"trimmedIndicators"in y&&l(4,r=y.trimmedIndicators),"primaryIndicators"in y&&l(5,s=y.primaryIndicators),"secondaryIndicators"in y&&l(6,o=y.secondaryIndicators),"otherIndicators"in y&&l(7,c=y.otherIndicators),"siblingAreas"in y&&l(8,u=y.siblingAreas),"checkboxedRoles"in y&&l(0,d=y.checkboxedRoles),"selectedArea"in y&&l(9,_=y.selectedArea),"parentArea"in y&&l(10,p=y.parentArea)},e.$$.update=()=>{e.$$.dirty&2048&&console.log(A)},[d,a,n,i,r,s,o,c,u,_,p,A,v,g,h,m,b]}class kn extends ie{constructor(t){super(),se(this,t,pn,vn,oe,{latestData:1,initialData:2,selectedAreas:3,trimmedIndicators:4,primaryIndicators:5,secondaryIndicators:6,otherIndicators:7,siblingAreas:8,checkboxedRoles:0,selectedArea:9,parentArea:10})}}function gl(e,t,l){const a=e.slice();return a[19]=t[l],a}function bl(e){let t,l,a;function n(...s){return e[17](e[19],...s)}function i(s){e[18](s)}let r={indicator:e[19],latestData:e[1].filter(n),otherData:e[19].code in e[4]?e[4][e[19].code]:[],initialData:e[19].code in e[5]?e[5][e[19].code]:[],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};return e[2]!==void 0&&(r.checkboxedRoles=e[2]),t=new tn({props:r}),_e.push(()=>ge(t,"checkboxedRoles",i)),{c(){x(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){$(t,s,o),a=!0},p(s,o){e=s;const c={};o&2&&(c.latestData=e[1].filter(n)),o&16&&(c.otherData=e[19].code in e[4]?e[4][e[19].code]:[]),o&32&&(c.initialData=e[19].code in e[5]?e[5][e[19].code]:[]),o&8&&(c.selectedAreas=e[3]),o&64&&(c.siblingAreas=e[6]),!l&&o&4&&(l=!0,c.checkboxedRoles=e[2],be(()=>l=!1)),t.$set(c)},i(s){a||(K(t.$$.fragment,s),a=!0)},o(s){q(t.$$.fragment,s),a=!1},d(s){ee(t,s)}}}function yn(e){let t,l,a,n,i,r=(e[0]in e[13]?e[13][e[0]]:"")+"",s,o,c,u,d;function _(h){e[16](h)}let p={indicators:[...e[8],...e[9],...e[10]],latestData:e[1],initialData:e[5],selectedAreas:e[3],trimmedIndicators:e[7],primaryIndicators:e[8],secondaryIndicators:e[9],otherIndicators:e[10],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};e[2]!==void 0&&(p.checkboxedRoles=e[2]),o=new kn({props:p}),_e.push(()=>ge(o,"checkboxedRoles",_));let v=e[8],g=[];for(let h=0;h<v.length;h+=1)g[h]=bl(gl(e,v,h));const A=h=>q(g[h],1,1,()=>{g[h]=null});return{c(){t=O("section"),l=O("h1"),a=te(e[0]),n=U(),i=O("p"),s=U(),x(o.$$.fragment),u=U();for(let h=0;h<g.length;h+=1)g[h].c();this.h()},l(h){t=N(h,"SECTION",{title:!0,class:!0});var m=E(t);l=N(m,"H1",{});var b=E(l);a=le(b,e[0]),b.forEach(w),n=Z(m),i=N(m,"P",{});var y=E(i);y.forEach(w),s=Z(m),ae(o.$$.fragment,m),u=Z(m);for(let k=0;k<g.length;k+=1)g[k].l(m);m.forEach(w),this.h()},h(){f(t,"title",e[0]),f(t,"class","svelte-v10b0q")},m(h,m){W(h,t,m),I(t,l),I(l,a),I(t,n),I(t,i),i.innerHTML=r,I(t,s),$(o,t,null),I(t,u);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(t,null);d=!0},p(h,[m]){(!d||m&1)&&pe(a,h[0]),(!d||m&1)&&r!==(r=(h[0]in h[13]?h[13][h[0]]:"")+"")&&(i.innerHTML=r);const b={};if(m&2&&(b.latestData=h[1]),m&32&&(b.initialData=h[5]),m&8&&(b.selectedAreas=h[3]),m&64&&(b.siblingAreas=h[6]),!c&&m&4&&(c=!0,b.checkboxedRoles=h[2],be(()=>c=!1)),o.$set(b),m&6526){v=h[8];let y;for(y=0;y<v.length;y+=1){const k=gl(h,v,y);g[y]?(g[y].p(k,m),K(g[y],1)):(g[y]=bl(k),g[y].c(),K(g[y],1),g[y].m(t,null))}for(De(),y=v.length;y<g.length;y+=1)A(y);Ie()}(!d||m&1)&&f(t,"title",h[0])},i(h){if(!d){K(o.$$.fragment,h);for(let m=0;m<v.length;m+=1)K(g[m]);d=!0}},o(h){q(o.$$.fragment,h),g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)q(g[m]);d=!1},d(h){h&&w(t),ee(o),ce(g,h)}}}function wn(e,t,l){let{sectionName:a,sectionIndicators:n,indicators:i,selectedAreas:r,latestData:s,otherData:o,initialData:c,checkboxedRoles:u,siblingAreas:d}=t;a=a[0].toUpperCase()+a.substring(1),s=s.filter(D=>n.map(T=>T.id).includes(D.codeId));const _=i.filter(D=>n.map(T=>T.id).includes(D.id)),p=_.filter(D=>n.filter(T=>T.priority==="p").map(T=>T.id).includes(D.id)),v=_.filter(D=>n.filter(T=>T.priority==="s").map(T=>T.id).includes(D.id)),g=_.filter(D=>![...p.map(T=>T.id),...v.map(T=>T.id)].includes(D.id));let A=r.find(D=>D.role==="main").data.areanm,h=r.find(D=>D.role==="parent").data.areanm,m={Demographics:"[Dummy text] "+A+" is a rural area in "+h+". It is a popular retirement destination.",Economy:"[Dummy text] "+A+" has above average employment. Its primary industry is retail.",Health:"[Dummy text] "+A+" is an ageing area with above average level of deprivation.",Connectivity:"[Dummy text] "+A+" is a rural area in "+h+".",Skills:"[Dummy text] "+A+" has an above average level of deprivation.",Education:"[Dummy text] "+A+" has a low student population. The area has an above average number of people who do not hold qualifications.",Wellbeing:"[Dummy text] "+A+" has an above average level of deprivation and above average employment."};function b(D){u=D,l(2,u)}const y=(D,T)=>T.codeId===D.id;function k(D){u=D,l(2,u)}return e.$$set=D=>{"sectionName"in D&&l(0,a=D.sectionName),"sectionIndicators"in D&&l(14,n=D.sectionIndicators),"indicators"in D&&l(15,i=D.indicators),"selectedAreas"in D&&l(3,r=D.selectedAreas),"latestData"in D&&l(1,s=D.latestData),"otherData"in D&&l(4,o=D.otherData),"initialData"in D&&l(5,c=D.initialData),"checkboxedRoles"in D&&l(2,u=D.checkboxedRoles),"siblingAreas"in D&&l(6,d=D.siblingAreas)},[a,s,u,r,o,c,d,_,p,v,g,A,h,m,n,i,b,y,k]}class An extends ie{constructor(t){super(),se(this,t,wn,yn,oe,{sectionName:0,sectionIndicators:14,indicators:15,selectedAreas:3,latestData:1,otherData:4,initialData:5,checkboxedRoles:2,siblingAreas:6})}}function vl(e,t,l){const a=e.slice();return a[18]=t[l],a}function Dn(e){let t=e[5].find(Ln).data.areanm+"",l;return{c(){l=te(t)},l(a){l=le(a,t)},m(a,n){W(a,l,n)},p:ne,d(a){a&&w(l)}}}function In(e){let t,l=e[5].find(Fn).data.areanm+"",a;return{c(){t=te("Get localised data, insights and trends for "),a=te(l)},l(n){t=le(n,"Get localised data, insights and trends for "),a=le(n,l)},m(n,i){W(n,t,i),W(n,a,i)},p:ne,d(n){n&&w(t),n&&w(a)}}}function En(e){let t,l,a,n;return t=new Bl({props:{$$slots:{default:[Dn]},$$scope:{ctx:e}}}),a=new Ol({props:{$$slots:{default:[In]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment),l=U(),x(a.$$.fragment)},l(i){ae(t.$$.fragment,i),l=Z(i),ae(a.$$.fragment,i)},m(i,r){$(t,i,r),W(i,l,r),$(a,i,r),n=!0},p(i,r){const s={};r&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s);const o={};r&2097152&&(o.$$scope={dirty:r,ctx:i}),a.$set(o)},i(i){n||(K(t.$$.fragment,i),K(a.$$.fragment,i),n=!0)},o(i){q(t.$$.fragment,i),q(a.$$.fragment,i),n=!1},d(i){ee(t,i),i&&w(l),ee(a,i)}}}function pl(e){let t,l,a;function n(...s){return e[8](e[18],...s)}function i(s){e[9](s)}let r={sectionName:e[18],sectionIndicators:e[0].configData.areaSections.filter(n),indicators:e[4],selectedAreas:e[5],latestData:e[3],initialData:e[0].preloadedData.initialData,otherData:e[0].preloadedData.otherData,siblingAreas:e[1]};return e[2]!==void 0&&(r.checkboxedRoles=e[2]),t=new An({props:r}),_e.push(()=>ge(t,"checkboxedRoles",i)),{c(){x(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){$(t,s,o),a=!0},p(s,o){e=s;const c={};o&1&&(c.sectionName=e[18]),o&1&&(c.sectionIndicators=e[0].configData.areaSections.filter(n)),o&1&&(c.initialData=e[0].preloadedData.initialData),o&1&&(c.otherData=e[0].preloadedData.otherData),o&2&&(c.siblingAreas=e[1]),!l&&o&4&&(l=!0,c.checkboxedRoles=e[2],be(()=>l=!1)),t.$set(c)},i(s){a||(K(t.$$.fragment,s),a=!0)},o(s){q(t.$$.fragment,s),a=!1},d(s){ee(t,s)}}}function Sn(e){let t;return{c(){t=te("Find parent, child and neighbouring areas")},l(l){t=le(l,"Find parent, child and neighbouring areas")},m(l,a){W(l,t,a)},d(l){l&&w(t)}}}function Mn(e){let t,l,a,n,i,r,s,o,c,u,d,_,p;t=new ea({props:{areaKeyIndicators:e[0].configData.areaKeyIndicators,latestData:e[3].filter(e[6]),initialData:e[0].preloadedData.initialData,trimmedIndicators:e[4].filter(e[7]),selectedAreas:e[5]}});let v=[...new Set(e[0].configData.areaSections.map(kl))],g=[];for(let h=0;h<v.length;h+=1)g[h]=pl(vl(e,v,h));const A=h=>q(g[h],1,1,()=>{g[h]=null});return i=new Hl({props:{$$slots:{default:[Sn]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment),l=U();for(let h=0;h<g.length;h+=1)g[h].c();a=U(),n=O("section"),x(i.$$.fragment),r=U(),s=O("section"),o=O("h2"),c=te("Get the data"),u=U(),d=O("p"),_=te("Here, you can find information and links to the data."),this.h()},l(h){ae(t.$$.fragment,h),l=Z(h);for(let D=0;D<g.length;D+=1)g[D].l(h);a=Z(h),n=N(h,"SECTION",{title:!0,class:!0});var m=E(n);ae(i.$$.fragment,m),m.forEach(w),r=Z(h),s=N(h,"SECTION",{title:!0,class:!0});var b=E(s);o=N(b,"H2",{class:!0});var y=E(o);c=le(y,"Get the data"),y.forEach(w),u=Z(b),d=N(b,"P",{});var k=E(d);_=le(k,"Here, you can find information and links to the data."),k.forEach(w),b.forEach(w),this.h()},h(){f(n,"title","Related areas"),f(n,"class","svelte-r2srs5"),f(o,"class","ons-u-mt-xl"),f(s,"title","Get the data"),f(s,"class","svelte-r2srs5")},m(h,m){$(t,h,m),W(h,l,m);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(h,m);W(h,a,m),W(h,n,m),$(i,n,null),W(h,r,m),W(h,s,m),I(s,o),I(o,c),I(s,u),I(s,d),I(d,_),p=!0},p(h,m){const b={};if(m&1&&(b.areaKeyIndicators=h[0].configData.areaKeyIndicators),m&1&&(b.latestData=h[3].filter(h[6])),m&1&&(b.initialData=h[0].preloadedData.initialData),m&1&&(b.trimmedIndicators=h[4].filter(h[7])),t.$set(b),m&63){v=[...new Set(h[0].configData.areaSections.map(kl))];let k;for(k=0;k<v.length;k+=1){const D=vl(h,v,k);g[k]?(g[k].p(D,m),K(g[k],1)):(g[k]=pl(D),g[k].c(),K(g[k],1),g[k].m(a.parentNode,a))}for(De(),k=v.length;k<g.length;k+=1)A(k);Ie()}const y={};m&2097152&&(y.$$scope={dirty:m,ctx:h}),i.$set(y)},i(h){if(!p){K(t.$$.fragment,h);for(let m=0;m<v.length;m+=1)K(g[m]);K(i.$$.fragment,h),p=!0}},o(h){q(t.$$.fragment,h),g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)q(g[m]);q(i.$$.fragment,h),p=!1},d(h){ee(t,h),h&&w(l),ce(g,h),h&&w(a),h&&w(n),ee(i),h&&w(r),h&&w(s)}}}function Cn(e){let t,l,a,n;return t=new Pl({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Pe}/`},{label:"Find a local area",url:`${Pe}/areas`},{label:e[5].find(Rn).data.areanm}],$$slots:{default:[En]},$$scope:{ctx:e}}}),a=new Gl({props:{contentsLabel:"Explore this area",$$slots:{default:[Mn]},$$scope:{ctx:e}}}),{c(){x(t.$$.fragment),l=U(),x(a.$$.fragment)},l(i){ae(t.$$.fragment,i),l=Z(i),ae(a.$$.fragment,i)},m(i,r){$(t,i,r),W(i,l,r),$(a,i,r),n=!0},p(i,[r]){const s={};r&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s);const o={};r&2097159&&(o.$$scope={dirty:r,ctx:i}),a.$set(o)},i(i){n||(K(t.$$.fragment,i),K(a.$$.fragment,i),n=!0)},o(i){q(t.$$.fragment,i),q(a.$$.fragment,i),n=!1},d(i){ee(t,i),i&&w(l),ee(a,i)}}}const Ln=e=>e.role==="main",Fn=e=>e.role==="main",Rn=e=>e.role==="main",kl=e=>e.section;function Tn(e,t,l){let a,{data:n}=t;console.log(n);let i=ye("latestDataAreas"),r=ye("areas"),s=ye("areasParentsLookup"),o=ye("areasGeogLevel"),c=ye("indicatorsAreas"),u=ye("areasGeogInfo"),d=s.find(k=>k.areacd===n.areaCode),_=[];_.push({data:r.find(k=>k.areacd===n.areaCode),role:"main"}),_.push({data:r.find(k=>k.areacd===d.parentcd),role:"parent"}),d.countrycd!==null&d.parentcd!==d.countrycd&&_.push({data:r.find(k=>k.areacd===d.countrycd),role:"country"}),d.parentcd!=="K02000001"&&_.push({data:r.find(k=>k.areacd==="K02000001"),role:"uk"});let p=o.find(k=>k.areacd===n.areaCode).level,v=o.filter(k=>["uk","country"].includes(p)?k.level===p:p==="region"?["region","country"].includes(k.level):p==="both"?["both","lower"].includes(k.level):["both",p].includes(k.level)),g=u.find(k=>k.areacd===n.areaCode).headline,A={};A.neighbours=s.filter(k=>k.areacd!=n.areaCode&k.parentcd===d.parentcd&v.map(D=>D.areacd).includes(k.areacd)).map(k=>k.areacd),A.similar=g===null?[]:u.filter(k=>k.areacd!=n.areaCode&k.headline===g&v.map(D=>D.areacd).includes(k.areacd)).map(k=>k.areacd),A.siblings=s.filter(k=>k.areacd!=n.areaCode&v.map(D=>D.areacd).includes(k.areacd)).map(k=>k.areacd);const h=k=>n.configData.areaKeyIndicators.map(D=>D.id).includes(k.codeId),m=k=>n.configData.areaKeyIndicators.map(D=>D.id).includes(k.id),b=(k,D)=>D.section===k;function y(k){a=k,l(2,a)}return e.$$set=k=>{"data"in k&&l(0,n=k.data)},e.$$.update=()=>{e.$$.dirty&1&&console.log(n)},l(2,a={parent:!0,country:!0,uk:!0,neighbour:!1,cluster:!1,custom:null}),console.log(_),[n,A,a,i,c,_,h,m,b,y]}class Gn extends ie{constructor(t){super(),se(this,t,Tn,Cn,oe,{data:0})}}export{Gn as component};
