//js
import{S as $,i as ee,s as te,w as F,Q as Z,k as E,q,a as V,y as H,l as T,m as R,r as Y,h as S,c as P,z as K,n as D,p as O,b as y,C as I,A as N,u as de,R as U,g as C,d as z,B as j,I as pt,W as le,K as kt,L as wt,M as St,F as se,G as re,H as ie,P as At,T as ve,U as X,V as fe,X as Ye,e as Ie,D as ne,Y as Qe,Z as Xe,v as ke,f as we,E as Dt}from"../chunks/index.8ebd40f7.js";import{b as pe}from"../chunks/paths.8a89a64e.js";import{T as It,H as Lt,S as Rt}from"../chunks/Subhead.71054af1.js";import{H as Et,l as Je,a as Tt,R as yt,S as Gt,P as Mt}from"../chunks/HorizontalBeeswarmSVG.836d09f3.js";import{m as Le,b as oe}from"../chunks/config.d52a907b.js";import{c as Re,a as Ee,r as Te}from"../chunks/utils.45010e5d.js";import{S as Wt}from"../chunks/Select.d3630cb0.js";function Ct(t){let e,l,a,n,i,s,r,f;function c(u){t[23](u)}function h(u){t[24](u)}let v={width:t[15]-t[8],index:t[6],outerPadding:t[9],data:t[3],medianValue:t[0],medianAbsoluteDeviation:t[19],metadata:t[5],y:t[18],x:t[13],height:t[14],checkboxedRoles:t[7],chartHeight:t[11],chartWidth:t[10],areasSameGeog:t[16],spaceForAreasBeyondScale:t[12],showGroupMedianLine:!1,selectedAreas:t[17]};return t[1]!==void 0&&(v.xDomainGlobal=t[1]),t[2]!==void 0&&(v.hoverIndex=t[2]),i=new Et({props:v}),F.push(()=>Z(i,"xDomainGlobal",c)),F.push(()=>Z(i,"hoverIndex",h)),{c(){e=E("div"),l=E("p"),a=q(t[4]),n=V(),H(i.$$.fragment),this.h()},l(u){e=T(u,"DIV",{class:!0,style:!0});var _=R(e);l=T(_,"P",{class:!0,style:!0});var p=R(l);a=Y(p,t[4]),p.forEach(S),n=P(_),K(i.$$.fragment,_),_.forEach(S),this.h()},h(){D(l,"class","col1 svelte-8a6c7s"),O(l,"width",t[8]),D(e,"class","row svelte-8a6c7s"),O(e,"background-color",t[6]%2===0?"#fafafa":"#ffffff")},m(u,_){y(u,e,_),I(e,l),I(l,a),I(e,n),N(i,e,null),f=!0},p(u,[_]){(!f||_&16)&&de(a,u[4]),(!f||_&256)&&O(l,"width",u[8]);const p={};_&33024&&(p.width=u[15]-u[8]),_&64&&(p.index=u[6]),_&512&&(p.outerPadding=u[9]),_&8&&(p.data=u[3]),_&1&&(p.medianValue=u[0]),_&524288&&(p.medianAbsoluteDeviation=u[19]),_&32&&(p.metadata=u[5]),_&262144&&(p.y=u[18]),_&8192&&(p.x=u[13]),_&16384&&(p.height=u[14]),_&128&&(p.checkboxedRoles=u[7]),_&2048&&(p.chartHeight=u[11]),_&1024&&(p.chartWidth=u[10]),_&65536&&(p.areasSameGeog=u[16]),_&4096&&(p.spaceForAreasBeyondScale=u[12]),_&131072&&(p.selectedAreas=u[17]),!s&&_&2&&(s=!0,p.xDomainGlobal=u[1],U(()=>s=!1)),!r&&_&4&&(r=!0,p.hoverIndex=u[2],U(()=>r=!1)),i.$set(p),(!f||_&64)&&O(e,"background-color",u[6]%2===0?"#fafafa":"#ffffff")},i(u){f||(C(i.$$.fragment,u),f=!0)},o(u){z(i.$$.fragment,u),f=!1},d(u){u&&S(e),j(i)}}}function Vt(t,e,l){let a,n,i,s,r,{data:f,name:c,medianValue:h,metadata:v,index:u,checkboxedRoles:_,col1Width:p,outerPadding:d,chartWidth:g,chartHeight:o,spaceForAreasBeyondScale:b,xDomainGlobal:m,x:w,height:G,width:W,hoverIndex:B,areasSameGeog:M,selectedAreas:Q}=e;function x(A){m=A,l(1,m)}function L(A){B=A,l(2,B)}return t.$$set=A=>{"data"in A&&l(3,f=A.data),"name"in A&&l(4,c=A.name),"medianValue"in A&&l(0,h=A.medianValue),"metadata"in A&&l(5,v=A.metadata),"index"in A&&l(6,u=A.index),"checkboxedRoles"in A&&l(7,_=A.checkboxedRoles),"col1Width"in A&&l(8,p=A.col1Width),"outerPadding"in A&&l(9,d=A.outerPadding),"chartWidth"in A&&l(10,g=A.chartWidth),"chartHeight"in A&&l(11,o=A.chartHeight),"spaceForAreasBeyondScale"in A&&l(12,b=A.spaceForAreasBeyondScale),"xDomainGlobal"in A&&l(1,m=A.xDomainGlobal),"x"in A&&l(13,w=A.x),"height"in A&&l(14,G=A.height),"width"in A&&l(15,W=A.width),"hoverIndex"in A&&l(2,B=A.hoverIndex),"areasSameGeog"in A&&l(16,M=A.areasSameGeog),"selectedAreas"in A&&l(17,Q=A.selectedAreas)},t.$$.update=()=>{t.$$.dirty&65544&&l(22,a=f.filter(A=>M.includes(A.areacd))),t.$$.dirty&4194304&&l(0,h=Re(a,"value")),t.$$.dirty&4194305&&Math.max(Math.abs(h-Math.min(...a.map(A=>A.value))),Math.abs(h-Math.max(...a.map(A=>A.value)))),t.$$.dirty&4194305&&l(21,n=a.map(A=>Math.abs(A.value-h))),t.$$.dirty&2097152&&l(19,i=Re(n)),t.$$.dirty&32&&l(20,s=[-v.polarity*Le,v.polarity*Le]),t.$$.dirty&1049600&&l(18,r=Je().domain(s).range([0,g]))},[h,m,B,f,c,v,u,_,p,d,g,o,b,w,G,W,M,Q,r,i,s,n,a,x,L]}class Pt extends ${constructor(e){super(),ee(this,e,Vt,Ct,te,{data:3,name:4,medianValue:0,metadata:5,index:6,checkboxedRoles:7,col1Width:8,outerPadding:9,chartWidth:10,chartHeight:11,spaceForAreasBeyondScale:12,xDomainGlobal:1,x:13,height:14,width:15,hoverIndex:2,areasSameGeog:16,selectedAreas:17})}}function ye(t){let e,l,a,n,i,s,r,f,c,h,v;return{c(){e=E("summary"),l=E("h3"),a=q(t[1]),i=V(),s=E("span"),r=se("svg"),f=se("path"),this.h()},l(u){e=T(u,"SUMMARY",{class:!0});var _=R(e);l=T(_,"H3",{class:!0});var p=R(l);a=Y(p,t[1]),p.forEach(S),i=P(_),s=T(_,"SPAN",{class:!0});var d=R(s);r=re(d,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var g=R(r);f=re(g,"path",{class:!0,d:!0,transform:!0}),R(f).forEach(S),g.forEach(S),d.forEach(S),_.forEach(S),this.h()},h(){D(l,"class",n=le("ons-collapsible__title"+(t[0]?" title_styling_override":""))+" svelte-lfupja"),D(f,"class",c=le(t[0]?" path_styling_override":"")+" svelte-lfupja"),D(f,"d",h=t[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),D(f,"transform",v=t[0]?null:"translate(-5.02 -1.59)"),D(r,"class","ons-svg-icon"),D(r,"viewBox","0 0 8 13"),D(r,"xmlns","http://www.w3.org/2000/svg"),D(r,"focusable","false"),D(s,"class","ons-collapsible__icon"),D(e,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(u,_){y(u,e,_),I(e,l),I(l,a),I(e,i),I(e,s),I(s,r),I(r,f)},p(u,_){_&2&&de(a,u[1]),_&1&&n!==(n=le("ons-collapsible__title"+(u[0]?" title_styling_override":""))+" svelte-lfupja")&&D(l,"class",n),_&1&&c!==(c=le(u[0]?" path_styling_override":"")+" svelte-lfupja")&&D(f,"class",c),_&1&&h!==(h=u[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&D(f,"d",h),_&1&&v!==(v=u[0]?null:"translate(-5.02 -1.59)")&&D(f,"transform",v)},d(u){u&&S(e)}}}function zt(t){let e,l,a,n,i,s,r=!t[3]&&ye(t);const f=t[5].default,c=pt(f,t,t[4],null);return{c(){e=E("details"),r&&r.c(),l=V(),a=E("div"),c&&c.c(),this.h()},l(h){e=T(h,"DETAILS",{class:!0});var v=R(e);r&&r.l(v),l=P(v),a=T(v,"DIV",{class:!0});var u=R(a);c&&c.l(u),u.forEach(S),v.forEach(S),this.h()},h(){D(a,"class",n=le(t[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(t[0]?" beeswarm_padding":""))+" svelte-lfupja"),D(e,"class",i=le("ons-collapsible ons-js-collapsible"+(t[0]?" details_styling_override":""))+" svelte-lfupja"),e.open=t[3]},m(h,v){y(h,e,v),r&&r.m(e,null),I(e,l),I(e,a),c&&c.m(a,null),s=!0},p(h,[v]){h[3]?r&&(r.d(1),r=null):r?r.p(h,v):(r=ye(h),r.c(),r.m(e,l)),c&&c.p&&(!s||v&16)&&kt(c,f,h,h[4],s?St(f,h[4],v,null):wt(h[4]),null),(!s||v&5&&n!==(n=le(h[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(h[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&D(a,"class",n),(!s||v&1&&i!==(i=le("ons-collapsible ons-js-collapsible"+(h[0]?" details_styling_override":""))+" svelte-lfupja"))&&D(e,"class",i),(!s||v&8)&&(e.open=h[3])},i(h){s||(C(c,h),s=!0)},o(h){z(c,h),s=!1},d(h){h&&S(e),r&&r.d(),c&&c.d(h)}}}function Bt(t,e,l){let{$$slots:a={},$$scope:n}=e,{cross:i=!1}=e,{label:s="Label"}=e,{blank:r=!1}=e,{open:f=!1}=e;return t.$$set=c=>{"cross"in c&&l(0,i=c.cross),"label"in c&&l(1,s=c.label),"blank"in c&&l(2,r=c.blank),"open"in c&&l(3,f=c.open),"$$scope"in c&&l(4,n=c.$$scope)},[i,s,r,f,n,a]}class Ot extends ${constructor(e){super(),ee(this,e,Bt,zt,te,{cross:0,label:1,blank:2,open:3})}}function Ft(t){let e,l,a,n,i,s,r,f,c;function h(o){t[39](o)}function v(o){t[40](o)}function u(o){t[41](o)}function _(o){t[42](o)}function p(o){t[43](o)}function d(o){t[44](o)}let g={id:t[2],container:t[3],items:t[4],placeholder:t[5],isMulti:t[10],isSearchable:t[6],groupBy:t[22],loadOptions:t[9],getSelectionLabel:t[12],getOptionLabel:t[21],itemFilter:t[19],ariaValues:t[25],ariaListOpen:t[26],ariaFocused:t[27],noOptionsMessage:t[20],indicatorSvg:t[23],containerStyles:t[24],optionIdentifier:t[8],showIndicator:!0,isClearable:t[7]?!t[10]:!1};return t[15]!==void 0&&(g.isFocused=t[15]),t[0]!==void 0&&(g.value=t[0]),t[16]!==void 0&&(g.listOpen=t[16]),t[1]!==void 0&&(g.filterText=t[1]),t[13]!==void 0&&(g.isWaiting=t[13]),t[17]!==void 0&&(g.handleClear=t[17]),l=new Wt({props:g}),F.push(()=>Z(l,"isFocused",h)),F.push(()=>Z(l,"value",v)),F.push(()=>Z(l,"listOpen",u)),F.push(()=>Z(l,"filterText",_)),F.push(()=>Z(l,"isWaiting",p)),F.push(()=>Z(l,"handleClear",d)),l.$on("select",t[28]),l.$on("clear",t[45]),l.$on("loaded",t[46]),l.$on("error",t[47]),{c(){e=E("div"),H(l.$$.fragment),this.h()},l(o){e=T(o,"DIV",{class:!0});var b=R(e);K(l.$$.fragment,b),b.forEach(S),this.h()},h(){D(e,"class","selectbox svelte-1w33mjb"),ie(e,"multi-selected",t[0]&&t[10]),ie(e,"focused",t[15]),ie(e,"selected",t[0]&&!t[16]&&!t[10]),O(e,"--borderColor",t[11]),O(e,"--firstItem",t[18](0)),O(e,"--secondItem",t[18](1)),O(e,"--thirdItem",t[18](2)),O(e,"--fourthItem",t[18](3))},m(o,b){y(o,e,b),N(l,e,null),t[48](e),c=!0},p(o,b){const m={};b[0]&4&&(m.id=o[2]),b[0]&8&&(m.container=o[3]),b[0]&16&&(m.items=o[4]),b[0]&32&&(m.placeholder=o[5]),b[0]&1024&&(m.isMulti=o[10]),b[0]&64&&(m.isSearchable=o[6]),b[0]&512&&(m.loadOptions=o[9]),b[0]&4096&&(m.getSelectionLabel=o[12]),b[0]&524288&&(m.itemFilter=o[19]),b[0]&1048576&&(m.noOptionsMessage=o[20]),b[0]&256&&(m.optionIdentifier=o[8]),b[0]&1152&&(m.isClearable=o[7]?!o[10]:!1),!a&&b[0]&32768&&(a=!0,m.isFocused=o[15],U(()=>a=!1)),!n&&b[0]&1&&(n=!0,m.value=o[0],U(()=>n=!1)),!i&&b[0]&65536&&(i=!0,m.listOpen=o[16],U(()=>i=!1)),!s&&b[0]&2&&(s=!0,m.filterText=o[1],U(()=>s=!1)),!r&&b[0]&8192&&(r=!0,m.isWaiting=o[13],U(()=>r=!1)),!f&&b[0]&131072&&(f=!0,m.handleClear=o[17],U(()=>f=!1)),l.$set(m),(!c||b[0]&1025)&&ie(e,"multi-selected",o[0]&&o[10]),(!c||b[0]&32768)&&ie(e,"focused",o[15]),(!c||b[0]&66561)&&ie(e,"selected",o[0]&&!o[16]&&!o[10]),b[0]&2048&&O(e,"--borderColor",o[11]),b[0]&262144&&O(e,"--firstItem",o[18](0)),b[0]&262144&&O(e,"--secondItem",o[18](1)),b[0]&262144&&O(e,"--thirdItem",o[18](2)),b[0]&262144&&O(e,"--fourthItem",o[18](3))},i(o){c||(C(l.$$.fragment,o),c=!0)},o(o){z(l.$$.fragment,o),c=!1},d(o){o&&S(e),j(l),t[48](null)}}}function Ht(t,e,l){let a,n,i;const s='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',r='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',f=At();let{id:c=""}=e,{container:h=void 0}=e,{mode:v="default"}=e,{items:u}=e,{placeholder:_="Select one..."}=e,{value:p=null}=e,{filterText:d=""}=e,{isSearchable:g=!0}=e,{isClearable:o=!0}=e,{autoClear:b=!1}=e,{idKey:m="value"}=e,{labelKey:w="label"}=e,{groupKey:G=null}=e,{groupItems:W=!1}=e,{loadOptions:B=void 0}=e,{fontSize:M="1em"}=e,{height:Q=42}=e,{isMulti:x=!1}=e,{maxSelected:L=4}=e,{colors:A=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=e,{darkMode:ae=!1}=e,{borderColor:Se=ae?"white":"#206095"}=e;const Ae=G&&!W?k=>`${k[w]} <span class="group">${k[G]}</span>`:k=>k[w];let{getSelectionLabel:De=k=>k?Ae(k):null}=e;const tt=W&&G?k=>k[G]:void 0,lt=v=="search"?s:r,at=`--inputFontSize: ${M}; --groupTitleFontSize: ${M}; --height: ${Q}px; font-size: ${M};`,nt=k=>`${k}, selected.`,it=(k,J)=>`You are currently focused on ${k}. There are ${J} results available.`,st=()=>"Select is focused, type to refine list, press down to open the menu.";let he,ge,be,_e,ce;const rt=k=>new Promise(J=>setTimeout(J,k));async function ot(k){if(f("select",k.detail),b)ce();else if(o){await rt(10);let J=he.getElementsByClassName("clearSelect")[0];J&&(J.tabIndex=0,J.onkeypress=me=>{me.key=="Enter"&&ce()},J.removeAttribute("aria-hidden"),J.setAttribute("aria-label","Clear selection"))}}function ft(k){ge=k,l(15,ge)}function ct(k){p=k,l(0,p)}function ut(k){be=k,l(16,be)}function dt(k){d=k,l(1,d)}function ht(k){_e=k,l(13,_e)}function _t(k){ce=k,l(17,ce)}function mt(k){ve.call(this,t,k)}function gt(k){ve.call(this,t,k)}function bt(k){ve.call(this,t,k)}function vt(k){F[k?"unshift":"push"](()=>{he=k,l(14,he)})}return t.$$set=k=>{"id"in k&&l(2,c=k.id),"container"in k&&l(3,h=k.container),"mode"in k&&l(29,v=k.mode),"items"in k&&l(4,u=k.items),"placeholder"in k&&l(5,_=k.placeholder),"value"in k&&l(0,p=k.value),"filterText"in k&&l(1,d=k.filterText),"isSearchable"in k&&l(6,g=k.isSearchable),"isClearable"in k&&l(7,o=k.isClearable),"autoClear"in k&&l(30,b=k.autoClear),"idKey"in k&&l(8,m=k.idKey),"labelKey"in k&&l(31,w=k.labelKey),"groupKey"in k&&l(32,G=k.groupKey),"groupItems"in k&&l(33,W=k.groupItems),"loadOptions"in k&&l(9,B=k.loadOptions),"fontSize"in k&&l(34,M=k.fontSize),"height"in k&&l(35,Q=k.height),"isMulti"in k&&l(10,x=k.isMulti),"maxSelected"in k&&l(36,L=k.maxSelected),"colors"in k&&l(37,A=k.colors),"darkMode"in k&&l(38,ae=k.darkMode),"borderColor"in k&&l(11,Se=k.borderColor),"getSelectionLabel"in k&&l(12,De=k.getSelectionLabel)},t.$$.update=()=>{t.$$.dirty[0]&536879106&&l(20,a=_e?"Loading...":v=="search"&&d.length<3?"Enter 3 or more characters for suggestions":`No results match ${d}`),t.$$.dirty[0]&536870915|t.$$.dirty[1]&33&&l(19,n=Array.isArray(p)&&p.length>=L||v=="search"&&d.length<3?(k,J,me)=>!1:(k,J,me)=>`${me[w]}`.match(new RegExp(`\\b${J}`,"i"))),t.$$.dirty[1]&64&&l(18,i=k=>A[k%A.length])},[p,d,c,h,u,_,g,o,m,B,x,Se,De,_e,he,ge,be,ce,i,n,a,Ae,tt,lt,at,nt,it,st,ot,v,b,w,G,W,M,Q,L,A,ae,ft,ct,ut,dt,ht,_t,mt,gt,bt,vt]}class Kt extends ${constructor(e){super(),ee(this,e,Ht,Ft,te,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function Nt(t){let e,l,a,n;function i(r){t[6](r)}let s={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:t[2],isMulti:!0,maxSelected:4,placeholder:t[1]=t[1]};return t[0].custom!==void 0&&(s.value=t[0].custom),l=new Kt({props:s}),F.push(()=>Z(l,"value",i)),l.$on("select",t[3]),{c(){e=E("form"),H(l.$$.fragment),this.h()},l(r){e=T(r,"FORM",{class:!0});var f=R(e);K(l.$$.fragment,f),f.forEach(S),this.h()},h(){D(e,"class","svelte-a5e7yj")},m(r,f){y(r,e,f),N(l,e,null),n=!0},p(r,[f]){const c={};f&2&&(c.placeholder=r[1]=r[1]),!a&&f&1&&(a=!0,c.value=r[0].custom,U(()=>a=!1)),l.$set(c)},i(r){n||(C(l.$$.fragment,r),n=!0)},o(r){z(l.$$.fragment,r),n=!1},d(r){r&&S(e),j(l)}}}function jt(t,e,l){let{areasWithData:a,checkboxedRoles:n,selectedAreas:i,altText:s=""}=e,r=X("areasParentsLookup"),f=X("areas"),c=r.filter(u=>a.includes(u.areacd)&!i.map(_=>_.data.areacd).includes(u.areacd));c.forEach(u=>{u.areanm=f.find(_=>_.areacd===u.areacd).areanm,u.parentnm=f.find(_=>u.parentcd===_.areacd)===void 0?"":f.find(_=>u.parentcd===_.areacd).areanm});function h(u){u.detail&&u.detail}function v(u){t.$$.not_equal(n.custom,u)&&(n.custom=u,l(0,n))}return t.$$set=u=>{"areasWithData"in u&&l(4,a=u.areasWithData),"checkboxedRoles"in u&&l(0,n=u.checkboxedRoles),"selectedAreas"in u&&l(5,i=u.selectedAreas),"altText"in u&&l(1,s=u.altText)},[n,s,c,h,a,i,v]}class Zt extends ${constructor(e){super(),ee(this,e,jt,Nt,te,{areasWithData:4,checkboxedRoles:0,selectedAreas:5,altText:1})}}function Ge(t,e,l){const a=t.slice();return a[10]=e[l],a[11]=e,a[12]=l,a}function Me(t,e,l){const a=t.slice();return a[10]=e[l],a[13]=e,a[12]=l,a}function We(t){let e,l,a=t[10].data.areanm+"",n,i,s;function r(){t[6].call(l,t[10])}return{c(){e=E("label"),l=E("input"),n=q(a),this.h()},l(f){e=T(f,"LABEL",{class:!0});var c=R(e);l=T(c,"INPUT",{type:!0,class:!0}),n=Y(c,a),c.forEach(S),this.h()},h(){D(l,"type","checkbox"),D(l,"class","svelte-thy20g"),D(e,"class","svelte-thy20g")},m(f,c){y(f,e,c),I(e,l),l.checked=t[0][t[10].role],I(e,n),i||(s=Ye(l,"change",r),i=!0)},p(f,c){t=f,c&3&&(l.checked=t[0][t[10].role]),c&2&&a!==(a=t[10].data.areanm+"")&&de(n,a)},d(f){f&&S(e),i=!1,s()}}}function Ce(t){let e,l,a,n,i=["neighbour","cluster"],s=[];for(let r=0;r<2;r+=1)s[r]=Ve(Ge(t,i,r));return{c(){e=E("p"),l=q("Related areas"),a=V();for(let r=0;r<2;r+=1)s[r].c();n=Ie(),this.h()},l(r){e=T(r,"P",{class:!0});var f=R(e);l=Y(f,"Related areas"),f.forEach(S),a=P(r);for(let c=0;c<2;c+=1)s[c].l(r);n=Ie(),this.h()},h(){D(e,"class","svelte-thy20g")},m(r,f){y(r,e,f),I(e,l),y(r,a,f);for(let c=0;c<2;c+=1)s[c]&&s[c].m(r,f);y(r,n,f)},p(r,f){if(f&33){i=["neighbour","cluster"];let c;for(c=0;c<2;c+=1){const h=Ge(r,i,c);s[c]?s[c].p(h,f):(s[c]=Ve(h),s[c].c(),s[c].m(n.parentNode,n))}for(;c<2;c+=1)s[c].d(1)}},d(r){r&&S(e),r&&S(a),fe(s,r),r&&S(n)}}}function Ve(t){let e,l,a=t[10]==="neighbour"?"Other areas in "+t[5]:"Statistically similar areas",n,i,s,r;function f(){t[7].call(l,t[10])}return{c(){e=E("label"),l=E("input"),n=q(a),i=V(),this.h()},l(c){e=T(c,"LABEL",{class:!0});var h=R(e);l=T(h,"INPUT",{type:!0,class:!0}),n=Y(h,a),i=P(h),h.forEach(S),this.h()},h(){D(l,"type","checkbox"),D(l,"class","svelte-thy20g"),D(e,"class","svelte-thy20g")},m(c,h){y(c,e,h),I(e,l),l.checked=t[0][t[10]],I(e,n),I(e,i),s||(r=Ye(l,"change",f),s=!0)},p(c,h){t=c,h&1&&(l.checked=t[0][t[10]]),h&32&&a!==(a=t[10]==="neighbour"?"Other areas in "+t[5]:"Statistically similar areas")&&de(n,a)},d(c){c&&S(e),s=!1,r()}}}function Ut(t){let e,l,a,n,i,s,r,f,c,h=t[1],v=[];for(let d=0;d<h.length;d+=1)v[d]=We(Me(t,h,d));let u=t[3]&&Ce(t);function _(d){t[8](d)}let p={selectedAreas:t[1],areasWithData:t[2]};return t[0]!==void 0&&(p.checkboxedRoles=t[0]),r=new Zt({props:p}),F.push(()=>Z(r,"checkboxedRoles",_)),{c(){e=E("div"),l=E("p"),a=q("Parent areas"),n=V();for(let d=0;d<v.length;d+=1)v[d].c();i=V(),u&&u.c(),s=V(),H(r.$$.fragment),this.h()},l(d){e=T(d,"DIV",{class:!0});var g=R(e);l=T(g,"P",{class:!0});var o=R(l);a=Y(o,"Parent areas"),o.forEach(S),n=P(g);for(let b=0;b<v.length;b+=1)v[b].l(g);i=P(g),u&&u.l(g),s=P(g),K(r.$$.fragment,g),g.forEach(S),this.h()},h(){D(l,"class","svelte-thy20g"),D(e,"class","comparisonInputContainer svelte-thy20g")},m(d,g){y(d,e,g),I(e,l),I(l,a),I(e,n);for(let o=0;o<v.length;o+=1)v[o]&&v[o].m(e,null);I(e,i),u&&u.m(e,null),I(e,s),N(r,e,null),c=!0},p(d,g){if(g&3){h=d[1];let b;for(b=0;b<h.length;b+=1){const m=Me(d,h,b);v[b]?v[b].p(m,g):(v[b]=We(m),v[b].c(),v[b].m(e,i))}for(;b<v.length;b+=1)v[b].d(1);v.length=h.length}d[3]?u?u.p(d,g):(u=Ce(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null);const o={};g&2&&(o.selectedAreas=d[1]),g&4&&(o.areasWithData=d[2]),!f&&g&1&&(f=!0,o.checkboxedRoles=d[0],U(()=>f=!1)),r.$set(o)},i(d){c||(C(r.$$.fragment,d),c=!0)},o(d){z(r.$$.fragment,d),c=!1},d(d){d&&S(e),fe(v,d),u&&u.d(),j(r)}}}function qt(t){let e,l,a;return l=new Ot({props:{label:"Add areas to compare to "+t[4],open:Yt,$$slots:{default:[Ut]},$$scope:{ctx:t}}}),{c(){e=E("div"),H(l.$$.fragment),this.h()},l(n){e=T(n,"DIV",{class:!0});var i=R(e);K(l.$$.fragment,i),i.forEach(S),this.h()},h(){D(e,"class",le("twisty-container")+" svelte-thy20g")},m(n,i){y(n,e,i),N(l,e,null),a=!0},p(n,[i]){const s={};i&16&&(s.label="Add areas to compare to "+n[4]),i&16431&&(s.$$scope={dirty:i,ctx:n}),l.$set(s)},i(n){a||(C(l.$$.fragment,n),a=!0)},o(n){z(l.$$.fragment,n),a=!1},d(n){n&&S(e),j(l)}}}let Yt=!1;function Qt(t,e,l){let{selectedAreas:a,areasWithData:n,checkboxedRoles:i,includeSiblings:s=!0,selectedArea:r,parentArea:f}=e;a.map(u=>u.role);function c(u){i[u.role]=this.checked,l(0,i)}function h(u){i[u]=this.checked,l(0,i)}function v(u){i=u,l(0,i)}return t.$$set=u=>{"selectedAreas"in u&&l(1,a=u.selectedAreas),"areasWithData"in u&&l(2,n=u.areasWithData),"checkboxedRoles"in u&&l(0,i=u.checkboxedRoles),"includeSiblings"in u&&l(3,s=u.includeSiblings),"selectedArea"in u&&l(4,r=u.selectedArea),"parentArea"in u&&l(5,f=u.parentArea)},t.$$.update=()=>{t.$$.dirty&2&&console.log(a)},[i,a,n,s,r,f,c,h,v]}class Xt extends ${constructor(e){super(),ee(this,e,Qt,qt,te,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function Pe(t,e,l){const a=t.slice();return a[3]=e[l],a[5]=l,a}function Jt(t){let e,l;return{c(){e=se("circle"),this.h()},l(a){e=re(a,"circle",{r:!0,fill:!0,stroke:!0});var n=R(e);n.forEach(S),this.h()},h(){D(e,"r",ue),D(e,"fill",l=oe[t[3].role]),D(e,"stroke","white")},m(a,n){y(a,e,n)},p(a,n){n&1&&l!==(l=oe[a[3].role])&&D(e,"fill",l)},d(a){a&&S(e)}}}function xt(t){let e,l,a;return{c(){e=se("rect"),this.h()},l(n){e=re(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=R(e);i.forEach(S),this.h()},h(){D(e,"transform",l=["country","uk"].includes(t[3].role)?"rotate(45)":null),D(e,"x",-ue),D(e,"y",-ue),D(e,"width",2*ue),D(e,"height",2*ue),D(e,"fill",a=oe[t[3].role]),D(e,"stroke","white")},m(n,i){y(n,e,i)},p(n,i){i&1&&l!==(l=["country","uk"].includes(n[3].role)?"rotate(45)":null)&&D(e,"transform",l),i&1&&a!==(a=oe[n[3].role])&&D(e,"fill",a)},d(n){n&&S(e)}}}function ze(t){let e,l,a,n,i,s,r=t[1].find(_).areanm+"",f,c;function h(p,d){return d&1&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(p[3].role)),n?xt:Jt}let v=h(t,-1),u=v(t);function _(...p){return t[2](t[3],...p)}return{c(){e=E("div"),l=se("svg"),a=se("g"),u.c(),i=V(),s=E("p"),f=q(r),c=V(),this.h()},l(p){e=T(p,"DIV",{class:!0});var d=R(e);l=re(d,"svg",{width:!0,height:!0});var g=R(l);a=re(g,"g",{transform:!0});var o=R(a);u.l(o),o.forEach(S),g.forEach(S),i=P(d),s=T(d,"P",{style:!0,class:!0});var b=R(s);f=Y(b,r),b.forEach(S),c=P(d),d.forEach(S),this.h()},h(){D(a,"transform","translate(10,12)"),D(l,"width","20"),D(l,"height","24"),O(s,"color",oe[t[3].role]),D(s,"class","svelte-1p5l8o2"),D(e,"class","roleContainer svelte-1p5l8o2")},m(p,d){y(p,e,d),I(e,l),I(l,a),u.m(a,null),I(e,i),I(e,s),I(s,f),I(e,c)},p(p,d){t=p,v===(v=h(t,d))&&u?u.p(t,d):(u.d(1),u=v(t),u&&(u.c(),u.m(a,null))),d&1&&r!==(r=t[1].find(_).areanm+"")&&de(f,r),d&1&&O(s,"color",oe[t[3].role])},d(p){p&&S(e),u.d()}}}function $t(t){let e,l=t[0],a=[];for(let n=0;n<l.length;n+=1)a[n]=ze(Pe(t,l,n));return{c(){e=E("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=T(n,"DIV",{class:!0});var i=R(e);for(let s=0;s<a.length;s+=1)a[s].l(i);i.forEach(S),this.h()},h(){D(e,"class","keyContainer svelte-1p5l8o2")},m(n,i){y(n,e,i);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(e,null)},p(n,[i]){if(i&3){l=n[0];let s;for(s=0;s<l.length;s+=1){const r=Pe(n,l,s);a[s]?a[s].p(r,i):(a[s]=ze(r),a[s].c(),a[s].m(e,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=l.length}},i:ne,o:ne,d(n){n&&S(e),fe(a,n)}}}let ue=6;function el(t,e,l){let a=X("areas"),{plottedAreas:n}=e;const i=(s,r)=>r.areacd===s.areacd;return t.$$set=s=>{"plottedAreas"in s&&l(0,n=s.plottedAreas)},[n,a,i]}class tl extends ${constructor(e){super(),ee(this,e,el,$t,te,{plottedAreas:0})}}function Be(t,e,l){const a=t.slice();return a[25]=e[l],a[27]=l,a}function Oe(t){let e,l,a,n,i;function s(..._){return t[17](t[25],..._)}function r(..._){return t[18](t[25],..._)}function f(..._){return t[19](t[25],..._)}function c(_){t[20](_)}function h(_){t[21](_)}function v(_){t[22](_)}let u={selectedAreas:t[1],areasSameGeog:t[4],index:t[27],data:t[2].filter(s),name:t[12].find(r).label,metadata:t[12].find(f),col1Width:$e,outerPadding:t[14],chartWidth:t[11],chartHeight:t[7],spaceForAreasBeyondScale:et,x:t[10],height:xe,width:t[5]};return t[0]!==void 0&&(u.checkboxedRoles=t[0]),t[6]!==void 0&&(u.xDomainGlobal=t[6]),t[8]!==void 0&&(u.hoverIndex=t[8]),e=new Pt({props:u}),F.push(()=>Z(e,"checkboxedRoles",c)),F.push(()=>Z(e,"xDomainGlobal",h)),F.push(()=>Z(e,"hoverIndex",v)),{c(){H(e.$$.fragment)},l(_){K(e.$$.fragment,_)},m(_,p){N(e,_,p),i=!0},p(_,p){t=_;const d={};p&2&&(d.selectedAreas=t[1]),p&16&&(d.areasSameGeog=t[4]),p&12&&(d.data=t[2].filter(s)),p&8&&(d.name=t[12].find(r).label),p&8&&(d.metadata=t[12].find(f)),p&2048&&(d.chartWidth=t[11]),p&128&&(d.chartHeight=t[7]),p&1024&&(d.x=t[10]),p&32&&(d.width=t[5]),!l&&p&1&&(l=!0,d.checkboxedRoles=t[0],U(()=>l=!1)),!a&&p&64&&(a=!0,d.xDomainGlobal=t[6],U(()=>a=!1)),!n&&p&256&&(n=!0,d.hoverIndex=t[8],U(()=>n=!1)),e.$set(d)},i(_){i||(C(e.$$.fragment,_),i=!0)},o(_){z(e.$$.fragment,_),i=!1},d(_){j(e,_)}}}function ll(t){let e,l,a,n,i,s,r,f,c,h,v,u,_;l=new Tt({props:{siblingAreas:t[4]}});function p(m){t[16](m)}let d={selectedAreas:t[1].filter(t[15]),areasWithData:t[2].map(Fe),selectedArea:t[1].find(He).data.areanm,parentArea:t[1].find(Ke).data.areanm,includeSiblings:!1};t[0]!==void 0&&(d.checkboxedRoles=t[0]),n=new Xt({props:d}),F.push(()=>Z(n,"checkboxedRoles",p)),r=new tl({props:{plottedAreas:t[9]}});let g=t[3],o=[];for(let m=0;m<g.length;m+=1)o[m]=Oe(Be(t,g,m));const b=m=>z(o[m],1,1,()=>{o[m]=null});return{c(){e=E("div"),H(l.$$.fragment),a=V(),H(n.$$.fragment),s=V(),H(r.$$.fragment),f=V(),c=E("div");for(let m=0;m<o.length;m+=1)o[m].c();h=V(),v=E("div"),this.h()},l(m){e=T(m,"DIV",{class:!0});var w=R(e);K(l.$$.fragment,w),a=P(w),K(n.$$.fragment,w),s=P(w),K(r.$$.fragment,w),f=P(w),c=T(w,"DIV",{style:!0});var G=R(c);for(let B=0;B<o.length;B+=1)o[B].l(G);G.forEach(S),h=P(w),v=T(w,"DIV",{class:!0});var W=R(v);W.forEach(S),w.forEach(S),this.h()},h(){O(c,"margin-top","30px"),O(c,"margin-bottom","30px"),D(v,"class","svgs-container"),D(e,"class","visualisation-container svelte-1v2sdro"),Qe(()=>t[23].call(e))},m(m,w){y(m,e,w),N(l,e,null),I(e,a),N(n,e,null),I(e,s),N(r,e,null),I(e,f),I(e,c);for(let G=0;G<o.length;G+=1)o[G]&&o[G].m(c,null);I(e,h),I(e,v),u=Xe(e,t[23].bind(e)),_=!0},p(m,[w]){const G={};w&16&&(G.siblingAreas=m[4]),l.$set(G);const W={};w&6&&(W.selectedAreas=m[1].filter(m[15])),w&4&&(W.areasWithData=m[2].map(Fe)),w&2&&(W.selectedArea=m[1].find(He).data.areanm),w&2&&(W.parentArea=m[1].find(Ke).data.areanm),!i&&w&1&&(i=!0,W.checkboxedRoles=m[0],U(()=>i=!1)),n.$set(W);const B={};if(w&512&&(B.plottedAreas=m[9]),r.$set(B),w&32255){g=m[3];let M;for(M=0;M<g.length;M+=1){const Q=Be(m,g,M);o[M]?(o[M].p(Q,w),C(o[M],1)):(o[M]=Oe(Q),o[M].c(),C(o[M],1),o[M].m(c,null))}for(ke(),M=g.length;M<o.length;M+=1)b(M);we()}},i(m){if(!_){C(l.$$.fragment,m),C(n.$$.fragment,m),C(r.$$.fragment,m);for(let w=0;w<g.length;w+=1)C(o[w]);_=!0}},o(m){z(l.$$.fragment,m),z(n.$$.fragment,m),z(r.$$.fragment,m),o=o.filter(Boolean);for(let w=0;w<o.length;w+=1)z(o[w]);_=!1},d(m){m&&S(e),j(l),j(n),j(r),fe(o,m),u()}}}let xe=80,$e=250,et=20;const Fe=t=>t.areacd,He=t=>t.role==="main",Ke=t=>t.role==="parent";function al(t,e,l){let a,n,i,s,{selectedAreas:r,latestData:f,indicatorsList:c,areasSameGeog:h,checkboxedRoles:v}=e,u=X("indicatorsMetadata"),_=X("indicators");X("periodsLookup");let p=1e3,d={top:10,left:0,right:0,bottom:10},g=[-1,1],o=null;const b=L=>f.filter(A=>L.data.areacd===A.areacd).length>0&L.role!=="main";function m(L){v=L,l(0,v)}const w=(L,A)=>A.id===L,G=(L,A)=>A.code==_.find(ae=>ae.id==L).code,W=(L,A)=>A.code===_.find(ae=>ae.id==L).code;function B(L){v=L,l(0,v)}function M(L){g=L,l(6,g)}function Q(L){o=L,l(8,o)}function x(){p=this.clientWidth,l(5,p)}return t.$$set=L=>{"selectedAreas"in L&&l(1,r=L.selectedAreas),"latestData"in L&&l(2,f=L.latestData),"indicatorsList"in L&&l(3,c=L.indicatorsList),"areasSameGeog"in L&&l(4,h=L.areasSameGeog),"checkboxedRoles"in L&&l(0,v=L.checkboxedRoles)},t.$$.update=()=>{t.$$.dirty&32&&l(11,a=p-d.left-d.right-$e-et*2),t.$$.dirty&192&&l(10,i=Je().domain(g).range([0,n])),t.$$.dirty&7&&l(9,s=[...r.map(L=>L.role==="main"||v[L.role]?{role:L.role,areacd:L.data.areacd}:null).filter(L=>L!=null),...v.custom===null||v.custom===void 0?[]:v.custom.map((L,A)=>({role:"custom"+(A+1),areacd:L.areacd}))].filter(L=>f.map(A=>A.areacd).includes(L.areacd)))},l(7,n=xe-d.top-d.bottom),[v,r,f,c,h,p,g,n,o,s,i,a,u,_,d,b,m,w,G,W,B,M,Q,x]}class nl extends ${constructor(e){super(),ee(this,e,al,ll,te,{selectedAreas:1,latestData:2,indicatorsList:3,areasSameGeog:4,checkboxedRoles:0})}}function Ne(t,e,l){const a=t.slice();return a[13]=e[l],a[15]=l,a}function il(t){let e,l=t[13].changeText+"",a;return{c(){e=E("p"),a=q(l),this.h()},l(n){e=T(n,"P",{class:!0});var i=R(e);a=Y(i,l),i.forEach(S),this.h()},h(){D(e,"class","col4 "+(["Increasing","Falling"].includes(t[13].changeText)?null:t[13].changeText==="Little change"?"headlineLabelOkay":t[13].changeText==="Worsening"?"headlineLabelBad":"headlineLabelGood")+" svelte-18e6fs1")},m(n,i){y(n,e,i),I(e,a)},p:ne,d(n){n&&S(e)}}}function je(t){let e,l,a=t[13].label+"",n,i,s,r,f=t[13].mainText+"",c,h,v=t[13].subText+"",u,_,p=t[13].comparisonText+"",d,g,o,b=t[13].initialValue!=null&&il(t);return{c(){e=E("div"),l=E("p"),n=q(a),i=V(),s=E("div"),r=E("p"),c=V(),h=E("p"),u=V(),_=E("p"),d=q(p),g=V(),b&&b.c(),o=V(),this.h()},l(m){e=T(m,"DIV",{class:!0,style:!0});var w=R(e);l=T(w,"P",{class:!0});var G=R(l);n=Y(G,a),G.forEach(S),i=P(w),s=T(w,"DIV",{class:!0});var W=R(s);r=T(W,"P",{class:!0});var B=R(r);B.forEach(S),c=P(W),h=T(W,"P",{class:!0});var M=R(h);M.forEach(S),W.forEach(S),u=P(w),_=T(w,"P",{class:!0});var Q=R(_);d=Y(Q,p),Q.forEach(S),g=P(w),b&&b.l(w),o=P(w),w.forEach(S),this.h()},h(){D(l,"class","col1 svelte-18e6fs1"),D(r,"class","mainValue svelte-18e6fs1"),D(h,"class","subText svelte-18e6fs1"),D(s,"class","col2 svelte-18e6fs1"),D(_,"class","col3 "+(["Above average","Below average"].includes(t[13].comparisonText)?null:t[13].comparisonText==="Similar to average"?"headlineLabelOkay":t[13].comparisonText==="Worse than average"?"headlineLabelBad":"headlineLabelGood")+" svelte-18e6fs1"),D(e,"class","rowContainer svelte-18e6fs1"),O(e,"grid-template-columns","[line1] "+t[2]+"px [line2] "+t[1]+"px [line3] "+t[4]+"px [line4] "+t[3]+"px [end]"),O(e,"background-color",t[15]%2===0?"#fafafa":"#ffffff")},m(m,w){y(m,e,w),I(e,l),I(l,n),I(e,i),I(e,s),I(s,r),r.innerHTML=f,I(s,c),I(s,h),h.innerHTML=v,I(e,u),I(e,_),I(_,d),I(e,g),b&&b.m(e,null),I(e,o)},p(m,w){m[13].initialValue!=null&&b.p(m,w),w&30&&O(e,"grid-template-columns","[line1] "+m[2]+"px [line2] "+m[1]+"px [line3] "+m[4]+"px [line4] "+m[3]+"px [end]")},d(m){m&&S(e),b&&b.d()}}}function sl(t){let e,l,a,n,i,s=t[5].filter(Ze),r=[];for(let f=0;f<s.length;f+=1)r[f]=je(Ne(t,s,f));return{c(){e=E("div");for(let f=0;f<r.length;f+=1)r[f].c();a=V(),n=E("img"),this.h()},l(f){e=T(f,"DIV",{class:!0});var c=R(e);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(S),a=P(f),n=T(f,"IMG",{style:!0,width:!0,src:!0,alt:!0}),this.h()},h(){D(e,"class","keyFiguresListContainer svelte-18e6fs1"),Qe(()=>t[10].call(e)),O(n,"padding-top","10px"),D(n,"width","75%"),Dt(n.src,i=`${pe}/img/image1.png`)||D(n,"src",i),D(n,"alt","download buttons")},m(f,c){y(f,e,c);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);l=Xe(e,t[10].bind(e)),y(f,a,c),y(f,n,c)},p(f,[c]){if(c&62){s=f[5].filter(Ze);let h;for(h=0;h<s.length;h+=1){const v=Ne(f,s,h);r[h]?r[h].p(v,c):(r[h]=je(v),r[h].c(),r[h].m(e,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=s.length}},i:ne,o:ne,d(f){f&&S(e),fe(r,f),l(),f&&S(a),f&&S(n)}}}const Ze=t=>t.mainText!="No data";function rl(t,e,l){let a,n,i,s,{width:r=400,indicators:f,latestData:c,initialData:h,selectedAreas:v}=e,u=X("indicatorsMetadata"),_=X("indicatorsCalculations").filter(g=>f.includes(g.id)),p=[];_.forEach(g=>{let o=u.find(A=>A.code==g.code);g.medianValue=g.ltCount>200?g.ltMedian:g.utCount>140?g.utMedian:g.ukValue!="NA"?g.ukValue:g.gbValue!="NA"?g.gbValue:g.ewValue!="NA"?g.ewValue:g.engValue!="NA"?g.engValue:null,g.label=u.find(A=>A.code==g.code).label;let b=h.filter(A=>g.id===A.id),m=c.filter(A=>g.id===A.id),w=m.length>0?m[0].value:null,G=b.length>0?b[0].value:null,W=w!=null&G!=null?100*(w-G)/G:null,B=w!=null?100*(w-g.medianValue)/g.medianValue:null,M=W!=null?Math.abs(W)<o.similarThreshold?"Little change":W>0?o.polarity==1?"Improving":"Worsening":o.polarity==1?"Worsening":"Improving":null,Q=B!=null?Math.abs(B)<o.similarThreshold?"Similar to average":B>0?o.polarity==1?"Better than average":"Worse than average":o.polarity==1?"Worse than average":"Better than average":null,x=o.prefix===null?"":o.prefix,L=o.suffix===null?"":o.suffix;g.mainText=w!=null?x+Ee(Te(w,o.decimalPlaces))+L:"No data",g.secondaryValue=G!=null?x+Ee(Te(G,o.decimalPlaces))+L:"No data",g.latestValue=w,g.initialValue=G,g.changeText=M,g.comparisonText=Q,g.prefix=x,g.suffix=L,g.subText=o.subText,p.push(g)});function d(){r=this.clientWidth,l(0,r)}return t.$$set=g=>{"width"in g&&l(0,r=g.width),"indicators"in g&&l(6,f=g.indicators),"latestData"in g&&l(7,c=g.latestData),"initialData"in g&&l(8,h=g.initialData),"selectedAreas"in g&&l(9,v=g.selectedAreas)},t.$$.update=()=>{t.$$.dirty&128&&console.log(c),t.$$.dirty&7&&l(4,i=(r-a-n)/2),t.$$.dirty&7&&l(3,s=(r-a-n)/2)},l(2,a=250),l(1,n=140),[r,n,a,s,i,p,f,c,h,v,d]}class ol extends ${constructor(e){super(),ee(this,e,rl,sl,te,{width:0,indicators:6,latestData:7,initialData:8,selectedAreas:9})}}function fl(t){let e,l,a;function n(s){t[13](s)}let i={selectedAreas:t[5],latestData:t[1],indicatorsList:t[3],areasSameGeog:t[4]};return t[0]!==void 0&&(i.checkboxedRoles=t[0]),e=new nl({props:i}),F.push(()=>Z(e,"checkboxedRoles",n)),{c(){H(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,r){N(e,s,r),a=!0},p(s,r){const f={};r&32&&(f.selectedAreas=s[5]),r&2&&(f.latestData=s[1]),r&8&&(f.indicatorsList=s[3]),r&16&&(f.areasSameGeog=s[4]),!l&&r&1&&(l=!0,f.checkboxedRoles=s[0],U(()=>l=!1)),e.$set(f)},i(s){a||(C(e.$$.fragment,s),a=!0)},o(s){z(e.$$.fragment,s),a=!1},d(s){j(e,s)}}}function cl(t){let e,l;return e=new ol({props:{indicators:t[3],latestData:t[1].filter(t[11]),initialData:t[2].filter(t[12]),selectedAreas:t[5]}}),{c(){H(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,n){N(e,a,n),l=!0},p(a,n){const i={};n&8&&(i.indicators=a[3]),n&34&&(i.latestData=a[1].filter(a[11])),n&36&&(i.initialData=a[2].filter(a[12])),n&32&&(i.selectedAreas=a[5]),e.$set(i)},i(a){l||(C(e.$$.fragment,a),l=!0)},o(a){z(e.$$.fragment,a),l=!1},d(a){j(e,a)}}}function ul(t){let e,l,a,n,i,s,r,f,c,h,v;function u(o){t[10](o)}let _={asButtons:!0,name:"selectMapOption",optionsArray:t[8]};t[6]!==void 0&&(_.chosenId=t[6]),i=new yt({props:_}),F.push(()=>Z(i,"chosenId",u));const p=[cl,fl],d=[];function g(o,b){return o[6]==0?0:1}return c=g(t),h=d[c]=p[c](t),{c(){e=E("section"),l=E("h1"),a=q(t[7]),n=V(),H(i.$$.fragment),r=V(),f=E("div"),h.c(),this.h()},l(o){e=T(o,"SECTION",{title:!0,class:!0});var b=R(e);l=T(b,"H1",{});var m=R(l);a=Y(m,t[7]),m.forEach(S),n=P(b),K(i.$$.fragment,b),r=P(b),f=T(b,"DIV",{class:!0});var w=R(f);h.l(w),w.forEach(S),b.forEach(S),this.h()},h(){D(f,"class","info-rows-container"),D(e,"title",t[7]),D(e,"class","svelte-yd7y")},m(o,b){y(o,e,b),I(e,l),I(l,a),I(e,n),N(i,e,null),I(e,r),I(e,f),d[c].m(f,null),v=!0},p(o,[b]){const m={};!s&&b&64&&(s=!0,m.chosenId=o[6],U(()=>s=!1)),i.$set(m);let w=c;c=g(o),c===w?d[c].p(o,b):(ke(),z(d[w],1,1,()=>{d[w]=null}),we(),h=d[c],h?h.p(o,b):(h=d[c]=p[c](o),h.c()),C(h,1),h.m(f,null))},i(o){v||(C(i.$$.fragment,o),C(h),v=!0)},o(o){z(i.$$.fragment,o),z(h),v=!1},d(o){o&&S(e),j(i),d[c].d()}}}function dl(t,e,l){let{topic:a,latestData:n,initialData:i,indicatorsList:s,areasSameGeog:r,checkboxedRoles:f,selectedAreas:c}=e,h=a[0].toUpperCase()+a.substring(1);console.log(n),console.log(c);let v=0,u=["Summary","Beeswarm"];function _(o){v=o,l(6,v)}const p=o=>o.areacd===c.find(b=>b.role==="main").data.areacd,d=o=>o.areacd===c.find(b=>b.role==="main").data.areacd;function g(o){f=o,l(0,f)}return t.$$set=o=>{"topic"in o&&l(9,a=o.topic),"latestData"in o&&l(1,n=o.latestData),"initialData"in o&&l(2,i=o.initialData),"indicatorsList"in o&&l(3,s=o.indicatorsList),"areasSameGeog"in o&&l(4,r=o.areasSameGeog),"checkboxedRoles"in o&&l(0,f=o.checkboxedRoles),"selectedAreas"in o&&l(5,c=o.selectedAreas)},[f,n,i,s,r,c,v,h,u,a,_,p,d,g]}class hl extends ${constructor(e){super(),ee(this,e,dl,ul,te,{topic:9,latestData:1,initialData:2,indicatorsList:3,areasSameGeog:4,checkboxedRoles:0,selectedAreas:5})}}function Ue(t,e,l){const a=t.slice();return a[17]=e[l],a}function _l(t){let e=t[3].areanm+"",l;return{c(){l=q(e)},l(a){l=Y(a,e)},m(a,n){y(a,l,n)},p:ne,d(a){a&&S(l)}}}function ml(t){let e,l=t[3].areanm+"",a;return{c(){e=q("Get localised data, insights and trends for "),a=q(l)},l(n){e=Y(n,"Get localised data, insights and trends for "),a=Y(n,l)},m(n,i){y(n,e,i),y(n,a,i)},p:ne,d(n){n&&S(e),n&&S(a)}}}function gl(t){let e,l,a,n;return e=new Lt({props:{$$slots:{default:[_l]},$$scope:{ctx:t}}}),a=new Rt({props:{$$slots:{default:[ml]},$$scope:{ctx:t}}}),{c(){H(e.$$.fragment),l=V(),H(a.$$.fragment)},l(i){K(e.$$.fragment,i),l=P(i),K(a.$$.fragment,i)},m(i,s){N(e,i,s),y(i,l,s),N(a,i,s),n=!0},p(i,s){const r={};s&1048576&&(r.$$scope={dirty:s,ctx:i}),e.$set(r);const f={};s&1048576&&(f.$$scope={dirty:s,ctx:i}),a.$set(f)},i(i){n||(C(e.$$.fragment,i),C(a.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),z(a.$$.fragment,i),n=!1},d(i){j(e,i),i&&S(l),j(a,i)}}}function qe(t){let e,l,a;function n(...f){return t[7](t[17],...f)}function i(...f){return t[8](t[17],...f)}function s(f){t[9](f)}let r={topic:t[17],latestData:t[0].latestData.filter(n),initialData:t[0].initialData.filter(i),indicatorsList:t[1][t[17]],areasSameGeog:t[5],selectedAreas:t[6]};return t[2]!==void 0&&(r.checkboxedRoles=t[2]),e=new hl({props:r}),F.push(()=>Z(e,"checkboxedRoles",s)),{c(){H(e.$$.fragment)},l(f){K(e.$$.fragment,f)},m(f,c){N(e,f,c),a=!0},p(f,c){t=f;const h={};c&3&&(h.latestData=t[0].latestData.filter(n)),c&3&&(h.initialData=t[0].initialData.filter(i)),c&2&&(h.indicatorsList=t[1][t[17]]),!l&&c&4&&(l=!0,h.checkboxedRoles=t[2],U(()=>l=!1)),e.$set(h)},i(f){a||(C(e.$$.fragment,f),a=!0)},o(f){z(e.$$.fragment,f),a=!1},d(f){j(e,f)}}}function bl(t){let e;return{c(){e=q("Find parent, child and neighbouring areas")},l(l){e=Y(l,"Find parent, child and neighbouring areas")},m(l,a){y(l,e,a)},d(l){l&&S(e)}}}function vl(t){let e,l,a,n,i,s,r,f,c,h,v,u=t[4],_=[];for(let d=0;d<u.length;d+=1)_[d]=qe(Ue(t,u,d));const p=d=>z(_[d],1,1,()=>{_[d]=null});return a=new Mt({props:{$$slots:{default:[bl]},$$scope:{ctx:t}}}),{c(){for(let d=0;d<_.length;d+=1)_[d].c();e=V(),l=E("section"),H(a.$$.fragment),n=V(),i=E("section"),s=E("h2"),r=q("Get the data"),f=V(),c=E("p"),h=q("Here, you can find information and links to the data."),this.h()},l(d){for(let w=0;w<_.length;w+=1)_[w].l(d);e=P(d),l=T(d,"SECTION",{title:!0,class:!0});var g=R(l);K(a.$$.fragment,g),g.forEach(S),n=P(d),i=T(d,"SECTION",{title:!0,class:!0});var o=R(i);s=T(o,"H2",{class:!0});var b=R(s);r=Y(b,"Get the data"),b.forEach(S),f=P(o),c=T(o,"P",{});var m=R(c);h=Y(m,"Here, you can find information and links to the data."),m.forEach(S),o.forEach(S),this.h()},h(){D(l,"title","Related areas"),D(l,"class","svelte-r2srs5"),D(s,"class","ons-u-mt-xl"),D(i,"title","Get the data"),D(i,"class","svelte-r2srs5")},m(d,g){for(let o=0;o<_.length;o+=1)_[o]&&_[o].m(d,g);y(d,e,g),y(d,l,g),N(a,l,null),y(d,n,g),y(d,i,g),I(i,s),I(s,r),I(i,f),I(i,c),I(c,h),v=!0},p(d,g){if(g&119){u=d[4];let b;for(b=0;b<u.length;b+=1){const m=Ue(d,u,b);_[b]?(_[b].p(m,g),C(_[b],1)):(_[b]=qe(m),_[b].c(),C(_[b],1),_[b].m(e.parentNode,e))}for(ke(),b=u.length;b<_.length;b+=1)p(b);we()}const o={};g&1048576&&(o.$$scope={dirty:g,ctx:d}),a.$set(o)},i(d){if(!v){for(let g=0;g<u.length;g+=1)C(_[g]);C(a.$$.fragment,d),v=!0}},o(d){_=_.filter(Boolean);for(let g=0;g<_.length;g+=1)z(_[g]);z(a.$$.fragment,d),v=!1},d(d){fe(_,d),d&&S(e),d&&S(l),j(a),d&&S(n),d&&S(i)}}}function pl(t){let e,l,a,n;return e=new It({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${pe}/`},{label:"Find a local area",url:`${pe}/areas`},{label:t[3].areanm}],$$slots:{default:[gl]},$$scope:{ctx:t}}}),a=new Gt({props:{contentsLabel:"Explore this area",$$slots:{default:[vl]},$$scope:{ctx:t}}}),{c(){H(e.$$.fragment),l=V(),H(a.$$.fragment)},l(i){K(e.$$.fragment,i),l=P(i),K(a.$$.fragment,i)},m(i,s){N(e,i,s),y(i,l,s),N(a,i,s),n=!0},p(i,[s]){const r={};s&1048576&&(r.$$scope={dirty:s,ctx:i}),e.$set(r);const f={};s&1048583&&(f.$$scope={dirty:s,ctx:i}),a.$set(f)},i(i){n||(C(e.$$.fragment,i),C(a.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),z(a.$$.fragment,i),n=!1},d(i){j(e,i),i&&S(l),j(a,i)}}}function kl(t,e,l){let a,{data:n}=e,i=X("areas"),s=X("areasGeogLevel");X("areasGeogInfo");let r=X("areasParentsLookup"),f=X("indicators"),c=i.find(m=>m.areacd===n.areacd),h=[...new Set(f.map(m=>m.topic))],v={};h.forEach(m=>{l(1,v[m]=f.filter(w=>w.topic===m).map(w=>w.id),v)});let u=s.find(m=>m.areacd===c.areacd).level,_=s.filter(m=>["uk","country"].includes(u)?m.level===u:u==="region"?["region","country"].includes(m.level):u==="both"?["both","lower"].includes(m.level):["both",u].includes(m.level)).map(m=>m.areacd),p=r.find(m=>m.areacd===c.areacd),d=[];d.push({data:c,role:"main"}),d.push({data:i.find(m=>m.areacd===p.parentcd),role:"parent"}),p.countrycd!==null&p.parentcd!==p.countrycd&&d.push({data:i.find(m=>m.areacd===p.countrycd),role:"country"}),p.parentcd!=="K02000001"&&d.push({data:i.find(m=>m.areacd==="K02000001"),role:"uk"});const g=(m,w)=>v[m].includes(w.id),o=(m,w)=>v[m].includes(w.id);function b(m){a=m,l(2,a)}return t.$$set=m=>{"data"in m&&l(0,n=m.data)},console.log(s),l(2,a={main:!0,parent:!1,country:!1,uk:!1,neighbour:!1,cluster:!1,custom:null}),[n,v,a,c,h,_,d,g,o,b]}class El extends ${constructor(e){super(),ee(this,e,kl,pl,te,{data:0})}}export{El as component};
