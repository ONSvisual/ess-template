//js
import{S as oe,i as fe,s as ue,I as vl,k as O,l as H,m as I,h as y,n as f,p as ge,b as B,K as bl,L as kl,M as yl,g as j,d as Y,D as ie,x as je,q as J,a as Z,y as ee,r as x,c as Q,z as ae,W as pe,C as E,A as te,u as me,v as ve,B as le,f as be,U as Ae,V as ne,F as W,G as P,w as ke,Q as ye,R as we,X as Ee,e as De,Y as Sl,Z as Ze,_ as tt,$ as Pe,a0 as ze,E as lt,o as Vl,a1 as xe,a2 as Qe}from"../chunks/index.6979379d.js";import{b as Ce}from"../chunks/paths.2056f01c.js";import{T as Wl,H as Pl,S as zl}from"../chunks/Subhead.bb1cf4de.js";import{S as Bl,s as Re,l as Le,p as wl,a as Nl,M as Gl,A as qe,K as Ol,b as Hl}from"../chunks/Map.73617c30.js";import{t as Ye,b as Al,e as Xe,f as Je,h as re}from"../chunks/config.eb4626c9.js";/* empty css                                                     */function jl(e){let t,l=`${e[0]}px`,a=`${e[1]}px`,i;const r=e[3].default,n=vl(r,e,e[2],null);return{c(){t=O("div"),n&&n.c(),this.h()},l(s){t=H(s,"DIV",{class:!0});var o=I(t);n&&n.l(o),o.forEach(y),this.h()},h(){f(t,"class","placeholder-container svelte-1mhohmc"),ge(t,"height",l),ge(t,"margin-bottom",a)},m(s,o){B(s,t,o),n&&n.m(t,null),i=!0},p(s,[o]){n&&n.p&&(!i||o&4)&&bl(n,r,s,s[2],i?yl(r,s[2],o,null):kl(s[2]),null),o&1&&l!==(l=`${s[0]}px`)&&ge(t,"height",l),o&2&&a!==(a=`${s[1]}px`)&&ge(t,"margin-bottom",a)},i(s){i||(j(n,s),i=!0)},o(s){Y(n,s),i=!1},d(s){s&&y(t),n&&n.d(s)}}}function ql(e,t,l){let{$$slots:a={},$$scope:i}=t,{height:r=400}=t,{margin:n=40}=t;return e.$$set=s=>{"height"in s&&l(0,r=s.height),"margin"in s&&l(1,n=s.margin),"$$scope"in s&&l(2,i=s.$$scope)},[r,n,i,a]}class Yl extends oe{constructor(t){super(),fe(this,t,ql,jl,ue,{height:0,margin:1})}}function Kl(e){let t;return{c(){t=O("p"),this.h()},l(l){t=H(l,"P",{class:!0});var a=I(t);a.forEach(y),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){B(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ie,o:ie,d(l){l&&y(t)}}}function Ul(e,t,l){let{mainAreaName:a,comparisonAreaName:i,differenceValue:r,comparisonValue:n,indicator:s,prefix:o,suffix:h,subTextShort:u,far:c,length:v}=t;Math.pow(10,s.roundingFactor);let b;return v==="short"?b=(r==0?"Equal":r>0?c?"Far above":"Above":c?"Far below":"Below")+" "+i+"-wide average"+(r==0?".":" ("+o+Math.abs(n).toLocaleString()+h+u+")."):v==="medium"&&(b=r==0?s.label+" in "+a+" is equal to the "+i+"-wide average.":s.label+" in "+a+" is "+o+Math.abs(r).toLocaleString()+h+" "+u+(r?" higher":" lower")+" than the "+i+"-wide average."),e.$$set=m=>{"mainAreaName"in m&&l(1,a=m.mainAreaName),"comparisonAreaName"in m&&l(2,i=m.comparisonAreaName),"differenceValue"in m&&l(3,r=m.differenceValue),"comparisonValue"in m&&l(4,n=m.comparisonValue),"indicator"in m&&l(5,s=m.indicator),"prefix"in m&&l(6,o=m.prefix),"suffix"in m&&l(7,h=m.suffix),"subTextShort"in m&&l(8,u=m.subTextShort),"far"in m&&l(9,c=m.far),"length"in m&&l(10,v=m.length)},[b,a,i,r,n,s,o,h,u,c,v]}let at=class extends oe{constructor(t){super(),fe(this,t,Ul,Kl,ue,{mainAreaName:1,comparisonAreaName:2,differenceValue:3,comparisonValue:4,indicator:5,prefix:6,suffix:7,subTextShort:8,far:9,length:10})}};function Zl(e){let t;return{c(){t=O("p"),this.h()},l(l){t=H(l,"P",{class:!0});var a=I(t);a.forEach(y),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){B(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ie,o:ie,d(l){l&&y(t)}}}function Ql(e,t,l){let{mainAreaName:a,comparisonAreaName:i,changeValue:r,changePercent:n,mainValue:s,mainValueInitial:o,indicator:h,prefix:u,suffix:c,subTextShort:v,length:b}=t,m;return b==="short"?h.changeSentence==="percent"?m=r===0?"No change from ":Math.abs(n)+"% "+(r>0?"increase":"descrease")+" from "+h.defaultInitialYear+" to "+h.latestYear+".":h.changeSentence==="absolute"?m=(r===0?"No change from":(r>0?"Rose by ":"Fell by ")+u+Math.abs(r.toFixed(h.roundingFactor))+c+v+" from ")+h.defaultInitialYear+" to "+h.latestYear+".":h.changeSentence==="both"&&(m=r===0?"No change between "+h.defaultInitialYear+" and "+h.latestYear+".":(r>0?"Rose from ":"Fell from ")+u+o+c+v+" in "+h.defaultInitialYear+" to "+u+s+c+v+" in "+h.latestYear+"."):b==="medium"&&(m=differenceValue==0?h.label+" in "+a+" is equal to the "+i+"-wide average.":h.label+" in "+a+" is "+u+Math.abs(differenceValue).toLocaleString()+c+" "+v+(differenceValue?" higher":" lower")+" than the "+i+"-wide average."),e.$$set=_=>{"mainAreaName"in _&&l(1,a=_.mainAreaName),"comparisonAreaName"in _&&l(2,i=_.comparisonAreaName),"changeValue"in _&&l(3,r=_.changeValue),"changePercent"in _&&l(4,n=_.changePercent),"mainValue"in _&&l(5,s=_.mainValue),"mainValueInitial"in _&&l(6,o=_.mainValueInitial),"indicator"in _&&l(7,h=_.indicator),"prefix"in _&&l(8,u=_.prefix),"suffix"in _&&l(9,c=_.suffix),"subTextShort"in _&&l(10,v=_.subTextShort),"length"in _&&l(11,b=_.length)},[m,a,i,r,n,s,o,h,u,c,v,b]}class rt extends oe{constructor(t){super(),fe(this,t,Ql,Zl,ue,{mainAreaName:1,comparisonAreaName:2,changeValue:3,changePercent:4,mainValue:5,mainValueInitial:6,indicator:7,prefix:8,suffix:9,subTextShort:10,length:11})}}function Xl(e){let t,l;return{c(){t=O("p"),l=J(e[16]),this.h()},l(a){t=H(a,"P",{class:!0});var i=I(t);l=x(i,e[16]),i.forEach(y),this.h()},h(){f(t,"class","subText svelte-1nj8n5v")},m(a,i){B(a,t,i),E(t,l)},p:ie,d(a){a&&y(t)}}}function nt(e){let t,l,a,i,r,n,s;var o=e[0].code in e[3]?e[3][e[0].code][0]:rt;function h(u){return{props:{mainAreaName:u[5],comparisonAreaName:u[2],mainValue:u[4],mainValueInitial:u[10],changeValue:u[11],changePercent:u[12],indicator:u[0],prefix:u[14],suffix:u[15],subTextShort:u[17],length:"short"}}}return o&&(n=je(o,h(e))),{c(){t=O("div"),l=O("div"),a=O("p"),i=J(e[13]),r=Z(),n&&ee(n.$$.fragment),this.h()},l(u){t=H(u,"DIV",{class:!0});var c=I(t);l=H(c,"DIV",{class:!0});var v=I(l);a=H(v,"P",{class:!0});var b=I(a);i=x(b,e[13]),b.forEach(y),v.forEach(y),r=Q(c),n&&ae(n.$$.fragment,c),c.forEach(y),this.h()},h(){f(a,"class","svelte-1nj8n5v"),f(l,"class",pe("headlineLabel "+(["Increasing","Falling"].includes(e[13])?null:e[13]==="Little change"?"headlineLabelOkay":e[13]==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1nj8n5v"),f(t,"class","flexV column3 svelte-1nj8n5v")},m(u,c){B(u,t,c),E(t,l),E(l,a),E(a,i),E(t,r),n&&te(n,t,null),s=!0},p(u,c){const v={};if(c&4&&(v.comparisonAreaName=u[2]),c&1&&(v.indicator=u[0]),c&1&&o!==(o=u[0].code in u[3]?u[3][u[0].code][0]:rt)){if(n){ve();const b=n;Y(b.$$.fragment,1,0,()=>{le(b,1)}),be()}o?(n=je(o,h(u)),ee(n.$$.fragment),j(n.$$.fragment,1),te(n,t,null)):n=null}else o&&n.$set(v)},i(u){s||(n&&j(n.$$.fragment,u),s=!0)},o(u){n&&Y(n.$$.fragment,u),s=!1},d(u){u&&y(t),n&&le(n)}}}function Jl(e){let t,l,a,i=e[0].label+"",r,n,s,o,h,u,c=e[14]+parseFloat(e[4].toFixed(e[4]>100?0:1)).toLocaleString()+e[15]+"",v,b,m,_,D,d,p,g,w,k,A,z=e[16]!=""&&Xl(e);var T=e[0].code in e[3]?e[3][e[0].code][0]:at;function M(L){return{props:{mainAreaName:L[5],comparisonAreaName:L[2],differenceValue:L[7],comparisonValue:L[6],indicator:L[0],prefix:L[14],suffix:L[15],subTextShort:L[17],far:L[8],length:"short"}}}T&&(w=je(T,M(e)));let N=e[1]!=null&&nt(e);return{c(){t=O("div"),l=O("h3"),a=O("a"),r=J(i),s=Z(),o=O("div"),h=O("div"),u=O("h4"),v=J(c),b=Z(),z&&z.c(),m=Z(),_=O("div"),D=O("div"),d=O("p"),p=J(e[9]),g=Z(),w&&ee(w.$$.fragment),k=Z(),N&&N.c(),this.h()},l(L){t=H(L,"DIV",{class:!0});var S=I(t);l=H(S,"H3",{class:!0});var F=I(l);a=H(F,"A",{href:!0});var $=I(a);r=x($,i),$.forEach(y),F.forEach(y),s=Q(S),o=H(S,"DIV",{class:!0});var R=I(o);h=H(R,"DIV",{class:!0});var K=I(h);u=H(K,"H4",{class:!0});var q=I(u);v=x(q,c),q.forEach(y),b=Q(K),z&&z.l(K),K.forEach(y),m=Q(R),_=H(R,"DIV",{class:!0});var C=I(_);D=H(C,"DIV",{class:!0});var U=I(D);d=H(U,"P",{class:!0});var V=I(d);p=x(V,e[9]),V.forEach(y),U.forEach(y),g=Q(C),w&&ae(w.$$.fragment,C),C.forEach(y),k=Q(R),N&&N.l(R),R.forEach(y),S.forEach(y),this.h()},h(){f(a,"href",n=Ce+"/indicators/"+e[0].code),f(l,"class","svelte-1nj8n5v"),f(u,"class","svelte-1nj8n5v"),f(h,"class","flexV column1 svelte-1nj8n5v"),f(d,"class","svelte-1nj8n5v"),f(D,"class",pe("headlineLabel "+(["Above average","Below average"].includes(e[9])?null:e[9]==="Similar to average"?"headlineLabelOkay":e[9]==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1nj8n5v"),f(_,"class","flexV column2 svelte-1nj8n5v"),f(o,"class","flexH svelte-1nj8n5v"),f(t,"class","panelContainer svelte-1nj8n5v")},m(L,S){B(L,t,S),E(t,l),E(l,a),E(a,r),E(t,s),E(t,o),E(o,h),E(h,u),E(u,v),E(h,b),z&&z.m(h,null),E(o,m),E(o,_),E(_,D),E(D,d),E(d,p),E(_,g),w&&te(w,_,null),E(o,k),N&&N.m(o,null),A=!0},p(L,[S]){(!A||S&1)&&i!==(i=L[0].label+"")&&me(r,i),(!A||S&1&&n!==(n=Ce+"/indicators/"+L[0].code))&&f(a,"href",n),L[16]!=""&&z.p(L,S);const F={};if(S&4&&(F.comparisonAreaName=L[2]),S&1&&(F.indicator=L[0]),S&1&&T!==(T=L[0].code in L[3]?L[3][L[0].code][0]:at)){if(w){ve();const $=w;Y($.$$.fragment,1,0,()=>{le($,1)}),be()}T?(w=je(T,M(L)),ee(w.$$.fragment),j(w.$$.fragment,1),te(w,_,null)):w=null}else T&&w.$set(F);L[1]!=null?N?(N.p(L,S),S&2&&j(N,1)):(N=nt(L),N.c(),j(N,1),N.m(o,null)):N&&(ve(),Y(N,1,1,()=>{N=null}),be())},i(L){A||(w&&j(w.$$.fragment,L),j(N),A=!0)},o(L){w&&Y(w.$$.fragment,L),Y(N),A=!1},d(L){L&&y(t),z&&z.d(),w&&le(w),N&&N.d()}}}function xl(e,t,l){let{indicator:a,latestData:i,initialData:r,selectedAreas:n}=t,s=Ae("areas"),o={},h=Math.pow(10,a.roundingFactor),u=i.find(q=>q.areacd===n.find(C=>C.role==="main").data.areacd),c=Math.round(u.value*h)/h,v=s.find(q=>q.areacd===u.areacd).areanm,b=i.filter(q=>q.areacd===n.find(C=>C.role==="country").data.areacd),m=i.filter(q=>q.areacd===n.find(C=>C.role==="uk").data.areacd),_=i.filter(q=>q.areacd===n.find(C=>C.role==="parent").data.areacd),D=b.length>0?b[0]:m.length>0?m[0]:_.length>0?_[0]:void 0,d=Math.round(D.value*h)/h,p=s.find(q=>q.areacd===D.areacd).areanm;p=p==="United Kingdom"?"UK":p;let g=c-d,w=a.code in Ye?Ye[a.code]:Al,k=Math.abs(g)/d<w[0]/100,A=Math.abs(g)/d>w[1]/100,z=k?Xe.similar:c>d?Xe.high[a.highEqualsGood]:Xe.low[a.highEqualsGood],T=r===void 0?null:Math.round(r.find(q=>q.areacd===n.find(C=>C.role==="main").data.areacd).value*h)/h,M=c-T,N=Math.abs(M/T*100)<1?Math.round(M/T*1e3)/10:Math.round(M/T*100),S=Math.abs(N)<w[0]?Je.similar:c>T?Je.high[a.highEqualsGood]:Je.low[a.highEqualsGood],F=a.prefix===null?"":a.prefix==="pounds"?"£":a.prefix,$=a.suffix===null?"":a.suffix,R=a.subText===null?"":a.subText,K=a.subTextShort===null?"":a.subTextShort;return e.$$set=q=>{"indicator"in q&&l(0,a=q.indicator),"latestData"in q&&l(18,i=q.latestData),"initialData"in q&&l(1,r=q.initialData),"selectedAreas"in q&&l(19,n=q.selectedAreas)},[a,r,p,o,c,v,d,g,A,z,T,M,N,S,F,$,R,K,i,n]}class $l extends oe{constructor(t){super(),fe(this,t,xl,Jl,ue,{indicator:0,latestData:18,initialData:1,selectedAreas:19})}}function it(e,t,l){const a=e.slice();return a[7]=t[l],a}function st(e){let t,l;function a(...r){return e[5](e[7],...r)}function i(...r){return e[6](e[7],...r)}return t=new $l({props:{indicator:e[2].find(a),latestData:e[1].filter(i),initialData:e[3][e[7].code],selectedAreas:e[4]}}),{c(){ee(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,n){te(t,r,n),l=!0},p(r,n){e=r;const s={};n&5&&(s.indicator=e[2].find(a)),n&3&&(s.latestData=e[1].filter(i)),n&9&&(s.initialData=e[3][e[7].code]),n&16&&(s.selectedAreas=e[4]),t.$set(s)},i(r){l||(j(t.$$.fragment,r),l=!0)},o(r){Y(t.$$.fragment,r),l=!1},d(r){le(t,r)}}}function ea(e){let t,l,a,i,r,n,s=e[0],o=[];for(let u=0;u<s.length;u+=1)o[u]=st(it(e,s,u));const h=u=>Y(o[u],1,1,()=>{o[u]=null});return{c(){t=O("section"),l=O("h1"),a=J("Key indicators"),i=Z(),r=O("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=H(u,"SECTION",{title:!0});var c=I(t);l=H(c,"H1",{});var v=I(l);a=x(v,"Key indicators"),v.forEach(y),i=Q(c),r=H(c,"DIV",{class:!0});var b=I(r);for(let m=0;m<o.length;m+=1)o[m].l(b);b.forEach(y),c.forEach(y),this.h()},h(){f(r,"class","rowsContainer"),f(t,"title","Key indicators")},m(u,c){B(u,t,c),E(t,l),E(l,a),E(t,i),E(t,r);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(r,null);n=!0},p(u,[c]){if(c&31){s=u[0];let v;for(v=0;v<s.length;v+=1){const b=it(u,s,v);o[v]?(o[v].p(b,c),j(o[v],1)):(o[v]=st(b),o[v].c(),j(o[v],1),o[v].m(r,null))}for(ve(),v=s.length;v<o.length;v+=1)h(v);be()}},i(u){if(!n){for(let c=0;c<s.length;c+=1)j(o[c]);n=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)Y(o[c]);n=!1},d(u){u&&y(t),ne(o,u)}}}function ta(e,t,l){let{areaKeyIndicators:a,latestData:i,trimmedIndicators:r,initialData:n,selectedAreas:s}=t;const o=(u,c)=>c.id===u.id,h=(u,c)=>c.codeId===u.id;return e.$$set=u=>{"areaKeyIndicators"in u&&l(0,a=u.areaKeyIndicators),"latestData"in u&&l(1,i=u.latestData),"trimmedIndicators"in u&&l(2,r=u.trimmedIndicators),"initialData"in u&&l(3,n=u.initialData),"selectedAreas"in u&&l(4,s=u.selectedAreas)},[a,i,r,n,s,o,h]}class la extends oe{constructor(t){super(),fe(this,t,ta,ea,ue,{areaKeyIndicators:0,latestData:1,trimmedIndicators:2,initialData:3,selectedAreas:4})}}function ot(e){let t,l,a,i,r,n,s,o,h,u,c;return{c(){t=O("summary"),l=O("h3"),a=J(e[1]),r=Z(),n=O("span"),s=W("svg"),o=W("path"),this.h()},l(v){t=H(v,"SUMMARY",{class:!0});var b=I(t);l=H(b,"H3",{class:!0});var m=I(l);a=x(m,e[1]),m.forEach(y),r=Q(b),n=H(b,"SPAN",{class:!0});var _=I(n);s=P(_,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var D=I(s);o=P(D,"path",{class:!0,d:!0,transform:!0}),I(o).forEach(y),D.forEach(y),_.forEach(y),b.forEach(y),this.h()},h(){f(l,"class",i=pe("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),f(o,"class",h=pe(e[0]?" path_styling_override":"")+" svelte-lfupja"),f(o,"d",u=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),f(o,"transform",c=e[0]?null:"translate(-5.02 -1.59)"),f(s,"class","ons-svg-icon"),f(s,"viewBox","0 0 8 13"),f(s,"xmlns","http://www.w3.org/2000/svg"),f(s,"focusable","false"),f(n,"class","ons-collapsible__icon"),f(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(v,b){B(v,t,b),E(t,l),E(l,a),E(t,r),E(t,n),E(n,s),E(s,o)},p(v,b){b&2&&me(a,v[1]),b&1&&i!==(i=pe("ons-collapsible__title"+(v[0]?" title_styling_override":""))+" svelte-lfupja")&&f(l,"class",i),b&1&&h!==(h=pe(v[0]?" path_styling_override":"")+" svelte-lfupja")&&f(o,"class",h),b&1&&u!==(u=v[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&f(o,"d",u),b&1&&c!==(c=v[0]?null:"translate(-5.02 -1.59)")&&f(o,"transform",c)},d(v){v&&y(t)}}}function aa(e){let t,l,a,i,r,n,s=!e[3]&&ot(e);const o=e[5].default,h=vl(o,e,e[4],null);return{c(){t=O("details"),s&&s.c(),l=Z(),a=O("div"),h&&h.c(),this.h()},l(u){t=H(u,"DETAILS",{class:!0});var c=I(t);s&&s.l(c),l=Q(c),a=H(c,"DIV",{class:!0});var v=I(a);h&&h.l(v),v.forEach(y),c.forEach(y),this.h()},h(){f(a,"class",i=pe(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),f(t,"class",r=pe("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(u,c){B(u,t,c),s&&s.m(t,null),E(t,l),E(t,a),h&&h.m(a,null),n=!0},p(u,[c]){u[3]?s&&(s.d(1),s=null):s?s.p(u,c):(s=ot(u),s.c(),s.m(t,l)),h&&h.p&&(!n||c&16)&&bl(h,o,u,u[4],n?yl(o,u[4],c,null):kl(u[4]),null),(!n||c&5&&i!==(i=pe(u[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(u[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&f(a,"class",i),(!n||c&1&&r!==(r=pe("ons-collapsible ons-js-collapsible"+(u[0]?" details_styling_override":""))+" svelte-lfupja"))&&f(t,"class",r),(!n||c&8)&&(t.open=u[3])},i(u){n||(j(h,u),n=!0)},o(u){Y(h,u),n=!1},d(u){u&&y(t),s&&s.d(),h&&h.d(u)}}}function ra(e,t,l){let{$$slots:a={},$$scope:i}=t,{cross:r=!1}=t,{label:n="Label"}=t,{blank:s=!1}=t,{open:o=!1}=t;return e.$$set=h=>{"cross"in h&&l(0,r=h.cross),"label"in h&&l(1,n=h.label),"blank"in h&&l(2,s=h.blank),"open"in h&&l(3,o=h.open),"$$scope"in h&&l(4,i=h.$$scope)},[r,n,s,o,i,a]}class na extends oe{constructor(t){super(),fe(this,t,ra,aa,ue,{cross:0,label:1,blank:2,open:3})}}function ft(e,t,l){const a=e.slice();return a[10]=t[l],a[11]=t,a[12]=l,a}function ut(e,t,l){const a=e.slice();return a[10]=t[l],a[13]=t,a[12]=l,a}function ht(e){let t,l,a=e[10].data.areanm+"",i,r,n;function s(){e[6].call(l,e[10])}return{c(){t=O("label"),l=O("input"),i=J(a),this.h()},l(o){t=H(o,"LABEL",{class:!0});var h=I(t);l=H(h,"INPUT",{type:!0,class:!0}),i=x(h,a),h.forEach(y),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(o,h){B(o,t,h),E(t,l),l.checked=e[0][e[10].role],E(t,i),r||(n=Ee(l,"change",s),r=!0)},p(o,h){e=o,h&3&&(l.checked=e[0][e[10].role]),h&2&&a!==(a=e[10].data.areanm+"")&&me(i,a)},d(o){o&&y(t),r=!1,n()}}}function ct(e){let t,l,a,i,r=["neighbour","cluster"],n=[];for(let s=0;s<2;s+=1)n[s]=dt(ft(e,r,s));return{c(){t=O("p"),l=J("Related areas"),a=Z();for(let s=0;s<2;s+=1)n[s].c();i=De(),this.h()},l(s){t=H(s,"P",{class:!0});var o=I(t);l=x(o,"Related areas"),o.forEach(y),a=Q(s);for(let h=0;h<2;h+=1)n[h].l(s);i=De(),this.h()},h(){f(t,"class","svelte-thy20g")},m(s,o){B(s,t,o),E(t,l),B(s,a,o);for(let h=0;h<2;h+=1)n[h]&&n[h].m(s,o);B(s,i,o)},p(s,o){if(o&33){r=["neighbour","cluster"];let h;for(h=0;h<2;h+=1){const u=ft(s,r,h);n[h]?n[h].p(u,o):(n[h]=dt(u),n[h].c(),n[h].m(i.parentNode,i))}for(;h<2;h+=1)n[h].d(1)}},d(s){s&&y(t),s&&y(a),ne(n,s),s&&y(i)}}}function dt(e){let t,l,a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas",i,r,n,s;function o(){e[7].call(l,e[10])}return{c(){t=O("label"),l=O("input"),i=J(a),r=Z(),this.h()},l(h){t=H(h,"LABEL",{class:!0});var u=I(t);l=H(u,"INPUT",{type:!0,class:!0}),i=x(u,a),r=Q(u),u.forEach(y),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(h,u){B(h,t,u),E(t,l),l.checked=e[0][e[10]],E(t,i),E(t,r),n||(s=Ee(l,"change",o),n=!0)},p(h,u){e=h,u&1&&(l.checked=e[0][e[10]]),u&32&&a!==(a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas")&&me(i,a)},d(h){h&&y(t),n=!1,s()}}}function ia(e){let t,l,a,i,r,n,s,o,h,u=e[1],c=[];for(let _=0;_<u.length;_+=1)c[_]=ht(ut(e,u,_));let v=e[3]&&ct(e);function b(_){e[8](_)}let m={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(m.checkboxedRoles=e[0]),s=new Bl({props:m}),ke.push(()=>ye(s,"checkboxedRoles",b)),{c(){t=O("div"),l=O("p"),a=J("Parent areas"),i=Z();for(let _=0;_<c.length;_+=1)c[_].c();r=Z(),v&&v.c(),n=Z(),ee(s.$$.fragment),this.h()},l(_){t=H(_,"DIV",{class:!0});var D=I(t);l=H(D,"P",{class:!0});var d=I(l);a=x(d,"Parent areas"),d.forEach(y),i=Q(D);for(let p=0;p<c.length;p+=1)c[p].l(D);r=Q(D),v&&v.l(D),n=Q(D),ae(s.$$.fragment,D),D.forEach(y),this.h()},h(){f(l,"class","svelte-thy20g"),f(t,"class","comparisonInputContainer svelte-thy20g")},m(_,D){B(_,t,D),E(t,l),E(l,a),E(t,i);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(t,null);E(t,r),v&&v.m(t,null),E(t,n),te(s,t,null),h=!0},p(_,D){if(D&3){u=_[1];let p;for(p=0;p<u.length;p+=1){const g=ut(_,u,p);c[p]?c[p].p(g,D):(c[p]=ht(g),c[p].c(),c[p].m(t,r))}for(;p<c.length;p+=1)c[p].d(1);c.length=u.length}_[3]?v?v.p(_,D):(v=ct(_),v.c(),v.m(t,n)):v&&(v.d(1),v=null);const d={};D&2&&(d.selectedAreas=_[1]),D&4&&(d.areasWithData=_[2]),!o&&D&1&&(o=!0,d.checkboxedRoles=_[0],we(()=>o=!1)),s.$set(d)},i(_){h||(j(s.$$.fragment,_),h=!0)},o(_){Y(s.$$.fragment,_),h=!1},d(_){_&&y(t),ne(c,_),v&&v.d(),le(s)}}}function sa(e){let t,l,a;return l=new na({props:{label:"Add areas to compare to "+e[4],open:oa,$$slots:{default:[ia]},$$scope:{ctx:e}}}),{c(){t=O("div"),ee(l.$$.fragment),this.h()},l(i){t=H(i,"DIV",{class:!0});var r=I(t);ae(l.$$.fragment,r),r.forEach(y),this.h()},h(){f(t,"class",pe("twisty-container")+" svelte-thy20g")},m(i,r){B(i,t,r),te(l,t,null),a=!0},p(i,[r]){const n={};r&16&&(n.label="Add areas to compare to "+i[4]),r&16431&&(n.$$scope={dirty:r,ctx:i}),l.$set(n)},i(i){a||(j(l.$$.fragment,i),a=!0)},o(i){Y(l.$$.fragment,i),a=!1},d(i){i&&y(t),le(l)}}}let oa=!1;function fa(e,t,l){let{selectedAreas:a,areasWithData:i,checkboxedRoles:r,includeSiblings:n=!0,selectedArea:s,parentArea:o}=t;a.map(v=>v.role);function h(v){r[v.role]=this.checked,l(0,r)}function u(v){r[v]=this.checked,l(0,r)}function c(v){r=v,l(0,r)}return e.$$set=v=>{"selectedAreas"in v&&l(1,a=v.selectedAreas),"areasWithData"in v&&l(2,i=v.areasWithData),"checkboxedRoles"in v&&l(0,r=v.checkboxedRoles),"includeSiblings"in v&&l(3,n=v.includeSiblings),"selectedArea"in v&&l(4,s=v.selectedArea),"parentArea"in v&&l(5,o=v.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&console.log(a)},[r,a,i,n,s,o,h,u,c]}class Dl extends oe{constructor(t){super(),fe(this,t,fa,sa,ue,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function _t(e,t,l){const a=e.slice();return a[5]=t[l],a[7]=l,a}function mt(e){let t,l;return{c(){t=O("p"),l=J("Compare..."),this.h()},l(a){t=H(a,"P",{class:!0});var i=I(t);l=x(i,"Compare..."),i.forEach(y),this.h()},h(){f(t,"class","svelte-46qqxz")},m(a,i){B(a,t,i),E(t,l)},d(a){a&&y(t)}}}function gt(e){let t,l,a,i,r,n=e[5].toLowerCase()+"",s,o,h,u,c,v;return u=Sl(e[4][0]),{c(){t=O("label"),l=O("input"),a=Z(),i=O("div"),r=O("p"),s=J(n),h=Z(),this.h()},l(b){t=H(b,"LABEL",{});var m=I(t);l=H(m,"INPUT",{style:!0,type:!0,name:!0}),a=Q(m),i=H(m,"DIV",{class:!0,style:!0});var _=I(i);r=H(_,"P",{class:!0});var D=I(r);s=x(D,n),D.forEach(y),_.forEach(y),h=Q(m),m.forEach(y),this.h()},h(){ge(l,"display","none"),f(l,"type","radio"),l.__value=e[7]+1,l.value=l.__value,f(l,"name","chosenChart"),f(r,"class","svelte-46qqxz"),f(i,"class","optionLabel svelte-46qqxz"),f(i,"style",o="background-color: "+(e[0]===e[7]+1?"white":"#d4d4d4")),u.p(l)},m(b,m){B(b,t,m),E(t,l),l.checked=l.__value===e[0],E(t,a),E(t,i),E(i,r),E(r,s),E(t,h),c||(v=Ee(l,"change",e[3]),c=!0)},p(b,m){m&3&&(l.checked=l.__value===b[0]),m&2&&n!==(n=b[5].toLowerCase()+"")&&me(s,n),m&1&&o!==(o="background-color: "+(b[0]===b[7]+1?"white":"#d4d4d4"))&&f(i,"style",o)},d(b){b&&y(t),u.r(),c=!1,v()}}}function ua(e){let t,l,a=e[2]&&mt(),i=e[1],r=[];for(let n=0;n<i.length;n+=1)r[n]=gt(_t(e,i,n));return{c(){t=O("div"),a&&a.c(),l=Z();for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=H(n,"DIV",{class:!0});var s=I(t);a&&a.l(s),l=Q(s);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(y),this.h()},h(){f(t,"class","radioContainer svelte-46qqxz")},m(n,s){B(n,t,s),a&&a.m(t,null),E(t,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(n,[s]){if(n[2]?a||(a=mt(),a.c(),a.m(t,l)):a&&(a.d(1),a=null),s&3){i=n[1];let o;for(o=0;o<i.length;o+=1){const h=_t(n,i,o);r[o]?r[o].p(h,s):(r[o]=gt(h),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i:ie,o:ie,d(n){n&&y(t),a&&a.d(),ne(r,n)}}}function ha(e,t,l){let{optionsArray:a,chosenChart:i,compareIntroText:r=!0}=t;const n=[[]];function s(){i=this.__value,l(0,i)}return e.$$set=o=>{"optionsArray"in o&&l(1,a=o.optionsArray),"chosenChart"in o&&l(0,i=o.chosenChart),"compareIntroText"in o&&l(2,r=o.compareIntroText)},[i,a,r,s,n]}class El extends oe{constructor(t){super(),fe(this,t,ha,ua,ue,{optionsArray:1,chosenChart:0,compareIntroText:2})}}function pt(e,t,l){const a=e.slice();return a[11]=t[l],a[13]=l,a}function vt(e){let t,l=e[4],a=[];for(let i=0;i<l.length;i+=1)a[i]=bt(pt(e,l,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=De()},l(i){for(let r=0;r<a.length;r+=1)a[r].l(i);t=De()},m(i,r){for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(i,r);B(i,t,r)},p(i,r){if(r&114){l=i[4];let n;for(n=0;n<l.length;n+=1){const s=pt(i,l,n);a[n]?a[n].p(s,r):(a[n]=bt(s),a[n].c(),a[n].m(t.parentNode,t))}for(;n<a.length;n+=1)a[n].d(1);a.length=l.length}},d(i){ne(a,i),i&&y(t)}}}function bt(e){let t,l,a,i,r,n=e[5]+e[11].toLocaleString()+e[6]+"",s,o;return{c(){t=W("g"),l=W("line"),r=W("text"),s=J(n),this.h()},l(h){t=P(h,"g",{class:!0});var u=I(t);l=P(u,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(y),r=P(u,"text",{"text-anchor":!0,x:!0,y:!0,stroke:!0,fill:!0,"font-size":!0});var c=I(r);s=x(c,n),c.forEach(y),u.forEach(y),this.h()},h(){f(l,"x1","0"),f(l,"x2","-8"),f(l,"y1",a=e[1](e[11])),f(l,"y2",i=e[1](e[11])),f(l,"stroke","black"),f(r,"text-anchor","end"),f(r,"x",-10),f(r,"y",o=e[1](e[11])+5),f(r,"stroke","none"),f(r,"fill","#333"),f(r,"font-size","14px"),f(t,"class","tick")},m(h,u){B(h,t,u),E(t,l),E(t,r),E(r,s)},p(h,u){u&18&&a!==(a=h[1](h[11]))&&f(l,"y1",a),u&18&&i!==(i=h[1](h[11]))&&f(l,"y2",i),u&16&&n!==(n=h[5]+h[11].toLocaleString()+h[6]+"")&&me(s,n),u&18&&o!==(o=h[1](h[11])+5)&&f(r,"y",o)},d(h){h&&y(t)}}}function ca(e){let t,l,a,i,r,n=e[3]==0&&vt(e);return{c(){t=W("g"),l=W("line"),n&&n.c(),this.h()},l(s){t=P(s,"g",{class:!0,transform:!0});var o=I(t);l=P(o,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(y),n&&n.l(o),o.forEach(y),this.h()},h(){f(l,"x1","0"),f(l,"x2","0"),f(l,"y1",a=e[1](e[0][1])),f(l,"y2",i=e[1](e[0][0])),f(l,"stroke","black"),f(t,"class","yAxis"),f(t,"transform",r="translate("+-e[2]+",0)")},m(s,o){B(s,t,o),E(t,l),n&&n.m(t,null)},p(s,[o]){o&3&&a!==(a=s[1](s[0][1]))&&f(l,"y1",a),o&3&&i!==(i=s[1](s[0][0]))&&f(l,"y2",i),s[3]==0?n?n.p(s,o):(n=vt(s),n.c(),n.m(t,null)):n&&(n.d(1),n=null),o&4&&r!==(r="translate("+-s[2]+",0)")&&f(t,"transform",r)},i:ie,o:ie,d(s){s&&y(t),n&&n.d()}}}function da(e,t,l){let a,i,r,{yDomain:n,y:s,yAxisOffset:o=0,column:h=0,indicator:u}=t,c=[],v=u.prefix===null?"":u.prefix==="pounds"?"£":u.prefix,b=u.suffix===null?"":u.suffix;return e.$$set=m=>{"yDomain"in m&&l(0,n=m.yDomain),"y"in m&&l(1,s=m.y),"yAxisOffset"in m&&l(2,o=m.yAxisOffset),"column"in m&&l(3,h=m.column),"indicator"in m&&l(7,u=m.indicator)},e.$$.update=()=>{if(e.$$.dirty&1&&l(10,a=Math.abs(n[1]-n[0])),e.$$.dirty&1024&&l(9,i=10**Math.floor(Math.log10(a))),e.$$.dirty&1536&&l(8,r=a/i<=1.5?i/5:a/i<=3?i/2:a/i<=6?i:i*2),e.$$.dirty&273){l(4,c=[]);for(let m=Math.ceil(n[0]);m<=Math.floor(n[1]);m++)m%r==0&&c.push(m)}},[n,s,o,h,c,v,b,u,r,i,a]}class Il extends oe{constructor(t){super(),fe(this,t,da,ca,ue,{yDomain:0,y:1,yAxisOffset:2,column:3,indicator:7})}}function kt(e,t,l){const a=e.slice();return a[8]=t[l],a[10]=l,a}function yt(e){let t,l,a,i;return{c(){t=W("line"),this.h()},l(r){t=P(r,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),I(t).forEach(y),this.h()},h(){f(t,"y1","0"),f(t,"y2",l=-e[3]),f(t,"x1",a=e[1](e[8])),f(t,"x2",i=e[1](e[8])),f(t,"stroke","black"),f(t,"opacity","0.1")},m(r,n){B(r,t,n)},p(r,n){n&8&&l!==(l=-r[3])&&f(t,"y2",l),n&2&&a!==(a=r[1](r[8]))&&f(t,"x1",a),n&2&&i!==(i=r[1](r[8]))&&f(t,"x2",i)},d(r){r&&y(t)}}}function wt(e){let t,l,a,i,r,n=e[8]+"",s,o,h=e[4]&&yt(e);return{c(){t=W("g"),l=W("line"),r=W("text"),s=J(n),h&&h.c(),this.h()},l(u){t=P(u,"g",{class:!0});var c=I(t);l=P(c,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(y),r=P(c,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var v=I(r);s=x(v,n),v.forEach(y),h&&h.l(c),c.forEach(y),this.h()},h(){f(l,"y1","0"),f(l,"y2","8"),f(l,"x1",a=e[1](e[8])),f(l,"x2",i=e[1](e[8])),f(l,"stroke","black"),f(r,"text-anchor","middle"),f(r,"y",20),f(r,"x",o=e[1](e[8])),f(r,"stroke","none"),f(r,"fill","#333"),f(r,"font-size","14px"),f(t,"class","tick")},m(u,c){B(u,t,c),E(t,l),E(t,r),E(r,s),h&&h.m(t,null)},p(u,c){c&2&&a!==(a=u[1](u[8]))&&f(l,"x1",a),c&2&&i!==(i=u[1](u[8]))&&f(l,"x2",i),c&2&&o!==(o=u[1](u[8]))&&f(r,"x",o),u[4]?h?h.p(u,c):(h=yt(u),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},d(u){u&&y(t),h&&h.d()}}}function _a(e){let t,l,a,i,r,n=e[5],s=[];for(let o=0;o<n.length;o+=1)s[o]=wt(kt(e,n,o));return{c(){t=W("g"),l=W("line");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=P(o,"g",{class:!0,transform:!0});var h=I(t);l=P(h,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(y);for(let u=0;u<s.length;u+=1)s[u].l(h);h.forEach(y),this.h()},h(){f(l,"y1","0"),f(l,"y2","0"),f(l,"x1",a=e[1](e[0][0])),f(l,"x2",i=e[1](e[0][1])),f(l,"stroke","black"),f(t,"class","xAxis"),f(t,"transform",r="translate(0,"+(e[2]+e[3])+")")},m(o,h){B(o,t,h),E(t,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null)},p(o,[h]){if(h&3&&a!==(a=o[1](o[0][0]))&&f(l,"x1",a),h&3&&i!==(i=o[1](o[0][1]))&&f(l,"x2",i),h&58){n=o[5];let u;for(u=0;u<n.length;u+=1){const c=kt(o,n,u);s[u]?s[u].p(c,h):(s[u]=wt(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}h&12&&r!==(r="translate(0,"+(o[2]+o[3])+")")&&f(t,"transform",r)},i:ie,o:ie,d(o){o&&y(t),ne(s,o)}}}function ma(e,t,l){let{xDomain:a,x:i,xAxisOffset:r=0,chartHeight:n,gridlines:s=!1}=t,o=Math.abs(a[1]-a[0]),h=o>=15?5:o>=6?2:1,u=[];for(let c=Math.floor(a[0]);c<=Math.ceil(a[1]);c++)c%h==0&&u.push(c);return e.$$set=c=>{"xDomain"in c&&l(0,a=c.xDomain),"x"in c&&l(1,i=c.x),"xAxisOffset"in c&&l(2,r=c.xAxisOffset),"chartHeight"in c&&l(3,n=c.chartHeight),"gridlines"in c&&l(4,s=c.gridlines)},[a,i,r,n,s,u]}class ga extends oe{constructor(t){super(),fe(this,t,ma,_a,ue,{xDomain:0,x:1,xAxisOffset:2,chartHeight:3,gridlines:4})}}function Se(e){return function(){return e}}const $e=Math.PI,et=2*$e,Fe=1e-6,pa=et-Fe;function Ml(e){this._+=e[0];for(let t=1,l=e.length;t<l;++t)this._+=arguments[t]+e[t]}function va(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ml;const l=10**t;return function(a){this._+=a[0];for(let i=1,r=a.length;i<r;++i)this._+=Math.round(arguments[i]*l)/l+a[i]}}class ba{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ml:va(t)}moveTo(t,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,l){this._append`L${this._x1=+t},${this._y1=+l}`}quadraticCurveTo(t,l,a,i){this._append`Q${+t},${+l},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(t,l,a,i,r,n){this._append`C${+t},${+l},${+a},${+i},${this._x1=+r},${this._y1=+n}`}arcTo(t,l,a,i,r){if(t=+t,l=+l,a=+a,i=+i,r=+r,r<0)throw new Error(`negative radius: ${r}`);let n=this._x1,s=this._y1,o=a-t,h=i-l,u=n-t,c=s-l,v=u*u+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=l}`;else if(v>Fe)if(!(Math.abs(c*o-h*u)>Fe)||!r)this._append`L${this._x1=t},${this._y1=l}`;else{let b=a-n,m=i-s,_=o*o+h*h,D=b*b+m*m,d=Math.sqrt(_),p=Math.sqrt(v),g=r*Math.tan(($e-Math.acos((_+v-D)/(2*d*p)))/2),w=g/p,k=g/d;Math.abs(w-1)>Fe&&this._append`L${t+w*u},${l+w*c}`,this._append`A${r},${r},0,0,${+(c*b>u*m)},${this._x1=t+k*o},${this._y1=l+k*h}`}}arc(t,l,a,i,r,n){if(t=+t,l=+l,a=+a,n=!!n,a<0)throw new Error(`negative radius: ${a}`);let s=a*Math.cos(i),o=a*Math.sin(i),h=t+s,u=l+o,c=1^n,v=n?i-r:r-i;this._x1===null?this._append`M${h},${u}`:(Math.abs(this._x1-h)>Fe||Math.abs(this._y1-u)>Fe)&&this._append`L${h},${u}`,a&&(v<0&&(v=v%et+et),v>pa?this._append`A${a},${a},0,1,${c},${t-s},${l-o}A${a},${a},0,1,${c},${this._x1=h},${this._y1=u}`:v>Fe&&this._append`A${a},${a},0,${+(v>=$e)},${c},${this._x1=t+a*Math.cos(r)},${this._y1=l+a*Math.sin(r)}`)}rect(t,l,a,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+l}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function ka(e){let t=3;return e.digits=function(l){if(!arguments.length)return t;if(l==null)t=null;else{const a=Math.floor(l);if(!(a>=0))throw new RangeError(`invalid digits: ${l}`);t=a}return e},()=>new ba(t)}function ya(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rl(e){this._context=e}Rl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wa(e){return new Rl(e)}function Aa(e){return e[0]}function Da(e){return e[1]}function Ea(e,t){var l=Se(!0),a=null,i=wa,r=null,n=ka(s);e=typeof e=="function"?e:e===void 0?Aa:Se(e),t=typeof t=="function"?t:t===void 0?Da:Se(t);function s(o){var h,u=(o=ya(o)).length,c,v=!1,b;for(a==null&&(r=i(b=n())),h=0;h<=u;++h)!(h<u&&l(c=o[h],h,o))===v&&((v=!v)?r.lineStart():r.lineEnd()),v&&r.point(+e(c,h,o),+t(c,h,o));if(b)return r=null,b+""||null}return s.x=function(o){return arguments.length?(e=typeof o=="function"?o:Se(+o),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:Se(+o),s):t},s.defined=function(o){return arguments.length?(l=typeof o=="function"?o:Se(!!o),s):l},s.curve=function(o){return arguments.length?(i=o,a!=null&&(r=i(a)),s):i},s.context=function(o){return arguments.length?(o==null?a=r=null:r=i(a=o),s):a},s}function At(e,t,l){const a=e.slice();return a[12]=t[l],a[14]=l,a}function Dt(e){let t,l=e[2],a=[];for(let i=0;i<l.length;i+=1)a[i]=Et(At(e,l,i));return{c(){t=W("g");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){t=P(i,"g",{class:!0});var r=I(t);for(let n=0;n<a.length;n+=1)a[n].l(r);r.forEach(y),this.h()},h(){f(t,"class","pointsContainer")},m(i,r){B(i,t,r);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(t,null)},p(i,r){if(r&125){l=i[2];let n;for(n=0;n<l.length;n+=1){const s=At(i,l,n);a[n]?a[n].p(s,r):(a[n]=Et(s),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=l.length}},d(i){i&&y(t),ne(a,i)}}}function Ia(e){let t,l;return{c(){t=W("circle"),this.h()},l(a){t=P(a,"circle",{r:!0,fill:!0,stroke:!0});var i=I(t);i.forEach(y),this.h()},h(){f(t,"r","3.5"),f(t,"fill",l=e[0]===e[3]?"#F39431":re[e[6].role]),f(t,"stroke","white")},m(a,i){B(a,t,i)},p(a,i){i&73&&l!==(l=a[0]===a[3]?"#F39431":re[a[6].role])&&f(t,"fill",l)},d(a){a&&y(t)}}}function Ma(e){let t,l,a;return{c(){t=W("rect"),this.h()},l(i){t=P(i,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var r=I(t);r.forEach(y),this.h()},h(){f(t,"transform",l=["country","uk"].includes(e[6].role)?"rotate(45)":null),f(t,"x","-3"),f(t,"y","-3"),f(t,"width","6"),f(t,"height","6"),f(t,"fill",a=e[0]===e[3]?"#F39431":re[e[6].role]),f(t,"stroke","white")},m(i,r){B(i,t,r)},p(i,r){r&64&&l!==(l=["country","uk"].includes(i[6].role)?"rotate(45)":null)&&f(t,"transform",l),r&73&&a!==(a=i[0]===i[3]?"#F39431":re[i[6].role])&&f(t,"fill",a)},d(i){i&&y(t)}}}function Et(e){let t,l,a;function i(s,o){return o&64&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[6].role)),l?Ma:Ia}let r=i(e,-1),n=r(e);return{c(){t=W("g"),n.c(),this.h()},l(s){t=P(s,"g",{transform:!0});var o=I(t);n.l(o),o.forEach(y),this.h()},h(){f(t,"transform",a="translate("+e[4](e[12].year)+","+e[5](e[12].value)+")")},m(s,o){B(s,t,o),n.m(t,null)},p(s,o){r===(r=i(s,o))&&n?n.p(s,o):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null))),o&52&&a!==(a="translate("+s[4](s[12].year)+","+s[5](s[12].value)+")")&&f(t,"transform",a)},d(s){s&&y(t),n.d()}}}function Ra(e){let t,l,a,i,r,n,s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1],o,h,u,c=s&&Dt(e);return{c(){t=W("g"),l=W("path"),c&&c.c(),this.h()},l(v){t=P(v,"g",{class:!0,opacity:!0});var b=I(t);l=P(b,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0,hoverid:!0}),I(l).forEach(y),c&&c.l(b),b.forEach(y),this.h()},h(){f(l,"d",a=e[7](e[2])),f(l,"fill","none"),f(l,"stroke",i=e[0]===e[3]?"#F39431":re[e[6].role]),f(l,"stroke-width",r=e[1]?"16px":"2px"),f(l,"opacity",n=e[1]?0:e[0]===e[3]||e[10]?1:.25),f(l,"hoverid",e[3]),f(t,"class","lineContainer"),f(t,"opacity",o=e[0]===e[3]||e[0]===null?1:.25)},m(v,b){B(v,t,b),E(t,l),c&&c.m(t,null),h||(u=[Ee(l,"mouseover",function(){Ze(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)}),Ee(l,"mouseleave",function(){Ze(e[1]?e[9]:null)&&(e[1]?e[9]:null).apply(this,arguments)}),Ee(l,"focus",function(){Ze(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)})],h=!0)},p(v,[b]){e=v,b&132&&a!==(a=e[7](e[2]))&&f(l,"d",a),b&73&&i!==(i=e[0]===e[3]?"#F39431":re[e[6].role])&&f(l,"stroke",i),b&2&&r!==(r=e[1]?"16px":"2px")&&f(l,"stroke-width",r),b&11&&n!==(n=e[1]?0:e[0]===e[3]||e[10]?1:.25)&&f(l,"opacity",n),b&8&&f(l,"hoverid",e[3]),b&75&&(s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1]),s?c?c.p(e,b):(c=Dt(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),b&9&&o!==(o=e[0]===e[3]||e[0]===null?1:.25)&&f(t,"opacity",o)},i:ie,o:ie,d(v){v&&y(t),c&&c.d(),h=!1,tt(u)}}}function La(e,t,l){let a,{overlay:i=!1,lineData:r,i:n,hoverIndex:s,x:o,y:h,xDomain:u,area:c}=t;function v(_){l(0,s=parseFloat(Re(this).attr("hoverid")))}function b(_){l(0,s=null)}let m=["main","parent","country","uk","custom1","custom2","custom3","custom4"];return e.$$set=_=>{"overlay"in _&&l(1,i=_.overlay),"lineData"in _&&l(2,r=_.lineData),"i"in _&&l(3,n=_.i),"hoverIndex"in _&&l(0,s=_.hoverIndex),"x"in _&&l(4,o=_.x),"y"in _&&l(5,h=_.y),"xDomain"in _&&l(11,u=_.xDomain),"area"in _&&l(6,c=_.area)},e.$$.update=()=>{e.$$.dirty&48&&l(7,a=Ea().x(_=>o(_.year)).y(_=>h(_.value)))},[s,i,r,n,o,h,c,a,v,b,m,u]}class Ll extends oe{constructor(t){super(),fe(this,t,La,Ra,ue,{overlay:1,lineData:2,i:3,hoverIndex:0,x:4,y:5,xDomain:11,area:6})}}function It(e,t,l){const a=e.slice();return a[3]=t[l],a}function Mt(e){let t,l=e[3].datum.areanm+"",a,i,r,n=e[3].datum.areanm+"",s,o,h,u;return{c(){t=W("text"),a=J(l),r=W("text"),s=J(n),this.h()},l(c){t=P(c,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var v=I(t);a=x(v,l),v.forEach(y),r=P(c,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var b=I(r);s=x(b,n),b.forEach(y),this.h()},h(){f(t,"y",i=e[3].y+8),f(t,"font-size","16px"),f(t,"fill","white"),f(t,"stroke","white"),f(t,"stroke-width","4px"),f(r,"y",o=e[3].y+8),f(r,"font-size","16px"),f(r,"fill",h=e[2]!=null?"#F39431":re[e[3].datum.role]),f(r,"stroke",u=e[2]!=null?"#F39431":re[e[3].datum.role]),f(r,"stroke-width","0.5px")},m(c,v){B(c,t,v),E(t,a),B(c,r,v),E(r,s)},p(c,v){v&2&&l!==(l=c[3].datum.areanm+"")&&me(a,l),v&2&&i!==(i=c[3].y+8)&&f(t,"y",i),v&2&&n!==(n=c[3].datum.areanm+"")&&me(s,n),v&2&&o!==(o=c[3].y+8)&&f(r,"y",o),v&6&&h!==(h=c[2]!=null?"#F39431":re[c[3].datum.role])&&f(r,"fill",h),v&6&&u!==(u=c[2]!=null?"#F39431":re[c[3].datum.role])&&f(r,"stroke",u)},d(c){c&&y(t),c&&y(r)}}}function Fa(e){let t,l,a=e[1],i=[];for(let r=0;r<a.length;r+=1)i[r]=Mt(It(e,a,r));return{c(){t=W("g");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=P(r,"g",{class:!0,transform:!0});var n=I(t);for(let s=0;s<i.length;s+=1)i[s].l(n);n.forEach(y),this.h()},h(){f(t,"class","labelsContainer"),f(t,"transform",l="translate("+e[0]+",0)")},m(r,n){B(r,t,n);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null)},p(r,[n]){if(n&6){a=r[1];let s;for(s=0;s<a.length;s+=1){const o=It(r,a,s);i[s]?i[s].p(o,n):(i[s]=Mt(o),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=a.length}n&1&&l!==(l="translate("+r[0]+",0)")&&f(t,"transform",l)},i:ie,o:ie,d(r){r&&y(t),ne(i,r)}}}function Ca(e,t,l){let{x:a,labelPlacements:i,hoverIndex:r}=t;return e.$$set=n=>{"x"in n&&l(0,a=n.x),"labelPlacements"in n&&l(1,i=n.labelPlacements),"hoverIndex"in n&&l(2,r=n.hoverIndex)},[a,i,r]}class Fl extends oe{constructor(t){super(),fe(this,t,Ca,Fa,ue,{x:0,labelPlacements:1,hoverIndex:2})}}function Rt(e,t,l){const a=e.slice();return a[22]=t[l],a[24]=l,a}function Lt(e,t,l){const a=e.slice();return a[22]=t[l],a[24]=l,a}function Ft(e){let t,l;function a(...i){return e[15](e[22],...i)}return t=new Ll({props:{area:e[22],lineData:e[1].filter(a),i:e[24],hoverIndex:e[6],x:e[12],y:e[7],xDomain:e[10]}}),{c(){ee(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,r){te(t,i,r),l=!0},p(i,r){e=i;const n={};r&1&&(n.area=e[22]),r&3&&(n.lineData=e[1].filter(a)),r&64&&(n.hoverIndex=e[6]),r&4096&&(n.x=e[12]),r&128&&(n.y=e[7]),r&1024&&(n.xDomain=e[10]),t.$set(n)},i(i){l||(j(t.$$.fragment,i),l=!0)},o(i){Y(t.$$.fragment,i),l=!1},d(i){le(t,i)}}}function Ct(e){let t,l,a;function i(...s){return e[16](e[22],...s)}function r(s){e[17](s)}let n={overlay:"true",area:e[22],lineData:e[1].filter(i),i:e[24],x:e[12],y:e[7],xDomain:e[10]};return e[6]!==void 0&&(n.hoverIndex=e[6]),t=new Ll({props:n}),ke.push(()=>ye(t,"hoverIndex",r)),{c(){ee(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){te(t,s,o),a=!0},p(s,o){e=s;const h={};o&1&&(h.area=e[22]),o&3&&(h.lineData=e[1].filter(i)),o&4096&&(h.x=e[12]),o&128&&(h.y=e[7]),o&1024&&(h.xDomain=e[10]),!l&&o&64&&(l=!0,h.hoverIndex=e[6],we(()=>l=!1)),t.$set(h)},i(s){a||(j(t.$$.fragment,s),a=!0)},o(s){Y(t.$$.fragment,s),a=!1},d(s){le(t,s)}}}function Ta(e){let t,l,a,i,r,n,s,o,h,u,c,v;r=new Il({props:{yDomain:e[8],y:e[7],indicator:e[2]}}),n=new ga({props:{chartHeight:e[4],xDomain:e[10],x:e[12]}});let b=e[0].reverse(),m=[];for(let g=0;g<b.length;g+=1)m[g]=Ft(Lt(e,b,g));const _=g=>Y(m[g],1,1,()=>{m[g]=null});let D=e[0],d=[];for(let g=0;g<D.length;g+=1)d[g]=Ct(Rt(e,D,g));const p=g=>Y(d[g],1,1,()=>{d[g]=null});return h=new Fl({props:{x:e[12](e[10][1])+5,labelPlacements:e[11],hoverIndex:e[6]}}),{c(){t=O("div"),l=W("svg"),a=W("g"),i=W("rect"),ee(r.$$.fragment),ee(n.$$.fragment),s=W("g");for(let g=0;g<m.length;g+=1)m[g].c();o=W("g");for(let g=0;g<d.length;g+=1)d[g].c();ee(h.$$.fragment),this.h()},l(g){t=H(g,"DIV",{class:!0});var w=I(t);l=P(w,"svg",{height:!0,width:!0});var k=I(l);a=P(k,"g",{class:!0,transform:!0});var A=I(a);i=P(A,"rect",{width:!0,height:!0,fill:!0,opacity:!0,stroke:!0}),I(i).forEach(y),ae(r.$$.fragment,A),ae(n.$$.fragment,A),s=P(A,"g",{class:!0});var z=I(s);for(let M=0;M<m.length;M+=1)m[M].l(z);z.forEach(y),o=P(A,"g",{class:!0});var T=I(o);for(let M=0;M<d.length;M+=1)d[M].l(T);T.forEach(y),ae(h.$$.fragment,A),A.forEach(y),k.forEach(y),w.forEach(y),this.h()},h(){f(i,"width",e[9]),f(i,"height",e[4]),f(i,"fill","black"),f(i,"opacity","0.02"),f(i,"stroke","none"),f(s,"class","visibleLinesGroup"),f(o,"class","overlayLinesGroup"),f(a,"class","chart-container"),f(a,"transform",u="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[13]),f(l,"width",e[3]),f(t,"class","svg-container"),Pe(()=>e[18].call(t))},m(g,w){B(g,t,w),E(t,l),E(l,a),E(a,i),te(r,a,null),te(n,a,null),E(a,s);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(s,null);E(a,o);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(o,null);te(h,a,null),c=ze(t,e[18].bind(t)),v=!0},p(g,[w]){(!v||w&512)&&f(i,"width",g[9]),(!v||w&16)&&f(i,"height",g[4]);const k={};w&256&&(k.yDomain=g[8]),w&128&&(k.y=g[7]),w&4&&(k.indicator=g[2]),r.$set(k);const A={};if(w&16&&(A.chartHeight=g[4]),w&1024&&(A.xDomain=g[10]),w&4096&&(A.x=g[12]),n.$set(A),w&5315){b=g[0].reverse();let T;for(T=0;T<b.length;T+=1){const M=Lt(g,b,T);m[T]?(m[T].p(M,w),j(m[T],1)):(m[T]=Ft(M),m[T].c(),j(m[T],1),m[T].m(s,null))}for(ve(),T=b.length;T<m.length;T+=1)_(T);be()}if(w&5315){D=g[0];let T;for(T=0;T<D.length;T+=1){const M=Rt(g,D,T);d[T]?(d[T].p(M,w),j(d[T],1)):(d[T]=Ct(M),d[T].c(),j(d[T],1),d[T].m(o,null))}for(ve(),T=D.length;T<d.length;T+=1)p(T);be()}const z={};w&5120&&(z.x=g[12](g[10][1])+5),w&2048&&(z.labelPlacements=g[11]),w&64&&(z.hoverIndex=g[6]),h.$set(z),(!v||w&32&&u!==(u="translate("+g[5].left+","+g[5].top+")"))&&f(a,"transform",u),(!v||w&8)&&f(l,"width",g[3])},i(g){if(!v){j(r.$$.fragment,g),j(n.$$.fragment,g);for(let w=0;w<b.length;w+=1)j(m[w]);for(let w=0;w<D.length;w+=1)j(d[w]);j(h.$$.fragment,g),v=!0}},o(g){Y(r.$$.fragment,g),Y(n.$$.fragment,g),m=m.filter(Boolean);for(let w=0;w<m.length;w+=1)Y(m[w]);d=d.filter(Boolean);for(let w=0;w<d.length;w+=1)Y(d[w]);Y(h.$$.fragment,g),v=!1},d(g){g&&y(t),le(r),le(n),ne(m,g),ne(d,g),le(h),c()}}}function Sa(e,t,l){let a,i,r,n,s,o,h,u,c,v,b=Ae("areas"),{plottedAreas:m,filteredData:_,indicator:D}=t,d=400,p=500,g=170,w=["main","parent","country","uk","custom1","custom2","custom3","custom4"];const k=(M,N)=>N.areacd===M.areacd,A=(M,N)=>N.areacd===M.areacd;function z(M){u=M,l(6,u)}function T(){d=this.clientWidth,l(3,d)}return e.$$set=M=>{"plottedAreas"in M&&l(0,m=M.plottedAreas),"filteredData"in M&&l(1,_=M.filteredData),"indicator"in M&&l(2,D=M.indicator)},e.$$.update=()=>{e.$$.dirty&40&&l(9,i=d-a.left-a.right),e.$$.dirty&32&&l(4,r=p-a.top-a.bottom),e.$$.dirty&2&&l(10,n=[Math.min(..._.map(M=>M.year)),Math.max(..._.map(M=>M.year))]),e.$$.dirty&1536&&l(12,s=Le().domain(n).range([0,i])),e.$$.dirty&6&&l(8,o=[D.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(..._.map(M=>M.value))),Math.ceil(Math.max(..._.map(M=>M.value)))]),e.$$.dirty&272&&l(7,h=Le().domain(o).range([r,0])),e.$$.dirty&195&&l(14,c=m.map(M=>({...M,yPosition:h(_.find(N=>N.areacd===M.areacd&N.year===Math.max.apply(null,_.filter(L=>L.areacd===M.areacd).map(L=>L.year))).value),areanm:b.find(N=>M.areacd===N.areacd).areanm})).filter((M,N)=>u!=null?N==u:w.includes(M.role))),e.$$.dirty&16432&&l(11,v=wl(c,[-a.top,r],M=>M.yPosition,M=>M.areanm.length>20?34:17))},l(5,a={top:10,left:80,right:g+5,bottom:40}),l(6,u=null),[m,_,D,d,r,a,u,h,o,i,n,v,s,p,c,k,A,z,T]}class Va extends oe{constructor(t){super(),fe(this,t,Sa,Ta,ue,{plottedAreas:0,filteredData:1,indicator:2})}}function Tt(e,t,l){const a=e.slice();return a[10]=t[l],a[12]=l,a}function St(e,t,l){const a=e.slice();return a[10]=t[l],a[12]=l,a}function Vt(e){let t,l,a,i=e[1],r=[];for(let o=0;o<i.length;o+=1)r[o]=Wt(St(e,i,o));let n=e[1],s=[];for(let o=0;o<n.length;o+=1)s[o]=Pt(Tt(e,n,o));return{c(){t=W("g");for(let o=0;o<r.length;o+=1)r[o].c();l=Z(),a=W("g");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=P(o,"g",{class:!0});var h=I(t);for(let c=0;c<r.length;c+=1)r[c].l(h);h.forEach(y),l=Q(o),a=P(o,"g",{class:!0});var u=I(a);for(let c=0;c<s.length;c+=1)s[c].l(u);u.forEach(y),this.h()},h(){f(t,"class","overlayCirclesContainer"),f(a,"class","visibleCirclesContainer")},m(o,h){B(o,t,h);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);B(o,l,h),B(o,a,h);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,null)},p(o,h){if(h&14){i=o[1];let u;for(u=0;u<i.length;u+=1){const c=St(o,i,u);r[u]?r[u].p(c,h):(r[u]=Wt(c),r[u].c(),r[u].m(t,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}if(h&3){n=o[1];let u;for(u=0;u<n.length;u+=1){const c=Tt(o,n,u);s[u]?s[u].p(c,h):(s[u]=Pt(c),s[u].c(),s[u].m(a,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}},d(o){o&&y(t),ne(r,o),o&&y(l),o&&y(a),ne(s,o)}}}function Wt(e){let t,l,a,i,r,n;return{c(){t=W("g"),l=W("circle"),this.h()},l(s){t=P(s,"g",{transform:!0});var o=I(t);l=P(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0}),I(l).forEach(y),o.forEach(y),this.h()},h(){f(l,"hoverid",e[12]),f(l,"r",a=1.5*e[10].datum.radius),f(l,"stroke","none"),f(l,"fill","white"),f(t,"transform",i="translate("+e[10].y+","+e[10].x+")")},m(s,o){B(s,t,o),E(t,l),r||(n=[Ee(l,"mouseover",e[2]),Ee(l,"mouseleave",e[3]),Ee(l,"focus",e[2])],r=!0)},p(s,o){o&2&&a!==(a=1.5*s[10].datum.radius)&&f(l,"r",a),o&2&&i!==(i="translate("+s[10].y+","+s[10].x+")")&&f(t,"transform",i)},d(s){s&&y(t),r=!1,tt(n)}}}function Wa(e){let t,l,a,i;return{c(){t=W("circle"),this.h()},l(r){t=P(r,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,opacity:!0});var n=I(t);n.forEach(y),this.h()},h(){f(t,"pointer-events","none"),f(t,"r",l=e[0]===e[12]?e[10].datum.radius+3:e[10].datum.radius),f(t,"fill",a=e[0]===e[12]?"#F39431":re[e[10].datum.role]),f(t,"stroke","white"),f(t,"opacity",i=e[0]===e[12]||e[0]===null?1:.2)},m(r,n){B(r,t,n)},p(r,n){n&3&&l!==(l=r[0]===r[12]?r[10].datum.radius+3:r[10].datum.radius)&&f(t,"r",l),n&3&&a!==(a=r[0]===r[12]?"#F39431":re[r[10].datum.role])&&f(t,"fill",a),n&1&&i!==(i=r[0]===r[12]||r[0]===null?1:.2)&&f(t,"opacity",i)},d(r){r&&y(t)}}}function Pa(e){let t,l,a,i,r,n,s,o;return{c(){t=W("rect"),this.h()},l(h){t=P(h,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,opacity:!0});var u=I(t);u.forEach(y),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[10].datum.role)?"rotate(45)":null),f(t,"x",a=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),f(t,"y",i=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),f(t,"width",r=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),f(t,"height",n=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),f(t,"fill",s=e[0]===e[12]?"#F39431":re[e[10].datum.role]),f(t,"stroke","white"),f(t,"opacity",o=e[0]===e[12]||e[0]===null?1:.2)},m(h,u){B(h,t,u)},p(h,u){u&2&&l!==(l=["country","uk"].includes(h[10].datum.role)?"rotate(45)":null)&&f(t,"transform",l),u&3&&a!==(a=h[0]===h[12]?-.75*h[10].datum.radius-3:-.75*h[10].datum.radius)&&f(t,"x",a),u&3&&i!==(i=h[0]===h[12]?-.75*h[10].datum.radius-3:-.75*h[10].datum.radius)&&f(t,"y",i),u&3&&r!==(r=h[0]===h[12]?h[10].datum.radius*1.5+6:h[10].datum.radius*1.5)&&f(t,"width",r),u&3&&n!==(n=h[0]===h[12]?h[10].datum.radius*1.5+6:h[10].datum.radius*1.5)&&f(t,"height",n),u&3&&s!==(s=h[0]===h[12]?"#F39431":re[h[10].datum.role])&&f(t,"fill",s),u&1&&o!==(o=h[0]===h[12]||h[0]===null?1:.2)&&f(t,"opacity",o)},d(h){h&&y(t)}}}function Pt(e){let t,l,a;function i(s,o){return o&2&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[10].datum.role)),l?Pa:Wa}let r=i(e,-1),n=r(e);return{c(){t=W("g"),n.c(),this.h()},l(s){t=P(s,"g",{transform:!0});var o=I(t);n.l(o),o.forEach(y),this.h()},h(){f(t,"transform",a="translate("+e[10].y+","+e[10].x+")")},m(s,o){B(s,t,o),n.m(t,null)},p(s,o){r===(r=i(s,o))&&n?n.p(s,o):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null))),o&2&&a!==(a="translate("+s[10].y+","+s[10].x+")")&&f(t,"transform",a)},d(s){s&&y(t),n.d()}}}function za(e){let t,l=e[1].length>0&&Vt(e);return{c(){l&&l.c(),t=De()},l(a){l&&l.l(a),t=De()},m(a,i){l&&l.m(a,i),B(a,t,i)},p(a,[i]){a[1].length>0?l?l.p(a,i):(l=Vt(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:ie,o:ie,d(a){l&&l.d(a),a&&y(t)}}}let zt=1,Bt=1,Ba=0;function Na(e,t,l){let a,{circleData:i,plottedAreas:r,y:n,hoverIndex:s,lineData:o}=t;class h{constructor(m,_,D){this.items=m,this.radiusFun=_,this.xFun=D,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,zt),this.maxR=Math.max(...m.map(d=>_(d))),this.rng=this._sfc32(1,2,3,zt)}calculateYPositions(){let m=this.items.map((d,p)=>({datum:d,originalIndex:p,x:this.xFun(d),y:null,placed:!1})).sort((d,p)=>d.x-p.x);m.forEach(function(d,p){d.index=p});let _=this.tieBreakFn;m.forEach(function(d){d.tieBreaker=_(d.x)});let D=[...m].sort((d,p)=>{let g=this.radiusFun(d.datum)+d.tieBreaker*Bt;return this.radiusFun(p.datum)+p.tieBreaker*Bt-g});for(let d of D)d.placed=!0,d.y=this._getBestYPosition(d,m);return m.sort((d,p)=>d.originalIndex-p.originalIndex),m.map(d=>({datum:d.datum,x:d.x,y:d.y}))}_sfc32(m,_,D,d){let p=function(){m>>>=0,_>>>=0,D>>>=0,d>>>=0;var g=m+_|0;return m=_^_>>>9,_=D+(D<<3)|0,D=D<<21|D>>>11,d=d+1|0,g=g+d|0,D=D+g|0,(g>>>0)/4294967296};for(let g=0;g<10;g++)p();return p}_getBestYPosition(m,_){let D=[];for(let p of[-1,1]){let g,w=this.radiusFun(m.datum);for(let k=m.index+p;k>=0&&k<_.length&&(g=Math.abs(m.x-_[k].x))<w+this.maxR;k+=p){let A=_[k];if(!A.placed)continue;let z=w+this.radiusFun(A.datum);if(g>=w+this.radiusFun(A.datum))continue;let T=Math.sqrt(z*z-g*g),M=[A.y-T,A.y+T];D.push(M)}}if(D.length==0)return this.radiusFun(m.datum)*(this.rng()-.5)*Ba;let d=D.flat();d.push(0),d.sort((p,g)=>{let w=Math.abs(p),k=Math.abs(g);return w<k?-1:w>k?1:p-g});for(let p=0;p<d.length;p++){let g=d[p];if(D.every(w=>g<=w[0]||g>=w[1]))return g}}}let u=["main","parent","country","uk","custom1","custom2","custom3","custom4"];function c(b){l(0,s=parseFloat(Re(this).attr("hoverid")))}function v(b){l(0,s=null)}return e.$$set=b=>{"circleData"in b&&l(5,i=b.circleData),"plottedAreas"in b&&l(6,r=b.plottedAreas),"y"in b&&l(7,n=b.y),"hoverIndex"in b&&l(0,s=b.hoverIndex),"lineData"in b&&l(4,o=b.lineData)},e.$$.update=()=>{e.$$.dirty&224&&l(1,a=new h(r,b=>"radius"in b?b.radius*1.1:5,b=>n(i.find(m=>m.areacd===b.areacd).value)).calculateYPositions()),e.$$.dirty&3&&l(4,o=s===null?a.filter(b=>u.includes(b.datum.role)):[a[s]])},[s,a,c,v,o,i,r,n]}class Ga extends oe{constructor(t){super(),fe(this,t,Na,za,ue,{circleData:5,plottedAreas:6,y:7,hoverIndex:0,lineData:4})}}function Nt(e,t,l){const a=e.slice();return a[25]=t[l],a[26]=t,a[27]=l,a}function Gt(e){let t,l;return t=new Nl({props:{lineDataArray:e[11],x1:e[13](e[7][0]),x2:e[13](e[7][1]),hoverIndex:e[6]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&2048&&(r.lineDataArray=a[11]),i&8320&&(r.x1=a[13](a[7][0])),i&8320&&(r.x2=a[13](a[7][1])),i&64&&(r.hoverIndex=a[6]),t.$set(r)},i(a){l||(j(t.$$.fragment,a),l=!0)},o(a){Y(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Ot(e){let t,l,a,i,r,n=e[25]+"",s,o,h,u,c,v;function b(...d){return e[18](e[25],...d)}function m(d){e[19](d)}function _(d){e[20](d,e[27])}let D={plottedAreas:e[0],circleData:e[1].filter(b),y:e[8]};return e[6]!==void 0&&(D.hoverIndex=e[6]),e[11][e[27]]!==void 0&&(D.lineData=e[11][e[27]]),o=new Ga({props:D}),ke.push(()=>ye(o,"hoverIndex",m)),ke.push(()=>ye(o,"lineData",_)),{c(){t=W("g"),l=W("line"),r=W("text"),s=J(n),ee(o.$$.fragment),this.h()},l(d){t=P(d,"g",{transform:!0});var p=I(t);l=P(p,"line",{y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),I(l).forEach(y),r=P(p,"text",{y:!0,"text-anchor":!0,"font-size":!0,fill:!0});var g=I(r);s=x(g,n),g.forEach(y),ae(o.$$.fragment,p),p.forEach(y),this.h()},h(){f(l,"y1",a=e[8](e[9][0])),f(l,"y2",i=e[8](e[9][1])-20),f(l,"stroke-width","1px"),f(l,"stroke","black"),f(r,"y","-30"),f(r,"text-anchor","middle"),f(r,"font-size","14px"),f(r,"fill","black"),f(t,"transform",c="translate("+e[13](e[25])+",0)")},m(d,p){B(d,t,p),E(t,l),E(t,r),E(r,s),te(o,t,null),v=!0},p(d,p){e=d,(!v||p&768&&a!==(a=e[8](e[9][0])))&&f(l,"y1",a),(!v||p&768&&i!==(i=e[8](e[9][1])-20))&&f(l,"y2",i),(!v||p&128)&&n!==(n=e[25]+"")&&me(s,n);const g={};p&1&&(g.plottedAreas=e[0]),p&130&&(g.circleData=e[1].filter(b)),p&256&&(g.y=e[8]),!h&&p&64&&(h=!0,g.hoverIndex=e[6],we(()=>h=!1)),!u&&p&2048&&(u=!0,g.lineData=e[11][e[27]],we(()=>u=!1)),o.$set(g),(!v||p&8320&&c!==(c="translate("+e[13](e[25])+",0)"))&&f(t,"transform",c)},i(d){v||(j(o.$$.fragment,d),v=!0)},o(d){Y(o.$$.fragment,d),v=!1},d(d){d&&y(t),le(o)}}}function Oa(e){let t,l,a,i,r,n,s,o,h,u,c,v,b;r=new Il({props:{yDomain:e[9],y:e[8],indicator:e[2]}});let m=e[7][1]!=e[7][0]&&Gt(e),_=e[7][0]===e[7][1]?[e[7][0]]:e[7],D=[];for(let p=0;p<_.length;p+=1)D[p]=Ot(Nt(e,_,p));const d=p=>Y(D[p],1,1,()=>{D[p]=null});return u=new Fl({props:{x:e[13](e[7][1])+35+(e[11][1].length>0?Math.max(...e[11][1].map(Ht)):0),labelPlacements:e[12],hoverIndex:e[6]}}),{c(){t=O("div"),l=W("svg"),a=W("g"),i=W("g"),ee(r.$$.fragment),n=W("rect"),m&&m.c(),o=De();for(let p=0;p<D.length;p+=1)D[p].c();h=De(),ee(u.$$.fragment),this.h()},l(p){t=H(p,"DIV",{class:!0});var g=I(t);l=P(g,"svg",{height:!0,width:!0});var w=I(l);a=P(w,"g",{class:!0,transform:!0});var k=I(a);i=P(k,"g",{transform:!0});var A=I(i);ae(r.$$.fragment,A),A.forEach(y),n=P(k,"rect",{x:!0,width:!0,height:!0,stroke:!0,fill:!0,opacity:!0}),I(n).forEach(y),m&&m.l(k),o=De();for(let z=0;z<D.length;z+=1)D[z].l(k);h=De(),ae(u.$$.fragment,k),k.forEach(y),w.forEach(y),g.forEach(y),this.h()},h(){f(i,"transform","translate("+-e[15]+",0)"),f(n,"x",-e[15]/2),f(n,"width",s=e[10]+e[15]),f(n,"height",e[4]),f(n,"stroke","none"),f(n,"fill","black"),f(n,"opacity","0.02"),f(a,"class","chart-container"),f(a,"transform",c="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[14]),f(l,"width",e[3]),f(t,"class","svg-container"),Pe(()=>e[21].call(t))},m(p,g){B(p,t,g),E(t,l),E(l,a),E(a,i),te(r,i,null),E(a,n),m&&m.m(a,null),E(a,o);for(let w=0;w<D.length;w+=1)D[w]&&D[w].m(a,null);E(a,h),te(u,a,null),v=ze(t,e[21].bind(t)),b=!0},p(p,[g]){const w={};if(g&512&&(w.yDomain=p[9]),g&256&&(w.y=p[8]),g&4&&(w.indicator=p[2]),r.$set(w),(!b||g&1024&&s!==(s=p[10]+p[15]))&&f(n,"width",s),(!b||g&16)&&f(n,"height",p[4]),p[7][1]!=p[7][0]?m?(m.p(p,g),g&128&&j(m,1)):(m=Gt(p),m.c(),j(m,1),m.m(a,o)):m&&(ve(),Y(m,1,1,()=>{m=null}),be()),g&11203){_=p[7][0]===p[7][1]?[p[7][0]]:p[7];let A;for(A=0;A<_.length;A+=1){const z=Nt(p,_,A);D[A]?(D[A].p(z,g),j(D[A],1)):(D[A]=Ot(z),D[A].c(),j(D[A],1),D[A].m(a,h))}for(ve(),A=_.length;A<D.length;A+=1)d(A);be()}const k={};g&10368&&(k.x=p[13](p[7][1])+35+(p[11][1].length>0?Math.max(...p[11][1].map(Ht)):0)),g&4096&&(k.labelPlacements=p[12]),g&64&&(k.hoverIndex=p[6]),u.$set(k),(!b||g&32&&c!==(c="translate("+p[5].left+","+p[5].top+")"))&&f(a,"transform",c),(!b||g&8)&&f(l,"width",p[3])},i(p){if(!b){j(r.$$.fragment,p),j(m);for(let g=0;g<_.length;g+=1)j(D[g]);j(u.$$.fragment,p),b=!0}},o(p){Y(r.$$.fragment,p),Y(m),D=D.filter(Boolean);for(let g=0;g<D.length;g+=1)Y(D[g]);Y(u.$$.fragment,p),b=!1},d(p){p&&y(t),le(r),m&&m.d(),ne(D,p),le(u),v()}}}const Ht=e=>e.y;function Ha(e,t,l){let a,i,r,n,s,o,h,u,c,v,b=Ae("areas"),{plottedAreas:m,filteredData:_,indicator:D,selectedAreas:d}=t,p=400,g=470,w=220,k=120,A=["main","parent","country","uk","custom1","custom2","custom3","custom4"],z=[[],[]];const T=(S,F)=>F.year==S;function M(S){u=S,l(6,u)}function N(S,F){e.$$.not_equal(z[F],S)&&(z[F]=S,l(11,z))}function L(){p=this.clientWidth,l(3,p)}return e.$$set=S=>{"plottedAreas"in S&&l(0,m=S.plottedAreas),"filteredData"in S&&l(1,_=S.filteredData),"indicator"in S&&l(2,D=S.indicator),"selectedAreas"in S&&l(16,d=S.selectedAreas)},e.$$.update=()=>{e.$$.dirty&40&&l(10,i=p-a.left-a.right),e.$$.dirty&32&&l(4,r=g-a.top-a.bottom),e.$$.dirty&2&&l(7,n=[Math.min(..._.map(S=>S.year)),Math.max(..._.map(S=>S.year))]),e.$$.dirty&1152&&l(13,s=Le().domain(n).range([0,i])),e.$$.dirty&6&&l(9,o=[D.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(..._.map(S=>S.value))),Math.ceil(Math.max(..._.map(S=>S.value)))]),e.$$.dirty&528&&l(8,h=Le().domain(o).range([r,0])),e.$$.dirty&1&&l(0,m=m.map(S=>({...S,radius:A.includes(S.role)?10:6}))),e.$$.dirty&451&&l(17,c=m.map(S=>({...S,yPosition:h(_.find(F=>F.areacd===S.areacd&F.year===n[1]).value),areanm:b.find(F=>S.areacd===F.areacd).areanm})).filter((S,F)=>u!=null?F==u:A.includes(S.role))),e.$$.dirty&131120&&l(12,v=wl(c,[-a.top,r],S=>S.yPosition,S=>S.areanm.length>20?34:17))},l(5,a={top:40,left:200,right:w+5,bottom:40}),l(6,u=null),[m,_,D,p,r,a,u,n,h,o,i,z,v,s,g,k,d,c,T,M,N,L]}class ja extends oe{constructor(t){super(),fe(this,t,Ha,Oa,ue,{plottedAreas:0,filteredData:1,indicator:2,selectedAreas:16})}}function jt(e){let t,l=e[1].unit+"",a;return{c(){t=O("p"),a=J(l),this.h()},l(i){t=H(i,"P",{class:!0});var r=I(t);a=x(r,l),r.forEach(y),this.h()},h(){f(t,"class","svelte-awo2mx")},m(i,r){B(i,t,r),E(t,a)},p(i,r){r&2&&l!==(l=i[1].unit+"")&&me(a,l)},d(i){i&&y(t)}}}function qa(e){let t,l;return t=new Gl({props:{selectedAreas:e[5],filteredData:e[11]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&32&&(r.selectedAreas=a[5]),i&2048&&(r.filteredData=a[11]),t.$set(r)},i(a){l||(j(t.$$.fragment,a),l=!0)},o(a){Y(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Ya(e){let t,l;return t=new ja({props:{selectedAreas:e[5],plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&32&&(r.selectedAreas=a[5]),i&512&&(r.plottedAreas=a[9]),i&2048&&(r.filteredData=a[11]),i&2&&(r.indicator=a[1]),t.$set(r)},i(a){l||(j(t.$$.fragment,a),l=!0)},o(a){Y(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Ka(e){let t,l;return t=new Va({props:{plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&512&&(r.plottedAreas=a[9]),i&2048&&(r.filteredData=a[11]),i&2&&(r.indicator=a[1]),t.$set(r)},i(a){l||(j(t.$$.fragment,a),l=!0)},o(a){Y(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Ua(e){let t,l,a,i,r,n,s=e[1].label+"",o,h,u,c,v,b,m,_,D,d,p,g,w,k,A;function z(R){e[15](R)}let T={optionsArray:e[12]};e[8]!==void 0&&(T.chosenChart=e[8]),l=new El({props:T}),ke.push(()=>ye(l,"chosenChart",z));let M=e[1].unit!=null&&jt(e);function N(R){e[17](R)}let L={selectedAreas:e[5].filter(e[16]),areasWithData:e[10],selectedArea:e[6],parentArea:e[7]};e[0]!==void 0&&(L.checkboxedRoles=e[0]),c=new Dl({props:L}),ke.push(()=>ye(c,"checkboxedRoles",N));const S=[Ka,Ya,qa],F=[];function $(R,K){return R[12][R[8]-1]==="Over time"?0:R[12][R[8]-1]==="To other areas"?1:R[12][R[8]-1]==="Geographically"?2:-1}return~(m=$(e))&&(_=F[m]=S[m](e)),{c(){t=O("div"),ee(l.$$.fragment),i=Z(),r=O("div"),n=O("h3"),o=J(s),h=Z(),M&&M.c(),u=Z(),ee(c.$$.fragment),b=Z(),_&&_.c(),D=Z(),d=O("p"),p=J("Source: Office for National Statistics"),g=Z(),w=O("img"),this.h()},l(R){t=H(R,"DIV",{class:!0});var K=I(t);ae(l.$$.fragment,K),i=Q(K),r=H(K,"DIV",{class:!0});var q=I(r);n=H(q,"H3",{class:!0});var C=I(n);o=x(C,s),C.forEach(y),h=Q(q),M&&M.l(q),u=Q(q),ae(c.$$.fragment,q),b=Q(q),_&&_.l(q),D=Q(q),d=H(q,"P",{class:!0});var U=I(d);p=x(U,"Source: Office for National Statistics"),U.forEach(y),q.forEach(y),g=Q(K),w=H(K,"IMG",{style:!0,width:!0,src:!0,alt:!0}),K.forEach(y),this.h()},h(){f(n,"class","svelte-awo2mx"),f(d,"class","svelte-awo2mx"),f(r,"class","chartOutlineGroup svelte-awo2mx"),ge(w,"padding-top","10px"),f(w,"width","75%"),lt(w.src,k=`${Ce}/img/image1.png`)||f(w,"src",k),f(w,"alt","download buttons"),f(t,"class","mainChartContainer")},m(R,K){B(R,t,K),te(l,t,null),E(t,i),E(t,r),E(r,n),E(n,o),E(r,h),M&&M.m(r,null),E(r,u),te(c,r,null),E(r,b),~m&&F[m].m(r,null),E(r,D),E(r,d),E(d,p),E(t,g),E(t,w),A=!0},p(R,[K]){const q={};!a&&K&256&&(a=!0,q.chosenChart=R[8],we(()=>a=!1)),l.$set(q),(!A||K&2)&&s!==(s=R[1].label+"")&&me(o,s),R[1].unit!=null?M?M.p(R,K):(M=jt(R),M.c(),M.m(r,u)):M&&(M.d(1),M=null);const C={};K&60&&(C.selectedAreas=R[5].filter(R[16])),K&1024&&(C.areasWithData=R[10]),K&64&&(C.selectedArea=R[6]),K&128&&(C.parentArea=R[7]),!v&&K&1&&(v=!0,C.checkboxedRoles=R[0],we(()=>v=!1)),c.$set(C);let U=m;m=$(R),m===U?~m&&F[m].p(R,K):(_&&(ve(),Y(F[U],1,1,()=>{F[U]=null}),be()),~m?(_=F[m],_?_.p(R,K):(_=F[m]=S[m](R),_.c()),j(_,1),_.m(r,D)):_=null)},i(R){A||(j(l.$$.fragment,R),j(c.$$.fragment,R),j(_),A=!0)},o(R){Y(l.$$.fragment,R),Y(c.$$.fragment,R),Y(_),A=!1},d(R){R&&y(t),le(l),M&&M.d(),le(c),~m&&F[m].d()}}}function Za(e,t,l){let a,i,r,n,{indicator:s,latestData:o,otherData:h,initialData:u,selectedAreas:c,checkboxedRoles:v,siblingAreas:b,selectedArea:m,parentArea:_}=t,D=1,d=[...h,...u].filter(k=>k.areacd===c.find(A=>A.role==="main").data.areacd).length>0?["Over time","To other areas","To other metrics","Geographically"]:["To other areas","To other metrics","Geographically"];function p(k){D=k,l(8,D)}const g=k=>[...o,...h,...u].filter(A=>k.data.areacd===A.areacd).length>0&k.role!=="main";function w(k){v=k,l(0,v)}return e.$$set=k=>{"indicator"in k&&l(1,s=k.indicator),"latestData"in k&&l(2,o=k.latestData),"otherData"in k&&l(3,h=k.otherData),"initialData"in k&&l(4,u=k.initialData),"selectedAreas"in k&&l(5,c=k.selectedAreas),"checkboxedRoles"in k&&l(0,v=k.checkboxedRoles),"siblingAreas"in k&&l(13,b=k.siblingAreas),"selectedArea"in k&&l(6,m=k.selectedArea),"parentArea"in k&&l(7,_=k.parentArea)},e.$$.update=()=>{e.$$.dirty&284&&l(14,a=(d[D-1]==="Over time"?[...o,...u,...h]:d[D-1]==="To other areas"?[...o,...u]:o).sort((k,A)=>k.year-A.year)),e.$$.dirty&16384&&l(10,i=[...new Set(a.map(k=>k.areacd))]),e.$$.dirty&9249&&l(9,r=[...c.map(k=>k.role==="main"||v[k.role]?{role:k.role,areacd:k.data.areacd}:null).filter(k=>k!=null),...v.custom===null||v.custom===void 0?[]:v.custom.map((k,A)=>({role:"custom"+(A+1),areacd:k.areacd})),...v.neighbour?b.neighbours.map(k=>({role:"neighbour",areacd:k})):[],...v.cluster?b.similar.map(k=>({role:"cluster",areacd:k})):[]].filter(k=>i.includes(k.areacd))),e.$$.dirty&16896&&l(11,n=a.filter(k=>r.map(A=>A.areacd).includes(k.areacd)))},[v,s,o,h,u,c,m,_,D,r,i,n,d,b,a,p,g,w]}class Qa extends oe{constructor(t){super(),fe(this,t,Za,Ua,ue,{indicator:1,latestData:2,otherData:3,initialData:4,selectedAreas:5,checkboxedRoles:0,siblingAreas:13,selectedArea:6,parentArea:7})}}function qt(e,t,l){const a=e.slice();return a[14]=t[l],a[16]=l,a}function Yt(e){let t,l,a=e[14].indicator.label+"",i,r,n,s,o=e[14].prefix+e[14].value+e[14].suffix+"",h,u,c=e[14].subTextShort+"",v,b,m=e[14].comparison+"",_,D,d,p=e[14].change+"",g,w;return{c(){t=O("div"),l=O("p"),i=J(a),r=Z(),n=O("div"),s=O("p"),h=Z(),u=O("p"),v=Z(),b=O("p"),_=J(m),D=Z(),d=O("p"),g=J(p),w=Z(),this.h()},l(k){t=H(k,"DIV",{class:!0,style:!0});var A=I(t);l=H(A,"P",{class:!0});var z=I(l);i=x(z,a),z.forEach(y),r=Q(A),n=H(A,"DIV",{class:!0});var T=I(n);s=H(T,"P",{class:!0});var M=I(s);M.forEach(y),h=Q(T),u=H(T,"P",{class:!0});var N=I(u);N.forEach(y),T.forEach(y),v=Q(A),b=H(A,"P",{class:!0});var L=I(b);_=x(L,m),L.forEach(y),D=Q(A),d=H(A,"P",{class:!0});var S=I(d);g=x(S,p),S.forEach(y),w=Q(A),A.forEach(y),this.h()},h(){f(l,"class","col1 svelte-17dtptv"),f(s,"class","mainValue svelte-17dtptv"),f(u,"class","subText svelte-17dtptv"),f(n,"class","col2 svelte-17dtptv"),f(b,"class","col3 "+(["Above average","Below average"].includes(e[14].comparison)?null:e[14].comparison==="Similar to average"?"headlineLabelOkay":e[14].comparison==="Worse than average"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(d,"class","col4 "+(["Increasing","Falling"].includes(e[14].change)?null:e[14].change==="Little change"?"headlineLabelOkay":e[14].change==="Worsening"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(t,"class","rowContainer svelte-17dtptv"),ge(t,"grid-template-columns","[line1] "+e[0]+"px [line2] "+e[2]+"px [line3] "+e[4]+"px [line4] "+e[3]+"px [end]"),ge(t,"background-color",e[16]%2===0?"#fafafa":"#ffffff")},m(k,A){B(k,t,A),E(t,l),E(l,i),E(t,r),E(t,n),E(n,s),s.innerHTML=o,E(n,h),E(n,u),u.innerHTML=c,E(t,v),E(t,b),E(b,_),E(t,D),E(t,d),E(d,g),E(t,w)},p(k,A){A&29&&ge(t,"grid-template-columns","[line1] "+k[0]+"px [line2] "+k[2]+"px [line3] "+k[4]+"px [line4] "+k[3]+"px [end]")},d(k){k&&y(t)}}}function Xa(e){let t,l,a,i,r,n=e[5],s=[];for(let o=0;o<n.length;o+=1)s[o]=Yt(qt(e,n,o));return{c(){t=O("div");for(let o=0;o<s.length;o+=1)s[o].c();a=Z(),i=O("img"),this.h()},l(o){t=H(o,"DIV",{class:!0});var h=I(t);for(let u=0;u<s.length;u+=1)s[u].l(h);h.forEach(y),a=Q(o),i=H(o,"IMG",{style:!0,width:!0,src:!0,alt:!0}),this.h()},h(){f(t,"class","keyFiguresListContainer svelte-17dtptv"),Pe(()=>e[12].call(t)),ge(i,"padding-top","10px"),f(i,"width","75%"),lt(i.src,r=`${Ce}/img/image1.png`)||f(i,"src",r),f(i,"alt","download buttons")},m(o,h){B(o,t,h);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);l=ze(t,e[12].bind(t)),B(o,a,h),B(o,i,h)},p(o,[h]){if(h&61){n=o[5];let u;for(u=0;u<n.length;u+=1){const c=qt(o,n,u);s[u]?s[u].p(c,h):(s[u]=Yt(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}},i:ie,o:ie,d(o){o&&y(t),ne(s,o),l(),o&&y(a),o&&y(i)}}}function Ja(e){const t=e.split(" ");let l="";for(const a of t){const i=a.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");i.length>l.length&&(l=i)}return l.length}function xa(e,t,l){let a,i,r,{indicators:n,latestData:s,initialData:o,selectedAreas:h,col1Width:u}=t,c=0,v=0,b={T:[["Worse than average","Better than average"],["Improving","Worsening"]],F:[["Better than average","Worse than average"],["Worsening","Improving"]],I:[["Above average","Below average"],["Increasing","Falling"]]},m=[];n.forEach(d=>{Math.pow(10,d.roundingFactor);let p=s.filter(k=>k.codeId===d.id),g=h.find(k=>k.role==="main").data.areacd,w=p.filter(k=>k.areacd===g);if(w=w.length>0?w[0].value:void 0,w!=null){let k=p.filter(_e=>_e.areacd===h.find(he=>he.role==="country").data.areacd),A=p.filter(_e=>_e.areacd===h.find(he=>he.role==="uk").data.areacd),z=p.filter(_e=>_e.areacd===h.find(he=>he.role==="parent").data.areacd),T=k.length>0?k[0]:A.length>0?A[0]:z.length>0?z[0]:void 0,M=T!=null?T.value:void 0,L=(d.code in o?o[d.code]:[]).filter(_e=>_e.areacd===g);L=L.length>0?L[0].value:void 0;let S=d.code in Ye?Ye[d.code]:Al,$=(w===void 0||M===void 0?!0:Math.abs(w-M)/M<S[0]/100)?"Close to average":w<M?b[d.highEqualsGood][0][0]:b[d.highEqualsGood][0][1],K=(w===void 0||L===void 0?!0:Math.abs(w-L)/L<S[0]/100)?"Little change":w<L?b[d.highEqualsGood][1][0]:b[d.highEqualsGood][1][1];l(10,c=Math.max(d.label.length,c)),l(11,v=Math.max(Ja(d.label),v));let q=d.prefix===null?"":d.prefix==="pounds"?"£":d.prefix,C=d.suffix===null?"":d.suffix,U=d.subText===null?"":d.subText,V=d.subTextShort===null?"":d.subTextShort,se=Math.pow(10,d.roundingFactor);m.push({indicator:d,comparison:$,change:K,value:(Math.round(w*se)/se).toLocaleString(),prefix:q,suffix:C,subText:U,subTextShort:V})}});let _=400;function D(){_=this.clientWidth,l(1,_)}return e.$$set=d=>{"indicators"in d&&l(6,n=d.indicators),"latestData"in d&&l(7,s=d.latestData),"initialData"in d&&l(8,o=d.initialData),"selectedAreas"in d&&l(9,h=d.selectedAreas),"col1Width"in d&&l(0,u=d.col1Width)},e.$$.update=()=>{e.$$.dirty&3072&&l(0,u=c>45||v>10?250:c>30?210:180),e.$$.dirty&7&&l(4,i=(_-u-a)/2),e.$$.dirty&7&&l(3,r=(_-u-a)/2)},l(2,a=120),[u,_,a,r,i,m,n,s,o,h,c,v,D]}class $a extends oe{constructor(t){super(),fe(this,t,xa,Xa,ue,{indicators:6,latestData:7,initialData:8,selectedAreas:9,col1Width:0})}}function Kt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Ut(e,t,l){const a=e.slice();return a[45]=t[l],a[48]=t,a[47]=l,a}function Zt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Qt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Xt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Jt(e){let t,l,a,i,r,n;return{c(){t=W("g"),l=W("circle"),this.h()},l(s){t=P(s,"g",{transform:!0});var o=I(t);l=P(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),I(l).forEach(y),o.forEach(y),this.h()},h(){f(l,"hoverid",e[47]),f(l,"r","5"),f(l,"stroke","none"),f(l,"fill","#6e6e6e"),f(l,"fill-opacity",a=e[9]===null?.15:.05),f(t,"transform",i="translate("+e[45].x+","+e[14](e[45].y)+")")},m(s,o){B(s,t,o),E(t,l),r||(n=[Ee(l,"mouseover",e[21]),Ee(l,"mouseleave",e[22])],r=!0)},p(s,o){o[0]&512&&a!==(a=s[9]===null?.15:.05)&&f(l,"fill-opacity",a),o[0]&16400&&i!==(i="translate("+s[45].x+","+s[14](s[45].y)+")")&&f(t,"transform",i)},d(s){s&&y(t),r=!1,tt(n)}}}function xt(e){let t,l,a;return{c(){t=W("circle"),this.h()},l(i){t=P(i,"circle",{transform:!0,labelid:!0,"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(t).forEach(y),this.h()},h(){f(t,"transform",l="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")"),f(t,"labelid",e[47]),f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",a=re[e[45].datum.role]),f(t,"opacity","0")},m(i,r){B(i,t,r)},p(i,r){r[0]&4256&&l!==(l="translate("+i[45].x+","+(i[7]/2+i[45].y-i[12])+")")&&f(t,"transform",l),r[0]&32&&a!==(a=re[i[45].datum.role])&&f(t,"fill",a)},d(i){i&&y(t)}}}function er(e){let t,l;return{c(){t=W("circle"),this.h()},l(a){t=P(a,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(t).forEach(y),this.h()},h(){f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",l=re[e[45].datum.role]),f(t,"opacity","1")},m(a,i){B(a,t,i)},p(a,i){i[0]&32&&l!==(l=re[a[45].datum.role])&&f(t,"fill",l)},d(a){a&&y(t)}}}function tr(e){let t,l,a;return{c(){t=W("rect"),this.h()},l(i){t=P(i,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var r=I(t);r.forEach(y),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[45].datum.role)?"rotate(45)":null),f(t,"x",-5),f(t,"y",-5),f(t,"width",10),f(t,"height",10),f(t,"fill",a=re[e[45].datum.role]),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"opacity","1")},m(i,r){B(i,t,r)},p(i,r){r[0]&32&&l!==(l=["country","uk"].includes(i[45].datum.role)?"rotate(45)":null)&&f(t,"transform",l),r[0]&32&&a!==(a=re[i[45].datum.role])&&f(t,"fill",a)},d(i){i&&y(t)}}}function $t(e){let t,l,a;function i(s,o){return o[0]&32&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[45].datum.role)),l?tr:er}let r=i(e,[-1,-1]),n=r(e);return{c(){t=W("g"),n.c(),this.h()},l(s){t=P(s,"g",{transform:!0});var o=I(t);n.l(o),o.forEach(y),this.h()},h(){f(t,"transform",a="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")")},m(s,o){B(s,t,o),n.m(t,null)},p(s,o){r===(r=i(s,o))&&n?n.p(s,o):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null))),o[0]&4256&&a!==(a="translate("+s[45].x+","+(s[7]/2+s[45].y-s[12])+")")&&f(t,"transform",a)},d(s){s&&y(t),n.d()}}}function el(e){let t,l,a,i,r,n,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,h,u,c;function v(){e[36].call(n,e[47])}return{c(){t=W("g"),l=W("rect"),n=W("text"),o=J(s),this.h()},l(b){t=P(b,"g",{class:!0});var m=I(t);l=P(m,"rect",{labelid:!0,transform:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(l).forEach(y),n=P(m,"text",{labelid:!0,transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var _=I(n);o=x(_,s),_.forEach(y),m.forEach(y),this.h()},h(){f(l,"labelid",e[47]),f(l,"transform",a=e[20](e[13][e[47]],e[47])),f(l,"x","0"),f(l,"y","0"),f(l,"width",i=e[13].length>e[47]?e[13][e[47]].width+6:0),f(l,"height","18.5"),f(l,"rx","3px"),f(l,"stroke",r=re[e[45].datum.role]),f(l,"fill","white"),f(l,"stroke-width","1px"),f(l,"pointer-events","none"),f(n,"labelid",e[47]),f(n,"transform",h=e[20](e[13][e[47]],e[47])),f(n,"x","3"),f(n,"y","14"),f(n,"text-anchor","start"),f(n,"fill",u=re[e[45].datum.role]),f(n,"font-size","14px"),f(n,"pointer-events","none"),f(t,"class","labelGroup")},m(b,m){B(b,t,m),E(t,l),E(t,n),E(n,o),c=xe.observe(n,v.bind(n))},p(b,m){e=b,m[0]&8192&&a!==(a=e[20](e[13][e[47]],e[47]))&&f(l,"transform",a),m[0]&8192&&i!==(i=e[13].length>e[47]?e[13][e[47]].width+6:0)&&f(l,"width",i),m[0]&32&&r!==(r=re[e[45].datum.role])&&f(l,"stroke",r),m[0]&32&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&me(o,s),m[0]&8192&&h!==(h=e[20](e[13][e[47]],e[47]))&&f(n,"transform",h),m[0]&32&&u!==(u=re[e[45].datum.role])&&f(n,"fill",u)},d(b){b&&y(t),c()}}}function tl(e){let t,l,a,i,r,n,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,h,u,c,v,b,m,_=e[15].find(w).areanm+"",D,d,p,g;function w(...k){return e[38](e[45],...k)}return{c(){t=W("g"),l=W("circle"),a=W("g"),i=W("rect"),n=W("text"),o=J(s),u=W("g"),c=W("rect"),m=W("text"),D=J(_),this.h()},l(k){t=P(k,"g",{transform:!0});var A=I(t);l=P(A,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}),I(l).forEach(y),a=P(A,"g",{class:!0});var z=I(a);i=P(z,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(i).forEach(y),n=P(z,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var T=I(n);o=x(T,s),T.forEach(y),z.forEach(y),u=P(A,"g",{class:!0});var M=I(u);c=P(M,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(c).forEach(y),m=P(M,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var N=I(m);D=x(N,_),N.forEach(y),M.forEach(y),A.forEach(y),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","7"),f(l,"stroke","white"),f(l,"stroke-width","1.5px"),f(l,"fill","#F39431"),f(l,"fill-opacity","1"),f(i,"x","5"),f(i,"y","5"),f(i,"width",r=parseFloat(e[10]===void 0?100:e[10].width)+6),f(i,"height","18.5"),f(i,"rx","3px"),f(i,"stroke","#F39431"),f(i,"fill","white"),f(i,"stroke-width","1px"),f(i,"pointer-events","none"),f(n,"x","8"),f(n,"y","19"),f(n,"text-anchor","start"),f(n,"fill","#F39431"),f(n,"font-size","14px"),f(n,"pointer-events","none"),f(a,"class","hoverLabelGroup1"),f(c,"x",v=-(parseFloat(e[11]===void 0?100:e[11].width)+6)),f(c,"y","-22"),f(c,"width",b=parseFloat(e[11]===void 0?100:e[11].width)+6),f(c,"height","18.5"),f(c,"rx","3px"),f(c,"stroke","#F39431"),f(c,"fill","white"),f(c,"stroke-width","1px"),f(c,"pointer-events","none"),f(m,"x",d=-(parseFloat(e[11]===void 0?100:e[11].width)+3)),f(m,"y","-8"),f(m,"text-anchor","start"),f(m,"fill","#F39431"),f(m,"font-size","14px"),f(m,"pointer-events","none"),f(u,"class","hoverLabelGroup2"),f(t,"transform",g="translate("+e[45].x+","+e[14](e[45].y)+")")},m(k,A){B(k,t,A),E(t,l),E(t,a),E(a,i),E(a,n),E(n,o),h=xe.observe(n,e[37].bind(n)),E(t,u),E(u,c),E(u,m),E(m,D),p=xe.observe(m,e[39].bind(m))},p(k,A){e=k,A[0]&1024&&r!==(r=parseFloat(e[10]===void 0?100:e[10].width)+6)&&f(i,"width",r),A[0]&16&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&me(o,s),A[0]&2048&&v!==(v=-(parseFloat(e[11]===void 0?100:e[11].width)+6))&&f(c,"x",v),A[0]&2048&&b!==(b=parseFloat(e[11]===void 0?100:e[11].width)+6)&&f(c,"width",b),A[0]&16&&_!==(_=e[15].find(w).areanm+"")&&me(D,_),A[0]&2048&&d!==(d=-(parseFloat(e[11]===void 0?100:e[11].width)+3))&&f(m,"x",d),A[0]&16400&&g!==(g="translate("+e[45].x+","+e[14](e[45].y)+")")&&f(t,"transform",g)},d(k){k&&y(t),h(),p()}}}function ll(e){let t,l=e[9]===e[47]&&tl(e);return{c(){l&&l.c(),t=De()},l(a){l&&l.l(a),t=De()},m(a,i){l&&l.m(a,i),B(a,t,i)},p(a,i){a[9]===a[47]?l?l.p(a,i):(l=tl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&y(t)}}}function lr(e){let t,l,a=e[0].label+"",i,r,n,s,o,h,u,c,v,b,m,_,D,d,p,g,w,k,A,z,T=e[4],M=[];for(let C=0;C<T.length;C+=1)M[C]=Jt(Xt(e,T,C));let N=e[5],L=[];for(let C=0;C<N.length;C+=1)L[C]=xt(Qt(e,N,C));let S=e[5],F=[];for(let C=0;C<S.length;C+=1)F[C]=$t(Zt(e,S,C));let $=e[5],R=[];for(let C=0;C<$.length;C+=1)R[C]=el(Ut(e,$,C));let K=e[4],q=[];for(let C=0;C<K.length;C+=1)q[C]=ll(Kt(e,K,C));return{c(){t=O("div"),l=O("p"),i=J(a),r=Z(),n=O("div"),s=W("svg"),o=W("g"),h=W("g");for(let C=0;C<M.length;C+=1)M[C].c();u=W("g"),c=W("line"),m=W("g");for(let C=0;C<L.length;C+=1)L[C].c();_=W("g");for(let C=0;C<F.length;C+=1)F[C].c();d=W("g");for(let C=0;C<R.length;C+=1)R[C].c();g=W("g");for(let C=0;C<q.length;C+=1)q[C].c();this.h()},l(C){t=H(C,"DIV",{class:!0,style:!0});var U=I(t);l=H(U,"P",{class:!0});var V=I(l);i=x(V,a),V.forEach(y),r=Q(U),n=H(U,"DIV",{class:!0});var se=I(n);s=P(se,"svg",{class:!0,height:!0,width:!0});var _e=I(s);o=P(_e,"g",{class:!0,transform:!0});var he=I(o);h=P(he,"g",{class:!0});var ce=I(h);for(let X=0;X<M.length;X+=1)M[X].l(ce);ce.forEach(y),u=P(he,"g",{class:!0,transform:!0});var Be=I(u);c=P(Be,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),I(c).forEach(y),Be.forEach(y),m=P(he,"g",{class:!0});var Ne=I(m);for(let X=0;X<L.length;X+=1)L[X].l(Ne);Ne.forEach(y),_=P(he,"g",{class:!0,opacity:!0});var Ge=I(_);for(let X=0;X<F.length;X+=1)F[X].l(Ge);Ge.forEach(y),d=P(he,"g",{class:!0,opacity:!0});var Oe=I(d);for(let X=0;X<R.length;X+=1)R[X].l(Oe);Oe.forEach(y),g=P(he,"g",{class:!0});var G=I(g);for(let X=0;X<q.length;X+=1)q[X].l(G);G.forEach(y),he.forEach(y),_e.forEach(y),se.forEach(y),U.forEach(y),this.h()},h(){f(l,"class","col1 svelte-1fguf2k"),f(h,"class","backgroundCirclesGroup"),f(c,"x1","0"),f(c,"x2","0"),f(c,"y1","-10"),f(c,"y2",v=e[7]+10),f(c,"stroke","#871A5B"),f(c,"stroke-width","1.5px"),f(u,"class","medianLineGroup"),f(u,"transform",b="translate("+e[6](0)+",0)"),f(m,"class","labelsCirclesGroup"),f(_,"class","primaryCirclesGroup"),f(_,"opacity",D=e[9]===null?1:.1),f(d,"class","labelsGroup"),f(d,"opacity",p=e[9]===null?1:0),f(g,"class","hoverCirclesGroup"),f(o,"class","chart-container"),f(o,"transform",w="translate("+e[8].left+","+e[8].top+")"),f(s,"class",k=pe("beeswarm-row-svg-"+e[0].id)+" svelte-1fguf2k"),f(s,"height",e[16]),f(s,"width",A=e[3]-e[1]),f(n,"class","svg-container"),f(t,"class","rowContainer svelte-1fguf2k"),ge(t,"grid-template-columns","[line1] "+e[1]+"px [line2] "+(e[3]-e[1])+"px [end]"),ge(t,"background-color",e[2]%2===0?"#fafafa":"#ffffff"),Pe(()=>e[40].call(t))},m(C,U){B(C,t,U),E(t,l),E(l,i),E(t,r),E(t,n),E(n,s),E(s,o),E(o,h);for(let V=0;V<M.length;V+=1)M[V]&&M[V].m(h,null);E(o,u),E(u,c),E(o,m);for(let V=0;V<L.length;V+=1)L[V]&&L[V].m(m,null);E(o,_);for(let V=0;V<F.length;V+=1)F[V]&&F[V].m(_,null);E(o,d);for(let V=0;V<R.length;V+=1)R[V]&&R[V].m(d,null);E(o,g);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(g,null);z=ze(t,e[40].bind(t))},p(C,U){if(U[0]&1&&a!==(a=C[0].label+"")&&me(i,a),U[0]&6308368){T=C[4];let V;for(V=0;V<T.length;V+=1){const se=Xt(C,T,V);M[V]?M[V].p(se,U):(M[V]=Jt(se),M[V].c(),M[V].m(h,null))}for(;V<M.length;V+=1)M[V].d(1);M.length=T.length}if(U[0]&128&&v!==(v=C[7]+10)&&f(c,"y2",v),U[0]&64&&b!==(b="translate("+C[6](0)+",0)")&&f(u,"transform",b),U[0]&4256){N=C[5];let V;for(V=0;V<N.length;V+=1){const se=Qt(C,N,V);L[V]?L[V].p(se,U):(L[V]=xt(se),L[V].c(),L[V].m(m,null))}for(;V<L.length;V+=1)L[V].d(1);L.length=N.length}if(U[0]&4256){S=C[5];let V;for(V=0;V<S.length;V+=1){const se=Zt(C,S,V);F[V]?F[V].p(se,U):(F[V]=$t(se),F[V].c(),F[V].m(_,null))}for(;V<F.length;V+=1)F[V].d(1);F.length=S.length}if(U[0]&512&&D!==(D=C[9]===null?1:.1)&&f(_,"opacity",D),U[0]&1974304){$=C[5];let V;for(V=0;V<$.length;V+=1){const se=Ut(C,$,V);R[V]?R[V].p(se,U):(R[V]=el(se),R[V].c(),R[V].m(d,null))}for(;V<R.length;V+=1)R[V].d(1);R.length=$.length}if(U[0]&512&&p!==(p=C[9]===null?1:0)&&f(d,"opacity",p),U[0]&970256){K=C[4];let V;for(V=0;V<K.length;V+=1){const se=Kt(C,K,V);q[V]?q[V].p(se,U):(q[V]=ll(se),q[V].c(),q[V].m(g,null))}for(;V<q.length;V+=1)q[V].d(1);q.length=K.length}U[0]&256&&w!==(w="translate("+C[8].left+","+C[8].top+")")&&f(o,"transform",w),U[0]&1&&k!==(k=pe("beeswarm-row-svg-"+C[0].id)+" svelte-1fguf2k")&&f(s,"class",k),U[0]&10&&A!==(A=C[3]-C[1])&&f(s,"width",A),U[0]&10&&ge(t,"grid-template-columns","[line1] "+C[1]+"px [line2] "+(C[3]-C[1])+"px [end]"),U[0]&4&&ge(t,"background-color",C[2]%2===0?"#fafafa":"#ffffff")},i:ie,o:ie,d(C){C&&y(t),ne(M,C),ne(L,C),ne(F,C),ne(R,C),ne(q,C),z()}}}function al(e,t,l,a,i,r,n,s){return console.log(e,t,l,a,i,r,n,s),e<r&&t>i&&l<s&&a>n}function ar(e,t){const l=e.map(i=>i[t]);l.sort((i,r)=>i-r);const a=l.length;if(a%2===0){const i=l[a/2-1],r=l[a/2];return(i+r)/2}else return l[Math.floor(a/2)]}function rr(e,t,l){let a,i,r,n,s,o,h,u,c,v,b,m,_,D,d,p=Ae("areas"),{filteredData:g,selectedAreas:w,areasWithData:k,plottedAreas:A,siblingAreas:z,selectedArea:T,indicator:M,col1Width:N,rowNumb:L}=t,S=500,F=60,$=M.prefix===null?"":M.prefix==="pounds"?"£":M.prefix,R=M.suffix===null?"":M.suffix;M.subText===null||M.subText,M.subTextShort===null||M.subTextShort;let K=Math.pow(10,M.roundingFactor),q=!1;Vl(()=>{q=!0});const C=(G,X)=>{if(q){let de=parseFloat(G.width),Ve=[{x:-de-10,y:0,name:"topLeft"},{x:-de-10,y:20,name:"bottomLeft"},{x:-de-10,y:10,name:"left"},{x:2,y:0,name:"topRight"},{x:2,y:20,name:"bottomRight"},{x:-de/2,y:-3,name:"top"},{x:-de/2,y:24,name:"bottom"},{x:8,y:10,name:"right"},{x:-de-2,y:-10,name:"furtherTopLeft"},{x:-de-2,y:30,name:"furtherBottomLeft"},{x:-de-18,y:10,name:"furtherLeft"},{x:-de-12,y:0,name:"bottomFurtherLeft"},{x:-de-12,y:0,name:"topFurtherLeft"},{x:0,y:-10,name:"furtherTopRight"},{x:0,y:30,name:"furtherBottomRight"},{x:10,y:0,name:"topFurtherRight"},{x:10,y:20,name:"bottomFurtherRight"},{x:10,y:-10,name:"furtherTopFurtherRight"},{x:-de-12,y:-10,name:"furtherTopFurtherLeft"},{x:10,y:30,name:"furtherBottomFurtherRight"},{x:-de-12,y:30,name:"furtherBottomFurtherLeft"},{x:-de/2,y:-13,name:"furtherTop"},{x:-de/2,y:34,name:"furtherBottom"},{x:28,y:10,name:"furtherRight"},{x:-de/2,y:-23,name:"furtherFurtherTop"},{x:-de/2,y:44,name:"furtherFurtherBottom"},{x:-de-28,y:10,name:"furtherFurtherLeft"},{x:28,y:10,name:"furtherFurtherRight"}],Cl=Re(".beeswarm-row-svg-"+M.id).selectAll(".labelGroup").selectAll("rect"),Tl=Re(".beeswarm-row-svg-"+M.id).select(".labelsCirclesGroup").selectAll("circle");for(var Te=0;Te<Ve.length;Te++){let Ie={x1:_[X].x+Ve[Te].x,x2:_[X].x+Ve[Te].x+de,y1:_[X].y-d+Ve[Te].y,y2:_[X].y-d+Ve[Te].y+18.5},Ke=!0;if(Cl.each(function(){let We=Re(this);const Ue=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let Me=Re(this).attr("transform").match(Ue);al(Ie.x1,Ie.x2,Ie.y1,Ie.y2,parseFloat(Me[1]),parseFloat(Me[1])+parseFloat(We.attr("width")),parseFloat(Me[2]),parseFloat(Me[2])+18.5)&We.attr("labelid")!=X&&(Ke=!1)}),Tl.each(function(){let We=Re(this);const Ue=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let Me=Re(this).attr("transform").match(Ue),He=parseFloat(We.attr("r"))+3;al(Ie.x1,Ie.x2,Ie.y1,Ie.y2,parseFloat(Me[1])-He,parseFloat(Me[1])+He,parseFloat(Me[2])-He,parseFloat(Me[2])+He)&We.attr("labelid")!=X&&(Ke=!1)}),Ke)return"translate("+Ie.x1+","+Ie.y1+")"}return"translate(200,0)"}else return"translate(0,0)"};let U=null;function V(G){l(9,U=parseFloat(Re(this).attr("hoverid")))}function se(G){l(9,U=null)}let _e,he;function ce(G){var X;D[G]=(X=Qe.entries.get(this))==null?void 0:X.contentRect,l(13,D)}function Be(){var G;_e=(G=Qe.entries.get(this))==null?void 0:G.contentRect,l(10,_e)}const Ne=(G,X)=>X.areacd===G.datum.areacd;function Ge(){var G;he=(G=Qe.entries.get(this))==null?void 0:G.contentRect,l(11,he)}function Oe(){S=this.clientWidth,l(3,S)}return e.$$set=G=>{"filteredData"in G&&l(23,g=G.filteredData),"selectedAreas"in G&&l(24,w=G.selectedAreas),"areasWithData"in G&&l(25,k=G.areasWithData),"plottedAreas"in G&&l(26,A=G.plottedAreas),"siblingAreas"in G&&l(27,z=G.siblingAreas),"selectedArea"in G&&l(28,T=G.selectedArea),"indicator"in G&&l(0,M=G.indicator),"col1Width"in G&&l(1,N=G.col1Width),"rowNumb"in G&&l(2,L=G.rowNumb)},e.$$.update=()=>{e.$$.dirty[0]&266&&l(31,i=S-a.left-a.right-N),e.$$.dirty[0]&256&&l(7,r=F-a.top-a.bottom),e.$$.dirty[0]&159383552&&l(35,n=g.filter(G=>z.siblings.includes(G.areacd)||G.areacd===w.find(X=>X.role==="main").data.areacd)),e.$$.dirty[1]&16&&l(34,s=ar(n,"value")),e.$$.dirty[1]&24&&l(33,o=Math.max(Math.abs(s-Math.min(...n.map(G=>G.value))),Math.abs(s-Math.max(...n.map(G=>G.value))))),e.$$.dirty[1]&12,e.$$.dirty[1]&28&&l(30,h=n.map(G=>({...G,calcYValue:(G.value-s)/o}))),e.$$.dirty[0]&75497472|e.$$.dirty[1]&12&&l(29,u=A.map(G=>({...G,value:g.filter(X=>X.areacd===G.areacd).length>0?g.find(X=>X.areacd===G.areacd).value:null,calcYValue:g.filter(X=>X.areacd===G.areacd).length>0?(g.find(X=>X.areacd===G.areacd).value-s)/o:null})).filter(G=>G.value!==null).sort((G,X)=>G.calcYValue-X.calcYValue)),e.$$.dirty[1]&3&&l(6,v=Le().domain(c).range([0,i])),e.$$.dirty[0]&1073741889&&l(4,b=new qe(h,4,G=>v((G.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(G.calcYValue),M.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&144&&l(14,m=Le().domain([Math.min(...b.map(G=>G.y)),Math.max(...b.map(G=>G.y))]).range([0,r])),e.$$.dirty[0]&536870977&&l(5,_=new qe(u,7,G=>v((G.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(G.calcYValue),M.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&32&&l(12,d=Math.min(..._.map(G=>G.y))+(Math.max(..._.map(G=>G.y))-Math.min(..._.map(G=>G.y)))/2),e.$$.dirty[0]&16&&console.log(b)},l(8,a={top:10,left:10,right:10,bottom:10}),l(32,c=[-1,1]),l(13,D=[]),[M,N,L,S,b,_,v,r,a,U,_e,he,d,D,m,p,F,$,R,K,C,V,se,g,w,k,A,z,T,u,h,i,c,o,s,n,ce,Be,Ne,Ge,Oe]}class nr extends oe{constructor(t){super(),fe(this,t,rr,lr,ue,{filteredData:23,selectedAreas:24,areasWithData:25,plottedAreas:26,siblingAreas:27,selectedArea:28,indicator:0,col1Width:1,rowNumb:2},null,[-1,-1])}}function rl(e,t,l){const a=e.slice();return a[26]=t[l],a[28]=l,a}function nl(e,t,l){const a=e.slice();return a[29]=t[l],a[28]=l,a}function ir(e,t,l){const a=e.slice();return a[31]=t[l],a[28]=l,a}function il(e,t,l){const a=e.slice();return a[29]=t[l],a[28]=l,a}function sl(e){let t,l,a,i;return{c(){t=W("g"),l=W("circle"),this.h()},l(r){t=P(r,"g",{transform:!0});var n=I(t);l=P(n,"circle",{"pointer-events":!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),I(l).forEach(y),n.forEach(y),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","4"),f(l,"stroke",a=e[29].datum.areacd===e[6].datum.areacd?"black":"none"),f(l,"fill","#6e6e6e"),f(l,"fill-opacity","0.15"),f(t,"transform",i="translate("+e[29].x+","+e[8](e[29].y)+")")},m(r,n){B(r,t,n),E(t,l)},p(r,n){n[0]&66&&a!==(a=r[29].datum.areacd===r[6].datum.areacd?"black":"none")&&f(l,"stroke",a),n[0]&258&&i!==(i="translate("+r[29].x+","+r[8](r[29].y)+")")&&f(t,"transform",i)},d(r){r&&y(t)}}}function sr(e){let t,l,a,i,r,n,s;return{c(){t=W("path"),l=W("path"),a=W("text"),i=J(e[31]),r=J(" than"),n=W("text"),s=J("average"),this.h()},l(o){t=P(o,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0}),I(t).forEach(y),l=P(o,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(l).forEach(y),a=P(o,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var h=I(a);i=x(h,e[31]),r=x(h," than"),h.forEach(y),n=P(o,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var u=I(n);s=x(u,"average"),u.forEach(y),this.h()},h(){f(t,"transform","translate(0,-40)"),f(t,"d","M "+-90*[-1,1][e[28]]+" 0 l"+-50*[-1,1][e[28]]+" 0"),f(t,"stroke-width","1px"),f(t,"stroke","black"),f(l,"transform","translate(0,-40)"),f(l,"d","M "+-148*[-1,1][e[28]]+" 0 l"+6*[-1,1][e[28]]+" -6 l0 12 z"),f(l,"stroke","none"),f(l,"fill","black"),f(a,"transform","translate(0,-40)"),f(a,"x",-145*[-1,1][e[28]]),f(a,"y","15"),f(a,"text-anchor","middle"),f(a,"fill","black"),f(a,"font-size","14px"),f(n,"transform","translate(0,-40)"),f(n,"x",-145*[-1,1][e[28]]),f(n,"y","27"),f(n,"text-anchor","middle"),f(n,"fill","black"),f(n,"font-size","14px")},m(o,h){B(o,t,h),B(o,l,h),B(o,a,h),E(a,i),E(a,r),B(o,n,h),E(n,s)},p:ie,d(o){o&&y(t),o&&y(l),o&&y(a),o&&y(n)}}}function ol(e){let t,l,a,i,r,n,s,o="49%",h,u,c;return{c(){t=W("g"),l=W("circle"),i=W("g"),r=W("rect"),s=W("text"),h=J(o),this.h()},l(v){t=P(v,"g",{transform:!0});var b=I(t);l=P(b,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(l).forEach(y),i=P(b,"g",{class:!0});var m=I(i);r=P(m,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0}),I(r).forEach(y),s=P(m,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var _=I(s);h=x(_,o),_.forEach(y),m.forEach(y),b.forEach(y),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","6"),f(l,"stroke","white"),f(l,"stroke-width","1px"),f(l,"fill",a=re[e[29].datum.role]),f(l,"opacity","1"),f(r,"x","3"),f(r,"y","-20"),f(r,"width","35"),f(r,"height","18.5"),f(r,"rx","3px"),f(r,"stroke",n=re[e[29].datum.role]),f(r,"fill","white"),f(r,"stroke-width","1px"),f(s,"x","6"),f(s,"y","-6"),f(s,"text-anchor","start"),f(s,"fill",u=re[e[29].datum.role]),f(s,"font-size","14px"),f(i,"class","labelGroup"),f(t,"transform",c="translate("+e[2](.4)+","+e[8](e[29].y)+")")},m(v,b){B(v,t,b),E(t,l),E(t,i),E(i,r),E(i,s),E(s,h)},p(v,b){b[0]&128&&a!==(a=re[v[29].datum.role])&&f(l,"fill",a),b[0]&128&&n!==(n=re[v[29].datum.role])&&f(r,"stroke",n),b[0]&128&&u!==(u=re[v[29].datum.role])&&f(s,"fill",u),b[0]&388&&c!==(c="translate("+v[2](.4)+","+v[8](v[29].y)+")")&&f(t,"transform",c)},d(v){v&&y(t)}}}function fl(e){let t,l=e[26]+"",a;return{c(){t=W("text"),a=J(l),this.h()},l(i){t=P(i,"text",{transform:!0,"text-anchor":!0,x:!0,y:!0,fill:!0,"font-size":!0});var r=I(t);a=x(r,l),r.forEach(y),this.h()},h(){f(t,"transform","translate(-22,42)"),f(t,"text-anchor","end"),f(t,"x","0"),f(t,"y",e[28]*14),f(t,"fill","black"),f(t,"font-size","14px")},m(i,r){B(i,t,r),E(t,a)},p(i,r){r[0]&32&&l!==(l=i[26]+"")&&me(a,l)},d(i){i&&y(t)}}}function or(e){let t,l,a,i,r,n,s,o,h,u,c,v,b,m,_,D,d,p,g,w,k=e[1],A=[];for(let F=0;F<k.length;F+=1)A[F]=sl(il(e,k,F));let z=["better","worse"],T=[];for(let F=0;F<2;F+=1)T[F]=sr(ir(e,z,F));let M=e[7],N=[];for(let F=0;F<M.length;F+=1)N[F]=ol(nl(e,M,F));let L=e[5],S=[];for(let F=0;F<L.length;F+=1)S[F]=fl(rl(e,L,F));return{c(){t=O("div"),l=O("div"),a=W("svg"),i=W("g"),r=W("g");for(let F=0;F<A.length;F+=1)A[F].c();n=W("g"),s=W("line"),h=W("text"),u=J("Half of areas have a value"),c=W("text"),v=J("higher/lower than this line");for(let F=0;F<2;F+=1)T[F].c();m=W("g");for(let F=0;F<N.length;F+=1)N[F].c();_=W("g"),D=W("path"),d=W("path");for(let F=0;F<S.length;F+=1)S[F].c();this.h()},l(F){t=H(F,"DIV",{class:!0});var $=I(t);l=H($,"DIV",{class:!0});var R=I(l);a=P(R,"svg",{height:!0,width:!0});var K=I(a);i=P(K,"g",{class:!0,transform:!0});var q=I(i);r=P(q,"g",{class:!0});var C=I(r);for(let ce=0;ce<A.length;ce+=1)A[ce].l(C);C.forEach(y),n=P(q,"g",{class:!0,transform:!0});var U=I(n);s=P(U,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),I(s).forEach(y),h=P(U,"text",{y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var V=I(h);u=x(V,"Half of areas have a value"),V.forEach(y),c=P(U,"text",{y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var se=I(c);v=x(se,"higher/lower than this line"),se.forEach(y);for(let ce=0;ce<2;ce+=1)T[ce].l(U);U.forEach(y),m=P(q,"g",{class:!0});var _e=I(m);for(let ce=0;ce<N.length;ce+=1)N[ce].l(_e);_e.forEach(y),_=P(q,"g",{class:!0,transform:!0});var he=I(_);D=P(he,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0,fill:!0}),I(D).forEach(y),d=P(he,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(d).forEach(y);for(let ce=0;ce<S.length;ce+=1)S[ce].l(he);he.forEach(y),q.forEach(y),K.forEach(y),R.forEach(y),$.forEach(y),this.h()},h(){f(r,"class","backgroundCirclesGroup"),f(s,"x1","0"),f(s,"x2","0"),f(s,"y1","-18"),f(s,"y2",o=e[3]+10),f(s,"stroke","#871A5B"),f(s,"stroke-width","1.5px"),f(h,"y","-36"),f(h,"text-anchor","middle"),f(h,"fill","#871A5B"),f(h,"font-size","14px"),f(c,"y","-22"),f(c,"text-anchor","middle"),f(c,"fill","#871A5B"),f(c,"font-size","14px"),f(n,"class","medianLineGroup"),f(n,"transform",b="translate("+e[2](0)+",0)"),f(m,"class","primaryCirclesGroup"),f(D,"transform","translate(0,18)"),f(D,"d","M 0 0 l 0 20 l-20 0"),f(D,"stroke-width","1px"),f(D,"stroke","black"),f(D,"fill","none"),f(d,"transform","translate(0,10)"),f(d,"d","M 0 0 l6 6 l-12 0 z"),f(d,"stroke","none"),f(d,"fill","black"),f(_,"class","explanationGroup"),f(_,"transform",p="translate("+e[6].x+","+e[8](e[6].y)+")"),f(i,"class","chart-container"),f(i,"transform",g="translate("+e[4].left+","+e[4].top+")"),f(a,"height",e[9]),f(a,"width",e[0]),f(l,"class","svg-container svelte-1ng210p"),Pe(()=>e[23].call(l)),f(t,"class","keyContainer")},m(F,$){B(F,t,$),E(t,l),E(l,a),E(a,i),E(i,r);for(let R=0;R<A.length;R+=1)A[R]&&A[R].m(r,null);E(i,n),E(n,s),E(n,h),E(h,u),E(n,c),E(c,v);for(let R=0;R<2;R+=1)T[R]&&T[R].m(n,null);E(i,m);for(let R=0;R<N.length;R+=1)N[R]&&N[R].m(m,null);E(i,_),E(_,D),E(_,d);for(let R=0;R<S.length;R+=1)S[R]&&S[R].m(_,null);w=ze(l,e[23].bind(l))},p(F,$){if($[0]&322){k=F[1];let R;for(R=0;R<k.length;R+=1){const K=il(F,k,R);A[R]?A[R].p(K,$):(A[R]=sl(K),A[R].c(),A[R].m(r,null))}for(;R<A.length;R+=1)A[R].d(1);A.length=k.length}if($[0]&8&&o!==(o=F[3]+10)&&f(s,"y2",o),$[0]&4&&b!==(b="translate("+F[2](0)+",0)")&&f(n,"transform",b),$[0]&388){M=F[7];let R;for(R=0;R<M.length;R+=1){const K=nl(F,M,R);N[R]?N[R].p(K,$):(N[R]=ol(K),N[R].c(),N[R].m(m,null))}for(;R<N.length;R+=1)N[R].d(1);N.length=M.length}if($[0]&32){L=F[5];let R;for(R=0;R<L.length;R+=1){const K=rl(F,L,R);S[R]?S[R].p(K,$):(S[R]=fl(K),S[R].c(),S[R].m(_,null))}for(;R<S.length;R+=1)S[R].d(1);S.length=L.length}$[0]&320&&p!==(p="translate("+F[6].x+","+F[8](F[6].y)+")")&&f(_,"transform",p),$[0]&16&&g!==(g="translate("+F[4].left+","+F[4].top+")")&&f(i,"transform",g),$[0]&1&&f(a,"width",F[0])},i:ie,o:ie,d(F){F&&y(t),ne(A,F),ne(T,F),ne(N,F),ne(S,F),w()}}}function fr(e,t){const l=e.map(i=>i[t]);l.sort((i,r)=>i-r);const a=l.length;if(a%2===0){const i=l[a/2-1],r=l[a/2];return(i+r)/2}else return l[Math.floor(a/2)]}function ur(e,t){const l=e.split(" "),a=Math.ceil(l.length/t),i=[];let r=[];return l.forEach(n=>{r.length<a?r.push(n):(i.push(r.join(" ")),r=[n])}),r.length>0&&i.push(r.join(" ")),i}function hr(e,t,l){let a,i,r,n,s,o,h,u,c,v,b,m,_,D,d;Ae("areas");let{filteredData:p,selectedAreas:g,areasWithData:w,plottedAreas:k,siblingAreas:A,selectedArea:z}=t,T=100,M=130;function N(){T=this.clientWidth,l(0,T)}return e.$$set=L=>{"filteredData"in L&&l(10,p=L.filteredData),"selectedAreas"in L&&l(11,g=L.selectedAreas),"areasWithData"in L&&l(12,w=L.areasWithData),"plottedAreas"in L&&l(13,k=L.plottedAreas),"siblingAreas"in L&&l(14,A=L.siblingAreas),"selectedArea"in L&&l(15,z=L.selectedArea)},e.$$.update=()=>{e.$$.dirty[0]&17&&l(18,i=T-a.left-a.right),e.$$.dirty[0]&16&&l(3,r=M-a.top-a.bottom),e.$$.dirty[0]&19456&&l(22,n=p.filter(L=>A.siblings.includes(L.areacd)||L.areacd===g.find(S=>S.role==="main").data.areacd)),e.$$.dirty[0]&4194304&&l(21,s=fr(n,"value")),e.$$.dirty[0]&6291456&&l(20,o=Math.max(Math.abs(s-Math.min(...n.map(L=>L.value))),Math.abs(s-Math.max(...n.map(L=>L.value))))),e.$$.dirty[0]&3145728,e.$$.dirty[0]&7340032&&l(17,h=n.map(L=>({...L,calcYValue:(s-L.value)/o}))),e.$$.dirty[0]&3154944&&l(16,u=k.filter(L=>L.role==="main").map(L=>({...L,value:p.filter(S=>S.areacd===L.areacd).length>0?p.find(S=>S.areacd===L.areacd).value:null,calcYValue:p.filter(S=>S.areacd===L.areacd).length>0?(s-p.find(S=>S.areacd===L.areacd).value)/o:null})).filter(L=>L.yValue!==null)),e.$$.dirty[0]&786432&&l(2,v=Le().domain(c).range([0,i])),e.$$.dirty[0]&131076&&l(1,b=new qe(h,6,L=>v(Math.pow(L.calcYValue,1))).calculateYPositions()),e.$$.dirty[0]&10&&l(8,m=Le().domain([Math.min(...b.map(L=>L.y)),Math.max(...b.map(L=>L.y))]).range([0,r])),e.$$.dirty[0]&65540&&l(7,_=new qe(u,8,L=>v(Math.pow(L.calcYValue,1))).calculateYPositions()),e.$$.dirty[0]&2&&l(6,D=b.reduce((L,S)=>L.x>S.x?L:S))},l(4,a={top:55,left:40,right:40,bottom:45}),l(19,c=[-1,1]),l(5,d=ur("Each circle represents a local authority. This is the highest ranking area.",2)),[T,b,v,r,a,d,D,_,m,M,p,g,w,k,A,z,u,h,i,c,o,s,n,N]}class cr extends oe{constructor(t){super(),fe(this,t,hr,or,ue,{filteredData:10,selectedAreas:11,areasWithData:12,plottedAreas:13,siblingAreas:14,selectedArea:15},null,[-1,-1])}}function ul(e,t,l){const a=e.slice();return a[15]=t[l],a[17]=l,a}function hl(e){let t,l;function a(...i){return e[14](e[15],...i)}return t=new nr({props:{indicator:e[15],filteredData:e[1].filter(a),selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5],col1Width:e[7],rowNumb:e[17]}}),{c(){ee(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,r){te(t,i,r),l=!0},p(i,r){e=i;const n={};r&4&&(n.indicator=e[15]),r&6&&(n.filteredData=e[1].filter(a)),r&8&&(n.selectedAreas=e[3]),r&256&&(n.areasWithData=e[8]),r&512&&(n.plottedAreas=e[9]),r&16&&(n.siblingAreas=e[4]),r&32&&(n.selectedArea=e[5]),r&128&&(n.col1Width=e[7]),t.$set(n)},i(i){l||(j(t.$$.fragment,i),l=!0)},o(i){Y(t.$$.fragment,i),l=!1},d(i){le(t,i)}}}function dr(e){let t,l,a,i,r,n,s,o,h,u,c,v,b;function m(g){e[13](g)}let _={selectedAreas:e[3].filter(e[12]),areasWithData:e[8],includeSiblings:!1,selectedArea:e[5],parentArea:e[6]};e[0]!==void 0&&(_.checkboxedRoles=e[0]),l=new Dl({props:_}),ke.push(()=>ye(l,"checkboxedRoles",m)),r=new Ol({props:{plottedAreas:e[9]}}),o=new cr({props:{filteredData:e[10],selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5]}});let D=e[2].filter(cl),d=[];for(let g=0;g<D.length;g+=1)d[g]=hl(ul(e,D,g));const p=g=>Y(d[g],1,1,()=>{d[g]=null});return{c(){t=O("div"),ee(l.$$.fragment),i=Z(),ee(r.$$.fragment),n=Z(),s=O("div"),ee(o.$$.fragment),h=Z();for(let g=0;g<d.length;g+=1)d[g].c();u=Z(),c=O("img"),this.h()},l(g){t=H(g,"DIV",{class:!0});var w=I(t);ae(l.$$.fragment,w),i=Q(w),ae(r.$$.fragment,w),n=Q(w),s=H(w,"DIV",{class:!0});var k=I(s);ae(o.$$.fragment,k),k.forEach(y),h=Q(w);for(let A=0;A<d.length;A+=1)d[A].l(w);w.forEach(y),u=Q(g),c=H(g,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){f(s,"class","keyContainer svelte-f2pwib"),f(t,"class","beeswarmRowsContainer svelte-f2pwib"),ge(c,"padding-top","10px"),f(c,"width","75%"),lt(c.src,v=`${Ce}/img/image1.png`)||f(c,"src",v),f(c,"alt","download buttons"),f(c,"class","svelte-f2pwib")},m(g,w){B(g,t,w),te(l,t,null),E(t,i),te(r,t,null),E(t,n),E(t,s),te(o,s,null),E(t,h);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(t,null);B(g,u,w),B(g,c,w),b=!0},p(g,[w]){const k={};w&10&&(k.selectedAreas=g[3].filter(g[12])),w&256&&(k.areasWithData=g[8]),w&32&&(k.selectedArea=g[5]),w&64&&(k.parentArea=g[6]),!a&&w&1&&(a=!0,k.checkboxedRoles=g[0],we(()=>a=!1)),l.$set(k);const A={};w&512&&(A.plottedAreas=g[9]),r.$set(A);const z={};if(w&8&&(z.selectedAreas=g[3]),w&256&&(z.areasWithData=g[8]),w&512&&(z.plottedAreas=g[9]),w&16&&(z.siblingAreas=g[4]),w&32&&(z.selectedArea=g[5]),o.$set(z),w&958){D=g[2].filter(cl);let T;for(T=0;T<D.length;T+=1){const M=ul(g,D,T);d[T]?(d[T].p(M,w),j(d[T],1)):(d[T]=hl(M),d[T].c(),j(d[T],1),d[T].m(t,null))}for(ve(),T=D.length;T<d.length;T+=1)p(T);be()}},i(g){if(!b){j(l.$$.fragment,g),j(r.$$.fragment,g),j(o.$$.fragment,g);for(let w=0;w<D.length;w+=1)j(d[w]);b=!0}},o(g){Y(l.$$.fragment,g),Y(r.$$.fragment,g),Y(o.$$.fragment,g),d=d.filter(Boolean);for(let w=0;w<d.length;w+=1)Y(d[w]);b=!1},d(g){g&&y(t),le(l),le(r),le(o),ne(d,g),g&&y(u),g&&y(c)}}}const cl=e=>e.includeAsBeeswarm==="T";function _r(e,t,l){let a,i,r=Ae("beeswarmKeyData"),{trimmedIndicators:n,latestData:s,indicators:o,selectedAreas:h,siblingAreas:u,checkboxedRoles:c,selectedArea:v,parentArea:b,col1Width:m}=t;const _=p=>s.filter(g=>p.data.areacd===g.areacd).length>0&p.role!=="main";function D(p){c=p,l(0,c)}const d=(p,g)=>g.codeId===p.id;return e.$$set=p=>{"trimmedIndicators"in p&&l(11,n=p.trimmedIndicators),"latestData"in p&&l(1,s=p.latestData),"indicators"in p&&l(2,o=p.indicators),"selectedAreas"in p&&l(3,h=p.selectedAreas),"siblingAreas"in p&&l(4,u=p.siblingAreas),"checkboxedRoles"in p&&l(0,c=p.checkboxedRoles),"selectedArea"in p&&l(5,v=p.selectedArea),"parentArea"in p&&l(6,b=p.parentArea),"col1Width"in p&&l(7,m=p.col1Width)},e.$$.update=()=>{e.$$.dirty&4&&console.log(o),e.$$.dirty&2&&l(8,a=[...new Set(s.map(p=>p.areacd))]),e.$$.dirty&265&&l(9,i=[...h.map(p=>p.role==="main"||c[p.role]?{role:p.role,areacd:p.data.areacd}:null).filter(p=>p!=null),...c.custom===null||c.custom===void 0?[]:c.custom.map((p,g)=>({role:"custom"+(g+1),areacd:p.areacd}))].filter(p=>a.includes(p.areacd)))},console.log(r),[c,s,o,h,u,v,b,m,a,i,r,n,_,D,d]}class mr extends oe{constructor(t){super(),fe(this,t,_r,dr,ue,{trimmedIndicators:11,latestData:1,indicators:2,selectedAreas:3,siblingAreas:4,checkboxedRoles:0,selectedArea:5,parentArea:6,col1Width:7})}}function gr(e){let t,l,a;function i(n){e[16](n)}let r={trimmedIndicators:e[4],latestData:e[1],indicators:[...e[5],...e[6],...e[7]],selectedAreas:e[3],siblingAreas:e[8],selectedArea:e[9],parentArea:e[10],col1Width:e[11]};return e[0]!==void 0&&(r.checkboxedRoles=e[0]),t=new mr({props:r}),ke.push(()=>ye(t,"checkboxedRoles",i)),{c(){ee(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,s){te(t,n,s),a=!0},p(n,s){const o={};s&16&&(o.trimmedIndicators=n[4]),s&2&&(o.latestData=n[1]),s&224&&(o.indicators=[...n[5],...n[6],...n[7]]),s&8&&(o.selectedAreas=n[3]),s&256&&(o.siblingAreas=n[8]),s&512&&(o.selectedArea=n[9]),s&1024&&(o.parentArea=n[10]),s&2048&&(o.col1Width=n[11]),!l&&s&1&&(l=!0,o.checkboxedRoles=n[0],we(()=>l=!1)),t.$set(o)},i(n){a||(j(t.$$.fragment,n),a=!0)},o(n){Y(t.$$.fragment,n),a=!1},d(n){le(t,n)}}}function pr(e){let t,l,a;function i(n){e[15](n)}let r={indicators:[...e[5],...e[6],...e[7]],latestData:e[1],initialData:e[2],selectedAreas:e[3]};return e[11]!==void 0&&(r.col1Width=e[11]),t=new $a({props:r}),ke.push(()=>ye(t,"col1Width",i)),{c(){ee(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,s){te(t,n,s),a=!0},p(n,s){const o={};s&224&&(o.indicators=[...n[5],...n[6],...n[7]]),s&2&&(o.latestData=n[1]),s&4&&(o.initialData=n[2]),s&8&&(o.selectedAreas=n[3]),!l&&s&2048&&(l=!0,o.col1Width=n[11],we(()=>l=!1)),t.$set(o)},i(n){a||(j(t.$$.fragment,n),a=!0)},o(n){Y(t.$$.fragment,n),a=!1},d(n){le(t,n)}}}function vr(e){let t,l,a,i,r,n,s;function o(b){e[14](b)}let h={compareIntroText:!1,optionsArray:e[13]};e[12]!==void 0&&(h.chosenChart=e[12]),l=new El({props:h}),ke.push(()=>ye(l,"chosenChart",o));const u=[pr,gr],c=[];function v(b,m){return b[13][b[12]-1]==="Summary"?0:b[13][b[12]-1]==="Compared to other areas"?1:-1}return~(r=v(e))&&(n=c[r]=u[r](e)),{c(){t=O("div"),ee(l.$$.fragment),i=Z(),n&&n.c(),this.h()},l(b){t=H(b,"DIV",{class:!0});var m=I(t);ae(l.$$.fragment,m),i=Q(m),n&&n.l(m),m.forEach(y),this.h()},h(){f(t,"class","mainListContainer svelte-1ahp7ns")},m(b,m){B(b,t,m),te(l,t,null),E(t,i),~r&&c[r].m(t,null),s=!0},p(b,[m]){const _={};!a&&m&4096&&(a=!0,_.chosenChart=b[12],we(()=>a=!1)),l.$set(_);let D=r;r=v(b),r===D?~r&&c[r].p(b,m):(n&&(ve(),Y(c[D],1,1,()=>{c[D]=null}),be()),~r?(n=c[r],n?n.p(b,m):(n=c[r]=u[r](b),n.c()),j(n,1),n.m(t,null)):n=null)},i(b){s||(j(l.$$.fragment,b),j(n),s=!0)},o(b){Y(l.$$.fragment,b),Y(n),s=!1},d(b){b&&y(t),le(l),~r&&c[r].d()}}}function br(e,t,l){let{latestData:a,initialData:i,selectedAreas:r,trimmedIndicators:n,primaryIndicators:s,secondaryIndicators:o,otherIndicators:h,siblingAreas:u,checkboxedRoles:c,selectedArea:v,parentArea:b}=t,m=1,_=["Summary","Compared to other areas"],D;function d(w){m=w,l(12,m)}function p(w){D=w,l(11,D)}function g(w){c=w,l(0,c)}return e.$$set=w=>{"latestData"in w&&l(1,a=w.latestData),"initialData"in w&&l(2,i=w.initialData),"selectedAreas"in w&&l(3,r=w.selectedAreas),"trimmedIndicators"in w&&l(4,n=w.trimmedIndicators),"primaryIndicators"in w&&l(5,s=w.primaryIndicators),"secondaryIndicators"in w&&l(6,o=w.secondaryIndicators),"otherIndicators"in w&&l(7,h=w.otherIndicators),"siblingAreas"in w&&l(8,u=w.siblingAreas),"checkboxedRoles"in w&&l(0,c=w.checkboxedRoles),"selectedArea"in w&&l(9,v=w.selectedArea),"parentArea"in w&&l(10,b=w.parentArea)},e.$$.update=()=>{e.$$.dirty&2048&&console.log(D)},[c,a,i,r,n,s,o,h,u,v,b,D,m,_,d,p,g]}class kr extends oe{constructor(t){super(),fe(this,t,br,vr,ue,{latestData:1,initialData:2,selectedAreas:3,trimmedIndicators:4,primaryIndicators:5,secondaryIndicators:6,otherIndicators:7,siblingAreas:8,checkboxedRoles:0,selectedArea:9,parentArea:10})}}function dl(e,t,l){const a=e.slice();return a[19]=t[l],a}function _l(e){let t,l,a;function i(...s){return e[17](e[19],...s)}function r(s){e[18](s)}let n={indicator:e[19],latestData:e[1].filter(i),otherData:e[19].code in e[4]?e[4][e[19].code]:[],initialData:e[19].code in e[5]?e[5][e[19].code]:[],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};return e[2]!==void 0&&(n.checkboxedRoles=e[2]),t=new Qa({props:n}),ke.push(()=>ye(t,"checkboxedRoles",r)),{c(){ee(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){te(t,s,o),a=!0},p(s,o){e=s;const h={};o&2&&(h.latestData=e[1].filter(i)),o&16&&(h.otherData=e[19].code in e[4]?e[4][e[19].code]:[]),o&32&&(h.initialData=e[19].code in e[5]?e[5][e[19].code]:[]),o&8&&(h.selectedAreas=e[3]),o&64&&(h.siblingAreas=e[6]),!l&&o&4&&(l=!0,h.checkboxedRoles=e[2],we(()=>l=!1)),t.$set(h)},i(s){a||(j(t.$$.fragment,s),a=!0)},o(s){Y(t.$$.fragment,s),a=!1},d(s){le(t,s)}}}function yr(e){let t,l,a,i,r,n=(e[0]in e[13]?e[13][e[0]]:"")+"",s,o,h,u,c;function v(d){e[16](d)}let b={indicators:[...e[8],...e[9],...e[10]],latestData:e[1],initialData:e[5],selectedAreas:e[3],trimmedIndicators:e[7],primaryIndicators:e[8],secondaryIndicators:e[9],otherIndicators:e[10],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};e[2]!==void 0&&(b.checkboxedRoles=e[2]),o=new kr({props:b}),ke.push(()=>ye(o,"checkboxedRoles",v));let m=e[8],_=[];for(let d=0;d<m.length;d+=1)_[d]=_l(dl(e,m,d));const D=d=>Y(_[d],1,1,()=>{_[d]=null});return{c(){t=O("section"),l=O("h1"),a=J(e[0]),i=Z(),r=O("p"),s=Z(),ee(o.$$.fragment),u=Z();for(let d=0;d<_.length;d+=1)_[d].c();this.h()},l(d){t=H(d,"SECTION",{title:!0,class:!0});var p=I(t);l=H(p,"H1",{});var g=I(l);a=x(g,e[0]),g.forEach(y),i=Q(p),r=H(p,"P",{});var w=I(r);w.forEach(y),s=Q(p),ae(o.$$.fragment,p),u=Q(p);for(let k=0;k<_.length;k+=1)_[k].l(p);p.forEach(y),this.h()},h(){f(t,"title",e[0]),f(t,"class","svelte-v10b0q")},m(d,p){B(d,t,p),E(t,l),E(l,a),E(t,i),E(t,r),r.innerHTML=n,E(t,s),te(o,t,null),E(t,u);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(t,null);c=!0},p(d,[p]){(!c||p&1)&&me(a,d[0]),(!c||p&1)&&n!==(n=(d[0]in d[13]?d[13][d[0]]:"")+"")&&(r.innerHTML=n);const g={};if(p&2&&(g.latestData=d[1]),p&32&&(g.initialData=d[5]),p&8&&(g.selectedAreas=d[3]),p&64&&(g.siblingAreas=d[6]),!h&&p&4&&(h=!0,g.checkboxedRoles=d[2],we(()=>h=!1)),o.$set(g),p&6526){m=d[8];let w;for(w=0;w<m.length;w+=1){const k=dl(d,m,w);_[w]?(_[w].p(k,p),j(_[w],1)):(_[w]=_l(k),_[w].c(),j(_[w],1),_[w].m(t,null))}for(ve(),w=m.length;w<_.length;w+=1)D(w);be()}(!c||p&1)&&f(t,"title",d[0])},i(d){if(!c){j(o.$$.fragment,d);for(let p=0;p<m.length;p+=1)j(_[p]);c=!0}},o(d){Y(o.$$.fragment,d),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)Y(_[p]);c=!1},d(d){d&&y(t),le(o),ne(_,d)}}}function wr(e,t,l){let{sectionName:a,sectionIndicators:i,indicators:r,selectedAreas:n,latestData:s,otherData:o,initialData:h,checkboxedRoles:u,siblingAreas:c}=t;a=a[0].toUpperCase()+a.substring(1),s=s.filter(A=>i.map(z=>z.id).includes(A.codeId));const v=r.filter(A=>i.map(z=>z.id).includes(A.id)),b=v.filter(A=>i.filter(z=>z.priority==="p").map(z=>z.id).includes(A.id)),m=v.filter(A=>i.filter(z=>z.priority==="s").map(z=>z.id).includes(A.id)),_=v.filter(A=>![...b.map(z=>z.id),...m.map(z=>z.id)].includes(A.id));let D=n.find(A=>A.role==="main").data.areanm,d=n.find(A=>A.role==="parent").data.areanm,p={Demographics:"[Dummy text] "+D+" is a rural area in "+d+". It is a popular retirement destination.",Economy:"[Dummy text] "+D+" has above average employment. Its primary industry is retail.",Health:"[Dummy text] "+D+" is an ageing area with above average level of deprivation.",Connectivity:"[Dummy text] "+D+" is a rural area in "+d+".",Skills:"[Dummy text] "+D+" has an above average level of deprivation.",Education:"[Dummy text] "+D+" has a low student population. The area has an above average number of people who do not hold qualifications.",Wellbeing:"[Dummy text] "+D+" has an above average level of deprivation and above average employment."};function g(A){u=A,l(2,u)}const w=(A,z)=>z.codeId===A.id;function k(A){u=A,l(2,u)}return e.$$set=A=>{"sectionName"in A&&l(0,a=A.sectionName),"sectionIndicators"in A&&l(14,i=A.sectionIndicators),"indicators"in A&&l(15,r=A.indicators),"selectedAreas"in A&&l(3,n=A.selectedAreas),"latestData"in A&&l(1,s=A.latestData),"otherData"in A&&l(4,o=A.otherData),"initialData"in A&&l(5,h=A.initialData),"checkboxedRoles"in A&&l(2,u=A.checkboxedRoles),"siblingAreas"in A&&l(6,c=A.siblingAreas)},[a,s,u,n,o,h,c,v,b,m,_,D,d,p,i,r,g,w,k]}class Ar extends oe{constructor(t){super(),fe(this,t,wr,yr,ue,{sectionName:0,sectionIndicators:14,indicators:15,selectedAreas:3,latestData:1,otherData:4,initialData:5,checkboxedRoles:2,siblingAreas:6})}}function ml(e,t,l){const a=e.slice();return a[18]=t[l],a}function Dr(e){let t=e[5].find(Fr).data.areanm+"",l;return{c(){l=J(t)},l(a){l=x(a,t)},m(a,i){B(a,l,i)},p:ie,d(a){a&&y(l)}}}function Er(e){let t,l=e[5].find(Cr).data.areanm+"",a;return{c(){t=J("Get localised data, insights and trends for "),a=J(l)},l(i){t=x(i,"Get localised data, insights and trends for "),a=x(i,l)},m(i,r){B(i,t,r),B(i,a,r)},p:ie,d(i){i&&y(t),i&&y(a)}}}function Ir(e){let t,l,a,i;return t=new Pl({props:{$$slots:{default:[Dr]},$$scope:{ctx:e}}}),a=new zl({props:{$$slots:{default:[Er]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Z(),ee(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Q(r),ae(a.$$.fragment,r)},m(r,n){te(t,r,n),B(r,l,n),te(a,r,n),i=!0},p(r,n){const s={};n&2097152&&(s.$$scope={dirty:n,ctx:r}),t.$set(s);const o={};n&2097152&&(o.$$scope={dirty:n,ctx:r}),a.$set(o)},i(r){i||(j(t.$$.fragment,r),j(a.$$.fragment,r),i=!0)},o(r){Y(t.$$.fragment,r),Y(a.$$.fragment,r),i=!1},d(r){le(t,r),r&&y(l),le(a,r)}}}function gl(e){let t,l,a;function i(...s){return e[8](e[18],...s)}function r(s){e[9](s)}let n={sectionName:e[18],sectionIndicators:e[0].configData.areaSections.filter(i),indicators:e[4],selectedAreas:e[5],latestData:e[3],initialData:e[0].preloadedData.initialData,otherData:e[0].preloadedData.otherData,siblingAreas:e[1]};return e[2]!==void 0&&(n.checkboxedRoles=e[2]),t=new Ar({props:n}),ke.push(()=>ye(t,"checkboxedRoles",r)),{c(){ee(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){te(t,s,o),a=!0},p(s,o){e=s;const h={};o&1&&(h.sectionName=e[18]),o&1&&(h.sectionIndicators=e[0].configData.areaSections.filter(i)),o&1&&(h.initialData=e[0].preloadedData.initialData),o&1&&(h.otherData=e[0].preloadedData.otherData),o&2&&(h.siblingAreas=e[1]),!l&&o&4&&(l=!0,h.checkboxedRoles=e[2],we(()=>l=!1)),t.$set(h)},i(s){a||(j(t.$$.fragment,s),a=!0)},o(s){Y(t.$$.fragment,s),a=!1},d(s){le(t,s)}}}function Mr(e){let t;return{c(){t=J("Find parent, child and neighbouring areas")},l(l){t=x(l,"Find parent, child and neighbouring areas")},m(l,a){B(l,t,a)},d(l){l&&y(t)}}}function Rr(e){let t,l,a,i,r,n,s,o,h,u,c,v,b;t=new la({props:{areaKeyIndicators:e[0].configData.areaKeyIndicators,latestData:e[3].filter(e[6]),initialData:e[0].preloadedData.initialData,trimmedIndicators:e[4].filter(e[7]),selectedAreas:e[5]}});let m=[...new Set(e[0].configData.areaSections.map(pl))],_=[];for(let d=0;d<m.length;d+=1)_[d]=gl(ml(e,m,d));const D=d=>Y(_[d],1,1,()=>{_[d]=null});return r=new Yl({props:{$$slots:{default:[Mr]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Z();for(let d=0;d<_.length;d+=1)_[d].c();a=Z(),i=O("section"),ee(r.$$.fragment),n=Z(),s=O("section"),o=O("h2"),h=J("Get the data"),u=Z(),c=O("p"),v=J("Here, you can find information and links to the data."),this.h()},l(d){ae(t.$$.fragment,d),l=Q(d);for(let A=0;A<_.length;A+=1)_[A].l(d);a=Q(d),i=H(d,"SECTION",{title:!0,class:!0});var p=I(i);ae(r.$$.fragment,p),p.forEach(y),n=Q(d),s=H(d,"SECTION",{title:!0,class:!0});var g=I(s);o=H(g,"H2",{class:!0});var w=I(o);h=x(w,"Get the data"),w.forEach(y),u=Q(g),c=H(g,"P",{});var k=I(c);v=x(k,"Here, you can find information and links to the data."),k.forEach(y),g.forEach(y),this.h()},h(){f(i,"title","Related areas"),f(i,"class","svelte-r2srs5"),f(o,"class","ons-u-mt-xl"),f(s,"title","Get the data"),f(s,"class","svelte-r2srs5")},m(d,p){te(t,d,p),B(d,l,p);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(d,p);B(d,a,p),B(d,i,p),te(r,i,null),B(d,n,p),B(d,s,p),E(s,o),E(o,h),E(s,u),E(s,c),E(c,v),b=!0},p(d,p){const g={};if(p&1&&(g.areaKeyIndicators=d[0].configData.areaKeyIndicators),p&1&&(g.latestData=d[3].filter(d[6])),p&1&&(g.initialData=d[0].preloadedData.initialData),p&1&&(g.trimmedIndicators=d[4].filter(d[7])),t.$set(g),p&63){m=[...new Set(d[0].configData.areaSections.map(pl))];let k;for(k=0;k<m.length;k+=1){const A=ml(d,m,k);_[k]?(_[k].p(A,p),j(_[k],1)):(_[k]=gl(A),_[k].c(),j(_[k],1),_[k].m(a.parentNode,a))}for(ve(),k=m.length;k<_.length;k+=1)D(k);be()}const w={};p&2097152&&(w.$$scope={dirty:p,ctx:d}),r.$set(w)},i(d){if(!b){j(t.$$.fragment,d);for(let p=0;p<m.length;p+=1)j(_[p]);j(r.$$.fragment,d),b=!0}},o(d){Y(t.$$.fragment,d),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)Y(_[p]);Y(r.$$.fragment,d),b=!1},d(d){le(t,d),d&&y(l),ne(_,d),d&&y(a),d&&y(i),le(r),d&&y(n),d&&y(s)}}}function Lr(e){let t,l,a,i;return t=new Wl({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Ce}/`},{label:"Find a local area",url:`${Ce}/areas`},{label:e[5].find(Tr).data.areanm}],$$slots:{default:[Ir]},$$scope:{ctx:e}}}),a=new Hl({props:{contentsLabel:"Explore this area",$$slots:{default:[Rr]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Z(),ee(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Q(r),ae(a.$$.fragment,r)},m(r,n){te(t,r,n),B(r,l,n),te(a,r,n),i=!0},p(r,[n]){const s={};n&2097152&&(s.$$scope={dirty:n,ctx:r}),t.$set(s);const o={};n&2097159&&(o.$$scope={dirty:n,ctx:r}),a.$set(o)},i(r){i||(j(t.$$.fragment,r),j(a.$$.fragment,r),i=!0)},o(r){Y(t.$$.fragment,r),Y(a.$$.fragment,r),i=!1},d(r){le(t,r),r&&y(l),le(a,r)}}}const Fr=e=>e.role==="main",Cr=e=>e.role==="main",Tr=e=>e.role==="main",pl=e=>e.section;function Sr(e,t,l){let a,{data:i}=t;console.log(i);let r=Ae("latestData"),n=Ae("areas"),s=Ae("areasParentsLookup"),o=Ae("areasGeogLevel"),h=Ae("indicators"),u=Ae("areasGeogInfo"),c=s.find(k=>k.areacd===i.areaCode),v=[];v.push({data:n.find(k=>k.areacd===i.areaCode),role:"main"}),v.push({data:n.find(k=>k.areacd===c.parentcd),role:"parent"}),c.countrycd!==null&c.parentcd!==c.countrycd&&v.push({data:n.find(k=>k.areacd===c.countrycd),role:"country"}),c.parentcd!=="K02000001"&&v.push({data:n.find(k=>k.areacd==="K02000001"),role:"uk"});let b=o.find(k=>k.areacd===i.areaCode).level,m=o.filter(k=>["uk","country"].includes(b)?k.level===b:b==="region"?["region","country"].includes(k.level):b==="both"?["both","lower"].includes(k.level):["both",b].includes(k.level)),_=u.find(k=>k.areacd===i.areaCode).headline,D={};D.neighbours=s.filter(k=>k.areacd!=i.areaCode&k.parentcd===c.parentcd&m.map(A=>A.areacd).includes(k.areacd)).map(k=>k.areacd),D.similar=_===null?[]:u.filter(k=>k.areacd!=i.areaCode&k.headline===_&m.map(A=>A.areacd).includes(k.areacd)).map(k=>k.areacd),D.siblings=s.filter(k=>k.areacd!=i.areaCode&m.map(A=>A.areacd).includes(k.areacd)).map(k=>k.areacd);const d=k=>i.configData.areaKeyIndicators.map(A=>A.id).includes(k.codeId),p=k=>i.configData.areaKeyIndicators.map(A=>A.id).includes(k.id),g=(k,A)=>A.section===k;function w(k){a=k,l(2,a)}return e.$$set=k=>{"data"in k&&l(0,i=k.data)},l(2,a={parent:!0,country:!0,uk:!0,neighbour:!1,cluster:!1,custom:null}),console.log(v),[i,D,a,r,h,v,d,p,g,w]}class Or extends oe{constructor(t){super(),fe(this,t,Sr,Lr,ue,{data:0})}}export{Or as component};
