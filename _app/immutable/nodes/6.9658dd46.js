//js
import{S as se,i as oe,s as fe,I as xn,k as O,l as H,m as M,h as b,n as c,p as ne,b as L,K as $n,L as er,M as tr,g as V,d as q,q as K,a as U,r as G,c as Z,W as we,C as A,u as te,D as ae,U as pe,v as De,f as Ae,V as ie,y as J,z as j,A as x,B as $,F as B,G as T,X as gt,Y as pt,Z as be,_ as vt,e as le,w as ce,Q as he,H as Pe,R as de,P as zr,T as it,E as nr,$ as Wr,a0 as at}from"../chunks/index.148d55c6.js";import{b as Oe}from"../chunks/paths.49f09f57.js";import{T as qr,H as Yr,S as Kr}from"../chunks/Subhead.9af98bf0.js";import{M as Gr,S as Ur}from"../chunks/Map.66d8be64.js";import{b as Q}from"../chunks/config.a6b48590.js";import{f as Zr,e as We,a as Qr}from"../chunks/locale.a357df68.js";import{S as Xr}from"../chunks/Select.bfd8915f.js";var Qe,rr,lr;Jr({thousands:",",grouping:[3],currency:["$",""]});function Jr(e){return Qe=Zr(e),rr=Qe.format,lr=Qe.formatPrefix,Qe}function jr(e){return Math.max(0,-We(Math.abs(e)))}function xr(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(We(t)/3)))*3-We(Math.abs(e)))}function $r(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,We(t)-We(e))+1}function el(e){let t,n=`${e[0]}px`,r=`${e[1]}px`,l;const i=e[3].default,a=xn(i,e,e[2],null);return{c(){t=O("div"),a&&a.c(),this.h()},l(s){t=H(s,"DIV",{class:!0});var o=M(t);a&&a.l(o),o.forEach(b),this.h()},h(){c(t,"class","placeholder-container svelte-1mhohmc"),ne(t,"height",n),ne(t,"margin-bottom",r)},m(s,o){L(s,t,o),a&&a.m(t,null),l=!0},p(s,[o]){a&&a.p&&(!l||o&4)&&$n(a,i,s,s[2],l?tr(i,s[2],o,null):er(s[2]),null),o&1&&n!==(n=`${s[0]}px`)&&ne(t,"height",n),o&2&&r!==(r=`${s[1]}px`)&&ne(t,"margin-bottom",r)},i(s){l||(V(a,s),l=!0)},o(s){q(a,s),l=!1},d(s){s&&b(t),a&&a.d(s)}}}function tl(e,t,n){let{$$slots:r={},$$scope:l}=t,{height:i=400}=t,{margin:a=40}=t;return e.$$set=s=>{"height"in s&&n(0,i=s.height),"margin"in s&&n(1,a=s.margin),"$$scope"in s&&n(2,l=s.$$scope)},[i,a,l,r]}class nl extends se{constructor(t){super(),oe(this,t,tl,el,fe,{height:0,margin:1})}}function At(e){let t,n=e[0].subText+"",r;return{c(){t=O("p"),r=K(n),this.h()},l(l){t=H(l,"P",{class:!0});var i=M(t);r=G(i,n),i.forEach(b),this.h()},h(){c(t,"class","subText svelte-p8mddv")},m(l,i){L(l,t,i),A(t,r)},p(l,i){i&1&&n!==(n=l[0].subText+"")&&te(r,n)},d(l){l&&b(t)}}}function Et(e){let t,n,r,l,i,a;return{c(){t=O("div"),n=O("div"),r=O("p"),l=K(e[7]),i=U(),a=O("p"),this.h()},l(s){t=H(s,"DIV",{class:!0});var o=M(t);n=H(o,"DIV",{class:!0});var f=M(n);r=H(f,"P",{class:!0});var u=M(r);l=G(u,e[7]),u.forEach(b),f.forEach(b),i=Z(o),a=H(o,"P",{class:!0});var d=M(a);d.forEach(b),o.forEach(b),this.h()},h(){c(r,"class","svelte-p8mddv"),c(n,"class",we("headlineLabel "+(["Shropshire","Herefordshire"].includes(e[5])||["Increasing","Falling"].includes(e[7])?null:e[7]==="Little change"?"headlineLabelOkay":e[7]==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-p8mddv"),c(a,"class","additionalInfoText svelte-p8mddv"),c(t,"class","flexV column3 svelte-p8mddv")},m(s,o){L(s,t,o),A(t,n),A(n,r),A(r,l),A(t,i),A(t,a),a.innerHTML=e[3]},p(s,o){o&8&&(a.innerHTML=s[3])},d(s){s&&b(t)}}}function rl(e){let t,n,r,l=e[0].label+"",i,a,s,o,f,u,d=e[8]+parseFloat(e[4].toFixed(e[4]>100?0:1)).toLocaleString()+e[9]+"",m,v,p,y,I,_,g,h,k,w,E=e[0].subText&&At(e),R=e[1]!=null&&Et(e);return{c(){t=O("div"),n=O("h3"),r=O("a"),i=K(l),s=U(),o=O("div"),f=O("div"),u=O("h4"),m=K(d),v=U(),E&&E.c(),p=U(),y=O("div"),I=O("div"),_=O("p"),g=K(e[6]),h=U(),k=O("p"),w=U(),R&&R.c(),this.h()},l(P){t=H(P,"DIV",{class:!0});var F=M(t);n=H(F,"H3",{class:!0});var D=M(n);r=H(D,"A",{href:!0});var N=M(r);i=G(N,l),N.forEach(b),D.forEach(b),s=Z(F),o=H(F,"DIV",{class:!0});var S=M(o);f=H(S,"DIV",{class:!0});var Y=M(f);u=H(Y,"H4",{class:!0});var X=M(u);m=G(X,d),X.forEach(b),v=Z(Y),E&&E.l(Y),Y.forEach(b),p=Z(S),y=H(S,"DIV",{class:!0});var W=M(y);I=H(W,"DIV",{class:!0});var ee=M(I);_=H(ee,"P",{class:!0});var re=M(_);g=G(re,e[6]),re.forEach(b),ee.forEach(b),h=Z(W),k=H(W,"P",{class:!0});var _e=M(k);_e.forEach(b),W.forEach(b),w=Z(S),R&&R.l(S),S.forEach(b),F.forEach(b),this.h()},h(){c(r,"href",a=Oe+"/indicators/"+e[0].code),c(n,"class","svelte-p8mddv"),c(u,"class","svelte-p8mddv"),c(f,"class","flexV column1 svelte-p8mddv"),c(_,"class","svelte-p8mddv"),c(I,"class",we("headlineLabel "+(["Shropshire","Herefordshire"].includes(e[5])||["Above average","Below average"].includes(e[6])?null:e[6]==="Similar to average"?"headlineLabelOkay":e[6]==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-p8mddv"),c(k,"class","additionalInfoText svelte-p8mddv"),c(y,"class","flexV column2 svelte-p8mddv"),c(o,"class","flexH svelte-p8mddv"),c(t,"class","panelContainer svelte-p8mddv")},m(P,F){L(P,t,F),A(t,n),A(n,r),A(r,i),A(t,s),A(t,o),A(o,f),A(f,u),A(u,m),A(f,v),E&&E.m(f,null),A(o,p),A(o,y),A(y,I),A(I,_),A(_,g),A(y,h),A(y,k),k.innerHTML=e[2],A(o,w),R&&R.m(o,null)},p(P,[F]){F&1&&l!==(l=P[0].label+"")&&te(i,l),F&1&&a!==(a=Oe+"/indicators/"+P[0].code)&&c(r,"href",a),P[0].subText?E?E.p(P,F):(E=At(P),E.c(),E.m(f,null)):E&&(E.d(1),E=null),F&4&&(k.innerHTML=P[2]),P[1]!=null?R?R.p(P,F):(R=Et(P),R.c(),R.m(o,null)):R&&(R.d(1),R=null)},i:ae,o:ae,d(P){P&&b(t),E&&E.d(),R&&R.d()}}}function ll(e,t,n){let r=pe("areas"),{indicator:l,latestData:i,initialData:a,selectedAreas:s}=t,o={population_density:10,female_life_expectancy:1,gdhi:5,no_qualifications_rate:10,life_satisfaction:2},f=i.find(D=>D.areacd===s.find(N=>N.role==="main").data.areacd),u=f.value,d=r.find(D=>D.areacd===f.areacd).areanm,m,v;d==="Shropshire"?(m={high:{T:"Above average",I:"Above average",F:"Below average"},low:{T:"Below average",I:"Below average",F:"Above average"},similar:"Similar to average"},v={high:{T:"Increasing",I:"Increasing",F:"Decreasing"},low:{T:"Decreasing",I:"Decreasing",F:"Increasing"},similar:"Little change"}):(m={high:{T:"Better than average",I:"Above average",F:"Worse than average"},low:{T:"Worse than average",I:"Below average",F:"Better than average"},similar:"Similar to average"},v={high:{T:"Improving",I:"Increasing",F:"Worsening"},low:{T:"Worsening",I:"Falling",F:"Improving"},similar:"Little change"});let p=i.filter(D=>D.areacd===s.find(N=>N.role==="country").data.areacd),y=i.filter(D=>D.areacd===s.find(N=>N.role==="uk").data.areacd),I=i.filter(D=>D.areacd===s.find(N=>N.role==="parent").data.areacd),_=p.length>0?p[0]:y.length>0?y[0]:I[0],g=r.find(D=>D.areacd===_.areacd).areanm,h=Math.abs(u-_.value)/u<o[l.code]/100?m.similar:u>_.value?m.high[l.highEqualsGood]:m.low[l.highEqualsGood],k,w,E=a===void 0?null:a.find(D=>D.areacd===s.find(N=>N.role==="main").data.areacd).value,R=Math.abs(u-E)/u<o[l.code]/100?v.similar:u>E?v.high[l.highEqualsGood]:v.low[l.highEqualsGood];l.code==="population_density"?(k=u>_.value?d+" has a population density "+Math.round(u-_.value).toLocaleString()+"/km<sup>2</sup> higher than the "+g+"-wide average.":d+" has a population density "+Math.round(_.value-u).toLocaleString()+"/km<sup>2</sup> lower than the "+g+"-wide average ("+Math.round(_.value)+"/km<sup>2</sup>).",w=u>E?"Population density rose by "+Math.round(u-E).toLocaleString()+"/km<sup>2</sup> in "+d+" between "+l.defaultInitialYear+" and "+l.latestYear+".":"Population density fell by "+Math.round(E-u).toLocaleString()+"/km<sup>2</sup> in "+d+" between "+l.defaultInitialYear+" and "+l.latestYear+"."):l.code==="female_life_expectancy"?(k=u>_.value?"Female life expectancy in "+d+" is "+Math.round(u-_.value).toFixed(1)+" years higher than the "+g+"-wide average.":"Female life expectancy in "+d+" is "+Math.round(_.value-u).toFixed(1)+" years lower than the "+g+"-wide average.",w=u>E?"Female life expectancy rose by "+Math.round(u-E).toFixed(1)+" years in "+d+" between "+l.defaultInitialYear+" and "+l.latestYear+".":"Female life expectancy fell by "+Math.round(u-E).toFixed(1)+" years in "+d+" between "+l.defaultInitialYear+" and "+l.latestYear+"."):l.code==="gdhi"?(k=u>_.value?"Disposable household income in "+d+" is £"+Math.round(u-_.value).toLocaleString()+" higher than the "+g+"-wide average.":"Disposable household income in "+d+" is £"+Math.abs(Math.round(u-_.value)).toLocaleString()+" lower than the "+g+"-wide average.",w=u>E?"From "+l.defaultInitialYear+" to "+l.latestYear+" disposable household income in "+d+" increased by £"+Math.round(u-E).toLocaleString()+".":"From "+l.defaultInitialYear+" to "+l.latestYear+" disposable household income in "+d+" fell by £"+Math.round(E-u).toLocaleString()+"."):l.code==="no_qualifications_rate"?(k=u>_.value?"The share of adults without qualifications in "+d+" is "+Math.round(u-_.value).toFixed(1)+" percentage points higher than the "+g+"-wide average.":"The share of adults without qualifications in "+d+" is "+Math.round(_.value-u).toFixed(1)+" percentage points lower than the "+g+"-wide average.",w=u>E?"From "+l.defaultInitialYear+" to "+l.latestYear+" the no qualifications rate in "+d+" increased by "+Math.round(u-E).toFixed(1)+" percentage points.":"From "+l.defaultInitialYear+" to "+l.latestYear+" the no qualifications rate in "+d+" fell by "+Math.round(E-u).toFixed(1)+" percentage points."):k=Math.abs(u-_.value)<.25?"People in "+d+" rated their life satisfaction similarly to the "+g+"-wide average ("+_.value.toFixed(1)+" out of 10).":u>_.value?"People in "+d+" rated their life satisfaction higher than the "+g+"-wide average ("+_.value.toFixed(1)+" out of 10).":"People in "+d+" rated their life satisfaction lower than the "+g+"-wide average ("+_.value.toFixed(1)+" out of 10).";let P=l.prefix===null?"":l.prefix==="pounds"?"£":l.prefix,F=l.suffix===null?"":l.suffix;return e.$$set=D=>{"indicator"in D&&n(0,l=D.indicator),"latestData"in D&&n(10,i=D.latestData),"initialData"in D&&n(1,a=D.initialData),"selectedAreas"in D&&n(11,s=D.selectedAreas)},[l,a,k,w,u,d,h,R,P,F,i,s]}class il extends se{constructor(t){super(),oe(this,t,ll,rl,fe,{indicator:0,latestData:10,initialData:1,selectedAreas:11})}}function It(e,t,n){const r=e.slice();return r[7]=t[n],r}function Mt(e){let t,n;function r(...i){return e[5](e[7],...i)}function l(...i){return e[6](e[7],...i)}return t=new il({props:{indicator:e[2].find(r),latestData:e[1].filter(l),initialData:e[3][e[7].code],selectedAreas:e[4]}}),{c(){J(t.$$.fragment)},l(i){j(t.$$.fragment,i)},m(i,a){x(t,i,a),n=!0},p(i,a){e=i;const s={};a&5&&(s.indicator=e[2].find(r)),a&3&&(s.latestData=e[1].filter(l)),a&9&&(s.initialData=e[3][e[7].code]),a&16&&(s.selectedAreas=e[4]),t.$set(s)},i(i){n||(V(t.$$.fragment,i),n=!0)},o(i){q(t.$$.fragment,i),n=!1},d(i){$(t,i)}}}function al(e){let t,n,r,l,i,a,s=e[0],o=[];for(let u=0;u<s.length;u+=1)o[u]=Mt(It(e,s,u));const f=u=>q(o[u],1,1,()=>{o[u]=null});return{c(){t=O("section"),n=O("h1"),r=K("Key indicators"),l=U(),i=O("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=H(u,"SECTION",{title:!0});var d=M(t);n=H(d,"H1",{});var m=M(n);r=G(m,"Key indicators"),m.forEach(b),l=Z(d),i=H(d,"DIV",{class:!0});var v=M(i);for(let p=0;p<o.length;p+=1)o[p].l(v);v.forEach(b),d.forEach(b),this.h()},h(){c(i,"class","rowsContainer"),c(t,"title","Key indicators")},m(u,d){L(u,t,d),A(t,n),A(n,r),A(t,l),A(t,i);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(i,null);a=!0},p(u,[d]){if(d&31){s=u[0];let m;for(m=0;m<s.length;m+=1){const v=It(u,s,m);o[m]?(o[m].p(v,d),V(o[m],1)):(o[m]=Mt(v),o[m].c(),V(o[m],1),o[m].m(i,null))}for(De(),m=s.length;m<o.length;m+=1)f(m);Ae()}},i(u){if(!a){for(let d=0;d<s.length;d+=1)V(o[d]);a=!0}},o(u){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)q(o[d]);a=!1},d(u){u&&b(t),ie(o,u)}}}function sl(e,t,n){let{areaKeyIndicators:r,latestData:l,trimmedIndicators:i,initialData:a,selectedAreas:s}=t;const o=(u,d)=>d.id===u.id,f=(u,d)=>d.codeId===u.id;return e.$$set=u=>{"areaKeyIndicators"in u&&n(0,r=u.areaKeyIndicators),"latestData"in u&&n(1,l=u.latestData),"trimmedIndicators"in u&&n(2,i=u.trimmedIndicators),"initialData"in u&&n(3,a=u.initialData),"selectedAreas"in u&&n(4,s=u.selectedAreas)},[r,l,i,a,s,o,f]}class ol extends se{constructor(t){super(),oe(this,t,sl,al,fe,{areaKeyIndicators:0,latestData:1,trimmedIndicators:2,initialData:3,selectedAreas:4})}}function St(e){let t,n,r,l,i,a,s,o,f,u,d;return{c(){t=O("summary"),n=O("h3"),r=K(e[1]),i=U(),a=O("span"),s=B("svg"),o=B("path"),this.h()},l(m){t=H(m,"SUMMARY",{class:!0});var v=M(t);n=H(v,"H3",{class:!0});var p=M(n);r=G(p,e[1]),p.forEach(b),i=Z(v),a=H(v,"SPAN",{class:!0});var y=M(a);s=T(y,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var I=M(s);o=T(I,"path",{class:!0,d:!0,transform:!0}),M(o).forEach(b),I.forEach(b),y.forEach(b),v.forEach(b),this.h()},h(){c(n,"class",l=we("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),c(o,"class",f=we(e[0]?" path_styling_override":"")+" svelte-lfupja"),c(o,"d",u=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),c(o,"transform",d=e[0]?null:"translate(-5.02 -1.59)"),c(s,"class","ons-svg-icon"),c(s,"viewBox","0 0 8 13"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"focusable","false"),c(a,"class","ons-collapsible__icon"),c(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(m,v){L(m,t,v),A(t,n),A(n,r),A(t,i),A(t,a),A(a,s),A(s,o)},p(m,v){v&2&&te(r,m[1]),v&1&&l!==(l=we("ons-collapsible__title"+(m[0]?" title_styling_override":""))+" svelte-lfupja")&&c(n,"class",l),v&1&&f!==(f=we(m[0]?" path_styling_override":"")+" svelte-lfupja")&&c(o,"class",f),v&1&&u!==(u=m[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&c(o,"d",u),v&1&&d!==(d=m[0]?null:"translate(-5.02 -1.59)")&&c(o,"transform",d)},d(m){m&&b(t)}}}function fl(e){let t,n,r,l,i,a,s=!e[3]&&St(e);const o=e[5].default,f=xn(o,e,e[4],null);return{c(){t=O("details"),s&&s.c(),n=U(),r=O("div"),f&&f.c(),this.h()},l(u){t=H(u,"DETAILS",{class:!0});var d=M(t);s&&s.l(d),n=Z(d),r=H(d,"DIV",{class:!0});var m=M(r);f&&f.l(m),m.forEach(b),d.forEach(b),this.h()},h(){c(r,"class",l=we(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),c(t,"class",i=we("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(u,d){L(u,t,d),s&&s.m(t,null),A(t,n),A(t,r),f&&f.m(r,null),a=!0},p(u,[d]){u[3]?s&&(s.d(1),s=null):s?s.p(u,d):(s=St(u),s.c(),s.m(t,n)),f&&f.p&&(!a||d&16)&&$n(f,o,u,u[4],a?tr(o,u[4],d,null):er(u[4]),null),(!a||d&5&&l!==(l=we(u[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(u[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&c(r,"class",l),(!a||d&1&&i!==(i=we("ons-collapsible ons-js-collapsible"+(u[0]?" details_styling_override":""))+" svelte-lfupja"))&&c(t,"class",i),(!a||d&8)&&(t.open=u[3])},i(u){a||(V(f,u),a=!0)},o(u){q(f,u),a=!1},d(u){u&&b(t),s&&s.d(),f&&f.d(u)}}}function ul(e,t,n){let{$$slots:r={},$$scope:l}=t,{cross:i=!1}=t,{label:a="Label"}=t,{blank:s=!1}=t,{open:o=!1}=t;return e.$$set=f=>{"cross"in f&&n(0,i=f.cross),"label"in f&&n(1,a=f.label),"blank"in f&&n(2,s=f.blank),"open"in f&&n(3,o=f.open),"$$scope"in f&&n(4,l=f.$$scope)},[i,a,s,o,l,r]}class ir extends se{constructor(t){super(),oe(this,t,ul,fl,fe,{cross:0,label:1,blank:2,open:3})}}class Ft{constructor(t,n,r){this.items=t,this.diameter=n*2,this.diameterSq=this.diameter*this.diameter,this.xFun=r,this.tieBreakFn=l=>l,this._oneSided=!1}withTiesBrokenRandomly(){return this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,1),this}oneSided(){return this._oneSided=!0,this}calculateYPositions(){let t=this.items.map((l,i)=>({datum:l,originalIndex:i,x:this.xFun(l),y:null,placed:!1,minPositiveY:0,maxNegativeY:0,score:0,bestPosition:0,heapPos:-1})).sort((l,i)=>l.x-i.x);t.forEach(function(l,i){l.index=i});let n=this.tieBreakFn;t.forEach(function(l){l.tieBreaker=n(l.x)});let r=new cl;for(r.push(...t);!r.isEmpty();){let l=r.pop();l.placed=!0,l.y=l.bestPosition,this._updateYBounds(l,t,r)}return t.sort((l,i)=>l.originalIndex-i.originalIndex),t.map(l=>({datum:l.datum,x:l.x,y:l.y}))}_sfc32(t,n,r,l){let i=function(){t>>>=0,n>>>=0,r>>>=0,l>>>=0;var a=t+n|0;return t=n^n>>>9,n=r+(r<<3)|0,r=r<<21|r>>>11,l=l+1|0,a=a+l|0,r=r+a|0,(a>>>0)/4294967296};for(let a=0;a<10;a++)i();return i}_updateYBounds(t,n,r){for(let l of[-1,1]){let i;for(let a=t.index+l;a>=0&&a<n.length&&(i=Math.abs(t.x-n[a].x))<this.diameter;a+=l){let s=n[a];if(s.placed)continue;let o=Math.sqrt(this.diameterSq-i*i);s.minPositiveY=Math.max(s.minPositiveY,t.y+o);let f=s.score;s.score=s.minPositiveY,s.bestPosition=s.minPositiveY,this._oneSided||(s.maxNegativeY=Math.min(s.maxNegativeY,t.y-o),-s.maxNegativeY<s.score&&(s.score=-s.maxNegativeY,s.bestPosition=s.maxNegativeY)),s.score>f&&r.deprioritise(s)}}}}class cl{parent(t){return(t+1>>>1)-1}left(t){return(t<<1)+1}right(t){return t+1<<1}constructor(){this.TOP=0,this._heap=[]}size(){return this._heap.length}isEmpty(){return this.size()==0}peek(){return this._heap[this.TOP]}push(...t){return t.forEach(n=>{n.heapPos=this.size(),this._heap.push(n),this._siftUp()}),this.size()}pop(){const t=this.peek(),n=this.size()-1;return n>this.TOP&&this._swap(this.TOP,n),this._heap.pop(),this._siftDown(),t}deprioritise(t){this._siftDown(t.heapPos)}_greater(t,n){let r=this._heap[t],l=this._heap[n];return r.score<l.score?!0:r.score>l.score?!1:r.tieBreaker<l.tieBreaker}_swap(t,n){let r=this._heap[t];this._heap[t]=this._heap[n],this._heap[n]=r,this._heap[t].heapPos=t,this._heap[n].heapPos=n}_siftUp(){let t=this.size()-1;for(;t>this.TOP&&this._greater(t,this.parent(t));)this._swap(t,this.parent(t)),t=this.parent(t)}_siftDown(t=this.TOP){let n,r,l=this.size();for(;n=this.left(t),r=this.right(t),n<l&&this._greater(n,t)||r<l&&this._greater(r,t);){let i=r<l&&this._greater(r,n)?r:n;this._swap(t,i),t=i}}}function je(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ar(e){let t,n,r;e.length!==2?(t=je,n=(s,o)=>je(e(s),o),r=(s,o)=>e(s)-o):(t=e===je||e===hl?e:dl,n=e,r=e);function l(s,o,f=0,u=s.length){if(f<u){if(t(o,o)!==0)return u;do{const d=f+u>>>1;n(s[d],o)<0?f=d+1:u=d}while(f<u)}return f}function i(s,o,f=0,u=s.length){if(f<u){if(t(o,o)!==0)return u;do{const d=f+u>>>1;n(s[d],o)<=0?f=d+1:u=d}while(f<u)}return f}function a(s,o,f=0,u=s.length){const d=l(s,o,f,u-1);return d>f&&r(s[d-1],o)>-r(s[d],o)?d-1:d}return{left:l,center:a,right:i}}function dl(){return 0}function _l(e){return e===null?NaN:+e}const ml=ar(je),gl=ml.right;ar(_l).center;const pl=gl,vl=Math.sqrt(50),bl=Math.sqrt(10),yl=Math.sqrt(2);function xe(e,t,n){const r=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(r)),i=r/Math.pow(10,l),a=i>=vl?10:i>=bl?5:i>=yl?2:1;let s,o,f;return l<0?(f=Math.pow(10,-l)/a,s=Math.round(e*f),o=Math.round(t*f),s/f<e&&++s,o/f>t&&--o,f=-f):(f=Math.pow(10,l)*a,s=Math.round(e/f),o=Math.round(t/f),s*f<e&&++s,o*f>t&&--o),o<s&&.5<=n&&n<2?xe(e,t,n*2):[s,o,f]}function kl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[l,i,a]=r?xe(t,e,n):xe(e,t,n);if(!(i>=l))return[];const s=i-l+1,o=new Array(s);if(r)if(a<0)for(let f=0;f<s;++f)o[f]=(i-f)/-a;else for(let f=0;f<s;++f)o[f]=(i-f)*a;else if(a<0)for(let f=0;f<s;++f)o[f]=(l+f)/-a;else for(let f=0;f<s;++f)o[f]=(l+f)*a;return o}function ft(e,t,n){return t=+t,e=+e,n=+n,xe(e,t,n)[2]}function wl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,l=r?ft(t,e,n):ft(e,t,n);return(r?-1:1)*(l<0?1/-l:l)}function Dl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ge(){}var qe=.7,$e=1/qe,Ve="\\s*([+-]?\\d+)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Al=/^#([0-9a-f]{3,8})$/,El=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),Il=new RegExp(`^rgb\\(${Ie},${Ie},${Ie}\\)$`),Ml=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Ye}\\)$`),Sl=new RegExp(`^rgba\\(${Ie},${Ie},${Ie},${Ye}\\)$`),Fl=new RegExp(`^hsl\\(${Ye},${Ie},${Ie}\\)$`),Rl=new RegExp(`^hsla\\(${Ye},${Ie},${Ie},${Ye}\\)$`),Rt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bt(Ge,Ke,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nt,formatHex:Nt,formatHex8:Nl,formatHsl:Cl,formatRgb:Ct,toString:Ct});function Nt(){return this.rgb().formatHex()}function Nl(){return this.rgb().formatHex8()}function Cl(){return or(this).formatHsl()}function Ct(){return this.rgb().formatRgb()}function Ke(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Al.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Lt(t):n===3?new me(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xe(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xe(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=El.exec(e))?new me(t[1],t[2],t[3],1):(t=Il.exec(e))?new me(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ml.exec(e))?Xe(t[1],t[2],t[3],t[4]):(t=Sl.exec(e))?Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Fl.exec(e))?Tt(t[1],t[2]/100,t[3]/100,1):(t=Rl.exec(e))?Tt(t[1],t[2]/100,t[3]/100,t[4]):Rt.hasOwnProperty(e)?Lt(Rt[e]):e==="transparent"?new me(NaN,NaN,NaN,0):null}function Lt(e){return new me(e>>16&255,e>>8&255,e&255,1)}function Xe(e,t,n,r){return r<=0&&(e=t=n=NaN),new me(e,t,n,r)}function Ll(e){return e instanceof Ge||(e=Ke(e)),e?(e=e.rgb(),new me(e.r,e.g,e.b,e.opacity)):new me}function ut(e,t,n,r){return arguments.length===1?Ll(e):new me(e,t,n,r??1)}function me(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}bt(me,ut,sr(Ge,{brighter(e){return e=e==null?$e:Math.pow($e,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qe:Math.pow(qe,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new me(Ne(this.r),Ne(this.g),Ne(this.b),et(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pt,formatHex:Pt,formatHex8:Pl,formatRgb:Bt,toString:Bt}));function Pt(){return`#${Re(this.r)}${Re(this.g)}${Re(this.b)}`}function Pl(){return`#${Re(this.r)}${Re(this.g)}${Re(this.b)}${Re((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bt(){const e=et(this.opacity);return`${e===1?"rgb(":"rgba("}${Ne(this.r)}, ${Ne(this.g)}, ${Ne(this.b)}${e===1?")":`, ${e})`}`}function et(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ne(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Re(e){return e=Ne(e),(e<16?"0":"")+e.toString(16)}function Tt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ke(e,t,n,r)}function or(e){if(e instanceof ke)return new ke(e.h,e.s,e.l,e.opacity);if(e instanceof Ge||(e=Ke(e)),!e)return new ke;if(e instanceof ke)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,l=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-l,o=(i+l)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=o<.5?i+l:2-i-l,a*=60):s=o>0&&o<1?0:a,new ke(a,s,o,e.opacity)}function Bl(e,t,n,r){return arguments.length===1?or(e):new ke(e,t,n,r??1)}function ke(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bt(ke,Bl,sr(Ge,{brighter(e){return e=e==null?$e:Math.pow($e,e),new ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qe:Math.pow(qe,e),new ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,l=2*n-r;return new me(st(e>=240?e-240:e+120,l,r),st(e,l,r),st(e<120?e+240:e-120,l,r),this.opacity)},clamp(){return new ke(Vt(this.h),Je(this.s),Je(this.l),et(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=et(this.opacity);return`${e===1?"hsl(":"hsla("}${Vt(this.h)}, ${Je(this.s)*100}%, ${Je(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vt(e){return e=(e||0)%360,e<0?e+360:e}function Je(e){return Math.max(0,Math.min(1,e||0))}function st(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yt=e=>()=>e;function Tl(e,t){return function(n){return e+n*t}}function Vl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ol(e){return(e=+e)==1?fr:function(t,n){return n-t?Vl(t,n,e):yt(isNaN(t)?n:t)}}function fr(e,t){var n=t-e;return n?Tl(e,n):yt(isNaN(e)?t:e)}const Ot=function e(t){var n=Ol(t);function r(l,i){var a=n((l=ut(l)).r,(i=ut(i)).r),s=n(l.g,i.g),o=n(l.b,i.b),f=fr(l.opacity,i.opacity);return function(u){return l.r=a(u),l.g=s(u),l.b=o(u),l.opacity=f(u),l+""}}return r.gamma=e,r}(1);function Hl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),l;return function(i){for(l=0;l<n;++l)r[l]=e[l]*(1-i)+t[l]*i;return r}}function zl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wl(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,l=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)l[a]=kt(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(s){for(a=0;a<r;++a)i[a]=l[a](s);return i}}function ql(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yl(e,t){var n={},r={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?n[l]=kt(e[l],t[l]):r[l]=t[l];return function(i){for(l in n)r[l]=n[l](i);return r}}var ct=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ot=new RegExp(ct.source,"g");function Kl(e){return function(){return e}}function Gl(e){return function(t){return e(t)+""}}function Ul(e,t){var n=ct.lastIndex=ot.lastIndex=0,r,l,i,a=-1,s=[],o=[];for(e=e+"",t=t+"";(r=ct.exec(e))&&(l=ot.exec(t));)(i=l.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(l=l[0])?s[a]?s[a]+=l:s[++a]=l:(s[++a]=null,o.push({i:a,x:tt(r,l)})),n=ot.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?o[0]?Gl(o[0].x):Kl(t):(t=o.length,function(f){for(var u=0,d;u<t;++u)s[(d=o[u]).i]=d.x(f);return s.join("")})}function kt(e,t){var n=typeof t,r;return t==null||n==="boolean"?yt(t):(n==="number"?tt:n==="string"?(r=Ke(t))?(t=r,Ot):Ul:t instanceof Ke?Ot:t instanceof Date?ql:zl(t)?Hl:Array.isArray(t)?Wl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yl:tt)(e,t)}function Zl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ql(e){return function(){return e}}function Xl(e){return+e}var Ht=[0,1];function Te(e){return e}function ht(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ql(isNaN(t)?NaN:.5)}function Jl(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function jl(e,t,n){var r=e[0],l=e[1],i=t[0],a=t[1];return l<r?(r=ht(l,r),i=n(a,i)):(r=ht(r,l),i=n(i,a)),function(s){return i(r(s))}}function xl(e,t,n){var r=Math.min(e.length,t.length)-1,l=new Array(r),i=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)l[a]=ht(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(s){var o=pl(e,s,1,r)-1;return i[o](l[o](s))}}function $l(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ei(){var e=Ht,t=Ht,n=kt,r,l,i,a=Te,s,o,f;function u(){var m=Math.min(e.length,t.length);return a!==Te&&(a=Jl(e[0],e[m-1])),s=m>2?xl:jl,o=f=null,d}function d(m){return m==null||isNaN(m=+m)?i:(o||(o=s(e.map(r),t,n)))(r(a(m)))}return d.invert=function(m){return a(l((f||(f=s(t,e.map(r),tt)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,Xl),u()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),n=Zl,u()},d.clamp=function(m){return arguments.length?(a=m?!0:Te,u()):a!==Te},d.interpolate=function(m){return arguments.length?(n=m,u()):n},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,v){return r=m,l=v,u()}}function ti(){return ei()(Te,Te)}function ni(e,t,n,r){var l=wl(e,t,n),i;switch(r=Qr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=xr(l,a))&&(r.precision=i),lr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=$r(l,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=jr(l))&&(r.precision=i-(r.type==="%")*2);break}}return rr(r)}function ri(e){var t=e.domain;return e.ticks=function(n){var r=t();return kl(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var l=t();return ni(l[0],l[l.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),l=0,i=r.length-1,a=r[l],s=r[i],o,f,u=10;for(s<a&&(f=a,a=s,s=f,f=l,l=i,i=f);u-- >0;){if(f=ft(a,s,n),f===o)return r[l]=a,r[i]=s,t(r);if(f>0)a=Math.floor(a/f)*f,s=Math.ceil(s/f)*f;else if(f<0)a=Math.ceil(a*f)/f,s=Math.floor(s*f)/f;else break;o=f}return e},e}function Ce(){var e=ti();return e.copy=function(){return $l(e,Ce())},Dl.apply(e,arguments),ri(e)}var dt="http://www.w3.org/1999/xhtml";const zt={svg:"http://www.w3.org/2000/svg",xhtml:dt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ur(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zt.hasOwnProperty(t)?{space:zt[t],local:e}:e}function li(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===dt&&t.documentElement.namespaceURI===dt?t.createElement(e):t.createElementNS(n,e)}}function ii(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function cr(e){var t=ur(e);return(t.local?ii:li)(t)}function ai(){}function hr(e){return e==null?ai:function(){return this.querySelector(e)}}function si(e){typeof e!="function"&&(e=hr(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var i=t[l],a=i.length,s=r[l]=new Array(a),o,f,u=0;u<a;++u)(o=i[u])&&(f=e.call(o,o.__data__,u,i))&&("__data__"in o&&(f.__data__=o.__data__),s[u]=f);return new ye(r,this._parents)}function oi(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fi(){return[]}function ui(e){return e==null?fi:function(){return this.querySelectorAll(e)}}function ci(e){return function(){return oi(e.apply(this,arguments))}}function hi(e){typeof e=="function"?e=ci(e):e=ui(e);for(var t=this._groups,n=t.length,r=[],l=[],i=0;i<n;++i)for(var a=t[i],s=a.length,o,f=0;f<s;++f)(o=a[f])&&(r.push(e.call(o,o.__data__,f,a)),l.push(o));return new ye(r,l)}function di(e){return function(){return this.matches(e)}}function dr(e){return function(t){return t.matches(e)}}var _i=Array.prototype.find;function mi(e){return function(){return _i.call(this.children,e)}}function gi(){return this.firstElementChild}function pi(e){return this.select(e==null?gi:mi(typeof e=="function"?e:dr(e)))}var vi=Array.prototype.filter;function bi(){return Array.from(this.children)}function yi(e){return function(){return vi.call(this.children,e)}}function ki(e){return this.selectAll(e==null?bi:yi(typeof e=="function"?e:dr(e)))}function wi(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var i=t[l],a=i.length,s=r[l]=[],o,f=0;f<a;++f)(o=i[f])&&e.call(o,o.__data__,f,i)&&s.push(o);return new ye(r,this._parents)}function _r(e){return new Array(e.length)}function Di(){return new ye(this._enter||this._groups.map(_r),this._parents)}function nt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nt.prototype={constructor:nt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ai(e){return function(){return e}}function Ei(e,t,n,r,l,i){for(var a=0,s,o=t.length,f=i.length;a<f;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new nt(e,i[a]);for(;a<o;++a)(s=t[a])&&(l[a]=s)}function Ii(e,t,n,r,l,i,a){var s,o,f=new Map,u=t.length,d=i.length,m=new Array(u),v;for(s=0;s<u;++s)(o=t[s])&&(m[s]=v=a.call(o,o.__data__,s,t)+"",f.has(v)?l[s]=o:f.set(v,o));for(s=0;s<d;++s)v=a.call(e,i[s],s,i)+"",(o=f.get(v))?(r[s]=o,o.__data__=i[s],f.delete(v)):n[s]=new nt(e,i[s]);for(s=0;s<u;++s)(o=t[s])&&f.get(m[s])===o&&(l[s]=o)}function Mi(e){return e.__data__}function Si(e,t){if(!arguments.length)return Array.from(this,Mi);var n=t?Ii:Ei,r=this._parents,l=this._groups;typeof e!="function"&&(e=Ai(e));for(var i=l.length,a=new Array(i),s=new Array(i),o=new Array(i),f=0;f<i;++f){var u=r[f],d=l[f],m=d.length,v=Fi(e.call(u,u&&u.__data__,f,r)),p=v.length,y=s[f]=new Array(p),I=a[f]=new Array(p),_=o[f]=new Array(m);n(u,d,y,I,_,v,t);for(var g=0,h=0,k,w;g<p;++g)if(k=y[g]){for(g>=h&&(h=g+1);!(w=I[h])&&++h<p;);k._next=w||null}}return a=new ye(a,r),a._enter=s,a._exit=o,a}function Fi(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ri(){return new ye(this._exit||this._groups.map(_r),this._parents)}function Ni(e,t,n){var r=this.enter(),l=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),n==null?i.remove():n(i),r&&l?r.merge(l).order():l}function Ci(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,l=n.length,i=r.length,a=Math.min(l,i),s=new Array(l),o=0;o<a;++o)for(var f=n[o],u=r[o],d=f.length,m=s[o]=new Array(d),v,p=0;p<d;++p)(v=f[p]||u[p])&&(m[p]=v);for(;o<l;++o)s[o]=n[o];return new ye(s,this._parents)}function Li(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],l=r.length-1,i=r[l],a;--l>=0;)(a=r[l])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function Pi(e){e||(e=Bi);function t(d,m){return d&&m?e(d.__data__,m.__data__):!d-!m}for(var n=this._groups,r=n.length,l=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,o=l[i]=new Array(s),f,u=0;u<s;++u)(f=a[u])&&(o[u]=f);o.sort(t)}return new ye(l,this._parents).order()}function Bi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ti(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vi(){return Array.from(this)}function Oi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],l=0,i=r.length;l<i;++l){var a=r[l];if(a)return a}return null}function Hi(){let e=0;for(const t of this)++e;return e}function zi(){return!this.node()}function Wi(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var l=t[n],i=0,a=l.length,s;i<a;++i)(s=l[i])&&e.call(s,s.__data__,i,l);return this}function qi(e){return function(){this.removeAttribute(e)}}function Yi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ki(e,t){return function(){this.setAttribute(e,t)}}function Gi(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ui(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Zi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qi(e,t){var n=ur(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Yi:qi:typeof t=="function"?n.local?Zi:Ui:n.local?Gi:Ki)(n,t))}function mr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xi(e){return function(){this.style.removeProperty(e)}}function Ji(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ji(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xi(e,t,n){return arguments.length>1?this.each((t==null?Xi:typeof t=="function"?ji:Ji)(e,t,n??"")):$i(this.node(),e)}function $i(e,t){return e.style.getPropertyValue(t)||mr(e).getComputedStyle(e,null).getPropertyValue(t)}function ea(e){return function(){delete this[e]}}function ta(e,t){return function(){this[e]=t}}function na(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ra(e,t){return arguments.length>1?this.each((t==null?ea:typeof t=="function"?na:ta)(e,t)):this.node()[e]}function gr(e){return e.trim().split(/^|\s+/)}function wt(e){return e.classList||new pr(e)}function pr(e){this._node=e,this._names=gr(e.getAttribute("class")||"")}pr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vr(e,t){for(var n=wt(e),r=-1,l=t.length;++r<l;)n.add(t[r])}function br(e,t){for(var n=wt(e),r=-1,l=t.length;++r<l;)n.remove(t[r])}function la(e){return function(){vr(this,e)}}function ia(e){return function(){br(this,e)}}function aa(e,t){return function(){(t.apply(this,arguments)?vr:br)(this,e)}}function sa(e,t){var n=gr(e+"");if(arguments.length<2){for(var r=wt(this.node()),l=-1,i=n.length;++l<i;)if(!r.contains(n[l]))return!1;return!0}return this.each((typeof t=="function"?aa:t?la:ia)(n,t))}function oa(){this.textContent=""}function fa(e){return function(){this.textContent=e}}function ua(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ca(e){return arguments.length?this.each(e==null?oa:(typeof e=="function"?ua:fa)(e)):this.node().textContent}function ha(){this.innerHTML=""}function da(e){return function(){this.innerHTML=e}}function _a(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ma(e){return arguments.length?this.each(e==null?ha:(typeof e=="function"?_a:da)(e)):this.node().innerHTML}function ga(){this.nextSibling&&this.parentNode.appendChild(this)}function pa(){return this.each(ga)}function va(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ba(){return this.each(va)}function ya(e){var t=typeof e=="function"?e:cr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ka(){return null}function wa(e,t){var n=typeof e=="function"?e:cr(e),r=t==null?ka:typeof t=="function"?t:hr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Da(){var e=this.parentNode;e&&e.removeChild(this)}function Aa(){return this.each(Da)}function Ea(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ia(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ma(e){return this.select(e?Ia:Ea)}function Sa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Fa(e){return function(t){e.call(this,t,this.__data__)}}function Ra(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Na(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,l=t.length,i;n<l;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Ca(e,t,n){return function(){var r=this.__on,l,i=Fa(t);if(r){for(var a=0,s=r.length;a<s;++a)if((l=r[a]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=i,l.options=n),l.value=t;return}}this.addEventListener(e.type,i,n),l={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(l):this.__on=[l]}}function La(e,t,n){var r=Ra(e+""),l,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var o=0,f=s.length,u;o<f;++o)for(l=0,u=s[o];l<i;++l)if((a=r[l]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?Ca:Na,l=0;l<i;++l)this.each(s(r[l],t,n));return this}function yr(e,t,n){var r=mr(e),l=r.CustomEvent;typeof l=="function"?l=new l(t,n):(l=r.document.createEvent("Event"),n?(l.initEvent(t,n.bubbles,n.cancelable),l.detail=n.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function Pa(e,t){return function(){return yr(this,e,t)}}function Ba(e,t){return function(){return yr(this,e,t.apply(this,arguments))}}function Ta(e,t){return this.each((typeof t=="function"?Ba:Pa)(e,t))}function*Va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],l=0,i=r.length,a;l<i;++l)(a=r[l])&&(yield a)}var Oa=[null];function ye(e,t){this._groups=e,this._parents=t}function Ha(){return this}ye.prototype={constructor:ye,select:si,selectAll:hi,selectChild:pi,selectChildren:ki,filter:wi,data:Si,enter:Di,exit:Ri,join:Ni,merge:Ci,selection:Ha,order:Li,sort:Pi,call:Ti,nodes:Vi,node:Oi,size:Hi,empty:zi,each:Wi,attr:Qi,style:xi,property:ra,classed:sa,text:ca,html:ma,raise:pa,lower:ba,append:ya,insert:wa,remove:Aa,clone:Ma,datum:Sa,on:La,dispatch:Ta,[Symbol.iterator]:Va};function Dt(e){return typeof e=="string"?new ye([[document.querySelector(e)]],[document.documentElement]):new ye([[e]],Oa)}function Wt(e,t,n){const r=e.slice();return r[33]=t[n],r[35]=n,r}function qt(e,t,n){const r=e.slice();return r[33]=t[n],r[35]=n,r}function Yt(e,t,n){const r=e.slice();return r[33]=t[n],r[35]=n,r}function Kt(e){let t,n,r=e[0].unit+" in "+e[0].latestYear,l,i;return{c(){t=O("p"),n=O("span"),l=K(r),i=O("p"),this.h()},l(a){t=H(a,"P",{class:!0});var s=M(t);n=H(s,"SPAN",{style:!0});var o=M(n);l=G(o,r),o.forEach(b),s.forEach(b),i=H(a,"P",{class:!0});var f=M(i);f.forEach(b),this.h()},h(){ne(n,"padding-left","0px"),ne(n,"font-size","14px"),ne(n,"font-style","italic"),c(t,"class","svelte-tveaae"),c(i,"class","svelte-tveaae")},m(a,s){L(a,t,s),A(t,n),A(n,l),L(a,i,s)},p(a,s){s[0]&1&&r!==(r=a[0].unit+" in "+a[0].latestYear)&&te(l,r)},d(a){a&&b(t),a&&b(i)}}}function Gt(e){let t,n,r,l,i;return{c(){t=B("g"),n=B("circle"),this.h()},l(a){t=T(a,"g",{transform:!0});var s=M(t);n=T(s,"circle",{r:!0,stroke:!0,fill:!0,opacity:!0,hoverid:!0}),M(n).forEach(b),s.forEach(b),this.h()},h(){c(n,"r","5"),c(n,"stroke","none"),c(n,"fill","black"),c(n,"opacity","0.1"),c(n,"hoverid",e[35]),c(t,"transform",r="translate("+e[33].x+","+e[8](e[33].y)+")")},m(a,s){L(a,t,s),A(t,n),l||(i=[be(n,"mouseover",e[13]),be(n,"mouseleave",e[14]),be(n,"focus",e[13])],l=!0)},p(a,s){s[0]&260&&r!==(r="translate("+a[33].x+","+a[8](a[33].y)+")")&&c(t,"transform",r)},d(a){a&&b(t),l=!1,vt(i)}}}function Ut(e){let t,n,r,l=e[11]+e[33].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",i,a,s,o,f=e[11]+e[33].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",u,d,m,v,p=e[9].find(P).areanm+"",y,I,_,g,h=e[9].find(F).areanm+"",k,w,E,R;function P(...D){return e[29](e[33],...D)}function F(...D){return e[30](e[33],...D)}return{c(){t=B("g"),n=B("circle"),r=B("text"),i=K(l),o=B("text"),u=K(f),v=B("text"),y=K(p),g=B("text"),k=K(h),this.h()},l(D){t=T(D,"g",{transform:!0});var N=M(t);n=T(N,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),M(n).forEach(b),r=T(N,"text",{"text-anchor":!0,x:!0,y:!0,"stroke-width":!0,fill:!0,stroke:!0});var S=M(r);i=G(S,l),S.forEach(b),o=T(N,"text",{"text-anchor":!0,x:!0,y:!0,fill:!0,stroke:!0});var Y=M(o);u=G(Y,f),Y.forEach(b),v=T(N,"text",{"text-anchor":!0,x:!0,y:!0,"stroke-width":!0,fill:!0,stroke:!0});var X=M(v);y=G(X,p),X.forEach(b),g=T(N,"text",{"text-anchor":!0,x:!0,y:!0,fill:!0,stroke:!0});var W=M(g);k=G(W,h),W.forEach(b),N.forEach(b),this.h()},h(){c(n,"pointer-events","none"),c(n,"r","8"),c(n,"stroke","white"),c(n,"stroke-width","1.5px"),c(n,"fill","#F39431"),c(n,"opacity","1"),c(r,"text-anchor",a=e[33].x<e[4]/2?"start":"end"),c(r,"x",s=e[33].x<e[4]/2?10:-10),c(r,"y","-30"),c(r,"stroke-width","3px"),c(r,"fill","whtie"),c(r,"stroke","white"),c(o,"text-anchor",d=e[33].x<e[4]/2?"start":"end"),c(o,"x",m=e[33].x<e[4]/2?10:-10),c(o,"y","-30"),c(o,"fill","#F39431"),c(o,"stroke","#F39431"),c(v,"text-anchor",I=e[33].x<e[4]/2?"start":"end"),c(v,"x",_=e[33].x<e[4]/2?10:-10),c(v,"y","-10"),c(v,"stroke-width","3px"),c(v,"fill","whtie"),c(v,"stroke","white"),c(g,"text-anchor",w=e[33].x<e[4]/2?"start":"end"),c(g,"x",E=e[33].x<e[4]/2?10:-10),c(g,"y","-10"),c(g,"fill","#F39431"),c(g,"stroke","#F39431"),c(t,"transform",R="translate("+e[33].x+","+e[8](e[33].y)+")")},m(D,N){L(D,t,N),A(t,n),A(t,r),A(r,i),A(t,o),A(o,u),A(t,v),A(v,y),A(t,g),A(g,k)},p(D,N){e=D,N[0]&5&&l!==(l=e[11]+e[33].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"")&&te(i,l),N[0]&20&&a!==(a=e[33].x<e[4]/2?"start":"end")&&c(r,"text-anchor",a),N[0]&20&&s!==(s=e[33].x<e[4]/2?10:-10)&&c(r,"x",s),N[0]&5&&f!==(f=e[11]+e[33].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"")&&te(u,f),N[0]&20&&d!==(d=e[33].x<e[4]/2?"start":"end")&&c(o,"text-anchor",d),N[0]&20&&m!==(m=e[33].x<e[4]/2?10:-10)&&c(o,"x",m),N[0]&4&&p!==(p=e[9].find(P).areanm+"")&&te(y,p),N[0]&20&&I!==(I=e[33].x<e[4]/2?"start":"end")&&c(v,"text-anchor",I),N[0]&20&&_!==(_=e[33].x<e[4]/2?10:-10)&&c(v,"x",_),N[0]&4&&h!==(h=e[9].find(F).areanm+"")&&te(k,h),N[0]&20&&w!==(w=e[33].x<e[4]/2?"start":"end")&&c(g,"text-anchor",w),N[0]&20&&E!==(E=e[33].x<e[4]/2?10:-10)&&c(g,"x",E),N[0]&260&&R!==(R="translate("+e[33].x+","+e[8](e[33].y)+")")&&c(t,"transform",R)},d(D){D&&b(t)}}}function Zt(e){let t,n=e[6]===e[35]&&Ut(e);return{c(){n&&n.c(),t=le()},l(r){n&&n.l(r),t=le()},m(r,l){n&&n.m(r,l),L(r,t,l)},p(r,l){r[6]===r[35]?n?n.p(r,l):(n=Ut(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&b(t)}}}function za(e){let t,n,r;return{c(){t=B("circle"),this.h()},l(l){t=T(l,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var i=M(t);i.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"r",8),c(t,"fill",n=Q[e[33].datum.role]),c(t,"stroke","white"),c(t,"stroke-width","1.5px"),c(t,"opacity",r=e[6]===null?1:.2)},m(l,i){L(l,t,i)},p(l,i){i[0]&128&&n!==(n=Q[l[33].datum.role])&&c(t,"fill",n),i[0]&64&&r!==(r=l[6]===null?1:.2)&&c(t,"opacity",r)},d(l){l&&b(t)}}}function Wa(e){let t,n,r,l;return{c(){t=B("rect"),this.h()},l(i){t=T(i,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var a=M(t);a.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"transform",n=["country","uk"].includes(e[33].datum.role)?"rotate(45)":null),c(t,"x",-6),c(t,"y",-6),c(t,"width",12),c(t,"height",12),c(t,"fill",r=Q[e[33].datum.role]),c(t,"stroke","white"),c(t,"stroke-width","1.5px"),c(t,"opacity",l=e[6]===null?1:.2)},m(i,a){L(i,t,a)},p(i,a){a[0]&128&&n!==(n=["country","uk"].includes(i[33].datum.role)?"rotate(45)":null)&&c(t,"transform",n),a[0]&128&&r!==(r=Q[i[33].datum.role])&&c(t,"fill",r),a[0]&64&&l!==(l=i[6]===null?1:.2)&&c(t,"opacity",l)},d(i){i&&b(t)}}}function Qt(e){let t,n,r,l;function i(o,f){return f[0]&128&&(n=null),f[0]&128&&(r=null),f[0]&128&&(l=null),n==null&&(n=o[33].x===Math.min(...o[7].map(Za))),n?Ga:(r==null&&(r=o[33].x===Math.max(...o[7].map(Qa))),r?Ka:(l==null&&(l=o[33].y===Math.max(...o[7].filter(o[28]).map(Xa))),l?Ya:qa))}let a=i(e,[-1,-1]),s=a(e);return{c(){t=B("g"),s.c(),this.h()},l(o){t=T(o,"g",{class:!0});var f=M(t);s.l(f),f.forEach(b),this.h()},h(){c(t,"class","labelGroup")},m(o,f){L(o,t,f),s.m(t,null)},p(o,f){a===(a=i(o,f))&&s?s.p(o,f):(s.d(1),s=a(o),s&&(s.c(),s.m(t,null)))},d(o){o&&b(t),s.d()}}}function qa(e){let t,n=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",r,l,i=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",a,s,o;return{c(){t=B("text"),r=K(n),l=B("text"),a=K(i),this.h()},l(f){t=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var u=M(t);r=G(u,n),u.forEach(b),l=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var d=M(l);a=G(d,i),d.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"x","0"),c(t,"y","25"),c(t,"text-anchor","middle"),c(t,"stroke","white"),c(t,"fill","white"),c(t,"stroke-width","3px"),c(l,"pointer-events","none"),c(l,"x","0"),c(l,"y","25"),c(l,"text-anchor","middle"),c(l,"stroke",s=Q[e[33].datum.role]),c(l,"fill",o=Q[e[33].datum.role])},m(f,u){L(f,t,u),A(t,r),L(f,l,u),A(l,a)},p(f,u){u[0]&129&&n!==(n=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(r,n),u[0]&129&&i!==(i=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(a,i),u[0]&128&&s!==(s=Q[f[33].datum.role])&&c(l,"stroke",s),u[0]&128&&o!==(o=Q[f[33].datum.role])&&c(l,"fill",o)},d(f){f&&b(t),f&&b(l)}}}function Ya(e){let t,n=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",r,l,i=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",a,s,o;return{c(){t=B("text"),r=K(n),l=B("text"),a=K(i),this.h()},l(f){t=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var u=M(t);r=G(u,n),u.forEach(b),l=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var d=M(l);a=G(d,i),d.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"x","0"),c(t,"y","-15"),c(t,"text-anchor","middle"),c(t,"stroke","white"),c(t,"fill","white"),c(t,"stroke-width","3px"),c(l,"pointer-events","none"),c(l,"x","0"),c(l,"y","-15"),c(l,"text-anchor","middle"),c(l,"stroke",s=Q[e[33].datum.role]),c(l,"fill",o=Q[e[33].datum.role])},m(f,u){L(f,t,u),A(t,r),L(f,l,u),A(l,a)},p(f,u){u[0]&129&&n!==(n=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(r,n),u[0]&129&&i!==(i=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(a,i),u[0]&128&&s!==(s=Q[f[33].datum.role])&&c(l,"stroke",s),u[0]&128&&o!==(o=Q[f[33].datum.role])&&c(l,"fill",o)},d(f){f&&b(t),f&&b(l)}}}function Ka(e){let t,n=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",r,l,i=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",a,s,o;return{c(){t=B("text"),r=K(n),l=B("text"),a=K(i),this.h()},l(f){t=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var u=M(t);r=G(u,n),u.forEach(b),l=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var d=M(l);a=G(d,i),d.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"x","10"),c(t,"y","0"),c(t,"text-anchor","start"),c(t,"stroke","white"),c(t,"fill","white"),c(t,"stroke-width","3px"),c(l,"pointer-events","none"),c(l,"x","10"),c(l,"y","0"),c(l,"text-anchor","start"),c(l,"stroke",s=Q[e[33].datum.role]),c(l,"fill",o=Q[e[33].datum.role])},m(f,u){L(f,t,u),A(t,r),L(f,l,u),A(l,a)},p(f,u){u[0]&129&&n!==(n=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(r,n),u[0]&129&&i!==(i=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(a,i),u[0]&128&&s!==(s=Q[f[33].datum.role])&&c(l,"stroke",s),u[0]&128&&o!==(o=Q[f[33].datum.role])&&c(l,"fill",o)},d(f){f&&b(t),f&&b(l)}}}function Ga(e){let t,n=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",r,l,i=e[11]+e[33].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[12]+"",a,s,o;return{c(){t=B("text"),r=K(n),l=B("text"),a=K(i),this.h()},l(f){t=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var u=M(t);r=G(u,n),u.forEach(b),l=T(f,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var d=M(l);a=G(d,i),d.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"x","-10"),c(t,"y","0"),c(t,"text-anchor","end"),c(t,"stroke","white"),c(t,"fill","white"),c(t,"stroke-width","3px"),c(l,"pointer-events","none"),c(l,"x","-10"),c(l,"y","0"),c(l,"text-anchor","end"),c(l,"stroke",s=Q[e[33].datum.role]),c(l,"fill",o=Q[e[33].datum.role])},m(f,u){L(f,t,u),A(t,r),L(f,l,u),A(l,a)},p(f,u){u[0]&129&&n!==(n=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(r,n),u[0]&129&&i!==(i=f[11]+f[33].datum.yValue[0].value.toFixed(f[0].toFixed).toLocaleString()+f[12]+"")&&te(a,i),u[0]&128&&s!==(s=Q[f[33].datum.role])&&c(l,"stroke",s),u[0]&128&&o!==(o=Q[f[33].datum.role])&&c(l,"fill",o)},d(f){f&&b(t),f&&b(l)}}}function Xt(e){let t,n,r,l;function i(f,u){return u[0]&128&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(f[33].datum.role)),n?Wa:za}let a=i(e,[-1,-1]),s=a(e),o=e[7].length<=3&&Qt(e);return{c(){t=B("g"),s.c(),r=le(),o&&o.c(),this.h()},l(f){t=T(f,"g",{transform:!0});var u=M(t);s.l(u),r=le(),o&&o.l(u),u.forEach(b),this.h()},h(){c(t,"transform",l="translate("+e[33].x+","+-e[33].y+")")},m(f,u){L(f,t,u),s.m(t,null),A(t,r),o&&o.m(t,null)},p(f,u){a===(a=i(f,u))&&s?s.p(f,u):(s.d(1),s=a(f),s&&(s.c(),s.m(t,r))),f[7].length<=3?o?o.p(f,u):(o=Qt(f),o.c(),o.m(t,null)):o&&(o.d(1),o=null),u[0]&128&&l!==(l="translate("+f[33].x+","+-f[33].y+")")&&c(t,"transform",l)},d(f){f&&b(t),s.d(),o&&o.d()}}}function Ua(e){let t,n,r,l,i=e[0].label+"",a,s,o,f,u,d,m,v,p,y,I,_,g,h=e[0].unit!=null&&Kt(e),k=e[2],w=[];for(let D=0;D<k.length;D+=1)w[D]=Gt(Yt(e,k,D));let E=e[2],R=[];for(let D=0;D<E.length;D+=1)R[D]=Zt(qt(e,E,D));let P=e[7],F=[];for(let D=0;D<P.length;D+=1)F[D]=Xt(Wt(e,P,D));return{c(){t=O("div"),n=O("div"),r=O("p"),l=O("span"),a=K(i),s=U(),h&&h.c(),o=U(),f=B("svg"),u=B("rect"),d=B("g"),m=B("g");for(let D=0;D<w.length;D+=1)w[D].c();v=B("g");for(let D=0;D<R.length;D+=1)R[D].c();p=B("g");for(let D=0;D<F.length;D+=1)F[D].c();this.h()},l(D){t=H(D,"DIV",{class:!0});var N=M(t);n=H(N,"DIV",{class:!0});var S=M(n);r=H(S,"P",{style:!0,class:!0});var Y=M(r);l=H(Y,"SPAN",{style:!0});var X=M(l);a=G(X,i),X.forEach(b),Y.forEach(b),s=Z(S),h&&h.l(S),o=Z(S),f=T(S,"svg",{height:!0,width:!0,class:!0});var W=M(f);u=T(W,"rect",{width:!0,height:!0,fill:!0,opacity:!0}),M(u).forEach(b),d=T(W,"g",{class:!0,transform:!0});var ee=M(d);m=T(ee,"g",{class:!0});var re=M(m);for(let z=0;z<w.length;z+=1)w[z].l(re);re.forEach(b),v=T(ee,"g",{class:!0});var _e=M(v);for(let z=0;z<R.length;z+=1)R[z].l(_e);_e.forEach(b),p=T(ee,"g",{class:!0,transform:!0,opacity:!0});var ge=M(p);for(let z=0;z<F.length;z+=1)F[z].l(ge);ge.forEach(b),ee.forEach(b),W.forEach(b),S.forEach(b),N.forEach(b),this.h()},h(){ne(l,"font-weight","bold"),ne(r,"padding-top","10px"),c(r,"class","svelte-tveaae"),c(u,"width",e[1]),c(u,"height",e[10]),c(u,"fill","grey"),c(u,"opacity","0"),c(m,"class","backgroundElements"),c(v,"class","hoverElements"),c(p,"class","primaryElements"),c(p,"transform",y="translate(0,"+e[3]/2+")"),c(p,"opacity",I=e[6]===null?1:.1),c(d,"class","chart-container"),c(d,"transform",_="translate("+e[5].left+","+e[5].top+")"),c(f,"height",e[10]),c(f,"width",e[1]),c(f,"class","svelte-tveaae"),c(n,"class","svg-container"),gt(()=>e[31].call(n)),c(t,"class","rowContainer svelte-tveaae")},m(D,N){L(D,t,N),A(t,n),A(n,r),A(r,l),A(l,a),A(n,s),h&&h.m(n,null),A(n,o),A(n,f),A(f,u),A(f,d),A(d,m);for(let S=0;S<w.length;S+=1)w[S]&&w[S].m(m,null);A(d,v);for(let S=0;S<R.length;S+=1)R[S]&&R[S].m(v,null);A(d,p);for(let S=0;S<F.length;S+=1)F[S]&&F[S].m(p,null);g=pt(n,e[31].bind(n))},p(D,N){if(N[0]&1&&i!==(i=D[0].label+"")&&te(a,i),D[0].unit!=null?h?h.p(D,N):(h=Kt(D),h.c(),h.m(n,o)):h&&(h.d(1),h=null),N[0]&2&&c(u,"width",D[1]),N[0]&24836){k=D[2];let S;for(S=0;S<k.length;S+=1){const Y=Yt(D,k,S);w[S]?w[S].p(Y,N):(w[S]=Gt(Y),w[S].c(),w[S].m(m,null))}for(;S<w.length;S+=1)w[S].d(1);w.length=k.length}if(N[0]&6997){E=D[2];let S;for(S=0;S<E.length;S+=1){const Y=qt(D,E,S);R[S]?R[S].p(Y,N):(R[S]=Zt(Y),R[S].c(),R[S].m(v,null))}for(;S<R.length;S+=1)R[S].d(1);R.length=E.length}if(N[0]&6337){P=D[7];let S;for(S=0;S<P.length;S+=1){const Y=Wt(D,P,S);F[S]?F[S].p(Y,N):(F[S]=Xt(Y),F[S].c(),F[S].m(p,null))}for(;S<F.length;S+=1)F[S].d(1);F.length=P.length}N[0]&8&&y!==(y="translate(0,"+D[3]/2+")")&&c(p,"transform",y),N[0]&64&&I!==(I=D[6]===null?1:.1)&&c(p,"opacity",I),N[0]&32&&_!==(_="translate("+D[5].left+","+D[5].top+")")&&c(d,"transform",_),N[0]&2&&c(f,"width",D[1])},i:ae,o:ae,d(D){D&&b(t),h&&h.d(),ie(w,D),ie(R,D),ie(F,D),g()}}}function Jt(e,t,n=1){return(e-t)/n}const Za=e=>e.x,Qa=e=>e.x,Xa=e=>e.y;function Ja(e,t,n){let r,l,i,a,s,o,f,u,d,m,v,p,y,I,_=pe("areas"),{filteredData:g,indicator:h,checkboxedRoles:k,siblingAreas:w,selectedAreas:E,areasWithData:R,plottedAreas:P}=t,F=400,D=100;function N(z){z=z.map(Ee=>Ee.value);const ue=Ee=>{const Me=Ee.length/2,Se=[...Ee].sort((rt,lt)=>rt-lt);return Me%1===0?(Se[Me-1]+Se[Me])/2:Se[Math.floor(Me)]},Ue=ue(z),Le=z.map(Ee=>Math.abs(Ee-Ue)),He=ue(Le)*1.4826;return[Ue,He]}let S=h.prefix===null?"":h.prefix==="pounds"?"£":h.prefix,Y=h.suffix===null?"":h.suffix;function X(z){n(6,I=parseFloat(Dt(this).attr("hoverid")))}function W(z){n(6,I=null)}const ee=z=>z.x!=Math.max(...y.map(ue=>ue.x))&z.x!=Math.min(...y.map(ue=>ue.x)),re=(z,ue)=>ue.areacd===z.datum.areacd,_e=(z,ue)=>ue.areacd===z.datum.areacd;function ge(){F=this.clientWidth,n(1,F)}return e.$$set=z=>{"filteredData"in z&&n(15,g=z.filteredData),"indicator"in z&&n(0,h=z.indicator),"checkboxedRoles"in z&&n(16,k=z.checkboxedRoles),"siblingAreas"in z&&n(17,w=z.siblingAreas),"selectedAreas"in z&&n(18,E=z.selectedAreas),"areasWithData"in z&&n(19,R=z.areasWithData),"plottedAreas"in z&&n(20,P=z.plottedAreas)},e.$$.update=()=>{e.$$.dirty[0]&34&&n(4,l=F-r.left-r.right),e.$$.dirty[0]&32&&n(3,i=D-r.top-r.bottom),e.$$.dirty[0]&163840&&n(25,a=g.filter(z=>w.siblings.includes(z.areacd))),e.$$.dirty[0]&33554432&&n(27,s=N(a)),e.$$.dirty[0]&167772160&&n(24,o=a.map(z=>Jt(z.value,s[0],s[1]))),e.$$.dirty[0]&1081344&&n(23,f=P.map(z=>({...z,yValue:g.filter(ue=>ue.areacd===z.areacd)})).filter(z=>z.yValue.length>0)),e.$$.dirty[0]&142606336&&n(22,u=f.map(z=>Jt(z.yValue[0].value,s[0],s[1]))),e.$$.dirty[0]&16777217&&n(26,d=h.highEqualsGood==="F"?[Math.max(...o),Math.min(...o)]:[Math.min(...o),Math.max(...o)]),e.$$.dirty[0]&67108880&&n(21,m=Ce().domain(d).range([0,l])),e.$$.dirty[0]&52428800&&n(2,v=new Ft(a.map((z,ue)=>({...z,yDev:o[ue]})),5,z=>m(z.yDev)).calculateYPositions()),e.$$.dirty[0]&12&&n(8,p=Ce().domain([Math.min(...v.map(z=>z.y)),Math.max(...v.map(z=>z.y))]).range([0,i])),e.$$.dirty[0]&14680064&&n(7,y=new Ft(f.map((z,ue)=>({...z,yDev:u[ue]})),8,z=>m(z.yDev)).calculateYPositions()),e.$$.dirty[0]&4&&console.log(v)},n(5,r={top:10,left:20,right:30,bottom:10}),n(6,I=null),[h,F,v,i,l,r,I,y,p,_,D,S,Y,X,W,g,k,w,E,R,P,m,u,f,o,a,d,s,ee,re,_e,ge]}class kr extends se{constructor(t){super(),oe(this,t,Ja,Ua,fe,{filteredData:15,indicator:0,checkboxedRoles:16,siblingAreas:17,selectedAreas:18,areasWithData:19,plottedAreas:20},null,[-1,-1])}}function jt(e,t,n){const r=e.slice();return r[3]=t[n],r[5]=n,r}function ja(e){let t,n;return{c(){t=B("circle"),this.h()},l(r){t=T(r,"circle",{r:!0,fill:!0,stroke:!0});var l=M(t);l.forEach(b),this.h()},h(){c(t,"r",ze),c(t,"fill",n=Q[e[3].role]),c(t,"stroke","white")},m(r,l){L(r,t,l)},p(r,l){l&1&&n!==(n=Q[r[3].role])&&c(t,"fill",n)},d(r){r&&b(t)}}}function xa(e){let t,n,r;return{c(){t=B("rect"),this.h()},l(l){t=T(l,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=M(t);i.forEach(b),this.h()},h(){c(t,"transform",n=["country","uk"].includes(e[3].role)?"rotate(45)":null),c(t,"x",-ze),c(t,"y",-ze),c(t,"width",2*ze),c(t,"height",2*ze),c(t,"fill",r=Q[e[3].role]),c(t,"stroke","white")},m(l,i){L(l,t,i)},p(l,i){i&1&&n!==(n=["country","uk"].includes(l[3].role)?"rotate(45)":null)&&c(t,"transform",n),i&1&&r!==(r=Q[l[3].role])&&c(t,"fill",r)},d(l){l&&b(t)}}}function xt(e){let t,n,r,l,i,a,s=e[1].find(v).areanm+"",o,f;function u(p,y){return y&1&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(p[3].role)),l?xa:ja}let d=u(e,-1),m=d(e);function v(...p){return e[2](e[3],...p)}return{c(){t=O("div"),n=B("svg"),r=B("g"),m.c(),i=U(),a=O("p"),o=K(s),f=U(),this.h()},l(p){t=H(p,"DIV",{class:!0});var y=M(t);n=T(y,"svg",{width:!0,height:!0});var I=M(n);r=T(I,"g",{transform:!0});var _=M(r);m.l(_),_.forEach(b),I.forEach(b),i=Z(y),a=H(y,"P",{style:!0,class:!0});var g=M(a);o=G(g,s),g.forEach(b),f=Z(y),y.forEach(b),this.h()},h(){c(r,"transform","translate(10,12)"),c(n,"width","20"),c(n,"height","24"),ne(a,"color",Q[e[3].role]),c(a,"class","svelte-tgcff7"),c(t,"class","roleContainer svelte-tgcff7")},m(p,y){L(p,t,y),A(t,n),A(n,r),m.m(r,null),A(t,i),A(t,a),A(a,o),A(t,f)},p(p,y){e=p,d===(d=u(e,y))&&m?m.p(e,y):(m.d(1),m=d(e),m&&(m.c(),m.m(r,null))),y&1&&s!==(s=e[1].find(v).areanm+"")&&te(o,s),y&1&&ne(a,"color",Q[e[3].role])},d(p){p&&b(t),m.d()}}}function $a(e){let t,n=e[0],r=[];for(let l=0;l<n.length;l+=1)r[l]=xt(jt(e,n,l));return{c(){t=O("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){t=H(l,"DIV",{class:!0});var i=M(t);for(let a=0;a<r.length;a+=1)r[a].l(i);i.forEach(b),this.h()},h(){c(t,"class","keyContainer svelte-tgcff7")},m(l,i){L(l,t,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null)},p(l,[i]){if(i&3){n=l[0];let a;for(a=0;a<n.length;a+=1){const s=jt(l,n,a);r[a]?r[a].p(s,i):(r[a]=xt(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:ae,o:ae,d(l){l&&b(t),ie(r,l)}}}let ze=6;function es(e,t,n){let r=pe("areas"),{plottedAreas:l}=t;const i=(a,s)=>s.areacd===a.areacd;return e.$$set=a=>{"plottedAreas"in a&&n(0,l=a.plottedAreas)},[l,r,i]}class ts extends se{constructor(t){super(),oe(this,t,es,$a,fe,{plottedAreas:0})}}function ns(e){let t,n,r,l,i,a,s,o,f;function u(_){e[39](_)}function d(_){e[40](_)}function m(_){e[41](_)}function v(_){e[42](_)}function p(_){e[43](_)}function y(_){e[44](_)}let I={id:e[2],container:e[3],items:e[4],placeholder:e[5],isMulti:e[10],isSearchable:e[6],groupBy:e[22],loadOptions:e[9],getSelectionLabel:e[12],getOptionLabel:e[21],itemFilter:e[19],ariaValues:e[25],ariaListOpen:e[26],ariaFocused:e[27],noOptionsMessage:e[20],indicatorSvg:e[23],containerStyles:e[24],optionIdentifier:e[8],showIndicator:!0,isClearable:e[7]?!e[10]:!1};return e[15]!==void 0&&(I.isFocused=e[15]),e[0]!==void 0&&(I.value=e[0]),e[16]!==void 0&&(I.listOpen=e[16]),e[1]!==void 0&&(I.filterText=e[1]),e[13]!==void 0&&(I.isWaiting=e[13]),e[17]!==void 0&&(I.handleClear=e[17]),n=new Xr({props:I}),ce.push(()=>he(n,"isFocused",u)),ce.push(()=>he(n,"value",d)),ce.push(()=>he(n,"listOpen",m)),ce.push(()=>he(n,"filterText",v)),ce.push(()=>he(n,"isWaiting",p)),ce.push(()=>he(n,"handleClear",y)),n.$on("select",e[28]),n.$on("clear",e[45]),n.$on("loaded",e[46]),n.$on("error",e[47]),{c(){t=O("div"),J(n.$$.fragment),this.h()},l(_){t=H(_,"DIV",{class:!0});var g=M(t);j(n.$$.fragment,g),g.forEach(b),this.h()},h(){c(t,"class","selectbox svelte-1w33mjb"),Pe(t,"multi-selected",e[0]&&e[10]),Pe(t,"focused",e[15]),Pe(t,"selected",e[0]&&!e[16]&&!e[10]),ne(t,"--borderColor",e[11]),ne(t,"--firstItem",e[18](0)),ne(t,"--secondItem",e[18](1)),ne(t,"--thirdItem",e[18](2)),ne(t,"--fourthItem",e[18](3))},m(_,g){L(_,t,g),x(n,t,null),e[48](t),f=!0},p(_,g){const h={};g[0]&4&&(h.id=_[2]),g[0]&8&&(h.container=_[3]),g[0]&16&&(h.items=_[4]),g[0]&32&&(h.placeholder=_[5]),g[0]&1024&&(h.isMulti=_[10]),g[0]&64&&(h.isSearchable=_[6]),g[0]&512&&(h.loadOptions=_[9]),g[0]&4096&&(h.getSelectionLabel=_[12]),g[0]&524288&&(h.itemFilter=_[19]),g[0]&1048576&&(h.noOptionsMessage=_[20]),g[0]&256&&(h.optionIdentifier=_[8]),g[0]&1152&&(h.isClearable=_[7]?!_[10]:!1),!r&&g[0]&32768&&(r=!0,h.isFocused=_[15],de(()=>r=!1)),!l&&g[0]&1&&(l=!0,h.value=_[0],de(()=>l=!1)),!i&&g[0]&65536&&(i=!0,h.listOpen=_[16],de(()=>i=!1)),!a&&g[0]&2&&(a=!0,h.filterText=_[1],de(()=>a=!1)),!s&&g[0]&8192&&(s=!0,h.isWaiting=_[13],de(()=>s=!1)),!o&&g[0]&131072&&(o=!0,h.handleClear=_[17],de(()=>o=!1)),n.$set(h),(!f||g[0]&1025)&&Pe(t,"multi-selected",_[0]&&_[10]),(!f||g[0]&32768)&&Pe(t,"focused",_[15]),(!f||g[0]&66561)&&Pe(t,"selected",_[0]&&!_[16]&&!_[10]),g[0]&2048&&ne(t,"--borderColor",_[11]),g[0]&262144&&ne(t,"--firstItem",_[18](0)),g[0]&262144&&ne(t,"--secondItem",_[18](1)),g[0]&262144&&ne(t,"--thirdItem",_[18](2)),g[0]&262144&&ne(t,"--fourthItem",_[18](3))},i(_){f||(V(n.$$.fragment,_),f=!0)},o(_){q(n.$$.fragment,_),f=!1},d(_){_&&b(t),$(n),e[48](null)}}}function rs(e,t,n){let r,l,i;const a='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',s='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',o=zr();let{id:f=""}=t,{container:u=void 0}=t,{mode:d="default"}=t,{items:m}=t,{placeholder:v="Select one..."}=t,{value:p=null}=t,{filterText:y=""}=t,{isSearchable:I=!0}=t,{isClearable:_=!0}=t,{autoClear:g=!1}=t,{idKey:h="value"}=t,{labelKey:k="label"}=t,{groupKey:w=null}=t,{groupItems:E=!1}=t,{loadOptions:R=void 0}=t,{fontSize:P="1em"}=t,{height:F=42}=t,{isMulti:D=!1}=t,{maxSelected:N=4}=t,{colors:S=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=t,{darkMode:Y=!1}=t,{borderColor:X=Y?"white":"#206095"}=t;const W=w&&!E?C=>`${C[k]} <span class="group">${C[w]}</span>`:C=>C[k];let{getSelectionLabel:ee=C=>C?W(C):null}=t;const re=E&&w?C=>C[w]:void 0,_e=d=="search"?a:s,ge=`--inputFontSize: ${P}; --groupTitleFontSize: ${P}; --height: ${F}px; font-size: ${P};`,z=C=>`${C}, selected.`,ue=(C,ve)=>`You are currently focused on ${C}. There are ${ve} results available.`,Ue=()=>"Select is focused, type to refine list, press down to open the menu.";let Le,He,Ee,Me,Se;const rt=C=>new Promise(ve=>setTimeout(ve,C));async function lt(C){if(o("select",C.detail),g)Se();else if(_){await rt(10);let ve=Le.getElementsByClassName("clearSelect")[0];ve&&(ve.tabIndex=0,ve.onkeypress=Ze=>{Ze.key=="Enter"&&Se()},ve.removeAttribute("aria-hidden"),ve.setAttribute("aria-label","Clear selection"))}}function Rr(C){He=C,n(15,He)}function Nr(C){p=C,n(0,p)}function Cr(C){Ee=C,n(16,Ee)}function Lr(C){y=C,n(1,y)}function Pr(C){Me=C,n(13,Me)}function Br(C){Se=C,n(17,Se)}function Tr(C){it.call(this,e,C)}function Vr(C){it.call(this,e,C)}function Or(C){it.call(this,e,C)}function Hr(C){ce[C?"unshift":"push"](()=>{Le=C,n(14,Le)})}return e.$$set=C=>{"id"in C&&n(2,f=C.id),"container"in C&&n(3,u=C.container),"mode"in C&&n(29,d=C.mode),"items"in C&&n(4,m=C.items),"placeholder"in C&&n(5,v=C.placeholder),"value"in C&&n(0,p=C.value),"filterText"in C&&n(1,y=C.filterText),"isSearchable"in C&&n(6,I=C.isSearchable),"isClearable"in C&&n(7,_=C.isClearable),"autoClear"in C&&n(30,g=C.autoClear),"idKey"in C&&n(8,h=C.idKey),"labelKey"in C&&n(31,k=C.labelKey),"groupKey"in C&&n(32,w=C.groupKey),"groupItems"in C&&n(33,E=C.groupItems),"loadOptions"in C&&n(9,R=C.loadOptions),"fontSize"in C&&n(34,P=C.fontSize),"height"in C&&n(35,F=C.height),"isMulti"in C&&n(10,D=C.isMulti),"maxSelected"in C&&n(36,N=C.maxSelected),"colors"in C&&n(37,S=C.colors),"darkMode"in C&&n(38,Y=C.darkMode),"borderColor"in C&&n(11,X=C.borderColor),"getSelectionLabel"in C&&n(12,ee=C.getSelectionLabel)},e.$$.update=()=>{e.$$.dirty[0]&536879106&&n(20,r=Me?"Loading...":d=="search"&&y.length<3?"Enter 3 or more characters for suggestions":`No results match ${y}`),e.$$.dirty[0]&536870915|e.$$.dirty[1]&33&&n(19,l=Array.isArray(p)&&p.length>=N||d=="search"&&y.length<3?(C,ve,Ze)=>!1:(C,ve,Ze)=>`${Ze[k]}`.match(new RegExp(`\\b${ve}`,"i"))),e.$$.dirty[1]&64&&n(18,i=C=>S[C%S.length])},[p,y,f,u,m,v,I,_,h,R,D,X,ee,Me,Le,He,Ee,Se,i,l,r,W,re,_e,ge,z,ue,Ue,lt,d,g,k,w,E,P,F,N,S,Y,Rr,Nr,Cr,Lr,Pr,Br,Tr,Vr,Or,Hr]}class ls extends se{constructor(t){super(),oe(this,t,rs,ns,fe,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function is(e){let t,n,r,l;function i(s){e[5](s)}let a={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:e[1],isMulti:!0,maxSelected:4,placeholder:"Add additional comparison areas"};return e[0].custom!==void 0&&(a.value=e[0].custom),n=new ls({props:a}),ce.push(()=>he(n,"value",i)),n.$on("select",e[2]),{c(){t=O("form"),J(n.$$.fragment),this.h()},l(s){t=H(s,"FORM",{class:!0});var o=M(t);j(n.$$.fragment,o),o.forEach(b),this.h()},h(){c(t,"class","svelte-a5e7yj")},m(s,o){L(s,t,o),x(n,t,null),l=!0},p(s,[o]){const f={};!r&&o&1&&(r=!0,f.value=s[0].custom,de(()=>r=!1)),n.$set(f)},i(s){l||(V(n.$$.fragment,s),l=!0)},o(s){q(n.$$.fragment,s),l=!1},d(s){s&&b(t),$(n)}}}function as(e,t,n){let{areasWithData:r,checkboxedRoles:l,selectedAreas:i}=t,a=pe("areasParentsLookup"),s=pe("areas"),o=a.filter(d=>r.includes(d.areacd)&!i.map(m=>m.data.areacd).includes(d.areacd));o.forEach(d=>{d.areanm=s.find(m=>m.areacd===d.areacd).areanm,d.parentnm=s.find(m=>d.parentcd===m.areacd)===void 0?"":s.find(m=>d.parentcd===m.areacd).areanm});function f(d){d.detail&&d.detail}function u(d){e.$$.not_equal(l.custom,d)&&(l.custom=d,n(0,l))}return e.$$set=d=>{"areasWithData"in d&&n(3,r=d.areasWithData),"checkboxedRoles"in d&&n(0,l=d.checkboxedRoles),"selectedAreas"in d&&n(4,i=d.selectedAreas)},[l,o,f,r,i,u]}class ss extends se{constructor(t){super(),oe(this,t,as,is,fe,{areasWithData:3,checkboxedRoles:0,selectedAreas:4})}}function $t(e,t,n){const r=e.slice();return r[8]=t[n],r[9]=t,r[10]=n,r}function en(e,t,n){const r=e.slice();return r[8]=t[n],r[11]=t,r[10]=n,r}function os(e){let t,n,r=e[8].data.areanm+"",l,i,a;function s(){e[4].call(n,e[8])}return{c(){t=O("label"),n=O("input"),l=K(r),this.h()},l(o){t=H(o,"LABEL",{class:!0});var f=M(t);n=H(f,"INPUT",{type:!0,class:!0}),l=G(f,r),f.forEach(b),this.h()},h(){c(n,"type","checkbox"),c(n,"class","svelte-thy20g"),c(t,"class","svelte-thy20g")},m(o,f){L(o,t,f),A(t,n),n.checked=e[0][e[8].role],A(t,l),i||(a=be(n,"change",s),i=!0)},p(o,f){e=o,f&3&&(n.checked=e[0][e[8].role]),f&2&&r!==(r=e[8].data.areanm+"")&&te(l,r)},d(o){o&&b(t),i=!1,a()}}}function tn(e){let t,n=os(e);return{c(){n&&n.c(),t=le()},l(r){n&&n.l(r),t=le()},m(r,l){n&&n.m(r,l),L(r,t,l)},p(r,l){n.p(r,l)},d(r){n&&n.d(r),r&&b(t)}}}function nn(e){let t,n=["neighbour","cluster"],r=[];for(let l=0;l<2;l+=1)r[l]=rn($t(e,n,l));return{c(){for(let l=0;l<2;l+=1)r[l].c();t=le()},l(l){for(let i=0;i<2;i+=1)r[i].l(l);t=le()},m(l,i){for(let a=0;a<2;a+=1)r[a]&&r[a].m(l,i);L(l,t,i)},p(l,i){if(i&3){n=["neighbour","cluster"];let a;for(a=0;a<2;a+=1){const s=$t(l,n,a);r[a]?r[a].p(s,i):(r[a]=rn(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<2;a+=1)r[a].d(1)}},d(l){ie(r,l),l&&b(t)}}}function rn(e){let t,n,r=e[8]==="neighbour"?"Other areas in "+e[1].find(ln).data.areanm:"Statistically similar areas",l,i,a,s;function o(){e[5].call(n,e[8])}return{c(){t=O("label"),n=O("input"),l=K(r),i=U(),this.h()},l(f){t=H(f,"LABEL",{class:!0});var u=M(t);n=H(u,"INPUT",{type:!0,class:!0}),l=G(u,r),i=Z(u),u.forEach(b),this.h()},h(){c(n,"type","checkbox"),c(n,"class","svelte-thy20g"),c(t,"class","svelte-thy20g")},m(f,u){L(f,t,u),A(t,n),n.checked=e[0][e[8]],A(t,l),A(t,i),a||(s=be(n,"change",o),a=!0)},p(f,u){e=f,u&1&&(n.checked=e[0][e[8]]),u&2&&r!==(r=e[8]==="neighbour"?"Other areas in "+e[1].find(ln).data.areanm:"Statistically similar areas")&&te(l,r)},d(f){f&&b(t),a=!1,s()}}}function fs(e){let t,n,r,l,i,a,s,o,f,u,d,m,v=e[1],p=[];for(let g=0;g<v.length;g+=1)p[g]=tn(en(e,v,g));let y=e[3]&&nn(e);function I(g){e[6](g)}let _={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(_.checkboxedRoles=e[0]),u=new ss({props:_}),ce.push(()=>he(u,"checkboxedRoles",I)),{c(){t=O("div"),n=O("p"),r=K("Parent areas"),l=U();for(let g=0;g<p.length;g+=1)p[g].c();i=U(),a=O("p"),s=K("Related areas"),o=U(),y&&y.c(),f=U(),J(u.$$.fragment),this.h()},l(g){t=H(g,"DIV",{class:!0});var h=M(t);n=H(h,"P",{class:!0});var k=M(n);r=G(k,"Parent areas"),k.forEach(b),l=Z(h);for(let E=0;E<p.length;E+=1)p[E].l(h);i=Z(h),a=H(h,"P",{class:!0});var w=M(a);s=G(w,"Related areas"),w.forEach(b),o=Z(h),y&&y.l(h),f=Z(h),j(u.$$.fragment,h),h.forEach(b),this.h()},h(){c(n,"class","svelte-thy20g"),c(a,"class","svelte-thy20g"),c(t,"class","comparisonInputContainer svelte-thy20g")},m(g,h){L(g,t,h),A(t,n),A(n,r),A(t,l);for(let k=0;k<p.length;k+=1)p[k]&&p[k].m(t,null);A(t,i),A(t,a),A(a,s),A(t,o),y&&y.m(t,null),A(t,f),x(u,t,null),m=!0},p(g,h){if(h&3){v=g[1];let w;for(w=0;w<v.length;w+=1){const E=en(g,v,w);p[w]?p[w].p(E,h):(p[w]=tn(E),p[w].c(),p[w].m(t,i))}for(;w<p.length;w+=1)p[w].d(1);p.length=v.length}g[3]?y?y.p(g,h):(y=nn(g),y.c(),y.m(t,f)):y&&(y.d(1),y=null);const k={};h&2&&(k.selectedAreas=g[1]),h&4&&(k.areasWithData=g[2]),!d&&h&1&&(d=!0,k.checkboxedRoles=g[0],de(()=>d=!1)),u.$set(k)},i(g){m||(V(u.$$.fragment,g),m=!0)},o(g){q(u.$$.fragment,g),m=!1},d(g){g&&b(t),ie(p,g),y&&y.d(),$(u)}}}function us(e){let t,n,r;return n=new ir({props:{label:"Select comparison areas",open:cs,$$slots:{default:[fs]},$$scope:{ctx:e}}}),{c(){t=O("div"),J(n.$$.fragment),this.h()},l(l){t=H(l,"DIV",{class:!0});var i=M(t);j(n.$$.fragment,i),i.forEach(b),this.h()},h(){c(t,"class",we("twisty-container")+" svelte-thy20g")},m(l,i){L(l,t,i),x(n,t,null),r=!0},p(l,[i]){const a={};i&4111&&(a.$$scope={dirty:i,ctx:l}),n.$set(a)},i(l){r||(V(n.$$.fragment,l),r=!0)},o(l){q(n.$$.fragment,l),r=!1},d(l){l&&b(t),$(n)}}}let cs=!1;const ln=e=>e.role==="parent";function hs(e,t,n){let{selectedAreas:r,areasWithData:l,checkboxedRoles:i,includeSiblings:a=!0}=t;r.map(u=>u.role);function s(u){i[u.role]=this.checked,n(0,i)}function o(u){i[u]=this.checked,n(0,i)}function f(u){i=u,n(0,i)}return e.$$set=u=>{"selectedAreas"in u&&n(1,r=u.selectedAreas),"areasWithData"in u&&n(2,l=u.areasWithData),"checkboxedRoles"in u&&n(0,i=u.checkboxedRoles),"includeSiblings"in u&&n(3,a=u.includeSiblings)},[i,r,l,a,s,o,f]}class wr extends se{constructor(t){super(),oe(this,t,hs,us,fe,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3})}}function an(e,t,n){const r=e.slice();return r[14]=t[n],r}function sn(e,t,n){const r=e.slice();return r[14]=t[n],r}function ds(e){let t,n;function r(...l){return e[12](e[14],...l)}return t=new kr({props:{indicator:e[14],filteredData:e[1].filter(r),checkboxedRoles:e[0],siblingAreas:e[6],selectedAreas:e[5],areasWithData:e[7],plottedAreas:e[8]}}),{c(){J(t.$$.fragment)},l(l){j(t.$$.fragment,l)},m(l,i){x(t,l,i),n=!0},p(l,i){e=l;const a={};i&12&&(a.indicator=e[14]),i&14&&(a.filteredData=e[1].filter(r)),i&1&&(a.checkboxedRoles=e[0]),i&64&&(a.siblingAreas=e[6]),i&32&&(a.selectedAreas=e[5]),i&128&&(a.areasWithData=e[7]),i&256&&(a.plottedAreas=e[8]),t.$set(a)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){$(t,l)}}}function on(e){let t,n,r=ds(e);return{c(){r&&r.c(),t=le()},l(l){r&&r.l(l),t=le()},m(l,i){r&&r.m(l,i),L(l,t,i),n=!0},p(l,i){r.p(l,i)},i(l){n||(V(r),n=!0)},o(l){q(r),n=!1},d(l){r&&r.d(l),l&&b(t)}}}function fn(e){let t,n;return t=new ir({props:{label:"Show "+e[4].length+" more indicators",open:gs,cross:"true",$$slots:{default:[_s]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment)},l(r){j(t.$$.fragment,r)},m(r,l){x(t,r,l),n=!0},p(r,l){const i={};l&16&&(i.label="Show "+r[4].length+" more indicators"),l&524787&&(i.$$scope={dirty:l,ctx:r}),t.$set(i)},i(r){n||(V(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){$(t,r)}}}function un(e){let t,n;function r(...l){return e[13](e[14],...l)}return t=new kr({props:{indicator:e[14],filteredData:e[1].filter(r),checkboxedRoles:e[0],siblingAreas:e[6],selectedAreas:e[5],areasWithData:e[7],plottedAreas:e[8]}}),{c(){J(t.$$.fragment)},l(l){j(t.$$.fragment,l)},m(l,i){x(t,l,i),n=!0},p(l,i){e=l;const a={};i&16&&(a.indicator=e[14]),i&18&&(a.filteredData=e[1].filter(r)),i&1&&(a.checkboxedRoles=e[0]),i&64&&(a.siblingAreas=e[6]),i&32&&(a.selectedAreas=e[5]),i&128&&(a.areasWithData=e[7]),i&256&&(a.plottedAreas=e[8]),t.$set(a)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){$(t,l)}}}function _s(e){let t,n,r=e[4],l=[];for(let a=0;a<r.length;a+=1)l[a]=un(an(e,r,a));const i=a=>q(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();t=le()},l(a){for(let s=0;s<l.length;s+=1)l[s].l(a);t=le()},m(a,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(a,s);L(a,t,s),n=!0},p(a,s){if(s&499){r=a[4];let o;for(o=0;o<r.length;o+=1){const f=an(a,r,o);l[o]?(l[o].p(f,s),V(l[o],1)):(l[o]=un(f),l[o].c(),V(l[o],1),l[o].m(t.parentNode,t))}for(De(),o=r.length;o<l.length;o+=1)i(o);Ae()}},i(a){if(!n){for(let s=0;s<r.length;s+=1)V(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)q(l[s]);n=!1},d(a){ie(l,a),a&&b(t)}}}function ms(e){let t,n,r,l,i,a,s,o,f,u,d,m,v,p,y,I,_,g,h;function k(D){e[11](D)}let w={selectedAreas:e[5].filter(e[10]),areasWithData:e[7],includeSiblings:!1};e[0]!==void 0&&(w.checkboxedRoles=e[0]),n=new wr({props:w}),ce.push(()=>he(n,"checkboxedRoles",k)),i=new ts({props:{plottedAreas:e[8]}});let E=[...e[2],...e[3]].filter(cn),R=[];for(let D=0;D<E.length;D+=1)R[D]=on(sn(e,E,D));const P=D=>q(R[D],1,1,()=>{R[D]=null});let F=e[4].length>0&&fn(e);return{c(){t=O("div"),J(n.$$.fragment),l=U(),J(i.$$.fragment),a=U(),s=B("svg"),o=B("path"),f=B("text"),u=K(`Worse than average \r
    `),d=B("path"),m=B("text"),v=K("Better than average"),p=U();for(let D=0;D<R.length;D+=1)R[D].c();y=U(),F&&F.c(),I=U(),_=O("img"),this.h()},l(D){t=H(D,"DIV",{class:!0});var N=M(t);j(n.$$.fragment,N),l=Z(N),j(i.$$.fragment,N),a=Z(N),s=T(N,"svg",{style:!0,width:!0,height:!0});var S=M(s);o=T(S,"path",{transform:!0,d:!0,fill:!0,stroke:!0}),M(o).forEach(b),f=T(S,"text",{transform:!0,"text-anchor":!0});var Y=M(f);u=G(Y,`Worse than average \r
    `),Y.forEach(b),d=T(S,"path",{transform:!0,d:!0,fill:!0,stroke:!0}),M(d).forEach(b),m=T(S,"text",{transform:!0,"text-anchor":!0});var X=M(m);v=G(X,"Better than average"),X.forEach(b),S.forEach(b),p=Z(N);for(let W=0;W<R.length;W+=1)R[W].l(N);y=Z(N),F&&F.l(N),N.forEach(b),I=Z(D),_=H(D,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){c(o,"transform","translate(50,20)"),c(o,"d","M0 10 l-10 -10 l10 -10 z"),c(o,"fill","black"),c(o,"stroke","none"),c(f,"transform","translate(55,25)"),c(f,"text-anchor","start"),c(d,"transform","translate(480,20)"),c(d,"d","M0 10 l10 -10 l-10 -10 z"),c(d,"fill","black"),c(d,"stroke","none"),c(m,"transform","translate(475,25)"),c(m,"text-anchor","end"),ne(s,"padding-top","20px"),c(s,"width","500"),c(s,"height","70"),c(t,"class","beeswarmRowsContainer svelte-13dg6nv"),ne(_,"padding-top","10px"),c(_,"width","75%"),nr(_.src,g=`${Oe}/img/image1.png`)||c(_,"src",g),c(_,"alt","download buttons"),c(_,"class","svelte-13dg6nv")},m(D,N){L(D,t,N),x(n,t,null),A(t,l),x(i,t,null),A(t,a),A(t,s),A(s,o),A(s,f),A(f,u),A(s,d),A(s,m),A(m,v),A(t,p);for(let S=0;S<R.length;S+=1)R[S]&&R[S].m(t,null);A(t,y),F&&F.m(t,null),L(D,I,N),L(D,_,N),h=!0},p(D,[N]){const S={};N&34&&(S.selectedAreas=D[5].filter(D[10])),N&128&&(S.areasWithData=D[7]),!r&&N&1&&(r=!0,S.checkboxedRoles=D[0],de(()=>r=!1)),n.$set(S);const Y={};if(N&256&&(Y.plottedAreas=D[8]),i.$set(Y),N&495){E=[...D[2],...D[3]].filter(cn);let X;for(X=0;X<E.length;X+=1){const W=sn(D,E,X);R[X]?(R[X].p(W,N),V(R[X],1)):(R[X]=on(W),R[X].c(),V(R[X],1),R[X].m(t,y))}for(De(),X=E.length;X<R.length;X+=1)P(X);Ae()}D[4].length>0?F?(F.p(D,N),N&16&&V(F,1)):(F=fn(D),F.c(),V(F,1),F.m(t,null)):F&&(De(),q(F,1,1,()=>{F=null}),Ae())},i(D){if(!h){V(n.$$.fragment,D),V(i.$$.fragment,D);for(let N=0;N<E.length;N+=1)V(R[N]);V(F),h=!0}},o(D){q(n.$$.fragment,D),q(i.$$.fragment,D),R=R.filter(Boolean);for(let N=0;N<R.length;N+=1)q(R[N]);q(F),h=!1},d(D){D&&b(t),$(n),$(i),ie(R,D),F&&F.d(),D&&b(I),D&&b(_)}}}let gs=!1;const cn=e=>e.includeAsBeeswarm==="T";function ps(e,t,n){let r,l,{trimmedIndicators:i,latestData:a,primaryIndicators:s,secondaryIndicators:o,otherIndicators:f,selectedAreas:u,siblingAreas:d,checkboxedRoles:m}=t;const v=_=>a.filter(g=>_.data.areacd===g.areacd).length>0&_.role!=="main";function p(_){m=_,n(0,m)}const y=(_,g)=>g.codeId===_.id,I=(_,g)=>g.codeId===_.id;return e.$$set=_=>{"trimmedIndicators"in _&&n(9,i=_.trimmedIndicators),"latestData"in _&&n(1,a=_.latestData),"primaryIndicators"in _&&n(2,s=_.primaryIndicators),"secondaryIndicators"in _&&n(3,o=_.secondaryIndicators),"otherIndicators"in _&&n(4,f=_.otherIndicators),"selectedAreas"in _&&n(5,u=_.selectedAreas),"siblingAreas"in _&&n(6,d=_.siblingAreas),"checkboxedRoles"in _&&n(0,m=_.checkboxedRoles)},e.$$.update=()=>{e.$$.dirty&2&&n(7,r=[...new Set(a.map(_=>_.areacd))]),e.$$.dirty&225&&n(8,l=[...u.map(_=>_.role==="main"||m[_.role]?{role:_.role,areacd:_.data.areacd}:null).filter(_=>_!=null),...m.custom===null||m.custom===void 0?[]:m.custom.map((_,g)=>({role:"custom"+(g+1),areacd:_.areacd})),...m.neighbour?d.neighbours.map(_=>({role:"neighbour",areacd:_})):[],...m.cluster?d.similar.map(_=>({role:"cluster",areacd:_})):[]].filter(_=>r.includes(_.areacd)))},[m,a,s,o,f,u,d,r,l,i,v,p,y,I]}class vs extends se{constructor(t){super(),oe(this,t,ps,ms,fe,{trimmedIndicators:9,latestData:1,primaryIndicators:2,secondaryIndicators:3,otherIndicators:4,selectedAreas:5,siblingAreas:6,checkboxedRoles:0})}}function hn(e,t,n){const r=e.slice();return r[4]=t[n],r[6]=n,r}function dn(e){let t,n,r,l,i,a=e[4]+"",s,o,f,u,d,m;return u=Wr(e[3][0]),{c(){t=O("label"),n=O("input"),r=U(),l=O("div"),i=O("p"),s=K(a),f=U(),this.h()},l(v){t=H(v,"LABEL",{});var p=M(t);n=H(p,"INPUT",{style:!0,type:!0,name:!0}),r=Z(p),l=H(p,"DIV",{class:!0,style:!0});var y=M(l);i=H(y,"P",{class:!0});var I=M(i);s=G(I,a),I.forEach(b),y.forEach(b),f=Z(p),p.forEach(b),this.h()},h(){ne(n,"display","none"),c(n,"type","radio"),n.__value=e[6]+1,n.value=n.__value,c(n,"name","chosenChart"),c(i,"class","svelte-1l4vz9d"),c(l,"class","optionLabel svelte-1l4vz9d"),c(l,"style",o="background-color: "+(e[0]===e[6]+1?"white":"#d4d4d4")),u.p(n)},m(v,p){L(v,t,p),A(t,n),n.checked=n.__value===e[0],A(t,r),A(t,l),A(l,i),A(i,s),A(t,f),d||(m=be(n,"change",e[2]),d=!0)},p(v,p){p&3&&(n.checked=n.__value===v[0]),p&2&&a!==(a=v[4]+"")&&te(s,a),p&1&&o!==(o="background-color: "+(v[0]===v[6]+1?"white":"#d4d4d4"))&&c(l,"style",o)},d(v){v&&b(t),u.r(),d=!1,m()}}}function bs(e){let t,n=e[1],r=[];for(let l=0;l<n.length;l+=1)r[l]=dn(hn(e,n,l));return{c(){t=O("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){t=H(l,"DIV",{class:!0});var i=M(t);for(let a=0;a<r.length;a+=1)r[a].l(i);i.forEach(b),this.h()},h(){c(t,"class","radioContainer svelte-1l4vz9d")},m(l,i){L(l,t,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null)},p(l,[i]){if(i&3){n=l[1];let a;for(a=0;a<n.length;a+=1){const s=hn(l,n,a);r[a]?r[a].p(s,i):(r[a]=dn(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},i:ae,o:ae,d(l){l&&b(t),ie(r,l)}}}function ys(e,t,n){let{optionsArray:r,chosenChart:l}=t;const i=[[]];function a(){l=this.__value,n(0,l)}return e.$$set=s=>{"optionsArray"in s&&n(1,r=s.optionsArray),"chosenChart"in s&&n(0,l=s.chosenChart)},[l,r,a,i]}class ks extends se{constructor(t){super(),oe(this,t,ys,bs,fe,{optionsArray:1,chosenChart:0})}}function _n(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function mn(e){let t,n=e[4],r=[];for(let l=0;l<n.length;l+=1)r[l]=gn(_n(e,n,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();t=le()},l(l){for(let i=0;i<r.length;i+=1)r[i].l(l);t=le()},m(l,i){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(l,i);L(l,t,i)},p(l,i){if(i&114){n=l[4];let a;for(a=0;a<n.length;a+=1){const s=_n(l,n,a);r[a]?r[a].p(s,i):(r[a]=gn(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(l){ie(r,l),l&&b(t)}}}function gn(e){let t,n,r,l,i,a=e[5]+e[11].toLocaleString()+e[6]+"",s,o;return{c(){t=B("g"),n=B("line"),i=B("text"),s=K(a),this.h()},l(f){t=T(f,"g",{class:!0});var u=M(t);n=T(u,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),M(n).forEach(b),i=T(u,"text",{"text-anchor":!0,x:!0,y:!0,stroke:!0,fill:!0,"font-size":!0});var d=M(i);s=G(d,a),d.forEach(b),u.forEach(b),this.h()},h(){c(n,"x1","0"),c(n,"x2","-8"),c(n,"y1",r=e[1](e[11])),c(n,"y2",l=e[1](e[11])),c(n,"stroke","black"),c(i,"text-anchor","end"),c(i,"x",-10),c(i,"y",o=e[1](e[11])+5),c(i,"stroke","none"),c(i,"fill","#333"),c(i,"font-size","14px"),c(t,"class","tick")},m(f,u){L(f,t,u),A(t,n),A(t,i),A(i,s)},p(f,u){u&18&&r!==(r=f[1](f[11]))&&c(n,"y1",r),u&18&&l!==(l=f[1](f[11]))&&c(n,"y2",l),u&16&&a!==(a=f[5]+f[11].toLocaleString()+f[6]+"")&&te(s,a),u&18&&o!==(o=f[1](f[11])+5)&&c(i,"y",o)},d(f){f&&b(t)}}}function ws(e){let t,n,r,l,i,a=e[3]==0&&mn(e);return{c(){t=B("g"),n=B("line"),a&&a.c(),this.h()},l(s){t=T(s,"g",{class:!0,transform:!0});var o=M(t);n=T(o,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),M(n).forEach(b),a&&a.l(o),o.forEach(b),this.h()},h(){c(n,"x1","0"),c(n,"x2","0"),c(n,"y1",r=e[1](e[0][1])),c(n,"y2",l=e[1](e[0][0])),c(n,"stroke","black"),c(t,"class","yAxis"),c(t,"transform",i="translate("+-e[2]+",0)")},m(s,o){L(s,t,o),A(t,n),a&&a.m(t,null)},p(s,[o]){o&3&&r!==(r=s[1](s[0][1]))&&c(n,"y1",r),o&3&&l!==(l=s[1](s[0][0]))&&c(n,"y2",l),s[3]==0?a?a.p(s,o):(a=mn(s),a.c(),a.m(t,null)):a&&(a.d(1),a=null),o&4&&i!==(i="translate("+-s[2]+",0)")&&c(t,"transform",i)},i:ae,o:ae,d(s){s&&b(t),a&&a.d()}}}function Ds(e,t,n){let r,l,i,{yDomain:a,y:s,yAxisOffset:o=0,column:f=0,indicator:u}=t,d=[],m=u.prefix===null?"":u.prefix==="pounds"?"£":u.prefix,v=u.suffix===null?"":u.suffix;return e.$$set=p=>{"yDomain"in p&&n(0,a=p.yDomain),"y"in p&&n(1,s=p.y),"yAxisOffset"in p&&n(2,o=p.yAxisOffset),"column"in p&&n(3,f=p.column),"indicator"in p&&n(7,u=p.indicator)},e.$$.update=()=>{if(e.$$.dirty&1&&n(10,r=Math.abs(a[1]-a[0])),e.$$.dirty&1024&&n(9,l=10**Math.floor(Math.log10(r))),e.$$.dirty&1536&&n(8,i=r/l<=1.5?l/5:r/l<=3?l/2:r/l<=6?l:l*2),e.$$.dirty&273){n(4,d=[]);for(let p=Math.ceil(a[0]);p<=Math.floor(a[1]);p++)p%i==0&&d.push(p)}},[a,s,o,f,d,m,v,u,i,l,r]}class Dr extends se{constructor(t){super(),oe(this,t,Ds,ws,fe,{yDomain:0,y:1,yAxisOffset:2,column:3,indicator:7})}}function pn(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function vn(e){let t,n,r,l;return{c(){t=B("line"),this.h()},l(i){t=T(i,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),M(t).forEach(b),this.h()},h(){c(t,"y1","0"),c(t,"y2",n=-e[3]),c(t,"x1",r=e[1](e[8])),c(t,"x2",l=e[1](e[8])),c(t,"stroke","black"),c(t,"opacity","0.1")},m(i,a){L(i,t,a)},p(i,a){a&8&&n!==(n=-i[3])&&c(t,"y2",n),a&2&&r!==(r=i[1](i[8]))&&c(t,"x1",r),a&2&&l!==(l=i[1](i[8]))&&c(t,"x2",l)},d(i){i&&b(t)}}}function bn(e){let t,n,r,l,i,a=e[8]+"",s,o,f=e[4]&&vn(e);return{c(){t=B("g"),n=B("line"),i=B("text"),s=K(a),f&&f.c(),this.h()},l(u){t=T(u,"g",{class:!0});var d=M(t);n=T(d,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),M(n).forEach(b),i=T(d,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var m=M(i);s=G(m,a),m.forEach(b),f&&f.l(d),d.forEach(b),this.h()},h(){c(n,"y1","0"),c(n,"y2","8"),c(n,"x1",r=e[1](e[8])),c(n,"x2",l=e[1](e[8])),c(n,"stroke","black"),c(i,"text-anchor","middle"),c(i,"y",20),c(i,"x",o=e[1](e[8])),c(i,"stroke","none"),c(i,"fill","#333"),c(i,"font-size","14px"),c(t,"class","tick")},m(u,d){L(u,t,d),A(t,n),A(t,i),A(i,s),f&&f.m(t,null)},p(u,d){d&2&&r!==(r=u[1](u[8]))&&c(n,"x1",r),d&2&&l!==(l=u[1](u[8]))&&c(n,"x2",l),d&2&&o!==(o=u[1](u[8]))&&c(i,"x",o),u[4]?f?f.p(u,d):(f=vn(u),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},d(u){u&&b(t),f&&f.d()}}}function As(e){let t,n,r,l,i,a=e[5],s=[];for(let o=0;o<a.length;o+=1)s[o]=bn(pn(e,a,o));return{c(){t=B("g"),n=B("line");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=T(o,"g",{class:!0,transform:!0});var f=M(t);n=T(f,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),M(n).forEach(b);for(let u=0;u<s.length;u+=1)s[u].l(f);f.forEach(b),this.h()},h(){c(n,"y1","0"),c(n,"y2","0"),c(n,"x1",r=e[1](e[0][0])),c(n,"x2",l=e[1](e[0][1])),c(n,"stroke","black"),c(t,"class","xAxis"),c(t,"transform",i="translate(0,"+(e[2]+e[3])+")")},m(o,f){L(o,t,f),A(t,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null)},p(o,[f]){if(f&3&&r!==(r=o[1](o[0][0]))&&c(n,"x1",r),f&3&&l!==(l=o[1](o[0][1]))&&c(n,"x2",l),f&58){a=o[5];let u;for(u=0;u<a.length;u+=1){const d=pn(o,a,u);s[u]?s[u].p(d,f):(s[u]=bn(d),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}f&12&&i!==(i="translate(0,"+(o[2]+o[3])+")")&&c(t,"transform",i)},i:ae,o:ae,d(o){o&&b(t),ie(s,o)}}}function Es(e,t,n){let{xDomain:r,x:l,xAxisOffset:i=0,chartHeight:a,gridlines:s=!1}=t,o=Math.abs(r[1]-r[0]),f=o>=15?5:o>=6?2:1,u=[];for(let d=Math.floor(r[0]);d<=Math.ceil(r[1]);d++)d%f==0&&u.push(d);return e.$$set=d=>{"xDomain"in d&&n(0,r=d.xDomain),"x"in d&&n(1,l=d.x),"xAxisOffset"in d&&n(2,i=d.xAxisOffset),"chartHeight"in d&&n(3,a=d.chartHeight),"gridlines"in d&&n(4,s=d.gridlines)},[r,l,i,a,s,u]}class Is extends se{constructor(t){super(),oe(this,t,Es,As,fe,{xDomain:0,x:1,xAxisOffset:2,chartHeight:3,gridlines:4})}}function Be(e){return function(){return e}}const _t=Math.PI,mt=2*_t,Fe=1e-6,Ms=mt-Fe;function Ar(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ss(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ar;const n=10**t;return function(r){this._+=r[0];for(let l=1,i=r.length;l<i;++l)this._+=Math.round(arguments[l]*n)/n+r[l]}}class Fs{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ar:Ss(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,l){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+l}`}bezierCurveTo(t,n,r,l,i,a){this._append`C${+t},${+n},${+r},${+l},${this._x1=+i},${this._y1=+a}`}arcTo(t,n,r,l,i){if(t=+t,n=+n,r=+r,l=+l,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,o=r-t,f=l-n,u=a-t,d=s-n,m=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>Fe)if(!(Math.abs(d*o-f*u)>Fe)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let v=r-a,p=l-s,y=o*o+f*f,I=v*v+p*p,_=Math.sqrt(y),g=Math.sqrt(m),h=i*Math.tan((_t-Math.acos((y+m-I)/(2*_*g)))/2),k=h/g,w=h/_;Math.abs(k-1)>Fe&&this._append`L${t+k*u},${n+k*d}`,this._append`A${i},${i},0,0,${+(d*v>u*p)},${this._x1=t+w*o},${this._y1=n+w*f}`}}arc(t,n,r,l,i,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(l),o=r*Math.sin(l),f=t+s,u=n+o,d=1^a,m=a?l-i:i-l;this._x1===null?this._append`M${f},${u}`:(Math.abs(this._x1-f)>Fe||Math.abs(this._y1-u)>Fe)&&this._append`L${f},${u}`,r&&(m<0&&(m=m%mt+mt),m>Ms?this._append`A${r},${r},0,1,${d},${t-s},${n-o}A${r},${r},0,1,${d},${this._x1=f},${this._y1=u}`:m>Fe&&this._append`A${r},${r},0,${+(m>=_t)},${d},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+l}h${-r}Z`}toString(){return this._}}function Rs(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Fs(t)}function Ns(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Er(e){this._context=e}Er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Cs(e){return new Er(e)}function Ls(e){return e[0]}function Ps(e){return e[1]}function Bs(e,t){var n=Be(!0),r=null,l=Cs,i=null,a=Rs(s);e=typeof e=="function"?e:e===void 0?Ls:Be(e),t=typeof t=="function"?t:t===void 0?Ps:Be(t);function s(o){var f,u=(o=Ns(o)).length,d,m=!1,v;for(r==null&&(i=l(v=a())),f=0;f<=u;++f)!(f<u&&n(d=o[f],f,o))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(d,f,o),+t(d,f,o));if(v)return i=null,v+""||null}return s.x=function(o){return arguments.length?(e=typeof o=="function"?o:Be(+o),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:Be(+o),s):t},s.defined=function(o){return arguments.length?(n=typeof o=="function"?o:Be(!!o),s):n},s.curve=function(o){return arguments.length?(l=o,r!=null&&(i=l(r)),s):l},s.context=function(o){return arguments.length?(o==null?r=i=null:i=l(r=o),s):r},s}function yn(e,t,n){const r=e.slice();return r[12]=t[n],r[14]=n,r}function kn(e){let t,n=e[2],r=[];for(let l=0;l<n.length;l+=1)r[l]=wn(yn(e,n,l));return{c(){t=B("g");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){t=T(l,"g",{class:!0});var i=M(t);for(let a=0;a<r.length;a+=1)r[a].l(i);i.forEach(b),this.h()},h(){c(t,"class","pointsContainer")},m(l,i){L(l,t,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null)},p(l,i){if(i&125){n=l[2];let a;for(a=0;a<n.length;a+=1){const s=yn(l,n,a);r[a]?r[a].p(s,i):(r[a]=wn(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(l){l&&b(t),ie(r,l)}}}function Ts(e){let t,n;return{c(){t=B("circle"),this.h()},l(r){t=T(r,"circle",{r:!0,fill:!0,stroke:!0});var l=M(t);l.forEach(b),this.h()},h(){c(t,"r","3.5"),c(t,"fill",n=e[0]===e[3]?"#F39431":Q[e[6].role]),c(t,"stroke","white")},m(r,l){L(r,t,l)},p(r,l){l&73&&n!==(n=r[0]===r[3]?"#F39431":Q[r[6].role])&&c(t,"fill",n)},d(r){r&&b(t)}}}function Vs(e){let t,n,r;return{c(){t=B("rect"),this.h()},l(l){t=T(l,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=M(t);i.forEach(b),this.h()},h(){c(t,"transform",n=["country","uk"].includes(e[6].role)?"rotate(45)":null),c(t,"x","-3"),c(t,"y","-3"),c(t,"width","6"),c(t,"height","6"),c(t,"fill",r=e[0]===e[3]?"#F39431":Q[e[6].role]),c(t,"stroke","white")},m(l,i){L(l,t,i)},p(l,i){i&64&&n!==(n=["country","uk"].includes(l[6].role)?"rotate(45)":null)&&c(t,"transform",n),i&73&&r!==(r=l[0]===l[3]?"#F39431":Q[l[6].role])&&c(t,"fill",r)},d(l){l&&b(t)}}}function wn(e){let t,n,r;function l(s,o){return o&64&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(s[6].role)),n?Vs:Ts}let i=l(e,-1),a=i(e);return{c(){t=B("g"),a.c(),this.h()},l(s){t=T(s,"g",{transform:!0});var o=M(t);a.l(o),o.forEach(b),this.h()},h(){c(t,"transform",r="translate("+e[4](e[12].year)+","+e[5](e[12].value)+")")},m(s,o){L(s,t,o),a.m(t,null)},p(s,o){i===(i=l(s,o))&&a?a.p(s,o):(a.d(1),a=i(s),a&&(a.c(),a.m(t,null))),o&52&&r!==(r="translate("+s[4](s[12].year)+","+s[5](s[12].value)+")")&&c(t,"transform",r)},d(s){s&&b(t),a.d()}}}function Os(e){let t,n,r,l,i,a,s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1],o,f,u,d=s&&kn(e);return{c(){t=B("g"),n=B("path"),d&&d.c(),this.h()},l(m){t=T(m,"g",{class:!0,opacity:!0});var v=M(t);n=T(v,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0,hoverid:!0}),M(n).forEach(b),d&&d.l(v),v.forEach(b),this.h()},h(){c(n,"d",r=e[7](e[2])),c(n,"fill","none"),c(n,"stroke",l=e[0]===e[3]?"#F39431":Q[e[6].role]),c(n,"stroke-width",i=e[1]?"16px":"2px"),c(n,"opacity",a=e[1]?0:e[0]===e[3]||e[10]?1:.25),c(n,"hoverid",e[3]),c(t,"class","lineContainer"),c(t,"opacity",o=e[0]===e[3]||e[0]===null?1:.25)},m(m,v){L(m,t,v),A(t,n),d&&d.m(t,null),f||(u=[be(n,"mouseover",function(){at(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)}),be(n,"mouseleave",function(){at(e[1]?e[9]:null)&&(e[1]?e[9]:null).apply(this,arguments)}),be(n,"focus",function(){at(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)})],f=!0)},p(m,[v]){e=m,v&132&&r!==(r=e[7](e[2]))&&c(n,"d",r),v&73&&l!==(l=e[0]===e[3]?"#F39431":Q[e[6].role])&&c(n,"stroke",l),v&2&&i!==(i=e[1]?"16px":"2px")&&c(n,"stroke-width",i),v&11&&a!==(a=e[1]?0:e[0]===e[3]||e[10]?1:.25)&&c(n,"opacity",a),v&8&&c(n,"hoverid",e[3]),v&75&&(s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1]),s?d?d.p(e,v):(d=kn(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null),v&9&&o!==(o=e[0]===e[3]||e[0]===null?1:.25)&&c(t,"opacity",o)},i:ae,o:ae,d(m){m&&b(t),d&&d.d(),f=!1,vt(u)}}}function Hs(e,t,n){let r,{overlay:l=!1,lineData:i,i:a,hoverIndex:s,x:o,y:f,xDomain:u,area:d}=t;function m(y){n(0,s=parseFloat(Dt(this).attr("hoverid")))}function v(y){n(0,s=null)}let p=["main","parent","country","uk","custom1","custom2","custom3","custom4"];return e.$$set=y=>{"overlay"in y&&n(1,l=y.overlay),"lineData"in y&&n(2,i=y.lineData),"i"in y&&n(3,a=y.i),"hoverIndex"in y&&n(0,s=y.hoverIndex),"x"in y&&n(4,o=y.x),"y"in y&&n(5,f=y.y),"xDomain"in y&&n(11,u=y.xDomain),"area"in y&&n(6,d=y.area)},e.$$.update=()=>{e.$$.dirty&48&&n(7,r=Bs().x(y=>o(y.year)).y(y=>f(y.value)))},[s,l,i,a,o,f,d,r,m,v,p,u]}class Ir extends se{constructor(t){super(),oe(this,t,Hs,Os,fe,{overlay:1,lineData:2,i:3,hoverIndex:0,x:4,y:5,xDomain:11,area:6})}}function Dn(e,t,n){const r=e.slice();return r[3]=t[n],r}function An(e){let t,n=e[3].datum.areanm+"",r,l,i;return{c(){t=B("text"),r=K(n),this.h()},l(a){t=T(a,"text",{y:!0,"font-size":!0,fill:!0});var s=M(t);r=G(s,n),s.forEach(b),this.h()},h(){c(t,"y",l=e[3].y+8),c(t,"font-size","16px"),c(t,"fill",i=e[2]!=null?"#F39431":Q[e[3].datum.role])},m(a,s){L(a,t,s),A(t,r)},p(a,s){s&2&&n!==(n=a[3].datum.areanm+"")&&te(r,n),s&2&&l!==(l=a[3].y+8)&&c(t,"y",l),s&6&&i!==(i=a[2]!=null?"#F39431":Q[a[3].datum.role])&&c(t,"fill",i)},d(a){a&&b(t)}}}function zs(e){let t,n,r=e[1],l=[];for(let i=0;i<r.length;i+=1)l[i]=An(Dn(e,r,i));return{c(){t=B("g");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){t=T(i,"g",{class:!0,transform:!0});var a=M(t);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(b),this.h()},h(){c(t,"class","labelsContainer"),c(t,"transform",n="translate("+e[0]+",0)")},m(i,a){L(i,t,a);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(i,[a]){if(a&6){r=i[1];let s;for(s=0;s<r.length;s+=1){const o=Dn(i,r,s);l[s]?l[s].p(o,a):(l[s]=An(o),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}a&1&&n!==(n="translate("+i[0]+",0)")&&c(t,"transform",n)},i:ae,o:ae,d(i){i&&b(t),ie(l,i)}}}function Ws(e,t,n){let{x:r,labelPlacements:l,hoverIndex:i}=t;return e.$$set=a=>{"x"in a&&n(0,r=a.x),"labelPlacements"in a&&n(1,l=a.labelPlacements),"hoverIndex"in a&&n(2,i=a.hoverIndex)},[r,l,i]}class Mr extends se{constructor(t){super(),oe(this,t,Ws,zs,fe,{x:0,labelPlacements:1,hoverIndex:2})}}function Sr(e,t,n,r){e=e.map(i=>({targetY:n(i),y:n(i),height:r(i),datum:i})),e.sort((i,a)=>i.targetY-a.targetY);const l=[];for(const i of e){const a={data:[i]};for(En(a,t),l.push(a);l.length>1&&l[l.length-2].hi>l[l.length-1].lo;){const s=l.pop(),o=l[l.length-1];o.data.push(...s.data),En(o,t)}}return l.map(i=>i.data).flat()}function En(e,t){const n=Ys(e.data),r=qs(e.data,n);e.lo=r-n/2,e.lo<t[0]?e.lo=t[0]:e.lo>t[1]-n&&(e.lo=t[1]-n),e.hi=e.lo+n,Fr(e.data,e.lo,(l,i)=>{l.y=i})}function qs(e,t){const n=[];return Fr(e,-t/2,(r,l)=>{n.push({val:r.targetY-l,weight:1/r.height})}),Ks(n)}function Fr(e,t,n){let r=t;for(const l of e)r+=l.height/2,n(l,r),r+=l.height/2}function Ys(e){let t=0;for(const n of e)t+=n.height;return t}function Ks(e){let t=0,n=0;for(const r of e)t+=r.val*r.weight,n+=r.weight;return t/n}function In(e,t,n){const r=e.slice();return r[22]=t[n],r[24]=n,r}function Mn(e,t,n){const r=e.slice();return r[22]=t[n],r[24]=n,r}function Sn(e){let t,n;function r(...l){return e[15](e[22],...l)}return t=new Ir({props:{area:e[22],lineData:e[1].filter(r),i:e[24],hoverIndex:e[6],x:e[12],y:e[7],xDomain:e[10]}}),{c(){J(t.$$.fragment)},l(l){j(t.$$.fragment,l)},m(l,i){x(t,l,i),n=!0},p(l,i){e=l;const a={};i&1&&(a.area=e[22]),i&3&&(a.lineData=e[1].filter(r)),i&64&&(a.hoverIndex=e[6]),i&4096&&(a.x=e[12]),i&128&&(a.y=e[7]),i&1024&&(a.xDomain=e[10]),t.$set(a)},i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){q(t.$$.fragment,l),n=!1},d(l){$(t,l)}}}function Fn(e){let t,n,r;function l(...s){return e[16](e[22],...s)}function i(s){e[17](s)}let a={overlay:"true",area:e[22],lineData:e[1].filter(l),i:e[24],x:e[12],y:e[7],xDomain:e[10]};return e[6]!==void 0&&(a.hoverIndex=e[6]),t=new Ir({props:a}),ce.push(()=>he(t,"hoverIndex",i)),{c(){J(t.$$.fragment)},l(s){j(t.$$.fragment,s)},m(s,o){x(t,s,o),r=!0},p(s,o){e=s;const f={};o&1&&(f.area=e[22]),o&3&&(f.lineData=e[1].filter(l)),o&4096&&(f.x=e[12]),o&128&&(f.y=e[7]),o&1024&&(f.xDomain=e[10]),!n&&o&64&&(n=!0,f.hoverIndex=e[6],de(()=>n=!1)),t.$set(f)},i(s){r||(V(t.$$.fragment,s),r=!0)},o(s){q(t.$$.fragment,s),r=!1},d(s){$(t,s)}}}function Gs(e){let t,n,r,l,i,a,s,o,f,u,d,m;i=new Dr({props:{yDomain:e[8],y:e[7],indicator:e[2]}}),a=new Is({props:{chartHeight:e[4],xDomain:e[10],x:e[12]}});let v=e[0].reverse(),p=[];for(let h=0;h<v.length;h+=1)p[h]=Sn(Mn(e,v,h));const y=h=>q(p[h],1,1,()=>{p[h]=null});let I=e[0],_=[];for(let h=0;h<I.length;h+=1)_[h]=Fn(In(e,I,h));const g=h=>q(_[h],1,1,()=>{_[h]=null});return f=new Mr({props:{x:e[12](e[10][1])+5,labelPlacements:e[11],hoverIndex:e[6]}}),{c(){t=O("div"),n=B("svg"),r=B("g"),l=B("rect"),J(i.$$.fragment),J(a.$$.fragment),s=B("g");for(let h=0;h<p.length;h+=1)p[h].c();o=B("g");for(let h=0;h<_.length;h+=1)_[h].c();J(f.$$.fragment),this.h()},l(h){t=H(h,"DIV",{class:!0});var k=M(t);n=T(k,"svg",{height:!0,width:!0});var w=M(n);r=T(w,"g",{class:!0,transform:!0});var E=M(r);l=T(E,"rect",{width:!0,height:!0,fill:!0,opacity:!0,stroke:!0}),M(l).forEach(b),j(i.$$.fragment,E),j(a.$$.fragment,E),s=T(E,"g",{class:!0});var R=M(s);for(let F=0;F<p.length;F+=1)p[F].l(R);R.forEach(b),o=T(E,"g",{class:!0});var P=M(o);for(let F=0;F<_.length;F+=1)_[F].l(P);P.forEach(b),j(f.$$.fragment,E),E.forEach(b),w.forEach(b),k.forEach(b),this.h()},h(){c(l,"width",e[9]),c(l,"height",e[4]),c(l,"fill","black"),c(l,"opacity","0.02"),c(l,"stroke","none"),c(s,"class","visibleLinesGroup"),c(o,"class","overlayLinesGroup"),c(r,"class","chart-container"),c(r,"transform",u="translate("+e[5].left+","+e[5].top+")"),c(n,"height",e[13]),c(n,"width",e[3]),c(t,"class","svg-container"),gt(()=>e[18].call(t))},m(h,k){L(h,t,k),A(t,n),A(n,r),A(r,l),x(i,r,null),x(a,r,null),A(r,s);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(s,null);A(r,o);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(o,null);x(f,r,null),d=pt(t,e[18].bind(t)),m=!0},p(h,[k]){(!m||k&512)&&c(l,"width",h[9]),(!m||k&16)&&c(l,"height",h[4]);const w={};k&256&&(w.yDomain=h[8]),k&128&&(w.y=h[7]),k&4&&(w.indicator=h[2]),i.$set(w);const E={};if(k&16&&(E.chartHeight=h[4]),k&1024&&(E.xDomain=h[10]),k&4096&&(E.x=h[12]),a.$set(E),k&5315){v=h[0].reverse();let P;for(P=0;P<v.length;P+=1){const F=Mn(h,v,P);p[P]?(p[P].p(F,k),V(p[P],1)):(p[P]=Sn(F),p[P].c(),V(p[P],1),p[P].m(s,null))}for(De(),P=v.length;P<p.length;P+=1)y(P);Ae()}if(k&5315){I=h[0];let P;for(P=0;P<I.length;P+=1){const F=In(h,I,P);_[P]?(_[P].p(F,k),V(_[P],1)):(_[P]=Fn(F),_[P].c(),V(_[P],1),_[P].m(o,null))}for(De(),P=I.length;P<_.length;P+=1)g(P);Ae()}const R={};k&5120&&(R.x=h[12](h[10][1])+5),k&2048&&(R.labelPlacements=h[11]),k&64&&(R.hoverIndex=h[6]),f.$set(R),(!m||k&32&&u!==(u="translate("+h[5].left+","+h[5].top+")"))&&c(r,"transform",u),(!m||k&8)&&c(n,"width",h[3])},i(h){if(!m){V(i.$$.fragment,h),V(a.$$.fragment,h);for(let k=0;k<v.length;k+=1)V(p[k]);for(let k=0;k<I.length;k+=1)V(_[k]);V(f.$$.fragment,h),m=!0}},o(h){q(i.$$.fragment,h),q(a.$$.fragment,h),p=p.filter(Boolean);for(let k=0;k<p.length;k+=1)q(p[k]);_=_.filter(Boolean);for(let k=0;k<_.length;k+=1)q(_[k]);q(f.$$.fragment,h),m=!1},d(h){h&&b(t),$(i),$(a),ie(p,h),ie(_,h),$(f),d()}}}function Us(e,t,n){let r,l,i,a,s,o,f,u,d,m,v=pe("areas"),{plottedAreas:p,filteredData:y,indicator:I}=t,_=400,g=500,h=200,k=["main","parent","country","uk","custom1","custom2","custom3","custom4"];const w=(F,D)=>D.areacd===F.areacd,E=(F,D)=>D.areacd===F.areacd;function R(F){u=F,n(6,u)}function P(){_=this.clientWidth,n(3,_)}return e.$$set=F=>{"plottedAreas"in F&&n(0,p=F.plottedAreas),"filteredData"in F&&n(1,y=F.filteredData),"indicator"in F&&n(2,I=F.indicator)},e.$$.update=()=>{e.$$.dirty&40&&n(9,l=_-r.left-r.right),e.$$.dirty&32&&n(4,i=g-r.top-r.bottom),e.$$.dirty&2&&n(10,a=[Math.min(...y.map(F=>F.year)),Math.max(...y.map(F=>F.year))]),e.$$.dirty&1536&&n(12,s=Ce().domain(a).range([0,l])),e.$$.dirty&6&&n(8,o=[I.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...y.map(F=>F.value))),Math.ceil(Math.max(...y.map(F=>F.value)))]),e.$$.dirty&272&&n(7,f=Ce().domain(o).range([i,0])),e.$$.dirty&195&&n(14,d=p.map(F=>({...F,yPosition:f(y.find(D=>D.areacd===F.areacd&D.year===Math.max.apply(null,y.filter(N=>N.areacd===F.areacd).map(N=>N.year))).value),areanm:v.find(D=>F.areacd===D.areacd).areanm})).filter((F,D)=>u!=null?D==u:k.includes(F.role))),e.$$.dirty&16432&&n(11,m=Sr(d,[-r.top,i],F=>F.yPosition,F=>F.areanm.length>20?34:17))},n(5,r={top:10,left:80,right:h+5,bottom:40}),n(6,u=null),[p,y,I,_,i,r,u,f,o,l,a,m,s,g,d,w,E,R,P]}class Zs extends se{constructor(t){super(),oe(this,t,Us,Gs,fe,{plottedAreas:0,filteredData:1,indicator:2})}}function Rn(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Nn(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Cn(e){let t,n,r,l=e[1],i=[];for(let o=0;o<l.length;o+=1)i[o]=Ln(Nn(e,l,o));let a=e[1],s=[];for(let o=0;o<a.length;o+=1)s[o]=Pn(Rn(e,a,o));return{c(){t=B("g");for(let o=0;o<i.length;o+=1)i[o].c();n=U(),r=B("g");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=T(o,"g",{class:!0});var f=M(t);for(let d=0;d<i.length;d+=1)i[d].l(f);f.forEach(b),n=Z(o),r=T(o,"g",{class:!0});var u=M(r);for(let d=0;d<s.length;d+=1)s[d].l(u);u.forEach(b),this.h()},h(){c(t,"class","overlayCirclesContainer"),c(r,"class","visibleCirclesContainer")},m(o,f){L(o,t,f);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);L(o,n,f),L(o,r,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(r,null)},p(o,f){if(f&14){l=o[1];let u;for(u=0;u<l.length;u+=1){const d=Nn(o,l,u);i[u]?i[u].p(d,f):(i[u]=Ln(d),i[u].c(),i[u].m(t,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=l.length}if(f&3){a=o[1];let u;for(u=0;u<a.length;u+=1){const d=Rn(o,a,u);s[u]?s[u].p(d,f):(s[u]=Pn(d),s[u].c(),s[u].m(r,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}},d(o){o&&b(t),ie(i,o),o&&b(n),o&&b(r),ie(s,o)}}}function Ln(e){let t,n,r,l,i,a;return{c(){t=B("g"),n=B("circle"),this.h()},l(s){t=T(s,"g",{transform:!0});var o=M(t);n=T(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0}),M(n).forEach(b),o.forEach(b),this.h()},h(){c(n,"hoverid",e[12]),c(n,"r",r=1.5*e[10].datum.radius),c(n,"stroke","none"),c(n,"fill","white"),c(t,"transform",l="translate("+e[10].y+","+e[10].x+")")},m(s,o){L(s,t,o),A(t,n),i||(a=[be(n,"mouseover",e[2]),be(n,"mouseleave",e[3]),be(n,"focus",e[2])],i=!0)},p(s,o){o&2&&r!==(r=1.5*s[10].datum.radius)&&c(n,"r",r),o&2&&l!==(l="translate("+s[10].y+","+s[10].x+")")&&c(t,"transform",l)},d(s){s&&b(t),i=!1,vt(a)}}}function Qs(e){let t,n,r,l;return{c(){t=B("circle"),this.h()},l(i){t=T(i,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,opacity:!0});var a=M(t);a.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"r",n=e[0]===e[12]?e[10].datum.radius+3:e[10].datum.radius),c(t,"fill",r=e[0]===e[12]?"#F39431":Q[e[10].datum.role]),c(t,"stroke","white"),c(t,"opacity",l=e[0]===e[12]||e[0]===null?1:.2)},m(i,a){L(i,t,a)},p(i,a){a&3&&n!==(n=i[0]===i[12]?i[10].datum.radius+3:i[10].datum.radius)&&c(t,"r",n),a&3&&r!==(r=i[0]===i[12]?"#F39431":Q[i[10].datum.role])&&c(t,"fill",r),a&1&&l!==(l=i[0]===i[12]||i[0]===null?1:.2)&&c(t,"opacity",l)},d(i){i&&b(t)}}}function Xs(e){let t,n,r,l,i,a,s,o;return{c(){t=B("rect"),this.h()},l(f){t=T(f,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,opacity:!0});var u=M(t);u.forEach(b),this.h()},h(){c(t,"pointer-events","none"),c(t,"transform",n=["country","uk"].includes(e[10].datum.role)?"rotate(45)":null),c(t,"x",r=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),c(t,"y",l=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),c(t,"width",i=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),c(t,"height",a=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),c(t,"fill",s=e[0]===e[12]?"#F39431":Q[e[10].datum.role]),c(t,"stroke","white"),c(t,"opacity",o=e[0]===e[12]||e[0]===null?1:.2)},m(f,u){L(f,t,u)},p(f,u){u&2&&n!==(n=["country","uk"].includes(f[10].datum.role)?"rotate(45)":null)&&c(t,"transform",n),u&3&&r!==(r=f[0]===f[12]?-.75*f[10].datum.radius-3:-.75*f[10].datum.radius)&&c(t,"x",r),u&3&&l!==(l=f[0]===f[12]?-.75*f[10].datum.radius-3:-.75*f[10].datum.radius)&&c(t,"y",l),u&3&&i!==(i=f[0]===f[12]?f[10].datum.radius*1.5+6:f[10].datum.radius*1.5)&&c(t,"width",i),u&3&&a!==(a=f[0]===f[12]?f[10].datum.radius*1.5+6:f[10].datum.radius*1.5)&&c(t,"height",a),u&3&&s!==(s=f[0]===f[12]?"#F39431":Q[f[10].datum.role])&&c(t,"fill",s),u&1&&o!==(o=f[0]===f[12]||f[0]===null?1:.2)&&c(t,"opacity",o)},d(f){f&&b(t)}}}function Pn(e){let t,n,r;function l(s,o){return o&2&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(s[10].datum.role)),n?Xs:Qs}let i=l(e,-1),a=i(e);return{c(){t=B("g"),a.c(),this.h()},l(s){t=T(s,"g",{transform:!0});var o=M(t);a.l(o),o.forEach(b),this.h()},h(){c(t,"transform",r="translate("+e[10].y+","+e[10].x+")")},m(s,o){L(s,t,o),a.m(t,null)},p(s,o){i===(i=l(s,o))&&a?a.p(s,o):(a.d(1),a=i(s),a&&(a.c(),a.m(t,null))),o&2&&r!==(r="translate("+s[10].y+","+s[10].x+")")&&c(t,"transform",r)},d(s){s&&b(t),a.d()}}}function Js(e){let t,n=e[1].length>0&&Cn(e);return{c(){n&&n.c(),t=le()},l(r){n&&n.l(r),t=le()},m(r,l){n&&n.m(r,l),L(r,t,l)},p(r,[l]){r[1].length>0?n?n.p(r,l):(n=Cn(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ae,o:ae,d(r){n&&n.d(r),r&&b(t)}}}let Bn=1,Tn=1,js=0;function xs(e,t,n){let r,{circleData:l,plottedAreas:i,y:a,hoverIndex:s,lineData:o}=t;class f{constructor(p,y,I){this.items=p,this.radiusFun=y,this.xFun=I,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,Bn),this.maxR=Math.max(...p.map(_=>y(_))),this.rng=this._sfc32(1,2,3,Bn)}calculateYPositions(){let p=this.items.map((_,g)=>({datum:_,originalIndex:g,x:this.xFun(_),y:null,placed:!1})).sort((_,g)=>_.x-g.x);p.forEach(function(_,g){_.index=g});let y=this.tieBreakFn;p.forEach(function(_){_.tieBreaker=y(_.x)});let I=[...p].sort((_,g)=>{let h=this.radiusFun(_.datum)+_.tieBreaker*Tn;return this.radiusFun(g.datum)+g.tieBreaker*Tn-h});for(let _ of I)_.placed=!0,_.y=this._getBestYPosition(_,p);return p.sort((_,g)=>_.originalIndex-g.originalIndex),p.map(_=>({datum:_.datum,x:_.x,y:_.y}))}_sfc32(p,y,I,_){let g=function(){p>>>=0,y>>>=0,I>>>=0,_>>>=0;var h=p+y|0;return p=y^y>>>9,y=I+(I<<3)|0,I=I<<21|I>>>11,_=_+1|0,h=h+_|0,I=I+h|0,(h>>>0)/4294967296};for(let h=0;h<10;h++)g();return g}_getBestYPosition(p,y){let I=[];for(let g of[-1,1]){let h,k=this.radiusFun(p.datum);for(let w=p.index+g;w>=0&&w<y.length&&(h=Math.abs(p.x-y[w].x))<k+this.maxR;w+=g){let E=y[w];if(!E.placed)continue;let R=k+this.radiusFun(E.datum);if(h>=k+this.radiusFun(E.datum))continue;let P=Math.sqrt(R*R-h*h),F=[E.y-P,E.y+P];I.push(F)}}if(I.length==0)return this.radiusFun(p.datum)*(this.rng()-.5)*js;let _=I.flat();_.push(0),_.sort((g,h)=>{let k=Math.abs(g),w=Math.abs(h);return k<w?-1:k>w?1:g-h});for(let g=0;g<_.length;g++){let h=_[g];if(I.every(k=>h<=k[0]||h>=k[1]))return h}}}let u=["main","parent","country","uk","custom1","custom2","custom3","custom4"];function d(v){n(0,s=parseFloat(Dt(this).attr("hoverid")))}function m(v){n(0,s=null)}return e.$$set=v=>{"circleData"in v&&n(5,l=v.circleData),"plottedAreas"in v&&n(6,i=v.plottedAreas),"y"in v&&n(7,a=v.y),"hoverIndex"in v&&n(0,s=v.hoverIndex),"lineData"in v&&n(4,o=v.lineData)},e.$$.update=()=>{e.$$.dirty&224&&n(1,r=new f(i,v=>"radius"in v?v.radius*1.1:5,v=>a(l.find(p=>p.areacd===v.areacd).value)).calculateYPositions()),e.$$.dirty&3&&n(4,o=s===null?r.filter(v=>u.includes(v.datum.role)):[r[s]])},[s,r,d,m,o,l,i,a]}class $s extends se{constructor(t){super(),oe(this,t,xs,Js,fe,{circleData:5,plottedAreas:6,y:7,hoverIndex:0,lineData:4})}}function Vn(e,t,n){const r=e.slice();return r[10]=t[n],r}function On(e){let t,n=e[0][0].map(zn),r=[];for(let l=0;l<n.length;l+=1)r[l]=Hn(Vn(e,n,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();t=le()},l(l){for(let i=0;i<r.length;i+=1)r[i].l(l);t=le()},m(l,i){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(l,i);L(l,t,i)},p(l,i){if(i&15){n=l[0][0].map(zn);let a;for(a=0;a<n.length;a+=1){const s=Vn(l,n,a);r[a]?r[a].p(s,i):(r[a]=Hn(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(l){ie(r,l),l&&b(t)}}}function Hn(e){let t,n,r,l,i,a;function s(...m){return e[4](e[10],...m)}function o(...m){return e[5](e[10],...m)}function f(...m){return e[6](e[10],...m)}function u(...m){return e[7](e[10],...m)}function d(...m){return e[8](e[10],...m)}return{c(){t=B("line"),this.h()},l(m){t=T(m,"line",{x1:!0,x2:!0,y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),M(t).forEach(b),this.h()},h(){c(t,"x1",n=e[0][0].find(s).y+e[1]),c(t,"x2",r=e[0][1].find(o).y+e[2]),c(t,"y1",l=e[0][0].find(f).x),c(t,"y2",i=e[0][1].find(u).x),c(t,"stroke-width","3px"),c(t,"stroke",a=e[3]!=null?"#F39431":Q[e[0][0].find(d).datum.role])},m(m,v){L(m,t,v)},p(m,v){e=m,v&3&&n!==(n=e[0][0].find(s).y+e[1])&&c(t,"x1",n),v&5&&r!==(r=e[0][1].find(o).y+e[2])&&c(t,"x2",r),v&1&&l!==(l=e[0][0].find(f).x)&&c(t,"y1",l),v&1&&i!==(i=e[0][1].find(u).x)&&c(t,"y2",i),v&9&&a!==(a=e[3]!=null?"#F39431":Q[e[0][0].find(d).datum.role])&&c(t,"stroke",a)},d(m){m&&b(t)}}}function eo(e){let t,n=e[0][0].length===e[0][1].length&&On(e);return{c(){t=B("g"),n&&n.c(),this.h()},l(r){t=T(r,"g",{class:!0});var l=M(t);n&&n.l(l),l.forEach(b),this.h()},h(){c(t,"class","slopeLinesContainer")},m(r,l){L(r,t,l),n&&n.m(t,null)},p(r,[l]){r[0][0].length===r[0][1].length?n?n.p(r,l):(n=On(r),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:ae,o:ae,d(r){r&&b(t),n&&n.d()}}}const zn=e=>e.datum.areacd;function to(e,t,n){let{lineDataArray:r,x1:l,x2:i,hoverIndex:a}=t;const s=(m,v)=>v.datum.areacd==m,o=(m,v)=>v.datum.areacd==m,f=(m,v)=>v.datum.areacd==m,u=(m,v)=>v.datum.areacd==m,d=(m,v)=>v.datum.areacd==m;return e.$$set=m=>{"lineDataArray"in m&&n(0,r=m.lineDataArray),"x1"in m&&n(1,l=m.x1),"x2"in m&&n(2,i=m.x2),"hoverIndex"in m&&n(3,a=m.hoverIndex)},[r,l,i,a,s,o,f,u,d]}class no extends se{constructor(t){super(),oe(this,t,to,eo,fe,{lineDataArray:0,x1:1,x2:2,hoverIndex:3})}}function Wn(e,t,n){const r=e.slice();return r[25]=t[n],r[26]=t,r[27]=n,r}function qn(e){let t,n;return t=new no({props:{lineDataArray:e[11],x1:e[13](e[7][0]),x2:e[13](e[7][1]),hoverIndex:e[6]}}),{c(){J(t.$$.fragment)},l(r){j(t.$$.fragment,r)},m(r,l){x(t,r,l),n=!0},p(r,l){const i={};l&2048&&(i.lineDataArray=r[11]),l&8320&&(i.x1=r[13](r[7][0])),l&8320&&(i.x2=r[13](r[7][1])),l&64&&(i.hoverIndex=r[6]),t.$set(i)},i(r){n||(V(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){$(t,r)}}}function Yn(e){let t,n,r,l,i,a=e[25]+"",s,o,f,u,d,m;function v(..._){return e[18](e[25],..._)}function p(_){e[19](_)}function y(_){e[20](_,e[27])}let I={plottedAreas:e[0],circleData:e[1].filter(v),y:e[8]};return e[6]!==void 0&&(I.hoverIndex=e[6]),e[11][e[27]]!==void 0&&(I.lineData=e[11][e[27]]),o=new $s({props:I}),ce.push(()=>he(o,"hoverIndex",p)),ce.push(()=>he(o,"lineData",y)),{c(){t=B("g"),n=B("line"),i=B("text"),s=K(a),J(o.$$.fragment),this.h()},l(_){t=T(_,"g",{transform:!0});var g=M(t);n=T(g,"line",{y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),M(n).forEach(b),i=T(g,"text",{y:!0,"text-anchor":!0,"font-size":!0,fill:!0});var h=M(i);s=G(h,a),h.forEach(b),j(o.$$.fragment,g),g.forEach(b),this.h()},h(){c(n,"y1",r=e[8](e[9][0])),c(n,"y2",l=e[8](e[9][1])-20),c(n,"stroke-width","1px"),c(n,"stroke","black"),c(i,"y","-30"),c(i,"text-anchor","middle"),c(i,"font-size","14px"),c(i,"fill","black"),c(t,"transform",d="translate("+e[13](e[25])+",0)")},m(_,g){L(_,t,g),A(t,n),A(t,i),A(i,s),x(o,t,null),m=!0},p(_,g){e=_,(!m||g&768&&r!==(r=e[8](e[9][0])))&&c(n,"y1",r),(!m||g&768&&l!==(l=e[8](e[9][1])-20))&&c(n,"y2",l),(!m||g&128)&&a!==(a=e[25]+"")&&te(s,a);const h={};g&1&&(h.plottedAreas=e[0]),g&130&&(h.circleData=e[1].filter(v)),g&256&&(h.y=e[8]),!f&&g&64&&(f=!0,h.hoverIndex=e[6],de(()=>f=!1)),!u&&g&2048&&(u=!0,h.lineData=e[11][e[27]],de(()=>u=!1)),o.$set(h),(!m||g&8320&&d!==(d="translate("+e[13](e[25])+",0)"))&&c(t,"transform",d)},i(_){m||(V(o.$$.fragment,_),m=!0)},o(_){q(o.$$.fragment,_),m=!1},d(_){_&&b(t),$(o)}}}function ro(e){let t,n,r,l,i,a,s,o,f,u,d,m,v;i=new Dr({props:{yDomain:e[9],y:e[8],indicator:e[2]}});let p=e[7][1]!=e[7][0]&&qn(e),y=e[7][0]===e[7][1]?[e[7][0]]:e[7],I=[];for(let g=0;g<y.length;g+=1)I[g]=Yn(Wn(e,y,g));const _=g=>q(I[g],1,1,()=>{I[g]=null});return u=new Mr({props:{x:e[13](e[7][1])+35+(e[11][1].length>0?Math.max(...e[11][1].map(Kn)):0),labelPlacements:e[12],hoverIndex:e[6]}}),{c(){t=O("div"),n=B("svg"),r=B("g"),l=B("g"),J(i.$$.fragment),a=B("rect"),p&&p.c(),o=le();for(let g=0;g<I.length;g+=1)I[g].c();f=le(),J(u.$$.fragment),this.h()},l(g){t=H(g,"DIV",{class:!0});var h=M(t);n=T(h,"svg",{height:!0,width:!0});var k=M(n);r=T(k,"g",{class:!0,transform:!0});var w=M(r);l=T(w,"g",{transform:!0});var E=M(l);j(i.$$.fragment,E),E.forEach(b),a=T(w,"rect",{x:!0,width:!0,height:!0,stroke:!0,fill:!0,opacity:!0}),M(a).forEach(b),p&&p.l(w),o=le();for(let R=0;R<I.length;R+=1)I[R].l(w);f=le(),j(u.$$.fragment,w),w.forEach(b),k.forEach(b),h.forEach(b),this.h()},h(){c(l,"transform","translate("+-e[15]+",0)"),c(a,"x",-e[15]/2),c(a,"width",s=e[10]+e[15]),c(a,"height",e[4]),c(a,"stroke","none"),c(a,"fill","black"),c(a,"opacity","0.02"),c(r,"class","chart-container"),c(r,"transform",d="translate("+e[5].left+","+e[5].top+")"),c(n,"height",e[14]),c(n,"width",e[3]),c(t,"class","svg-container"),gt(()=>e[21].call(t))},m(g,h){L(g,t,h),A(t,n),A(n,r),A(r,l),x(i,l,null),A(r,a),p&&p.m(r,null),A(r,o);for(let k=0;k<I.length;k+=1)I[k]&&I[k].m(r,null);A(r,f),x(u,r,null),m=pt(t,e[21].bind(t)),v=!0},p(g,[h]){const k={};if(h&512&&(k.yDomain=g[9]),h&256&&(k.y=g[8]),h&4&&(k.indicator=g[2]),i.$set(k),(!v||h&1024&&s!==(s=g[10]+g[15]))&&c(a,"width",s),(!v||h&16)&&c(a,"height",g[4]),g[7][1]!=g[7][0]?p?(p.p(g,h),h&128&&V(p,1)):(p=qn(g),p.c(),V(p,1),p.m(r,o)):p&&(De(),q(p,1,1,()=>{p=null}),Ae()),h&11203){y=g[7][0]===g[7][1]?[g[7][0]]:g[7];let E;for(E=0;E<y.length;E+=1){const R=Wn(g,y,E);I[E]?(I[E].p(R,h),V(I[E],1)):(I[E]=Yn(R),I[E].c(),V(I[E],1),I[E].m(r,f))}for(De(),E=y.length;E<I.length;E+=1)_(E);Ae()}const w={};h&10368&&(w.x=g[13](g[7][1])+35+(g[11][1].length>0?Math.max(...g[11][1].map(Kn)):0)),h&4096&&(w.labelPlacements=g[12]),h&64&&(w.hoverIndex=g[6]),u.$set(w),(!v||h&32&&d!==(d="translate("+g[5].left+","+g[5].top+")"))&&c(r,"transform",d),(!v||h&8)&&c(n,"width",g[3])},i(g){if(!v){V(i.$$.fragment,g),V(p);for(let h=0;h<y.length;h+=1)V(I[h]);V(u.$$.fragment,g),v=!0}},o(g){q(i.$$.fragment,g),q(p),I=I.filter(Boolean);for(let h=0;h<I.length;h+=1)q(I[h]);q(u.$$.fragment,g),v=!1},d(g){g&&b(t),$(i),p&&p.d(),ie(I,g),$(u),m()}}}const Kn=e=>e.y;function lo(e,t,n){let r,l,i,a,s,o,f,u,d,m,v=pe("areas"),{plottedAreas:p,filteredData:y,indicator:I,selectedAreas:_}=t,g=400,h=470,k=200,w=120,E=["main","parent","country","uk","custom1","custom2","custom3","custom4"],R=[[],[]];const P=(S,Y)=>Y.year==S;function F(S){u=S,n(6,u)}function D(S,Y){e.$$.not_equal(R[Y],S)&&(R[Y]=S,n(11,R))}function N(){g=this.clientWidth,n(3,g)}return e.$$set=S=>{"plottedAreas"in S&&n(0,p=S.plottedAreas),"filteredData"in S&&n(1,y=S.filteredData),"indicator"in S&&n(2,I=S.indicator),"selectedAreas"in S&&n(16,_=S.selectedAreas)},e.$$.update=()=>{e.$$.dirty&40&&n(10,l=g-r.left-r.right),e.$$.dirty&32&&n(4,i=h-r.top-r.bottom),e.$$.dirty&2&&n(7,a=[Math.min(...y.map(S=>S.year)),Math.max(...y.map(S=>S.year))]),e.$$.dirty&1152&&n(13,s=Ce().domain(a).range([0,l])),e.$$.dirty&6&&n(9,o=[I.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...y.map(S=>S.value))),Math.ceil(Math.max(...y.map(S=>S.value)))]),e.$$.dirty&528&&n(8,f=Ce().domain(o).range([i,0])),e.$$.dirty&1&&n(0,p=p.map(S=>({...S,radius:E.includes(S.role)?10:5}))),e.$$.dirty&451&&n(17,d=p.map(S=>({...S,yPosition:f(y.find(Y=>Y.areacd===S.areacd&Y.year===a[1]).value),areanm:v.find(Y=>S.areacd===Y.areacd).areanm})).filter((S,Y)=>u!=null?Y==u:E.includes(S.role))),e.$$.dirty&131120&&n(12,m=Sr(d,[-r.top,i],S=>S.yPosition,S=>S.areanm.length>20?34:17))},n(5,r={top:40,left:200,right:k+5,bottom:40}),n(6,u=null),[p,y,I,g,i,r,u,a,f,o,l,R,m,s,h,w,_,d,P,F,D,N]}class io extends se{constructor(t){super(),oe(this,t,lo,ro,fe,{plottedAreas:0,filteredData:1,indicator:2,selectedAreas:16})}}function Gn(e){let t,n=e[1].unit+"",r;return{c(){t=O("p"),r=K(n),this.h()},l(l){t=H(l,"P",{class:!0});var i=M(t);r=G(i,n),i.forEach(b),this.h()},h(){c(t,"class","svelte-awo2mx")},m(l,i){L(l,t,i),A(t,r)},p(l,i){i&2&&n!==(n=l[1].unit+"")&&te(r,n)},d(l){l&&b(t)}}}function ao(e){let t,n;return t=new Gr({props:{selectedAreas:e[5],filteredData:e[9]}}),{c(){J(t.$$.fragment)},l(r){j(t.$$.fragment,r)},m(r,l){x(t,r,l),n=!0},p(r,l){const i={};l&32&&(i.selectedAreas=r[5]),l&512&&(i.filteredData=r[9]),t.$set(i)},i(r){n||(V(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){$(t,r)}}}function so(e){let t,n;return t=new io({props:{selectedAreas:e[5],plottedAreas:e[7],filteredData:e[9],indicator:e[1]}}),{c(){J(t.$$.fragment)},l(r){j(t.$$.fragment,r)},m(r,l){x(t,r,l),n=!0},p(r,l){const i={};l&32&&(i.selectedAreas=r[5]),l&128&&(i.plottedAreas=r[7]),l&512&&(i.filteredData=r[9]),l&2&&(i.indicator=r[1]),t.$set(i)},i(r){n||(V(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){$(t,r)}}}function oo(e){let t,n;return t=new Zs({props:{plottedAreas:e[7],filteredData:e[9],indicator:e[1]}}),{c(){J(t.$$.fragment)},l(r){j(t.$$.fragment,r)},m(r,l){x(t,r,l),n=!0},p(r,l){const i={};l&128&&(i.plottedAreas=r[7]),l&512&&(i.filteredData=r[9]),l&2&&(i.indicator=r[1]),t.$set(i)},i(r){n||(V(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){$(t,r)}}}function fo(e){let t,n,r,l,i,a,s=e[1].label+"",o,f,u,d,m,v,p,y,I,_,g,h,k,w,E;function R(W){e[13](W)}let P={optionsArray:e[10]};e[6]!==void 0&&(P.chosenChart=e[6]),n=new ks({props:P}),ce.push(()=>he(n,"chosenChart",R));let F=e[1].unit!=null&&Gn(e);function D(W){e[15](W)}let N={selectedAreas:e[5].filter(e[14]),areasWithData:e[8]};e[0]!==void 0&&(N.checkboxedRoles=e[0]),d=new wr({props:N}),ce.push(()=>he(d,"checkboxedRoles",D));const S=[oo,so,ao],Y=[];function X(W,ee){return W[10][W[6]-1]==="Timeseries"?0:W[10][W[6]-1]==="Beeswarm"?1:W[10][W[6]-1]==="Map"?2:-1}return~(p=X(e))&&(y=Y[p]=S[p](e)),{c(){t=O("div"),J(n.$$.fragment),l=U(),i=O("div"),a=O("h3"),o=K(s),f=U(),F&&F.c(),u=U(),J(d.$$.fragment),v=U(),y&&y.c(),I=U(),_=O("p"),g=K("Source: Office for National Statistics"),h=U(),k=O("img"),this.h()},l(W){t=H(W,"DIV",{class:!0});var ee=M(t);j(n.$$.fragment,ee),l=Z(ee),i=H(ee,"DIV",{class:!0});var re=M(i);a=H(re,"H3",{class:!0});var _e=M(a);o=G(_e,s),_e.forEach(b),f=Z(re),F&&F.l(re),u=Z(re),j(d.$$.fragment,re),v=Z(re),y&&y.l(re),I=Z(re),_=H(re,"P",{class:!0});var ge=M(_);g=G(ge,"Source: Office for National Statistics"),ge.forEach(b),re.forEach(b),h=Z(ee),k=H(ee,"IMG",{style:!0,width:!0,src:!0,alt:!0}),ee.forEach(b),this.h()},h(){c(a,"class","svelte-awo2mx"),c(_,"class","svelte-awo2mx"),c(i,"class","chartOutlineGroup svelte-awo2mx"),ne(k,"padding-top","10px"),c(k,"width","75%"),nr(k.src,w=`${Oe}/img/image1.png`)||c(k,"src",w),c(k,"alt","download buttons"),c(t,"class","mainChartContainer")},m(W,ee){L(W,t,ee),x(n,t,null),A(t,l),A(t,i),A(i,a),A(a,o),A(i,f),F&&F.m(i,null),A(i,u),x(d,i,null),A(i,v),~p&&Y[p].m(i,null),A(i,I),A(i,_),A(_,g),A(t,h),A(t,k),E=!0},p(W,[ee]){const re={};!r&&ee&64&&(r=!0,re.chosenChart=W[6],de(()=>r=!1)),n.$set(re),(!E||ee&2)&&s!==(s=W[1].label+"")&&te(o,s),W[1].unit!=null?F?F.p(W,ee):(F=Gn(W),F.c(),F.m(i,u)):F&&(F.d(1),F=null);const _e={};ee&60&&(_e.selectedAreas=W[5].filter(W[14])),ee&256&&(_e.areasWithData=W[8]),!m&&ee&1&&(m=!0,_e.checkboxedRoles=W[0],de(()=>m=!1)),d.$set(_e);let ge=p;p=X(W),p===ge?~p&&Y[p].p(W,ee):(y&&(De(),q(Y[ge],1,1,()=>{Y[ge]=null}),Ae()),~p?(y=Y[p],y?y.p(W,ee):(y=Y[p]=S[p](W),y.c()),V(y,1),y.m(i,I)):y=null)},i(W){E||(V(n.$$.fragment,W),V(d.$$.fragment,W),V(y),E=!0)},o(W){q(n.$$.fragment,W),q(d.$$.fragment,W),q(y),E=!1},d(W){W&&b(t),$(n),F&&F.d(),$(d),~p&&Y[p].d()}}}function uo(e,t,n){let r,l,i,a,{indicator:s,latestData:o,otherData:f,initialData:u,selectedAreas:d,checkboxedRoles:m,siblingAreas:v}=t,p=1,y=[...f,...u].filter(h=>h.areacd===d.find(k=>k.role==="main").data.areacd).length>0?["Timeseries","Beeswarm"]:["Beeswarm"];function I(h){p=h,n(6,p)}const _=h=>[...o,...f,...u].filter(k=>h.data.areacd===k.areacd).length>0&h.role!=="main";function g(h){m=h,n(0,m)}return e.$$set=h=>{"indicator"in h&&n(1,s=h.indicator),"latestData"in h&&n(2,o=h.latestData),"otherData"in h&&n(3,f=h.otherData),"initialData"in h&&n(4,u=h.initialData),"selectedAreas"in h&&n(5,d=h.selectedAreas),"checkboxedRoles"in h&&n(0,m=h.checkboxedRoles),"siblingAreas"in h&&n(11,v=h.siblingAreas)},e.$$.update=()=>{e.$$.dirty&92&&n(12,r=(y[p-1]==="Timeseries"?[...o,...u,...f]:y[p-1]==="Beeswarm"?[...o,...u]:o).sort((h,k)=>h.year-k.year)),e.$$.dirty&4096&&n(8,l=[...new Set(r.map(h=>h.areacd))]),e.$$.dirty&2337&&n(7,i=[...d.map(h=>h.role==="main"||m[h.role]?{role:h.role,areacd:h.data.areacd}:null).filter(h=>h!=null),...m.custom===null||m.custom===void 0?[]:m.custom.map((h,k)=>({role:"custom"+(k+1),areacd:h.areacd})),...m.neighbour?v.neighbours.map(h=>({role:"neighbour",areacd:h})):[],...m.cluster?v.similar.map(h=>({role:"cluster",areacd:h})):[]].filter(h=>l.includes(h.areacd))),e.$$.dirty&4224&&n(9,a=r.filter(h=>i.map(k=>k.areacd).includes(h.areacd)))},[m,s,o,f,u,d,p,i,l,a,y,v,r,I,_,g]}class co extends se{constructor(t){super(),oe(this,t,uo,fo,fe,{indicator:1,latestData:2,otherData:3,initialData:4,selectedAreas:5,checkboxedRoles:0,siblingAreas:11})}}function Un(e,t,n){const r=e.slice();return r[16]=t[n],r}function Zn(e){let t,n,r;function l(...s){return e[14](e[16],...s)}function i(s){e[15](s)}let a={indicator:e[16],latestData:e[1].filter(l),otherData:e[16].code in e[4]?e[4][e[16].code]:[],initialData:e[16].code in e[5]?e[5][e[16].code]:[],selectedAreas:e[3],siblingAreas:e[6]};return e[2]!==void 0&&(a.checkboxedRoles=e[2]),t=new co({props:a}),ce.push(()=>he(t,"checkboxedRoles",i)),{c(){J(t.$$.fragment)},l(s){j(t.$$.fragment,s)},m(s,o){x(t,s,o),r=!0},p(s,o){e=s;const f={};o&2&&(f.latestData=e[1].filter(l)),o&16&&(f.otherData=e[16].code in e[4]?e[4][e[16].code]:[]),o&32&&(f.initialData=e[16].code in e[5]?e[5][e[16].code]:[]),o&8&&(f.selectedAreas=e[3]),o&64&&(f.siblingAreas=e[6]),!n&&o&4&&(n=!0,f.checkboxedRoles=e[2],de(()=>n=!1)),t.$set(f)},i(s){r||(V(t.$$.fragment,s),r=!0)},o(s){q(t.$$.fragment,s),r=!1},d(s){$(t,s)}}}function ho(e){let t,n,r,l,i,a=e[3].find(Qn).data.areanm+"",s,o,f,u,d,m,v;function p(h){e[13](h)}let y={trimmedIndicators:e[7],latestData:e[1],primaryIndicators:e[8],secondaryIndicators:e[9],otherIndicators:e[10],selectedAreas:e[3],siblingAreas:e[6]};e[2]!==void 0&&(y.checkboxedRoles=e[2]),u=new vs({props:y}),ce.push(()=>he(u,"checkboxedRoles",p));let I=e[8],_=[];for(let h=0;h<I.length;h+=1)_[h]=Zn(Un(e,I,h));const g=h=>q(_[h],1,1,()=>{_[h]=null});return{c(){t=O("section"),n=O("h1"),r=K(e[0]),l=U(),i=O("p"),s=K(a),o=K(" has above average employment. Its primary industry is retail."),f=U(),J(u.$$.fragment),m=U();for(let h=0;h<_.length;h+=1)_[h].c();this.h()},l(h){t=H(h,"SECTION",{title:!0,class:!0});var k=M(t);n=H(k,"H1",{});var w=M(n);r=G(w,e[0]),w.forEach(b),l=Z(k),i=H(k,"P",{});var E=M(i);s=G(E,a),o=G(E," has above average employment. Its primary industry is retail."),E.forEach(b),f=Z(k),j(u.$$.fragment,k),m=Z(k);for(let R=0;R<_.length;R+=1)_[R].l(k);k.forEach(b),this.h()},h(){c(t,"title",e[0]),c(t,"class","svelte-v10b0q")},m(h,k){L(h,t,k),A(t,n),A(n,r),A(t,l),A(t,i),A(i,s),A(i,o),A(t,f),x(u,t,null),A(t,m);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);v=!0},p(h,[k]){(!v||k&1)&&te(r,h[0]),(!v||k&8)&&a!==(a=h[3].find(Qn).data.areanm+"")&&te(s,a);const w={};if(k&2&&(w.latestData=h[1]),k&8&&(w.selectedAreas=h[3]),k&64&&(w.siblingAreas=h[6]),!d&&k&4&&(d=!0,w.checkboxedRoles=h[2],de(()=>d=!1)),u.$set(w),k&382){I=h[8];let E;for(E=0;E<I.length;E+=1){const R=Un(h,I,E);_[E]?(_[E].p(R,k),V(_[E],1)):(_[E]=Zn(R),_[E].c(),V(_[E],1),_[E].m(t,null))}for(De(),E=I.length;E<_.length;E+=1)g(E);Ae()}(!v||k&1)&&c(t,"title",h[0])},i(h){if(!v){V(u.$$.fragment,h);for(let k=0;k<I.length;k+=1)V(_[k]);v=!0}},o(h){q(u.$$.fragment,h),_=_.filter(Boolean);for(let k=0;k<_.length;k+=1)q(_[k]);v=!1},d(h){h&&b(t),$(u),ie(_,h)}}}const Qn=e=>e.role==="main";function _o(e,t,n){let{sectionName:r,sectionIndicators:l,indicators:i,selectedAreas:a,latestData:s,otherData:o,initialData:f,checkboxedRoles:u,siblingAreas:d}=t;r=r[0].toUpperCase()+r.substring(1),s=s.filter(h=>l.map(k=>k.id).includes(h.codeId));const m=i.filter(h=>l.map(k=>k.id).includes(h.id)),v=m.filter(h=>l.filter(k=>k.priority==="p").map(k=>k.id).includes(h.id)),p=m.filter(h=>l.filter(k=>k.priority==="s").map(k=>k.id).includes(h.id)),y=m.filter(h=>![...v.map(k=>k.id),...p.map(k=>k.id)].includes(h.id));function I(h){u=h,n(2,u)}const _=(h,k)=>k.codeId===h.id;function g(h){u=h,n(2,u)}return e.$$set=h=>{"sectionName"in h&&n(0,r=h.sectionName),"sectionIndicators"in h&&n(11,l=h.sectionIndicators),"indicators"in h&&n(12,i=h.indicators),"selectedAreas"in h&&n(3,a=h.selectedAreas),"latestData"in h&&n(1,s=h.latestData),"otherData"in h&&n(4,o=h.otherData),"initialData"in h&&n(5,f=h.initialData),"checkboxedRoles"in h&&n(2,u=h.checkboxedRoles),"siblingAreas"in h&&n(6,d=h.siblingAreas)},[r,s,u,a,o,f,d,m,v,p,y,l,i,I,_,g]}class mo extends se{constructor(t){super(),oe(this,t,_o,ho,fe,{sectionName:0,sectionIndicators:11,indicators:12,selectedAreas:3,latestData:1,otherData:4,initialData:5,checkboxedRoles:2,siblingAreas:6})}}function Xn(e,t,n){const r=e.slice();return r[18]=t[n],r}function go(e){let t=e[5].find(wo).data.areanm+"",n;return{c(){n=K(t)},l(r){n=G(r,t)},m(r,l){L(r,n,l)},p:ae,d(r){r&&b(n)}}}function po(e){let t,n=e[5].find(Do).data.areanm+"",r;return{c(){t=K("Get localised data, insights and trends for "),r=K(n)},l(l){t=G(l,"Get localised data, insights and trends for "),r=G(l,n)},m(l,i){L(l,t,i),L(l,r,i)},p:ae,d(l){l&&b(t),l&&b(r)}}}function vo(e){let t,n,r,l;return t=new Yr({props:{$$slots:{default:[go]},$$scope:{ctx:e}}}),r=new Kr({props:{$$slots:{default:[po]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),n=U(),J(r.$$.fragment)},l(i){j(t.$$.fragment,i),n=Z(i),j(r.$$.fragment,i)},m(i,a){x(t,i,a),L(i,n,a),x(r,i,a),l=!0},p(i,a){const s={};a&2097152&&(s.$$scope={dirty:a,ctx:i}),t.$set(s);const o={};a&2097152&&(o.$$scope={dirty:a,ctx:i}),r.$set(o)},i(i){l||(V(t.$$.fragment,i),V(r.$$.fragment,i),l=!0)},o(i){q(t.$$.fragment,i),q(r.$$.fragment,i),l=!1},d(i){$(t,i),i&&b(n),$(r,i)}}}function Jn(e){let t,n,r;function l(...s){return e[8](e[18],...s)}function i(s){e[9](s)}let a={sectionName:e[18],sectionIndicators:e[0].configData.areaSections.filter(l),indicators:e[4],selectedAreas:e[5],latestData:e[3],initialData:e[0].preloadedData.initialData,otherData:e[0].preloadedData.otherData,siblingAreas:e[1]};return e[2]!==void 0&&(a.checkboxedRoles=e[2]),t=new mo({props:a}),ce.push(()=>he(t,"checkboxedRoles",i)),{c(){J(t.$$.fragment)},l(s){j(t.$$.fragment,s)},m(s,o){x(t,s,o),r=!0},p(s,o){e=s;const f={};o&1&&(f.sectionName=e[18]),o&1&&(f.sectionIndicators=e[0].configData.areaSections.filter(l)),o&1&&(f.initialData=e[0].preloadedData.initialData),o&1&&(f.otherData=e[0].preloadedData.otherData),o&2&&(f.siblingAreas=e[1]),!n&&o&4&&(n=!0,f.checkboxedRoles=e[2],de(()=>n=!1)),t.$set(f)},i(s){r||(V(t.$$.fragment,s),r=!0)},o(s){q(t.$$.fragment,s),r=!1},d(s){$(t,s)}}}function bo(e){let t;return{c(){t=K("Find parent, child and neighbouring areas")},l(n){t=G(n,"Find parent, child and neighbouring areas")},m(n,r){L(n,t,r)},d(n){n&&b(t)}}}function yo(e){let t,n,r,l,i,a,s,o,f,u,d,m,v;t=new ol({props:{areaKeyIndicators:e[0].configData.areaKeyIndicators,latestData:e[3].filter(e[6]),initialData:e[0].preloadedData.initialData,trimmedIndicators:e[4].filter(e[7]),selectedAreas:e[5]}});let p=[...new Set(e[0].configData.areaSections.map(jn))],y=[];for(let _=0;_<p.length;_+=1)y[_]=Jn(Xn(e,p,_));const I=_=>q(y[_],1,1,()=>{y[_]=null});return i=new nl({props:{$$slots:{default:[bo]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),n=U();for(let _=0;_<y.length;_+=1)y[_].c();r=U(),l=O("section"),J(i.$$.fragment),a=U(),s=O("section"),o=O("h2"),f=K("Get the data"),u=U(),d=O("p"),m=K("Here, you can find information and links to the data."),this.h()},l(_){j(t.$$.fragment,_),n=Z(_);for(let E=0;E<y.length;E+=1)y[E].l(_);r=Z(_),l=H(_,"SECTION",{title:!0,class:!0});var g=M(l);j(i.$$.fragment,g),g.forEach(b),a=Z(_),s=H(_,"SECTION",{title:!0,class:!0});var h=M(s);o=H(h,"H2",{class:!0});var k=M(o);f=G(k,"Get the data"),k.forEach(b),u=Z(h),d=H(h,"P",{});var w=M(d);m=G(w,"Here, you can find information and links to the data."),w.forEach(b),h.forEach(b),this.h()},h(){c(l,"title","Related areas"),c(l,"class","svelte-r2srs5"),c(o,"class","ons-u-mt-xl"),c(s,"title","Get the data"),c(s,"class","svelte-r2srs5")},m(_,g){x(t,_,g),L(_,n,g);for(let h=0;h<y.length;h+=1)y[h]&&y[h].m(_,g);L(_,r,g),L(_,l,g),x(i,l,null),L(_,a,g),L(_,s,g),A(s,o),A(o,f),A(s,u),A(s,d),A(d,m),v=!0},p(_,g){const h={};if(g&1&&(h.areaKeyIndicators=_[0].configData.areaKeyIndicators),g&1&&(h.latestData=_[3].filter(_[6])),g&1&&(h.initialData=_[0].preloadedData.initialData),g&1&&(h.trimmedIndicators=_[4].filter(_[7])),t.$set(h),g&63){p=[...new Set(_[0].configData.areaSections.map(jn))];let w;for(w=0;w<p.length;w+=1){const E=Xn(_,p,w);y[w]?(y[w].p(E,g),V(y[w],1)):(y[w]=Jn(E),y[w].c(),V(y[w],1),y[w].m(r.parentNode,r))}for(De(),w=p.length;w<y.length;w+=1)I(w);Ae()}const k={};g&2097152&&(k.$$scope={dirty:g,ctx:_}),i.$set(k)},i(_){if(!v){V(t.$$.fragment,_);for(let g=0;g<p.length;g+=1)V(y[g]);V(i.$$.fragment,_),v=!0}},o(_){q(t.$$.fragment,_),y=y.filter(Boolean);for(let g=0;g<y.length;g+=1)q(y[g]);q(i.$$.fragment,_),v=!1},d(_){$(t,_),_&&b(n),ie(y,_),_&&b(r),_&&b(l),$(i),_&&b(a),_&&b(s)}}}function ko(e){let t,n,r,l;return t=new qr({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Oe}/`},{label:"Find a local area",url:`${Oe}/areas`},{label:e[5].find(Ao).data.areanm}],$$slots:{default:[vo]},$$scope:{ctx:e}}}),r=new Ur({props:{contentsLabel:"Explore this area",$$slots:{default:[yo]},$$scope:{ctx:e}}}),{c(){J(t.$$.fragment),n=U(),J(r.$$.fragment)},l(i){j(t.$$.fragment,i),n=Z(i),j(r.$$.fragment,i)},m(i,a){x(t,i,a),L(i,n,a),x(r,i,a),l=!0},p(i,[a]){const s={};a&2097152&&(s.$$scope={dirty:a,ctx:i}),t.$set(s);const o={};a&2097159&&(o.$$scope={dirty:a,ctx:i}),r.$set(o)},i(i){l||(V(t.$$.fragment,i),V(r.$$.fragment,i),l=!0)},o(i){q(t.$$.fragment,i),q(r.$$.fragment,i),l=!1},d(i){$(t,i),i&&b(n),$(r,i)}}}const wo=e=>e.role==="main",Do=e=>e.role==="main",Ao=e=>e.role==="main",jn=e=>e.section;function Eo(e,t,n){let r,{data:l}=t;console.log(l);let i=pe("latestData"),a=pe("areas"),s=pe("areasParentsLookup"),o=pe("areasGeogLevel"),f=pe("indicators"),u=pe("areasGeogInfo"),d=s.find(w=>w.areacd===l.areaCode),m=[];m.push({data:a.find(w=>w.areacd===l.areaCode),role:"main"}),m.push({data:a.find(w=>w.areacd===d.parentcd),role:"parent"}),d.countrycd!==null&d.parentcd!==d.countrycd&&m.push({data:a.find(w=>w.areacd===d.countrycd),role:"country"}),d.parentcd!=="K02000001"&&m.push({data:a.find(w=>w.areacd==="K02000001"),role:"uk"});let v=o.find(w=>w.areacd===l.areaCode).level,p=o.filter(w=>["uk","country"].includes(v)?w.level===v:v==="region"?["region","country"].includes(w.level):v==="both"?["both","lower"].includes(w.level):["both",v].includes(w.level)),y=u.find(w=>w.areacd===l.areaCode).headline,I={};I.neighbours=s.filter(w=>w.areacd!=l.areaCode&w.parentcd===d.parentcd&p.map(E=>E.areacd).includes(w.areacd)).map(w=>w.areacd),I.similar=y===null?[]:u.filter(w=>w.areacd!=l.areaCode&w.headline===y&p.map(E=>E.areacd).includes(w.areacd)).map(w=>w.areacd),I.siblings=s.filter(w=>w.areacd!=l.areaCode&p.map(E=>E.areacd).includes(w.areacd)).map(w=>w.areacd);const _=w=>l.configData.areaKeyIndicators.map(E=>E.id).includes(w.codeId),g=w=>l.configData.areaKeyIndicators.map(E=>E.id).includes(w.id),h=(w,E)=>E.section===w;function k(w){r=w,n(2,r)}return e.$$set=w=>{"data"in w&&n(0,l=w.data)},n(2,r={parent:!0,country:!0,uk:!0,neighbour:!1,cluster:!1,custom:null}),console.log(m),[l,I,r,i,f,m,_,g,h,k]}class Lo extends se{constructor(t){super(),oe(this,t,Eo,ko,fe,{data:0})}}export{Lo as component};
