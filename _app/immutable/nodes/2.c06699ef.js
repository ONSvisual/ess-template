import{P as D}from"../chunks/public.73b3fb0a.js";import{b as s}from"../chunks/paths.7fd8b6af.js";import{g as $,a as m}from"../chunks/utils.bdf56f5c.js";import{P as I}from"../chunks/index.55d451b5.js";import{b as h,c as S,i as u}from"../chunks/config.b800103c.js";import{s as j,f as k}from"../chunks/selectedAreasStore.774560e6.js";import{L as F}from"../chunks/layout.ba2c90bc.js";const x=D,C="always";async function L({fetch:d,params:f}){let g={"double-beeswarm":"data2",map:"data1",line:"data2"},l=f.code in h?h.params.code:S;l.forEach(a=>{a.indicator=u.find(e=>a.code==e.code)});const y=await $(`${s}/data/csv/areas.csv`,d);j.set(y.find(a=>a.areacd===f.code));let t=k(I(j),[!0,!0,!0,!0,null],y);console.log(l);let n=[...new Map(l.map(({type:a,code:e})=>({type:g[a],code:e,concat:g[a]+"-"+e})).map(a=>[a.concat,a])).values()],_=[],v=[];console.log(n);for(var r=0;r<n.length;r++){let a=u.find(e=>e.code==n[r].code);if(console.log(a),n[r].type=="data1"){let e=await m(`${s}/data/json/indicator-raw/`+a.years[1]+"/"+a.code+".json",d);_.push({code:a.code,year:a.years[1],data:e})}else if(n[r].type=="data2")for(var o=0;o<t.length;o++){let e=await m(`${s}/data/json/area/`+a.code+"/"+t[o].areacd+".json",d);e.areanm=t[o].areanm,e.code=a.code,e.role=t[o].role,v.push(e)}}let w=[],A=[],b=["population_density","population","female_life_expectancy","gdhi"],i=t.filter(a=>["main","parent","country"].includes(a.role));console.log(i);for(var r=0;r<b.length;r++){let e=u.find(P=>P.code==b[r]);for(var o=0;o<i.length;o++){let c=await m(`${s}/data/json/area/`+e.code+"/"+i[o].areacd+".json",d);c.areanm=t[o].areanm,c.indicator=e,c.role=t[o].role,w.push(c);let p=await m(`${s}/data/json/rank-area/`+e.code+"/"+i[o].areacd+".json",d);p.areanm=t[o].areanm,p.indicator=e,p.role=t[o].role,A.push(p)}}return{componentsArray:l,preloadedAreas:t,data1:_,data2:v,data3:w,data4:A,dataImportingInstructions:n}}const E=Object.freeze(Object.defineProperty({__proto__:null,load:L,prerender:x,trailingSlash:C},Symbol.toStringTag,{value:"Module"}));export{F as component,E as universal};
