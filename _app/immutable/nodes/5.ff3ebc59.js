//js
import{S as se,i as re,s as oe,k as j,l as N,m as G,h as _,n as P,H as z,p as I,b as S,g as p,v as we,d as C,f as ke,P as Qe,w as K,Q as B,y as L,z as F,A as O,R as W,B as M,T as ie,U as ge,a as V,c as D,e as _e,V as Ie,q as X,r as $,C as Le,D as Ue}from"../chunks/index.fbe12a3f.js";import{b as x}from"../chunks/paths.39458436.js";import{T as Ye,H as Je,S as Xe}from"../chunks/Subhead.546df5c9.js";import{h as $e}from"../chunks/singletons.0c565512.js";import{g as xe,a as et,r as tt,c as lt}from"../chunks/config.024f8fcf.js";import{C as nt,a as at}from"../chunks/Cards.7ae8a710.js";import{C as it}from"../chunks/Card.08f91b3f.js";import{S as st}from"../chunks/Select.b06be71c.js";import{S as rt}from"../chunks/Spacer.30b6b191.js";const ot=$e("goto");function be(t){let e,l,n,a,s,o,u,f;function r(c){t[38](c)}function m(c){t[39](c)}function d(c){t[40](c)}function w(c){t[41](c)}function E(c){t[42](c)}function T(c){t[43](c)}let k={id:t[3],container:t[5],items:t[4],placeholder:t[2],isMulti:t[9],isSearchable:t[6],groupBy:t[22],loadOptions:t[12],getSelectionLabel:t[13],getOptionLabel:t[21],itemFilter:t[19],ariaValues:t[25],ariaListOpen:t[26],ariaFocused:t[27],noOptionsMessage:t[20],indicatorSvg:t[23],containerStyles:t[24],optionIdentifier:t[8],showIndicator:!0,isClearable:t[7]?!t[9]:!1};return t[16]!==void 0&&(k.isFocused=t[16]),t[0]!==void 0&&(k.value=t[0]),t[17]!==void 0&&(k.listOpen=t[17]),t[1]!==void 0&&(k.filterText=t[1]),t[14]!==void 0&&(k.isWaiting=t[14]),t[18]!==void 0&&(k.handleClear=t[18]),e=new st({props:k}),K.push(()=>B(e,"isFocused",r)),K.push(()=>B(e,"value",m)),K.push(()=>B(e,"listOpen",d)),K.push(()=>B(e,"filterText",w)),K.push(()=>B(e,"isWaiting",E)),K.push(()=>B(e,"handleClear",T)),e.$on("select",t[28]),e.$on("clear",t[44]),e.$on("loaded",t[45]),e.$on("error",t[46]),{c(){L(e.$$.fragment)},l(c){F(e.$$.fragment,c)},m(c,h){O(e,c,h),f=!0},p(c,h){const g={};h[0]&8&&(g.id=c[3]),h[0]&32&&(g.container=c[5]),h[0]&16&&(g.items=c[4]),h[0]&4&&(g.placeholder=c[2]),h[0]&512&&(g.isMulti=c[9]),h[0]&64&&(g.isSearchable=c[6]),h[0]&8192&&(g.getSelectionLabel=c[13]),h[0]&524288&&(g.itemFilter=c[19]),h[0]&1048576&&(g.noOptionsMessage=c[20]),h[0]&256&&(g.optionIdentifier=c[8]),h[0]&640&&(g.isClearable=c[7]?!c[9]:!1),!l&&h[0]&65536&&(l=!0,g.isFocused=c[16],W(()=>l=!1)),!n&&h[0]&1&&(n=!0,g.value=c[0],W(()=>n=!1)),!a&&h[0]&131072&&(a=!0,g.listOpen=c[17],W(()=>a=!1)),!s&&h[0]&2&&(s=!0,g.filterText=c[1],W(()=>s=!1)),!o&&h[0]&16384&&(o=!0,g.isWaiting=c[14],W(()=>o=!1)),!u&&h[0]&262144&&(u=!0,g.handleClear=c[18],W(()=>u=!1)),e.$set(g)},i(c){f||(p(e.$$.fragment,c),f=!0)},o(c){C(e.$$.fragment,c),f=!1},d(c){M(e,c)}}}function ft(t){let e,l,n=t[4]&&be(t);return{c(){e=j("div"),n&&n.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var s=G(e);n&&n.l(s),s.forEach(_),this.h()},h(){P(e,"class","selectbox svelte-1e3l8fq"),z(e,"multi-selected",t[0]&&t[9]),z(e,"focused",t[16]),z(e,"selected",t[0]&&!t[17]&&!t[9]),I(e,"--firstItem",t[10][0%t[10].length]),I(e,"--secondItem",t[10][1%t[10].length]),I(e,"--thirdItem",t[10][2%t[10].length]),I(e,"--fourthItem",t[10][3%t[10].length]),I(e,"--borderColor",t[11])},m(a,s){S(a,e,s),n&&n.m(e,null),t[47](e),l=!0},p(a,s){a[4]?n?(n.p(a,s),s[0]&16&&p(n,1)):(n=be(a),n.c(),p(n,1),n.m(e,null)):n&&(we(),C(n,1,1,()=>{n=null}),ke()),(!l||s[0]&513)&&z(e,"multi-selected",a[0]&&a[9]),(!l||s[0]&65536)&&z(e,"focused",a[16]),(!l||s[0]&131585)&&z(e,"selected",a[0]&&!a[17]&&!a[9]),s[0]&1024&&I(e,"--firstItem",a[10][0%a[10].length]),s[0]&1024&&I(e,"--secondItem",a[10][1%a[10].length]),s[0]&1024&&I(e,"--thirdItem",a[10][2%a[10].length]),s[0]&1024&&I(e,"--fourthItem",a[10][3%a[10].length]),s[0]&2048&&I(e,"--borderColor",a[11])},i(a){l||(p(n),l=!0)},o(a){C(n),l=!1},d(a){a&&_(e),n&&n.d(),t[47](null)}}}function ut(t,e,l){let n,a;const s='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',o='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',u=Qe();let{id:f=""}=e,{items:r}=e,{container:m=void 0}=e,{mode:d="default"}=e,{placeholder:w="Type an area name or postcode"}=e,{value:E=null}=e,{filterText:T=""}=e,{isSearchable:k=!0}=e,{isClearable:c=!0}=e,{autoClear:h=!1}=e,{idKey:g="areacd"}=e,{labelKey:R="areanm"}=e,{groupKey:A=null}=e,{groupItems:Q=!1}=e,{fontSize:H="1em"}=e,{height:ee=42}=e,{isMulti:fe=!1}=e,{maxSelected:te=4}=e,{colors:ue=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=e,{darkMode:le=!1}=e,{borderColor:ce=le?"white":"#206095"}=e;async function Fe(i){return i.length>2&&/\d/.test(i)?(await(await fetch(`https://api.postcodes.io/postcodes/${i}/autocomplete`)).json()).result.map(q=>({areacd:q,areanm:q,group:"",postcode:!0})):i.length>2?r.filter(b=>b.areanm.match(new RegExp(`\\b${i}`,"i"))):[]}async function Oe(i){if(i.detail.postcode){let v=await(await fetch(`https://api.postcodes.io/postcodes/${i.detail.areacd}`)).json();if(v.result){let q=[];xe.filter(y=>y.pcio).forEach(y=>{let J=v.result[y.pcio];if(J&&!J.includes("unparished")){let Ge=v.result.codes[y.pcio]?v.result.codes[y.pcio]:et[J];q.push({areacd:Ge,areanm:J,typenm:y.label.split("/")[0]})}});let he=r.find(y=>y.areacd==v.result.codes.admin_district);he?(l(2,w="Type a place name or postcode"),u("select",{type:"postcode",areacd:he.areacd,postcd:v.result.postcode,areas:q})):l(2,w="Postcode must be in England or Wales")}}else{let b=i.detail[g],v=i.detail[R];u("select",{type:"area",areacd:b,areanm:v}),l(2,w="Type a place name or postcode")}}const de=A&&!Q?i=>`${i[R]} <span class="group">${i[A]}</span>`:i=>i[R];let{getSelectionLabel:me=i=>i?de(i):null}=e;const Me=Q&&A?i=>i[A]:void 0,Te=d=="search"?s:o,Ee=`--inputFontSize: ${H}; --groupTitleFontSize: ${H}; --height: ${ee}px; font-size: ${H};`,ye=i=>`${i}, selected.`,Ke=(i,b)=>`You are currently focused on ${i}. There are ${b} results available.`,Ae=()=>"Select is focused, type to refine list, press down to open the menu.";let U,ne,ae,Y,Z;const ze=i=>new Promise(b=>setTimeout(b,i));async function Be(i){if(Oe(i),h)Z();else if(c){await ze(10);let b=U.getElementsByClassName("clearSelect")[0];b&&(b.tabIndex=0,b.onkeypress=v=>{v.key=="Enter"&&Z()},b.removeAttribute("aria-hidden"),b.setAttribute("aria-label","Clear selection"))}}function We(i){ne=i,l(16,ne)}function je(i){E=i,l(0,E)}function Ne(i){ae=i,l(17,ae)}function Pe(i){T=i,l(1,T)}function Ve(i){Y=i,l(14,Y)}function De(i){Z=i,l(18,Z)}function Re(i){ie.call(this,t,i)}function He(i){ie.call(this,t,i)}function Ze(i){ie.call(this,t,i)}function qe(i){K[i?"unshift":"push"](()=>{U=i,l(15,U)})}return t.$$set=i=>{"id"in i&&l(3,f=i.id),"items"in i&&l(4,r=i.items),"container"in i&&l(5,m=i.container),"mode"in i&&l(29,d=i.mode),"placeholder"in i&&l(2,w=i.placeholder),"value"in i&&l(0,E=i.value),"filterText"in i&&l(1,T=i.filterText),"isSearchable"in i&&l(6,k=i.isSearchable),"isClearable"in i&&l(7,c=i.isClearable),"autoClear"in i&&l(30,h=i.autoClear),"idKey"in i&&l(8,g=i.idKey),"labelKey"in i&&l(31,R=i.labelKey),"groupKey"in i&&l(32,A=i.groupKey),"groupItems"in i&&l(33,Q=i.groupItems),"fontSize"in i&&l(34,H=i.fontSize),"height"in i&&l(35,ee=i.height),"isMulti"in i&&l(9,fe=i.isMulti),"maxSelected"in i&&l(36,te=i.maxSelected),"colors"in i&&l(10,ue=i.colors),"darkMode"in i&&l(37,le=i.darkMode),"borderColor"in i&&l(11,ce=i.borderColor),"getSelectionLabel"in i&&l(13,me=i.getSelectionLabel)},t.$$.update=()=>{t.$$.dirty[0]&536887298&&l(20,n=Y?"Loading...":d=="search"&&T.length<3?"Enter 3 or more characters for suggestions":`No results match ${T}`),t.$$.dirty[0]&536870915|t.$$.dirty[1]&32&&l(19,a=Array.isArray(E)&&E.length>=te||d=="search"&&T.length<3?(i,b,v)=>!1:(i,b,v)=>`${i}`.split("<")[0].match(new RegExp(`\\b${b}`,"i")))},[E,T,w,f,r,m,k,c,g,fe,ue,ce,Fe,me,Y,U,ne,ae,Z,a,n,de,Me,Te,Ee,ye,Ke,Ae,Be,d,h,R,A,Q,H,ee,te,le,We,je,Ne,Pe,Ve,De,Re,He,Ze,qe]}class ct extends se{constructor(e){super(),re(this,e,ut,ft,oe,{id:3,items:4,container:5,mode:29,placeholder:2,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,fontSize:34,height:35,isMulti:9,maxSelected:36,colors:10,darkMode:37,borderColor:11,loadOptions:12,getSelectionLabel:13},null,[-1,-1])}get loadOptions(){return this.$$.ctx[12]}}function pe(t,e,l){const n=t.slice();return n[5]=e[l],n}function Se(t,e,l){const n=t.slice();return n[8]=e[l],n}function Ce(t){let e,l=t[8].areanm+"",n,a;return{c(){e=j("a"),n=X(l),a=j("br"),this.h()},l(s){e=N(s,"A",{href:!0});var o=G(e);n=$(o,l),o.forEach(_),a=N(s,"BR",{}),this.h()},h(){P(e,"href",x+"/areas/"+t[8].areacd)},m(s,o){S(s,e,o),Le(e,n),S(s,a,o)},p:Ue,d(s){s&&_(e),s&&_(a)}}}function dt(t){let e,l=t[5].name+"",n,a,s;function o(...r){return t[4](t[5],...r)}let u=t[0].filter(o),f=[];for(let r=0;r<u.length;r+=1)f[r]=Ce(Se(t,u,r));return{c(){e=j("a"),n=X(l),a=V();for(let r=0;r<f.length;r+=1)f[r].c();s=V(),this.h()},l(r){e=N(r,"A",{href:!0,class:!0});var m=G(e);n=$(m,l),m.forEach(_),a=D(r);for(let d=0;d<f.length;d+=1)f[d].l(r);s=D(r),this.h()},h(){P(e,"href",x+"/areas/"+t[5].code),P(e,"class","parent-link")},m(r,m){S(r,e,m),Le(e,n),S(r,a,m);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(r,m);S(r,s,m)},p(r,m){if(t=r,m&7){u=t[0].filter(o);let d;for(d=0;d<u.length;d+=1){const w=Se(t,u,d);f[d]?f[d].p(w,m):(f[d]=Ce(w),f[d].c(),f[d].m(s.parentNode,s))}for(;d<f.length;d+=1)f[d].d(1);f.length=u.length}},d(r){r&&_(e),r&&_(a),Ie(f,r),r&&_(s)}}}function ve(t){let e,l;return e=new it({props:{blank:!0,$$slots:{default:[dt]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,a){O(e,n,a),l=!0},p(n,a){const s={};a&2048&&(s.$$scope={dirty:a,ctx:n}),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function mt(t){let e,l,n=t[2],a=[];for(let o=0;o<n.length;o+=1)a[o]=ve(pe(t,n,o));const s=o=>C(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=_e()},l(o){for(let u=0;u<a.length;u+=1)a[u].l(o);e=_e()},m(o,u){for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,u);S(o,e,u),l=!0},p(o,u){if(u&7){n=o[2];let f;for(f=0;f<n.length;f+=1){const r=pe(o,n,f);a[f]?(a[f].p(r,u),p(a[f],1)):(a[f]=ve(r),a[f].c(),p(a[f],1),a[f].m(e.parentNode,e))}for(we(),f=n.length;f<a.length;f+=1)s(f);ke()}},i(o){if(!l){for(let u=0;u<n.length;u+=1)p(a[u]);l=!0}},o(o){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)C(a[u]);l=!1},d(o){Ie(a,o),o&&_(e)}}}function ht(t){let e,l,n,a,s,o,u,f;return l=new ct({props:{items:t[0],mode:"search",placeholder:"Find an area name or postcode",autoClear:!0}}),l.$on("select",t[3]),s=new at({props:{colwidth:"narrow",$$slots:{default:[mt]},$$scope:{ctx:t}}}),u=new rt({}),{c(){e=j("div"),L(l.$$.fragment),n=V(),a=j("div"),L(s.$$.fragment),o=V(),L(u.$$.fragment),this.h()},l(r){e=N(r,"DIV",{class:!0});var m=G(e);F(l.$$.fragment,m),m.forEach(_),n=D(r),a=N(r,"DIV",{class:!0});var d=G(a);F(s.$$.fragment,d),d.forEach(_),o=D(r),F(u.$$.fragment,r),this.h()},h(){P(e,"class","select-container"),P(a,"class","cardsContainer svelte-thnhjk")},m(r,m){S(r,e,m),O(l,e,null),S(r,n,m),S(r,a,m),O(s,a,null),S(r,o,m),O(u,r,m),f=!0},p(r,m){const d={};m&2048&&(d.$$scope={dirty:m,ctx:r}),s.$set(d)},i(r){f||(p(l.$$.fragment,r),p(s.$$.fragment,r),p(u.$$.fragment,r),f=!0)},o(r){C(l.$$.fragment,r),C(s.$$.fragment,r),C(u.$$.fragment,r),f=!1},d(r){r&&_(e),M(l),r&&_(n),r&&_(a),M(s),r&&_(o),M(u,r)}}}function gt(t){let e,l;return e=new nt({props:{$$slots:{default:[ht]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,a){O(e,n,a),l=!0},p(n,[a]){const s={};a&2048&&(s.$$scope={dirty:a,ctx:n}),e.$set(s)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){C(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function _t(t){const e=ge("areas"),l=ge("areasParentsLookup"),n=[...tt,...lt.slice(1)];function a(o){ot(`${x}/areas/${o.detail.areacd}`)}return[e,l,n,a,(o,u)=>l.find(f=>u.areacd==f.areacd).parentcd===o.code]}class bt extends se{constructor(e){super(),re(this,e,_t,gt,oe,{})}}function pt(t){let e;return{c(){e=X("Find a local area")},l(l){e=$(l,"Find a local area")},m(l,n){S(l,e,n)},d(l){l&&_(e)}}}function St(t){let e;return{c(){e=X("Get localised data, insights and trends for local authorities and regions")},l(l){e=$(l,"Get localised data, insights and trends for local authorities and regions")},m(l,n){S(l,e,n)},d(l){l&&_(e)}}}function Ct(t){let e,l,n,a;return e=new Je({props:{$$slots:{default:[pt]},$$scope:{ctx:t}}}),n=new Xe({props:{$$slots:{default:[St]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment),l=V(),L(n.$$.fragment)},l(s){F(e.$$.fragment,s),l=D(s),F(n.$$.fragment,s)},m(s,o){O(e,s,o),S(s,l,o),O(n,s,o),a=!0},p(s,o){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&1&&(f.$$scope={dirty:o,ctx:s}),n.$set(f)},i(s){a||(p(e.$$.fragment,s),p(n.$$.fragment,s),a=!0)},o(s){C(e.$$.fragment,s),C(n.$$.fragment,s),a=!1},d(s){M(e,s),s&&_(l),M(n,s)}}}function vt(t){let e,l,n,a;return e=new Ye({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${x}/`},{label:"Find a local area"}],$$slots:{default:[Ct]},$$scope:{ctx:t}}}),n=new bt({props:{open:!0}}),{c(){L(e.$$.fragment),l=V(),L(n.$$.fragment)},l(s){F(e.$$.fragment,s),l=D(s),F(n.$$.fragment,s)},m(s,o){O(e,s,o),S(s,l,o),O(n,s,o),a=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){a||(p(e.$$.fragment,s),p(n.$$.fragment,s),a=!0)},o(s){C(e.$$.fragment,s),C(n.$$.fragment,s),a=!1},d(s){M(e,s),s&&_(l),M(n,s)}}}class yt extends se{constructor(e){super(),re(this,e,null,vt,oe,{})}}export{yt as component};
