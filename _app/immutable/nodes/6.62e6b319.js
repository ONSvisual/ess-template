//js
import{S as _e,i as be,s as ge,k as S,q as le,a as j,l as G,m as W,r as se,h as w,c as U,n as D,b as X,C,u as Ve,D as ue,U as x,g as N,v as De,d as z,f as Ae,w as Y,Q as F,F as ke,y as ee,G as pe,z as ie,A as ae,R as Q,B as ne,p as Ee,o as si,E as ci,X as Ge,Y as fi,e as Me,Z as oi,_ as ri,V as Se,O as Ce}from"../chunks/index.4b3b0053.js";import{b as Pe}from"../chunks/paths.baa5873e.js";import{T as ui,H as hi,S as di}from"../chunks/Subhead.58c2b0b1.js";import{B as mi,P as _i,C as bi,I as gi,D as vi,S as Ii,a as Xe,R as wi,l as He,b as Di,c as Ai}from"../chunks/linear.04a83355.js";import{e as Ne,b as ve,f as Oe,h as ye,m as Be,i as ze}from"../chunks/config.0367665d.js";import{c as Le}from"../chunks/utils.187303e9.js";function ki(e){let i,a,n,t,l=e[1].areanm+"",s,c,f=e[0].name+"",I,u,d,h,b=e[1].areanm+"",v,V;return{c(){i=S("p"),a=le("[This is dummy text]"),n=j(),t=S("p"),s=le(l),c=le(" scores below average on more than half of "),I=le(f),u=le(" indicators, as do neighbouring areas XXX and YYY."),d=j(),h=S("p"),v=le(b),V=le("'s gross domestic household income per person is £400 below the national average, and is the lowest among all local authorities in the North East."),this.h()},l(r){i=G(r,"P",{class:!0});var o=W(i);a=se(o,"[This is dummy text]"),o.forEach(w),n=U(r),t=G(r,"P",{class:!0});var m=W(t);s=se(m,l),c=se(m," scores below average on more than half of "),I=se(m,f),u=se(m," indicators, as do neighbouring areas XXX and YYY."),m.forEach(w),d=U(r),h=G(r,"P",{class:!0});var _=W(h);v=se(_,b),V=se(_,"'s gross domestic household income per person is £400 below the national average, and is the lowest among all local authorities in the North East."),_.forEach(w),this.h()},h(){D(i,"class","svelte-9yo5s2"),D(t,"class","svelte-9yo5s2"),D(h,"class","svelte-9yo5s2")},m(r,o){X(r,i,o),C(i,a),X(r,n,o),X(r,t,o),C(t,s),C(t,c),C(t,I),C(t,u),X(r,d,o),X(r,h,o),C(h,v),C(h,V)},p(r,[o]){o&1&&f!==(f=r[0].name+"")&&Ve(I,f)},i:ue,o:ue,d(r){r&&w(i),r&&w(n),r&&w(t),r&&w(d),r&&w(h)}}}function pi(e,i,a){let{topic:n}=i,t=x("selectedArea");return e.$$set=l=>{"topic"in l&&a(0,n=l.topic)},[n,t]}class Vi extends _e{constructor(i){super(),be(this,i,pi,ki,ge,{topic:0})}}function Re(e){let i,a;return{c(){i=S("p"),a=le(e[19]),this.h()},l(n){i=G(n,"P",{class:!0});var t=W(i);a=se(t,e[19]),t.forEach(w),this.h()},h(){D(i,"class","from-comparison-description svelte-hff5ty")},m(n,t){X(n,i,t),C(i,a)},p(n,t){t[0]&524288&&Ve(a,n[19])},d(n){n&&w(i)}}}function qe(e){let i,a,n,t,l,s,c,f,I,u,d;function h(r){e[33](r)}function b(r){e[34](r)}function v(r){e[35](r)}let V={chosenId3:e[8],visibleAreas:e[9],backgroundLatestData:e[3].latestDataSameGeogLevel,scaleWidth:e[11],x:e[12],y:e[13],medianValue:e[15],medianAbsoluteDeviation:e[16],chartIndex:e[5]*100+e[4]};return e[0]!==void 0&&(V.yDomainGlobal=e[0]),e[1]!==void 0&&(V.hoverIndex=e[1]),e[2]!==void 0&&(V.hoverChartIndex=e[2]),n=new mi({props:V}),Y.push(()=>F(n,"yDomainGlobal",h)),Y.push(()=>F(n,"hoverIndex",b)),Y.push(()=>F(n,"hoverChartIndex",v)),c=new _i({props:{mainLatestValueT:e[21],comparisonLatestValueT:e[18],baselineComparisonArea:e[10],baselineComparisonName:e[17],chosenId3:e[8],visibleAreas:e[9],latestData:e[3].latestData,scaleWidth:e[11],y:e[13],x:e[12],medianValue:e[15],medianAbsoluteDeviation:e[16],hoverIndex:e[1]}}),f=new bi({props:{scaleWidth:e[11],chosenId3:e[8],metadata:e[6],primaryCirclesStep2:e[22],y:e[13],hoverIndex:e[1],hoverChartIndex:e[2]}}),{c(){i=ke("svg"),a=ke("g"),ee(n.$$.fragment),ee(c.$$.fragment),ee(f.$$.fragment),this.h()},l(r){i=pe(r,"svg",{class:!0,width:!0,height:!0});var o=W(i);a=pe(o,"g",{class:!0,transform:!0});var m=W(a);ie(n.$$.fragment,m),ie(c.$$.fragment,m),ie(f.$$.fragment,m),m.forEach(w),o.forEach(w),this.h()},h(){D(a,"class","chart-container"),D(a,"transform","translate("+(ve.left+ve.areaSpaceBeyondXScale)+","+ve.top+")"),D(i,"class",I="beeswarm-row-svg beeswarm-row-svg-"+(e[5]*100+e[4])+" svelte-hff5ty"),D(i,"width",e[7]),D(i,"height",u=Oe[e[8]===0?"split":"full"])},m(r,o){X(r,i,o),C(i,a),ae(n,a,null),ae(c,a,null),ae(f,a,null),d=!0},p(r,o){const m={};o[0]&256&&(m.chosenId3=r[8]),o[0]&512&&(m.visibleAreas=r[9]),o[0]&8&&(m.backgroundLatestData=r[3].latestDataSameGeogLevel),o[0]&2048&&(m.scaleWidth=r[11]),o[0]&4096&&(m.x=r[12]),o[0]&8192&&(m.y=r[13]),o[0]&32768&&(m.medianValue=r[15]),o[0]&65536&&(m.medianAbsoluteDeviation=r[16]),o[0]&48&&(m.chartIndex=r[5]*100+r[4]),!t&&o[0]&1&&(t=!0,m.yDomainGlobal=r[0],Q(()=>t=!1)),!l&&o[0]&2&&(l=!0,m.hoverIndex=r[1],Q(()=>l=!1)),!s&&o[0]&4&&(s=!0,m.hoverChartIndex=r[2],Q(()=>s=!1)),n.$set(m);const _={};o[0]&262144&&(_.comparisonLatestValueT=r[18]),o[0]&1024&&(_.baselineComparisonArea=r[10]),o[0]&131072&&(_.baselineComparisonName=r[17]),o[0]&256&&(_.chosenId3=r[8]),o[0]&512&&(_.visibleAreas=r[9]),o[0]&8&&(_.latestData=r[3].latestData),o[0]&2048&&(_.scaleWidth=r[11]),o[0]&8192&&(_.y=r[13]),o[0]&4096&&(_.x=r[12]),o[0]&32768&&(_.medianValue=r[15]),o[0]&65536&&(_.medianAbsoluteDeviation=r[16]),o[0]&2&&(_.hoverIndex=r[1]),c.$set(_);const T={};o[0]&2048&&(T.scaleWidth=r[11]),o[0]&256&&(T.chosenId3=r[8]),o[0]&64&&(T.metadata=r[6]),o[0]&8192&&(T.y=r[13]),o[0]&2&&(T.hoverIndex=r[1]),o[0]&4&&(T.hoverChartIndex=r[2]),f.$set(T),(!d||o[0]&48&&I!==(I="beeswarm-row-svg beeswarm-row-svg-"+(r[5]*100+r[4])+" svelte-hff5ty"))&&D(i,"class",I),(!d||o[0]&128)&&D(i,"width",r[7]),(!d||o[0]&256&&u!==(u=Oe[r[8]===0?"split":"full"]))&&D(i,"height",u)},i(r){d||(N(n.$$.fragment,r),N(c.$$.fragment,r),N(f.$$.fragment,r),d=!0)},o(r){z(n.$$.fragment,r),z(c.$$.fragment,r),z(f.$$.fragment,r),d=!1},d(r){r&&w(i),ne(n),ne(c),ne(f)}}}function Ti(e){let i,a,n,t,l=e[8]===0&&Re(e),s=e[14]!=null&&qe(e);return{c(){i=S("div"),l&&l.c(),a=j(),s&&s.c(),this.h()},l(c){i=G(c,"DIV",{class:!0,style:!0});var f=W(i);l&&l.l(f),a=U(f),s&&s.l(f),f.forEach(w),this.h()},h(){D(i,"class","area-comparison-cell-container svelte-hff5ty"),D(i,"style",n=e[8]!=0|e[20]==null?null:"background-color:"+e[20]+"; box-shadow: 0 0 4px 3px "+e[20]+";")},m(c,f){X(c,i,f),l&&l.m(i,null),C(i,a),s&&s.m(i,null),t=!0},p(c,f){c[8]===0?l?l.p(c,f):(l=Re(c),l.c(),l.m(i,a)):l&&(l.d(1),l=null),c[14]!=null?s?(s.p(c,f),f[0]&16384&&N(s,1)):(s=qe(c),s.c(),N(s,1),s.m(i,null)):s&&(De(),z(s,1,1,()=>{s=null}),Ae()),(!t||f[0]&1048832&&n!==(n=c[8]!=0|c[20]==null?null:"background-color:"+c[20]+"; box-shadow: 0 0 4px 3px "+c[20]+";"))&&D(i,"style",n)},i(c){t||(N(s),t=!0)},o(c){z(s),t=!1},d(c){c&&w(i),l&&l.d(),s&&s.d()}}}let Ci=!0,je=!0,Ei="Similar to";function yi(e,i,a){let n,t,l,s,c,{indicator:f}=i,{rowNumb:I,topicNumb:u}=i,{latestData:d,backgroundLatestData:h}=i,{metadata:b,calculations:v}=i,{col2Width:V}=i,{chosenId3:r}=i,{visibleAreas:o,globalVisibleAreasTracker:m}=i,{chosenId1:_,baselineComparisonArea:T}=i,{scaleHeight:g,scaleWidth:p}=i,{x:H,xDomain:R,yDomainGlobal:$,y:P}=i,{mainLatestValue:q,comparisonLatestValue:te}=i,{medianValue:B,medianAbsoluteDeviation:M}=i,{latestTimePeriod:A}=i,{hoverIndex:O,hoverChartIndex:K}=i,Z=x("selectedAndRelatedAreas"),re=x("selectedArea"),J=v.calcs[v.maxXDomain].main,de=v.calcs[v.maxXDomain].mad,E=b.polarity==0?null:b.polarity==-1?"better":"worse",oe=b.polarity==0?null:"similar",fe=b.polarity==0?null:b.polarity==1?"better":"worse",he=b.polarity==0|!je?"Lower than":b.polarity==-1?"Better than":"Worse than",Ie=b.polarity==0|!je?"Higher than":b.polarity==1?"Better than":"Worse than",ce=[];function me(y){$=y,a(0,$)}function we(y){O=y,a(1,O)}function Te(y){K=y,a(2,K)}return e.$$set=y=>{"indicator"in y&&a(3,f=y.indicator),"rowNumb"in y&&a(4,I=y.rowNumb),"topicNumb"in y&&a(5,u=y.topicNumb),"latestData"in y&&a(23,d=y.latestData),"backgroundLatestData"in y&&a(24,h=y.backgroundLatestData),"metadata"in y&&a(6,b=y.metadata),"calculations"in y&&a(25,v=y.calculations),"col2Width"in y&&a(7,V=y.col2Width),"chosenId3"in y&&a(8,r=y.chosenId3),"visibleAreas"in y&&a(9,o=y.visibleAreas),"globalVisibleAreasTracker"in y&&a(26,m=y.globalVisibleAreasTracker),"chosenId1"in y&&a(27,_=y.chosenId1),"baselineComparisonArea"in y&&a(10,T=y.baselineComparisonArea),"scaleHeight"in y&&a(28,g=y.scaleHeight),"scaleWidth"in y&&a(11,p=y.scaleWidth),"x"in y&&a(12,H=y.x),"xDomain"in y&&a(29,R=y.xDomain),"yDomainGlobal"in y&&a(0,$=y.yDomainGlobal),"y"in y&&a(13,P=y.y),"mainLatestValue"in y&&a(14,q=y.mainLatestValue),"comparisonLatestValue"in y&&a(30,te=y.comparisonLatestValue),"medianValue"in y&&a(15,B=y.medianValue),"medianAbsoluteDeviation"in y&&a(16,M=y.medianAbsoluteDeviation),"latestTimePeriod"in y&&a(31,A=y.latestTimePeriod),"hoverIndex"in y&&a(1,O=y.hoverIndex),"hoverChartIndex"in y&&a(2,K=y.hoverChartIndex)},e.$$.update=()=>{e.$$.dirty[0]&33555456&&a(18,n=v.calcs[v.maxXDomain][(T.areacd==="median"?T:Z.find(y=>T.areacd===y.areacd)).role]),e.$$.dirty[0]&262144&&a(32,t=J==null|n==null|de==null?null:(J-n)/de),e.$$.dirty[0]&64|e.$$.dirty[1]&2&&a(20,l=!Ci|t==null|b.polarity==0?null:t<-1?Ne[E]:t<=1?Ne[oe]:Ne[fe]),e.$$.dirty[0]&1024&&a(17,s=T.areacd==="median"?"median":T.areanm),e.$$.dirty[0]&33947648|e.$$.dirty[1]&2&&a(19,c=(J==null?"No "+re.areanm+" data":n==null?"No "+s+" data":(t<-1?he:t<=1?Ei:Ie)+" "+s)+" in "+v.maxXDomain),e.$$.dirty[0]&786440|e.$$.dirty[1]&2&&console.log(J,n,de,t,c,f.label)},[$,O,K,f,I,u,b,V,r,o,T,p,H,P,q,B,M,s,n,c,l,J,ce,d,h,v,m,_,g,R,te,A,t,me,we,Te]}class Wi extends _e{constructor(i){super(),be(this,i,yi,Ti,ge,{indicator:3,rowNumb:4,topicNumb:5,latestData:23,backgroundLatestData:24,metadata:6,calculations:25,col2Width:7,chosenId3:8,visibleAreas:9,globalVisibleAreasTracker:26,chosenId1:27,baselineComparisonArea:10,scaleHeight:28,scaleWidth:11,x:12,xDomain:29,yDomainGlobal:0,y:13,mainLatestValue:14,comparisonLatestValue:30,medianValue:15,medianAbsoluteDeviation:16,latestTimePeriod:31,hoverIndex:1,hoverChartIndex:2},null,[-1,-1])}}function Ue(e){let i,a,n,t=e[3].label+"",l,s,c,f,I=e[5].subtitle+"",u,d=e[11]===1?" in "+e[25].label:"",h,b,v,V,r,o,m,_;s=new gi({});let T=e[11]!=2&&Ke(e),g=e[11]!=2&&Ye();return{c(){i=S("div"),a=S("p"),n=S("a"),l=le(t),ee(s.$$.fragment),c=j(),f=S("p"),u=le(I),h=le(d),b=j(),v=S("div"),T&&T.c(),V=j(),r=S("div"),o=j(),m=S("div"),g&&g.c(),this.h()},l(p){i=G(p,"DIV",{class:!0});var H=W(i);a=G(H,"P",{class:!0});var R=W(a);n=G(R,"A",{href:!0});var $=W(n);l=se($,t),$.forEach(w),ie(s.$$.fragment,R),R.forEach(w),c=U(H),f=G(H,"P",{class:!0});var P=W(f);u=se(P,I),h=se(P,d),P.forEach(w),H.forEach(w),b=U(p),v=G(p,"DIV",{class:!0});var q=W(v);T&&T.l(q),q.forEach(w),V=U(p),r=G(p,"DIV",{class:!0}),W(r).forEach(w),o=U(p),m=G(p,"DIV",{class:!0});var te=W(m);g&&g.l(te),te.forEach(w),this.h()},h(){D(n,"href","https://www.ons.gov.uk/"),D(a,"class","indicator-label svelte-1jiuhmt"),D(f,"class","indicator-detail svelte-1jiuhmt"),D(i,"class","col1 svelte-1jiuhmt"),D(v,"class","col2 svelte-1jiuhmt"),D(r,"class","col3"),D(m,"class","col4 svelte-1jiuhmt")},m(p,H){X(p,i,H),C(i,a),C(a,n),C(n,l),ae(s,a,null),C(i,c),C(i,f),C(f,u),C(f,h),X(p,b,H),X(p,v,H),T&&T.m(v,null),X(p,V,H),X(p,r,H),X(p,o,H),X(p,m,H),g&&g.m(m,null),_=!0},p(p,H){(!_||H[0]&8)&&t!==(t=p[3].label+"")&&Ve(l,t),(!_||H[0]&32)&&I!==(I=p[5].subtitle+"")&&Ve(u,I),(!_||H[0]&33556480)&&d!==(d=p[11]===1?" in "+p[25].label:"")&&Ve(h,d),p[11]!=2?T?(T.p(p,H),H[0]&2048&&N(T,1)):(T=Ke(p),T.c(),N(T,1),T.m(v,null)):T&&(De(),z(T,1,1,()=>{T=null}),Ae()),p[11]!=2?g||(g=Ye(),g.c(),g.m(m,null)):g&&(g.d(1),g=null)},i(p){_||(N(s.$$.fragment,p),N(T),_=!0)},o(p){z(s.$$.fragment,p),z(T),_=!1},d(p){p&&w(i),ne(s),p&&w(b),p&&w(v),T&&T.d(),p&&w(V),p&&w(r),p&&w(o),p&&w(m),g&&g.d()}}}function Ke(e){let i,a,n,t,l;function s(u){e[38](u)}function c(u){e[39](u)}function f(u){e[40](u)}let I={indicator:e[3],rowNumb:e[1],topicNumb:e[2],latestData:e[4],backgroundLatestData:e[27],metadata:e[5],calculations:e[6],col2Width:e[8],chosenId3:e[11],chosenId1:e[14],baselineComparisonArea:e[15],visibleAreas:e[12],globalVisibleAreasTracker:e[13],scaleHeight:e[16],scaleWidth:e[17],x:e[19],xDomain:e[18],y:e[20],mainLatestValue:e[26],comparisonLatestValue:e[24],medianValue:e[28],medianAbsoluteDeviation:e[29],latestTimePeriod:e[25]};return e[0]!==void 0&&(I.yDomainGlobal=e[0]),e[21]!==void 0&&(I.hoverIndex=e[21]),e[22]!==void 0&&(I.hoverChartIndex=e[22]),i=new Wi({props:I}),Y.push(()=>F(i,"yDomainGlobal",s)),Y.push(()=>F(i,"hoverIndex",c)),Y.push(()=>F(i,"hoverChartIndex",f)),{c(){ee(i.$$.fragment)},l(u){ie(i.$$.fragment,u)},m(u,d){ae(i,u,d),l=!0},p(u,d){const h={};d[0]&8&&(h.indicator=u[3]),d[0]&2&&(h.rowNumb=u[1]),d[0]&4&&(h.topicNumb=u[2]),d[0]&16&&(h.latestData=u[4]),d[0]&32&&(h.metadata=u[5]),d[0]&64&&(h.calculations=u[6]),d[0]&256&&(h.col2Width=u[8]),d[0]&2048&&(h.chosenId3=u[11]),d[0]&16384&&(h.chosenId1=u[14]),d[0]&32768&&(h.baselineComparisonArea=u[15]),d[0]&4096&&(h.visibleAreas=u[12]),d[0]&8192&&(h.globalVisibleAreasTracker=u[13]),d[0]&65536&&(h.scaleHeight=u[16]),d[0]&131072&&(h.scaleWidth=u[17]),d[0]&524288&&(h.x=u[19]),d[0]&262144&&(h.xDomain=u[18]),d[0]&1048576&&(h.y=u[20]),d[0]&16777216&&(h.comparisonLatestValue=u[24]),d[0]&33554432&&(h.latestTimePeriod=u[25]),!a&&d[0]&1&&(a=!0,h.yDomainGlobal=u[0],Q(()=>a=!1)),!n&&d[0]&2097152&&(n=!0,h.hoverIndex=u[21],Q(()=>n=!1)),!t&&d[0]&4194304&&(t=!0,h.hoverChartIndex=u[22],Q(()=>t=!1)),i.$set(h)},i(u){l||(N(i.$$.fragment,u),l=!0)},o(u){z(i.$$.fragment,u),l=!1},d(u){ne(i,u)}}}function Ye(e){return{c:ue,l:ue,m:ue,d:ue}}function Li(e){let i,a,n,t=e[23]&&Ue(e);return{c(){i=S("div"),a=S("div"),t&&t.c(),this.h()},l(l){i=G(l,"DIV",{class:!0,style:!0});var s=W(i);a=G(s,"DIV",{class:!0,style:!0});var c=W(a);t&&t.l(c),c.forEach(w),s.forEach(w),this.h()},h(){D(a,"class","row-content-container svelte-1jiuhmt"),Ee(a,"grid-template-columns","[line1] "+e[7]+"px [line2] "+e[8]+"px [line3] "+e[9]+"px [line4] "+e[10]+"px [end]"),D(i,"class","row-container svelte-1jiuhmt"),Ee(i,"background-color",e[1]%2===0?"#fafafa":"#ffffff")},m(l,s){X(l,i,s),C(i,a),t&&t.m(a,null),n=!0},p(l,s){l[23]?t?(t.p(l,s),s[0]&8388608&&N(t,1)):(t=Ue(l),t.c(),N(t,1),t.m(a,null)):t&&(De(),z(t,1,1,()=>{t=null}),Ae()),(!n||s[0]&1920)&&Ee(a,"grid-template-columns","[line1] "+l[7]+"px [line2] "+l[8]+"px [line3] "+l[9]+"px [line4] "+l[10]+"px [end]"),(!n||s[0]&2)&&Ee(i,"background-color",l[1]%2===0?"#fafafa":"#ffffff")},i(l){n||(N(t),n=!0)},o(l){z(t),n=!1},d(l){l&&w(i),t&&t.d()}}}function Si(e,i,a){let n,t,l,s,c,f,{rowNumb:I,topicNumb:u}=i,{indicator:d}=i,{latestData:h,initialData:b,otherData:v}=i,{metadata:V,calculations:r}=i,{col1Width:o,col2Width:m,col3Width:_,col4Width:T}=i,{chosenId3:g}=i,{visibleAreas:p,globalVisibleAreasTracker:H}=i,{chosenId1:R,baselineComparisonArea:$}=i,{chosenId2:P}=i,{scaleHeight:q,scaleWidthArea:te,scaleWidthTime:B}=i,{xDomain:M,x:A,yDomainGlobal:O,y:K}=i,Z=x("periodsLookup"),re=x("selectedArea"),J=x("areasWithSameGeog"),de=h.find(k=>k.areacd===re.areacd),E=de==null?null:de.value,oe=h.filter(k=>J.includes(k.areacd)),fe=Le(oe,"value"),he=oe.map(k=>Math.abs(k.value-fe)),Ie=Le(he),ce=null,me=null,we=!1;si(()=>{a(23,we=!0)});function Te(k){O=k,a(0,O)}function y(k){ce=k,a(21,ce)}function L(k){me=k,a(22,me)}return e.$$set=k=>{"rowNumb"in k&&a(1,I=k.rowNumb),"topicNumb"in k&&a(2,u=k.topicNumb),"indicator"in k&&a(3,d=k.indicator),"latestData"in k&&a(4,h=k.latestData),"initialData"in k&&a(30,b=k.initialData),"otherData"in k&&a(31,v=k.otherData),"metadata"in k&&a(5,V=k.metadata),"calculations"in k&&a(6,r=k.calculations),"col1Width"in k&&a(7,o=k.col1Width),"col2Width"in k&&a(8,m=k.col2Width),"col3Width"in k&&a(9,_=k.col3Width),"col4Width"in k&&a(10,T=k.col4Width),"chosenId3"in k&&a(11,g=k.chosenId3),"visibleAreas"in k&&a(12,p=k.visibleAreas),"globalVisibleAreasTracker"in k&&a(13,H=k.globalVisibleAreasTracker),"chosenId1"in k&&a(14,R=k.chosenId1),"baselineComparisonArea"in k&&a(15,$=k.baselineComparisonArea),"chosenId2"in k&&a(32,P=k.chosenId2),"scaleHeight"in k&&a(16,q=k.scaleHeight),"scaleWidthArea"in k&&a(17,te=k.scaleWidthArea),"scaleWidthTime"in k&&a(33,B=k.scaleWidthTime),"xDomain"in k&&a(18,M=k.xDomain),"x"in k&&a(19,A=k.x),"yDomainGlobal"in k&&a(0,O=k.yDomainGlobal),"y"in k&&a(20,K=k.y)},e.$$.update=()=>{e.$$.dirty[0]&64|e.$$.dirty[1]&2&&a(37,n=P==="earliest available year"?[r.minXDomain]:P==="previous year"?[r.maxXDomain-1]:Z.filter(k=>k.xDomainNumb===P).map(k=>k.xDomainNumb)),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&65&&a(36,t=n==[]?[]:[...b,...v].filter(k=>n.includes(k.xDomainNumb))),e.$$.dirty[0]&16&&a(25,l=h.length>0?Z.find(k=>k.xDomainNumb==h[0].xDomainNumb):null),e.$$.dirty[1]&32&&t.length>0&&Z.find(k=>k.xDomainNumb==t[0].xDomainNumb),e.$$.dirty[1]&32&&a(35,s=t.find(k=>k.areacd===re.areacd)),e.$$.dirty[1]&16&&(s==null||s.value),e.$$.dirty[0]&32784&&a(34,c=h.find(k=>k.areacd===$.areacd)),e.$$.dirty[0]&32768|e.$$.dirty[1]&8&&a(24,f=$==="median"?fe:c==null?null:c.value)},[O,I,u,d,h,V,r,o,m,_,T,g,p,H,R,$,q,te,M,A,K,ce,me,we,f,l,E,oe,fe,Ie,b,v,P,B,c,s,t,n,Te,y,L]}class Gi extends _e{constructor(i){super(),be(this,i,Si,Li,ge,{rowNumb:1,topicNumb:2,indicator:3,latestData:4,initialData:30,otherData:31,metadata:5,calculations:6,col1Width:7,col2Width:8,col3Width:9,col4Width:10,chosenId3:11,visibleAreas:12,globalVisibleAreasTracker:13,chosenId1:14,baselineComparisonArea:15,chosenId2:32,scaleHeight:16,scaleWidthArea:17,scaleWidthTime:33,xDomain:18,x:19,yDomainGlobal:0,y:20},null,[-1,-1])}}function Ni(e){let i,a,n;return{c(){i=S("div"),a=S("img"),this.h()},l(t){i=G(t,"DIV",{class:!0});var l=W(i);a=G(l,"IMG",{style:!0,width:!0,src:!0,alt:!0}),l.forEach(w),this.h()},h(){Ee(a,"padding-top","10px"),D(a,"width","80%"),ci(a.src,n=`${Pe}/img/shareOptionsPlaceholder.png`)||D(a,"src",n),D(a,"alt","download buttons"),D(i,"class","svelte-1yu9en2")},m(t,l){X(t,i,l),C(i,a)},p:ue,i:ue,o:ue,d(t){t&&w(i)}}}class Pi extends _e{constructor(i){super(),be(this,i,null,Ni,ge,{})}}function Oi(e){let i,a,n,t,l,s,c;function f(u){e[5](u)}let I={name:e[2],width:Math.min(e[4]-20,e[0].toString().length*20)+"px",optionsArray:e[1],lowHeight:!0};return e[0]!==void 0&&(I.chosenId=e[0]),l=new vi({props:I}),Y.push(()=>F(l,"chosenId",f)),{c(){i=S("div"),a=S("p"),n=j(),t=S("div"),ee(l.$$.fragment),this.h()},l(u){i=G(u,"DIV",{class:!0});var d=W(i);a=G(d,"P",{class:!0});var h=W(a);h.forEach(w),n=U(d),t=G(d,"DIV",{class:!0});var b=W(t);ie(l.$$.fragment,b),b.forEach(w),d.forEach(w),this.h()},h(){D(a,"class","svelte-1dn4t0j"),D(t,"class","dropdown-container svelte-1dn4t0j"),D(i,"class","paragraph-container svelte-1dn4t0j")},m(u,d){X(u,i,d),C(i,a),a.innerHTML=e[3],C(i,n),C(i,t),ae(l,t,null),c=!0},p(u,[d]){(!c||d&8)&&(a.innerHTML=u[3]);const h={};d&4&&(h.name=u[2]),d&17&&(h.width=Math.min(u[4]-20,u[0].toString().length*20)+"px"),d&2&&(h.optionsArray=u[1]),!s&&d&1&&(s=!0,h.chosenId=u[0],Q(()=>s=!1)),l.$set(h)},i(u){c||(N(l.$$.fragment,u),c=!0)},o(u){z(l.$$.fragment,u),c=!1},d(u){u&&w(i),ne(l)}}}function Mi(e,i,a){x("selectedArea");let{chosenId:n,optionsArray:t,name:l,text:s,width:c}=i;function f(I){n=I,a(0,n)}return e.$$set=I=>{"chosenId"in I&&a(0,n=I.chosenId),"optionsArray"in I&&a(1,t=I.optionsArray),"name"in I&&a(2,l=I.name),"text"in I&&a(3,s=I.text),"width"in I&&a(4,c=I.width)},[n,t,l,s,c,f]}class Fe extends _e{constructor(i){super(),be(this,i,Mi,Oi,ge,{chosenId:0,optionsArray:1,name:2,text:3,width:4})}}function Xi(e){let i,a;return{c(){i=ke("path"),this.h()},l(n){i=pe(n,"path",{d:!0,stroke:!0,fill:!0,"stroke-width":!0}),W(i).forEach(w),this.h()},h(){D(i,"d","M5 0 L15 10 L5 20"),D(i,"stroke",a=e[1]?"#222":"#206095"),D(i,"fill","none"),D(i,"stroke-width","3px")},m(n,t){X(n,i,t)},p(n,t){t&2&&a!==(a=n[1]?"#222":"#206095")&&D(i,"stroke",a)},d(n){n&&w(i)}}}function Hi(e){let i;return{c(){i=ke("path"),this.h()},l(a){i=pe(a,"path",{d:!0,stroke:!0,fill:!0,"stroke-width":!0}),W(i).forEach(w),this.h()},h(){D(i,"d","M0 5 L10 15 L20 5"),D(i,"stroke","#222"),D(i,"fill","none"),D(i,"stroke-width","3px")},m(a,n){X(a,i,n)},p:ue,d(a){a&&w(i)}}}function Bi(e){let i,a;function n(s,c){return s[0]?Hi:Xi}let t=n(e),l=t(e);return{c(){i=S("div"),a=ke("svg"),l.c(),this.h()},l(s){i=G(s,"DIV",{class:!0});var c=W(i);a=pe(c,"svg",{width:!0,height:!0,viewBox:!0,class:!0});var f=W(a);l.l(f),f.forEach(w),c.forEach(w),this.h()},h(){D(a,"width","20"),D(a,"height","20"),D(a,"viewBox","0 0 20 20"),D(a,"class","svelte-xt2mo4"),D(i,"class","infoCell svelte-xt2mo4")},m(s,c){X(s,i,c),C(i,a),l.m(a,null)},p(s,[c]){t===(t=n(s))&&l?l.p(s,c):(l.d(1),l=t(s),l&&(l.c(),l.m(a,null)))},i:ue,o:ue,d(s){s&&w(i),l.d()}}}function zi(e,i,a){let{twistyOpen:n,hover:t}=i;return e.$$set=l=>{"twistyOpen"in l&&a(0,n=l.twistyOpen),"hover"in l&&a(1,t=l.hover)},[n,t]}class Ri extends _e{constructor(i){super(),be(this,i,zi,Bi,ge,{twistyOpen:0,hover:1})}}function qi(e){let i,a,n,t;function l(c){e[3](c)}let s={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:e[1],isMulti:!0,maxSelected:4,placeholder:"Add additional comparison areas"};return e[0].custom!==void 0&&(s.value=e[0].custom),a=new Ii({props:s}),Y.push(()=>F(a,"value",l)),a.$on("select",e[2]),{c(){i=S("form"),ee(a.$$.fragment),this.h()},l(c){i=G(c,"FORM",{class:!0});var f=W(i);ie(a.$$.fragment,f),f.forEach(w),this.h()},h(){D(i,"class","svelte-sfo7xy")},m(c,f){X(c,i,f),ae(a,i,null),t=!0},p(c,[f]){const I={};!n&&f&1&&(n=!0,I.value=c[0].custom,Q(()=>n=!1)),a.$set(I)},i(c){t||(N(a.$$.fragment,c),t=!0)},o(c){z(a.$$.fragment,c),t=!1},d(c){c&&w(i),ne(a)}}}function ji(e,i,a){let{globalVisibleAreasTracker:n}=i,t=x("areasParentsLookup"),l=x("areas"),s=x("selectedAndRelatedAreas"),c=t.filter(u=>!s.map(d=>d.areacd).includes(u.areacd));c.forEach(u=>{u.areanm=l.find(d=>d.areacd===u.areacd).areanm,u.parentnm=l.find(d=>u.parentcd===d.areacd)===void 0?"":l.find(d=>u.parentcd===d.areacd).areanm});function f(u){u.detail&&u.detail}function I(u){e.$$.not_equal(n.custom,u)&&(n.custom=u,a(0,n))}return e.$$set=u=>{"globalVisibleAreasTracker"in u&&a(0,n=u.globalVisibleAreasTracker)},[n,c,f,I]}class Ui extends _e{constructor(i){super(),be(this,i,ji,qi,ge,{globalVisibleAreasTracker:0})}}function Qe(e){let i,a,n,t=e[6]&&Ze(e),l=e[5]&&Je(e);return{c(){t&&t.c(),i=j(),l&&l.c(),a=Me()},l(s){t&&t.l(s),i=U(s),l&&l.l(s),a=Me()},m(s,c){t&&t.m(s,c),X(s,i,c),l&&l.m(s,c),X(s,a,c),n=!0},p(s,c){s[6]?t?(t.p(s,c),c&64&&N(t,1)):(t=Ze(s),t.c(),N(t,1),t.m(i.parentNode,i)):t&&(De(),z(t,1,1,()=>{t=null}),Ae()),s[5]?l?(l.p(s,c),c&32&&N(l,1)):(l=Je(s),l.c(),N(l,1),l.m(a.parentNode,a)):l&&(De(),z(l,1,1,()=>{l=null}),Ae())},i(s){n||(N(t),N(l),n=!0)},o(s){z(t),z(l),n=!1},d(s){t&&t.d(s),s&&w(i),l&&l.d(s),s&&w(a)}}}function Ze(e){let i,a,n,t,l,s,c,f,I,u,d,h;function b(o){e[17](o)}let v={optionsArray:e[12],width:e[9]/2-20,name:"select-baseline-area",text:"Comparing "+e[11].areanm+" to:"};e[2]!==void 0&&(v.chosenId=e[2]),n=new Fe({props:v}),Y.push(()=>F(n,"chosenId",b));function V(o){e[18](o)}let r={optionsArray:e[13],width:e[9]/2-20,name:"select-previous-time period",text:"Comparing most recent time period to:"};return e[3]!==void 0&&(r.chosenId=e[3]),I=new Fe({props:r}),Y.push(()=>F(I,"chosenId",V)),{c(){i=S("div"),a=S("div"),ee(n.$$.fragment),l=j(),s=S("div"),c=j(),f=S("div"),ee(I.$$.fragment),this.h()},l(o){i=G(o,"DIV",{class:!0});var m=W(i);a=G(m,"DIV",{class:!0});var _=W(a);ie(n.$$.fragment,_),_.forEach(w),l=U(m),s=G(m,"DIV",{class:!0}),W(s).forEach(w),c=U(m),f=G(m,"DIV",{class:!0});var T=W(f);ie(I.$$.fragment,T),T.forEach(w),m.forEach(w),this.h()},h(){D(a,"class","col1 svelte-1ql21zt"),D(s,"class","divider svelte-1ql21zt"),D(f,"class","col2 svelte-1ql21zt"),D(i,"class","row-container svelte-1ql21zt"),oi(()=>e[19].call(i))},m(o,m){X(o,i,m),C(i,a),ae(n,a,null),C(i,l),C(i,s),C(i,c),C(i,f),ae(I,f,null),d=ri(i,e[19].bind(i)),h=!0},p(o,m){const _={};m&512&&(_.width=o[9]/2-20),!t&&m&4&&(t=!0,_.chosenId=o[2],Q(()=>t=!1)),n.$set(_);const T={};m&512&&(T.width=o[9]/2-20),!u&&m&8&&(u=!0,T.chosenId=o[3],Q(()=>u=!1)),I.$set(T)},i(o){h||(N(n.$$.fragment,o),N(I.$$.fragment,o),h=!0)},o(o){z(n.$$.fragment,o),z(I.$$.fragment,o),h=!1},d(o){o&&w(i),ne(n),ne(I),d()}}}function Je(e){let i,a,n,t,l,s,c,f,I,u,d,h,b,v,V,r,o,m,_,T,g,p,H;function R(M){e[20](M)}let $={optionsArray:e[10].filter(Yi).map(Fi),name:"chosenComparison"};e[0]!==void 0&&($.chosenId=e[0]),s=new Xe({props:$}),Y.push(()=>F(s,"chosenId",R));function P(M){e[21](M)}let q={optionsArray:["Other areas in "+e[10].find(Qi).areanm,"Statistically similar areas"],name:"chosenComparison"};e[1]!==void 0&&(q.chosenId=e[1]),V=new Xe({props:q}),Y.push(()=>F(V,"chosenId",P));function te(M){e[22](M)}let B={};return e[4]!==void 0&&(B.globalVisibleAreasTracker=e[4]),g=new Ui({props:B}),Y.push(()=>F(g,"globalVisibleAreasTracker",te)),{c(){i=S("div"),a=S("div"),n=S("p"),t=le("Parent areas:"),l=j(),ee(s.$$.fragment),f=j(),I=S("div"),u=j(),d=S("div"),h=S("p"),b=le("Related areas:"),v=j(),ee(V.$$.fragment),o=j(),m=S("div"),_=j(),T=S("div"),ee(g.$$.fragment),this.h()},l(M){i=G(M,"DIV",{class:!0});var A=W(i);a=G(A,"DIV",{class:!0});var O=W(a);n=G(O,"P",{class:!0});var K=W(n);t=se(K,"Parent areas:"),K.forEach(w),l=U(O),ie(s.$$.fragment,O),O.forEach(w),f=U(A),I=G(A,"DIV",{class:!0}),W(I).forEach(w),u=U(A),d=G(A,"DIV",{class:!0});var Z=W(d);h=G(Z,"P",{class:!0});var re=W(h);b=se(re,"Related areas:"),re.forEach(w),v=U(Z),ie(V.$$.fragment,Z),Z.forEach(w),A.forEach(w),o=U(M),m=G(M,"DIV",{class:!0}),W(m).forEach(w),_=U(M),T=G(M,"DIV",{class:!0});var J=W(T);ie(g.$$.fragment,J),J.forEach(w),this.h()},h(){D(n,"class","checkbox-title svelte-1ql21zt"),D(a,"class","col1 svelte-1ql21zt"),D(I,"class","divider svelte-1ql21zt"),D(h,"class","checkbox-title svelte-1ql21zt"),D(d,"class","col2 svelte-1ql21zt"),D(i,"class","row-container svelte-1ql21zt"),D(m,"class","divider-horizontal svelte-1ql21zt"),D(T,"class","row-container svelte-1ql21zt")},m(M,A){X(M,i,A),C(i,a),C(a,n),C(n,t),C(a,l),ae(s,a,null),C(i,f),C(i,I),C(i,u),C(i,d),C(d,h),C(h,b),C(d,v),ae(V,d,null),X(M,o,A),X(M,m,A),X(M,_,A),X(M,T,A),ae(g,T,null),H=!0},p(M,A){const O={};!c&&A&1&&(c=!0,O.chosenId=M[0],Q(()=>c=!1)),s.$set(O);const K={};!r&&A&2&&(r=!0,K.chosenId=M[1],Q(()=>r=!1)),V.$set(K);const Z={};!p&&A&16&&(p=!0,Z.globalVisibleAreasTracker=M[4],Q(()=>p=!1)),g.$set(Z)},i(M){H||(N(s.$$.fragment,M),N(V.$$.fragment,M),N(g.$$.fragment,M),H=!0)},o(M){z(s.$$.fragment,M),z(V.$$.fragment,M),z(g.$$.fragment,M),H=!1},d(M){M&&w(i),ne(s),ne(V),M&&w(o),M&&w(m),M&&w(_),M&&w(T),ne(g)}}}function Ki(e){let i,a,n,t=e[5]&e[6]?"Select comparison areas and previous time period":e[5]?"Select areas to compare "+e[11].areanm+" to":"Select comparison area and previous time period",l,s,c,f,I,u;n=new Ri({props:{twistyOpen:e[7],hover:e[8]}});let d=e[7]&&Qe(e);return{c(){i=S("div"),a=S("p"),ee(n.$$.fragment),l=le(t),c=j(),d&&d.c(),this.h()},l(h){i=G(h,"DIV",{class:!0});var b=W(i);a=G(b,"P",{class:!0});var v=W(a);ie(n.$$.fragment,v),l=se(v,t),v.forEach(w),c=U(b),d&&d.l(b),b.forEach(w),this.h()},h(){D(a,"class",s="twisty-label "+(e[7]?"twisty-label-open":"")+" svelte-1ql21zt"),D(i,"class","twisty-container svelte-1ql21zt")},m(h,b){X(h,i,b),C(i,a),ae(n,a,null),C(a,l),C(i,c),d&&d.m(i,null),f=!0,I||(u=[Ge(a,"mouseover",e[15]),Ge(a,"mouseleave",e[16]),Ge(a,"click",e[14])],I=!0)},p(h,[b]){const v={};b&128&&(v.twistyOpen=h[7]),b&256&&(v.hover=h[8]),n.$set(v),(!f||b&96)&&t!==(t=h[5]&h[6]?"Select comparison areas and previous time period":h[5]?"Select areas to compare "+h[11].areanm+" to":"Select comparison area and previous time period")&&Ve(l,t),(!f||b&128&&s!==(s="twisty-label "+(h[7]?"twisty-label-open":"")+" svelte-1ql21zt"))&&D(a,"class",s),h[7]?d?(d.p(h,b),b&128&&N(d,1)):(d=Qe(h),d.c(),N(d,1),d.m(i,null)):d&&(De(),z(d,1,1,()=>{d=null}),Ae())},i(h){f||(N(n.$$.fragment,h),N(d),f=!0)},o(h){z(n.$$.fragment,h),z(d),f=!1},d(h){h&&w(i),ne(n),d&&d.d(),I=!1,fi(u)}}}const Yi=e=>e.role!="main",Fi=e=>e.areanm,Qi=e=>e.role==="parent";function Zi(e,i,a){let{chosenId1:n}=i,{chosenId2:t}=i,{chosenId4:l}=i,{chosenId5:s}=i,{globalVisibleAreasTracker:c}=i,{showAreaOptions:f,showBaselines:I}=i,u=x("selectedAndRelatedAreas"),d=x("selectedArea"),h=x("baselineComparisonOptions"),b=x("previousTimePeriodOptions"),v=!1,V=!1;const r=()=>{a(7,v=!v)},o=()=>{a(8,V=!0)},m=()=>{a(8,V=!1)};let _=1e3;function T(P){n=P,a(2,n)}function g(P){t=P,a(3,t)}function p(){_=this.offsetWidth,a(9,_)}function H(P){l=P,a(0,l)}function R(P){s=P,a(1,s)}function $(P){c=P,a(4,c),a(1,s),a(0,l),a(10,u)}return e.$$set=P=>{"chosenId1"in P&&a(2,n=P.chosenId1),"chosenId2"in P&&a(3,t=P.chosenId2),"chosenId4"in P&&a(0,l=P.chosenId4),"chosenId5"in P&&a(1,s=P.chosenId5),"globalVisibleAreasTracker"in P&&a(4,c=P.globalVisibleAreasTracker),"showAreaOptions"in P&&a(5,f=P.showAreaOptions),"showBaselines"in P&&a(6,I=P.showBaselines)},e.$$.update=()=>{e.$$.dirty&96&&console.log(f,I),e.$$.dirty&2&&(a(4,c.neighbour=s.includes(0),c),a(4,c.cluster=s.includes(1),c)),e.$$.dirty&1&&(a(4,c.parent=!1,c),a(4,c.country=!1,c),a(4,c.uk=!1,c),l.forEach(P=>{a(4,c[u.find(q=>u[P+1].areanm===q.areanm).role]=!0,c)}))},[l,s,n,t,c,f,I,v,V,_,u,d,h,b,r,o,m,T,g,p,H,R,$]}class Ji extends _e{constructor(i){super(),be(this,i,Zi,Ki,ge,{chosenId1:2,chosenId2:3,chosenId4:0,chosenId5:1,globalVisibleAreasTracker:4,showAreaOptions:5,showBaselines:6})}}function xe(e,i,a){const n=e.slice();return n[6]=i[a],n[8]=a,n}function xi(e){let i,a;return{c(){i=ke("circle"),this.h()},l(n){i=pe(n,"circle",{r:!0,fill:!0,stroke:!0});var t=W(i);t.forEach(w),this.h()},h(){D(i,"r",6),D(i,"fill",a=ye[e[6].role]),D(i,"stroke","white")},m(n,t){X(n,i,t)},p(n,t){t&1&&a!==(a=ye[n[6].role])&&D(i,"fill",a)},d(n){n&&w(i)}}}function $i(e){let i,a,n;return{c(){i=ke("rect"),this.h()},l(t){i=pe(t,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var l=W(i);l.forEach(w),this.h()},h(){D(i,"transform",a=["country","uk"].includes(e[6].role)?"rotate(45)":null),D(i,"x",-6),D(i,"y",-6),D(i,"width",2*6),D(i,"height",2*6),D(i,"fill",n=ye[e[6].role]),D(i,"stroke","white")},m(t,l){X(t,i,l)},p(t,l){l&1&&a!==(a=["country","uk"].includes(t[6].role)?"rotate(45)":null)&&D(i,"transform",a),l&1&&n!==(n=ye[t[6].role])&&D(i,"fill",n)},d(t){t&&w(i)}}}function $e(e){let i,a,n,t,l,s,c=e[6].areanm+"",f,I;function u(b,v){return v&1&&(t=null),t==null&&(t=!!["parent","country","uk"].includes(b[6].role)),t?$i:xi}let d=u(e,-1),h=d(e);return{c(){i=S("div"),a=ke("svg"),n=ke("g"),h.c(),l=j(),s=S("p"),f=le(c),I=j(),this.h()},l(b){i=G(b,"DIV",{class:!0});var v=W(i);a=pe(v,"svg",{width:!0,height:!0});var V=W(a);n=pe(V,"g",{transform:!0});var r=W(n);h.l(r),r.forEach(w),V.forEach(w),l=U(v),s=G(v,"P",{style:!0,class:!0});var o=W(s);f=se(o,c),o.forEach(w),I=U(v),v.forEach(w),this.h()},h(){D(n,"transform","translate(10,12)"),D(a,"width","20"),D(a,"height","24"),Ee(s,"color",ye[e[6].role]),D(s,"class","svelte-ta5rn5"),D(i,"class","area-container svelte-ta5rn5")},m(b,v){X(b,i,v),C(i,a),C(a,n),h.m(n,null),C(i,l),C(i,s),C(s,f),C(i,I)},p(b,v){d===(d=u(b,v))&&h?h.p(b,v):(h.d(1),h=d(b),h&&(h.c(),h.m(n,null))),v&1&&c!==(c=b[6].areanm+"")&&Ve(f,c),v&1&&Ee(s,"color",ye[b[6].role])},d(b){b&&w(i),h.d()}}}function ea(e){let i,a=e[0],n=[];for(let t=0;t<a.length;t+=1)n[t]=$e(xe(e,a,t));return{c(){i=S("div");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){i=G(t,"DIV",{class:!0});var l=W(i);for(let s=0;s<n.length;s+=1)n[s].l(l);l.forEach(w),this.h()},h(){D(i,"class","sticky svelte-ta5rn5")},m(t,l){X(t,i,l);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(i,null)},p(t,[l]){if(l&1){a=t[0];let s;for(s=0;s<a.length;s+=1){const c=xe(t,a,s);n[s]?n[s].p(c,l):(n[s]=$e(c),n[s].c(),n[s].m(i,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=a.length}},i:ue,o:ue,d(t){t&&w(i),Se(n,t)}}}function ia(e,i,a){let n,{baselineComparisonArea:t}=i,{chosenId3:l}=i,{visibleAreas:s}=i,c=x("selectedAndRelatedAreas");return x("selectedArea"),e.$$set=f=>{"baselineComparisonArea"in f&&a(1,t=f.baselineComparisonArea),"chosenId3"in f&&a(2,l=f.chosenId3),"visibleAreas"in f&&a(3,s=f.visibleAreas)},e.$$.update=()=>{e.$$.dirty&14&&a(0,n=l===0?[c[0],t.areacd==="median"?t:c.find(f=>t.areacd===f.areacd)]:s),e.$$.dirty&2&&console.log(t)},[n,t,l,s]}class aa extends _e{constructor(i){super(),be(this,i,ia,ea,ge,{baselineComparisonArea:1,chosenId3:2,visibleAreas:3})}}function ei(e,i,a){const n=e.slice();return n[47]=i[a],n[49]=a,n}function ii(e,i,a){const n=e.slice();return n[50]=i[a],n[52]=a,n}function ai(e){let i,a,n,t,l,s,c;function f(...o){return e[35](e[50],...o)}function I(...o){return e[36](e[50],...o)}function u(...o){return e[37](e[50],...o)}function d(...o){return e[38](e[50],...o)}function h(...o){return e[39](e[50],...o)}function b(o){e[40](o)}function v(o){e[41](o)}function V(o){e[42](o)}let r={rowNumb:e[52],topicNumb:e[49],indicator:e[50],latestData:e[7].filter(f),initialData:e[8].filter(I),otherData:e[9].filter(u),metadata:e[23].find(d),calculations:e[24].find(h),col1Width:We,col2Width:e[18],col3Width:e[19],col4Width:e[17],chosenId3:e[12],visibleAreas:e[10],globalVisibleAreasTracker:e[0],baselineComparisonArea:e[11],scaleHeight:e[15],scaleWidthArea:e[16],scaleWidthTime:e[22],xDomain:e[26],x:e[21],y:e[20]};return e[1]!==void 0&&(r.chosenId1=e[1]),e[2]!==void 0&&(r.chosenId2=e[2]),e[14]!==void 0&&(r.yDomainGlobal=e[14]),n=new Gi({props:r}),Y.push(()=>F(n,"chosenId1",b)),Y.push(()=>F(n,"chosenId2",v)),Y.push(()=>F(n,"yDomainGlobal",V)),{c(){i=S("div"),a=j(),ee(n.$$.fragment),this.h()},l(o){i=G(o,"DIV",{class:!0}),W(i).forEach(w),a=U(o),ie(n.$$.fragment,o),this.h()},h(){D(i,"class","divider svelte-1km6wui")},m(o,m){X(o,i,m),X(o,a,m),ae(n,o,m),c=!0},p(o,m){e=o;const _={};m[0]&96&&(_.indicator=e[50]),m[0]&224&&(_.latestData=e[7].filter(f)),m[0]&352&&(_.initialData=e[8].filter(I)),m[0]&608&&(_.otherData=e[9].filter(u)),m[0]&96&&(_.metadata=e[23].find(d)),m[0]&96&&(_.calculations=e[24].find(h)),m[0]&262144&&(_.col2Width=e[18]),m[0]&524288&&(_.col3Width=e[19]),m[0]&131072&&(_.col4Width=e[17]),m[0]&4096&&(_.chosenId3=e[12]),m[0]&1024&&(_.visibleAreas=e[10]),m[0]&1&&(_.globalVisibleAreasTracker=e[0]),m[0]&2048&&(_.baselineComparisonArea=e[11]),m[0]&32768&&(_.scaleHeight=e[15]),m[0]&65536&&(_.scaleWidthArea=e[16]),m[0]&4194304&&(_.scaleWidthTime=e[22]),m[0]&2097152&&(_.x=e[21]),m[0]&1048576&&(_.y=e[20]),!t&&m[0]&2&&(t=!0,_.chosenId1=e[1],Q(()=>t=!1)),!l&&m[0]&4&&(l=!0,_.chosenId2=e[2],Q(()=>l=!1)),!s&&m[0]&16384&&(s=!0,_.yDomainGlobal=e[14],Q(()=>s=!1)),n.$set(_)},i(o){c||(N(n.$$.fragment,o),c=!0)},o(o){z(n.$$.fragment,o),c=!1},d(o){o&&w(i),o&&w(a),ne(n,o)}}}function ni(e){let i,a,n=e[47][0].toUpperCase()+e[47].substring(1)+"",t,l,s,c,f,I,u;function d(...V){return e[34](e[47],...V)}let h=e[6].filter(d),b=[];for(let V=0;V<h.length;V+=1)b[V]=ai(ii(e,h,V));const v=V=>z(b[V],1,1,()=>{b[V]=null});return{c(){i=S("div"),a=S("h4"),t=le(n),l=j(),s=S("div");for(let V=0;V<b.length;V+=1)b[V].c();c=j(),f=S("div"),I=j(),this.h()},l(V){i=G(V,"DIV",{class:!0});var r=W(i);a=G(r,"H4",{class:!0});var o=W(a);t=se(o,n),o.forEach(w),l=U(r),s=G(r,"DIV",{class:!0});var m=W(s);for(let _=0;_<b.length;_+=1)b[_].l(m);m.forEach(w),c=U(r),f=G(r,"DIV",{class:!0}),W(f).forEach(w),I=U(r),r.forEach(w),this.h()},h(){D(a,"class","sub-topic-header svelte-1km6wui"),D(s,"class","sub-topic-rows-container svelte-1km6wui"),D(f,"class","divider svelte-1km6wui"),D(i,"class","sub-topic-container svelte-1km6wui")},m(V,r){X(V,i,r),C(i,a),C(a,t),C(i,l),C(i,s);for(let o=0;o<b.length;o+=1)b[o]&&b[o].m(s,null);C(i,c),C(i,f),C(i,I),u=!0},p(V,r){if(e=V,(!u||r[0]&32)&&n!==(n=e[47][0].toUpperCase()+e[47].substring(1)+"")&&Ve(t,n),r[0]&100655079){h=e[6].filter(d);let o;for(o=0;o<h.length;o+=1){const m=ii(e,h,o);b[o]?(b[o].p(m,r),N(b[o],1)):(b[o]=ai(m),b[o].c(),N(b[o],1),b[o].m(s,null))}for(De(),o=h.length;o<b.length;o+=1)v(o);Ae()}},i(V){if(!u){for(let r=0;r<h.length;r+=1)N(b[r]);u=!0}},o(V){b=b.filter(Boolean);for(let r=0;r<b.length;r+=1)z(b[r]);u=!1},d(V){V&&w(i),Se(b,V)}}}function na(e){let i,a,n,t,l,s,c,f,I,u,d,h,b,v,V,r,o,m,_;function T(A){e[28](A)}let g={name:"select-row-view",optionsArray:e[25],width:e[13]};e[12]!==void 0&&(g.chosenId=e[12]),i=new wi({props:g}),Y.push(()=>F(i,"chosenId",T));function p(A){e[29](A)}function H(A){e[30](A)}function R(A){e[31](A)}function $(A){e[32](A)}function P(A){e[33](A)}let q={showAreaOptions:e[12]!=0,showBaselines:e[12]===0};e[1]!==void 0&&(q.chosenId1=e[1]),e[2]!==void 0&&(q.chosenId2=e[2]),e[0]!==void 0&&(q.globalVisibleAreasTracker=e[0]),e[3]!==void 0&&(q.chosenId4=e[3]),e[4]!==void 0&&(q.chosenId5=e[4]),s=new Ji({props:q}),Y.push(()=>F(s,"chosenId1",p)),Y.push(()=>F(s,"chosenId2",H)),Y.push(()=>F(s,"globalVisibleAreasTracker",R)),Y.push(()=>F(s,"chosenId4",$)),Y.push(()=>F(s,"chosenId5",P)),v=new aa({props:{baselineComparisonArea:e[11],chosenId3:e[12],visibleAreas:e[10]}});let te=e[5].subTopicsList,B=[];for(let A=0;A<te.length;A+=1)B[A]=ni(ei(e,te,A));const M=A=>z(B[A],1,1,()=>{B[A]=null});return o=new Pi({}),{c(){ee(i.$$.fragment),n=j(),t=S("div"),l=S("div"),ee(s.$$.fragment),h=j(),b=S("div"),ee(v.$$.fragment),V=j();for(let A=0;A<B.length;A+=1)B[A].c();r=j(),ee(o.$$.fragment),this.h()},l(A){ie(i.$$.fragment,A),n=U(A),t=G(A,"DIV",{class:!0});var O=W(t);l=G(O,"DIV",{class:!0});var K=W(l);ie(s.$$.fragment,K),h=U(K),b=G(K,"DIV",{class:!0});var Z=W(b);ie(v.$$.fragment,Z),V=U(Z);for(let re=0;re<B.length;re+=1)B[re].l(Z);Z.forEach(w),r=U(K),ie(o.$$.fragment,K),K.forEach(w),O.forEach(w),this.h()},h(){D(b,"class","key-and-rows-container"),D(l,"class","digest-beeswarm-line-inner-container svelte-1km6wui"),oi(()=>e[43].call(l)),D(t,"class","digest-beeswarm-line-outer-container svelte-1km6wui")},m(A,O){ae(i,A,O),X(A,n,O),X(A,t,O),C(t,l),ae(s,l,null),C(l,h),C(l,b),ae(v,b,null),C(b,V);for(let K=0;K<B.length;K+=1)B[K]&&B[K].m(b,null);C(l,r),ae(o,l,null),m=ri(l,e[43].bind(l)),_=!0},p(A,O){const K={};O[0]&8192&&(K.width=A[13]),!a&&O[0]&4096&&(a=!0,K.chosenId=A[12],Q(()=>a=!1)),i.$set(K);const Z={};O[0]&4096&&(Z.showAreaOptions=A[12]!=0),O[0]&4096&&(Z.showBaselines=A[12]===0),!c&&O[0]&2&&(c=!0,Z.chosenId1=A[1],Q(()=>c=!1)),!f&&O[0]&4&&(f=!0,Z.chosenId2=A[2],Q(()=>f=!1)),!I&&O[0]&1&&(I=!0,Z.globalVisibleAreasTracker=A[0],Q(()=>I=!1)),!u&&O[0]&8&&(u=!0,Z.chosenId4=A[3],Q(()=>u=!1)),!d&&O[0]&16&&(d=!0,Z.chosenId5=A[4],Q(()=>d=!1)),s.$set(Z);const re={};if(O[0]&2048&&(re.baselineComparisonArea=A[11]),O[0]&4096&&(re.chosenId3=A[12]),O[0]&1024&&(re.visibleAreas=A[10]),v.$set(re),O[0]&100655079){te=A[5].subTopicsList;let J;for(J=0;J<te.length;J+=1){const de=ei(A,te,J);B[J]?(B[J].p(de,O),N(B[J],1)):(B[J]=ni(de),B[J].c(),N(B[J],1),B[J].m(b,null))}for(De(),J=te.length;J<B.length;J+=1)M(J);Ae()}},i(A){if(!_){N(i.$$.fragment,A),N(s.$$.fragment,A),N(v.$$.fragment,A);for(let O=0;O<te.length;O+=1)N(B[O]);N(o.$$.fragment,A),_=!0}},o(A){z(i.$$.fragment,A),z(s.$$.fragment,A),z(v.$$.fragment,A),B=B.filter(Boolean);for(let O=0;O<B.length;O+=1)z(B[O]);z(o.$$.fragment,A),_=!1},d(A){ne(i,A),A&&w(n),A&&w(t),ne(s),ne(v),Se(B,A),ne(o),m()}}}let We=240;function ta(e,i,a){let n,t,l,s,c,f,I,u,{topic:d,topicUppercase:h}=i,{indicators:b}=i,{latestData:v,initialData:V,otherData:r}=i,{visibleAreas:o,globalVisibleAreasTracker:m}=i,{chosenId1:_,baselineComparisonArea:T}=i,{chosenId2:g}=i,{chosenId4:p,chosenId5:H}=i,R=x("indicatorsMetadata"),$=x("indicatorsCalculations"),P=x("selectedArea"),q=0,te=[h+" digest","Compare "+P.areanm+" to other areas","Compare "+P.areanm+" over time"],B=1e3,M=[-Be,Be],A=[-1,1];si(()=>{});function O(L){q=L,a(12,q)}function K(L){_=L,a(1,_)}function Z(L){g=L,a(2,g)}function re(L){m=L,a(0,m)}function J(L){p=L,a(3,p)}function de(L){H=L,a(4,H)}const E=(L,k)=>k.subTopic===L,oe=(L,k)=>k.id===L.id,fe=(L,k)=>k.id===L.id,he=(L,k)=>k.id===L.id,Ie=(L,k)=>k.code===L.code,ce=(L,k)=>k.id===L.id;function me(L){_=L,a(1,_)}function we(L){g=L,a(2,g)}function Te(L){A=L,a(14,A)}function y(){B=this.offsetWidth,a(13,B)}return e.$$set=L=>{"topic"in L&&a(5,d=L.topic),"topicUppercase"in L&&a(27,h=L.topicUppercase),"indicators"in L&&a(6,b=L.indicators),"latestData"in L&&a(7,v=L.latestData),"initialData"in L&&a(8,V=L.initialData),"otherData"in L&&a(9,r=L.otherData),"visibleAreas"in L&&a(10,o=L.visibleAreas),"globalVisibleAreasTracker"in L&&a(0,m=L.globalVisibleAreasTracker),"chosenId1"in L&&a(1,_=L.chosenId1),"baselineComparisonArea"in L&&a(11,T=L.baselineComparisonArea),"chosenId2"in L&&a(2,g=L.chosenId2),"chosenId4"in L&&a(3,p=L.chosenId4),"chosenId5"in L&&a(4,H=L.chosenId5)},e.$$.update=()=>{e.$$.dirty[0]&134221824&&te[q].replace(h+" ","").replace(P.areanm+" ",""),e.$$.dirty[0]&4096&&a(19,n=q===0?20:0),e.$$.dirty[0]&536576&&a(18,t=q===0?(B-We-n-5)/2:q===1?B-We-n:0),e.$$.dirty[0]&536576&&a(17,l=q===0?(B-We-n-5)/2:q===1?0:B-We-n),e.$$.dirty[0]&4096&&a(15,s=Oe[q===0?"split":"full"]-ve.bottom-ve.top),e.$$.dirty[0]&262144&&a(16,c=t-ve.left-ve.right-ve.areaSpaceBeyondXScale*2),e.$$.dirty[0]&131072&&a(22,f=l-ve.left-ve.right-ve.areaSpaceBeyondXScale*2),e.$$.dirty[0]&65536&&a(21,I=He().domain(M).range([0,c])),e.$$.dirty[0]&49152&&a(20,u=He().domain(A).range([0,s]))},[m,_,g,p,H,d,b,v,V,r,o,T,q,B,A,s,c,l,t,n,u,I,f,R,$,te,M,h,O,K,Z,re,J,de,E,oe,fe,he,Ie,ce,me,we,Te,y]}class la extends _e{constructor(i){super(),be(this,i,ta,na,ge,{topic:5,topicUppercase:27,indicators:6,latestData:7,initialData:8,otherData:9,visibleAreas:10,globalVisibleAreasTracker:0,chosenId1:1,baselineComparisonArea:11,chosenId2:2,chosenId4:3,chosenId5:4},null,[-1,-1])}}function sa(e){let i,a,n,t,l,s,c,f,I,u,d,h,b,v;s=new Vi({props:{topic:e[5]}});function V(g){e[13](g)}function r(g){e[14](g)}function o(g){e[15](g)}function m(g){e[16](g)}function _(g){e[17](g)}let T={topic:e[5],topicUppercase:e[12],indicators:e[11],latestData:e[6],initialData:e[8],otherData:e[7],visibleAreas:e[9],baselineComparisonArea:e[10]};return e[0]!==void 0&&(T.globalVisibleAreasTracker=e[0]),e[1]!==void 0&&(T.chosenId1=e[1]),e[2]!==void 0&&(T.chosenId2=e[2]),e[3]!==void 0&&(T.chosenId4=e[3]),e[4]!==void 0&&(T.chosenId5=e[4]),f=new la({props:T}),Y.push(()=>F(f,"globalVisibleAreasTracker",V)),Y.push(()=>F(f,"chosenId1",r)),Y.push(()=>F(f,"chosenId2",o)),Y.push(()=>F(f,"chosenId4",m)),Y.push(()=>F(f,"chosenId5",_)),{c(){i=S("section"),a=S("h1"),n=S("a"),t=le(e[12]),l=j(),ee(s.$$.fragment),c=j(),ee(f.$$.fragment),this.h()},l(g){i=G(g,"SECTION",{title:!0,class:!0});var p=W(i);a=G(p,"H1",{class:!0});var H=W(a);n=G(H,"A",{href:!0});var R=W(n);t=se(R,e[12]),R.forEach(w),H.forEach(w),l=U(p),ie(s.$$.fragment,p),c=U(p),ie(f.$$.fragment,p),p.forEach(w),this.h()},h(){D(n,"href","https://www.ons.gov.uk/"),D(a,"class","svelte-1571btw"),D(i,"title",e[12]),D(i,"class","svelte-1571btw")},m(g,p){X(g,i,p),C(i,a),C(a,n),C(n,t),C(i,l),ae(s,i,null),C(i,c),ae(f,i,null),v=!0},p(g,[p]){const H={};p&32&&(H.topic=g[5]),s.$set(H);const R={};p&32&&(R.topic=g[5]),p&64&&(R.latestData=g[6]),p&256&&(R.initialData=g[8]),p&128&&(R.otherData=g[7]),p&512&&(R.visibleAreas=g[9]),p&1024&&(R.baselineComparisonArea=g[10]),!I&&p&1&&(I=!0,R.globalVisibleAreasTracker=g[0],Q(()=>I=!1)),!u&&p&2&&(u=!0,R.chosenId1=g[1],Q(()=>u=!1)),!d&&p&4&&(d=!0,R.chosenId2=g[2],Q(()=>d=!1)),!h&&p&8&&(h=!0,R.chosenId4=g[3],Q(()=>h=!1)),!b&&p&16&&(b=!0,R.chosenId5=g[4],Q(()=>b=!1)),f.$set(R)},i(g){v||(N(s.$$.fragment,g),N(f.$$.fragment,g),v=!0)},o(g){z(s.$$.fragment,g),z(f.$$.fragment,g),v=!1},d(g){g&&w(i),ne(s),ne(f)}}}function oa(e,i,a){let{topic:n}=i,{latestData:t,otherData:l,initialData:s}=i,{visibleAreas:c,globalVisibleAreasTracker:f}=i,{chosenId1:I,baselineComparisonArea:u}=i,{chosenId2:d}=i,{chosenId4:h,chosenId5:b}=i,v=x("indicators").filter(g=>g.topic===n.name),V=n.name[0].toUpperCase()+n.name.substring(1);function r(g){f=g,a(0,f)}function o(g){I=g,a(1,I)}function m(g){d=g,a(2,d)}function _(g){h=g,a(3,h)}function T(g){b=g,a(4,b)}return e.$$set=g=>{"topic"in g&&a(5,n=g.topic),"latestData"in g&&a(6,t=g.latestData),"otherData"in g&&a(7,l=g.otherData),"initialData"in g&&a(8,s=g.initialData),"visibleAreas"in g&&a(9,c=g.visibleAreas),"globalVisibleAreasTracker"in g&&a(0,f=g.globalVisibleAreasTracker),"chosenId1"in g&&a(1,I=g.chosenId1),"baselineComparisonArea"in g&&a(10,u=g.baselineComparisonArea),"chosenId2"in g&&a(2,d=g.chosenId2),"chosenId4"in g&&a(3,h=g.chosenId4),"chosenId5"in g&&a(4,b=g.chosenId5)},[f,I,d,h,b,n,t,l,s,c,u,v,V,r,o,m,_,T]}class ra extends _e{constructor(i){super(),be(this,i,oa,sa,ge,{topic:5,latestData:6,otherData:7,initialData:8,visibleAreas:9,globalVisibleAreasTracker:0,chosenId1:1,baselineComparisonArea:10,chosenId2:2,chosenId4:3,chosenId5:4})}}function ti(e,i,a){const n=e.slice();return n[35]=i[a],n[37]=a,n}function ca(e){let i=e[11].areanm+"",a;return{c(){a=le(i)},l(n){a=se(n,i)},m(n,t){X(n,a,t)},p:ue,d(n){n&&w(a)}}}function fa(e){let i,a=e[11].areanm+"",n;return{c(){i=le("Get localised data, insights and trends for "),n=le(a)},l(t){i=se(t,"Get localised data, insights and trends for "),n=se(t,a)},m(t,l){X(t,i,l),X(t,n,l)},p:ue,d(t){t&&w(i),t&&w(n)}}}function ua(e){let i,a,n,t;return i=new hi({props:{$$slots:{default:[ca]},$$scope:{ctx:e}}}),n=new di({props:{$$slots:{default:[fa]},$$scope:{ctx:e}}}),{c(){ee(i.$$.fragment),a=j(),ee(n.$$.fragment)},l(l){ie(i.$$.fragment,l),a=U(l),ie(n.$$.fragment,l)},m(l,s){ae(i,l,s),X(l,a,s),ae(n,l,s),t=!0},p(l,s){const c={};s[1]&128&&(c.$$scope={dirty:s,ctx:l}),i.$set(c);const f={};s[1]&128&&(f.$$scope={dirty:s,ctx:l}),n.$set(f)},i(l){t||(N(i.$$.fragment,l),N(n.$$.fragment,l),t=!0)},o(l){z(i.$$.fragment,l),z(n.$$.fragment,l),t=!1},d(l){ne(i,l),l&&w(a),ne(n,l)}}}function li(e){let i,a,n,t,l,s,c;function f(...o){return e[13](e[35],...o)}function I(...o){return e[14](e[35],...o)}function u(...o){return e[15](e[35],...o)}function d(o){e[16](o)}function h(o){e[17](o)}function b(o){e[18](o)}function v(o){e[19](o)}function V(o){e[20](o)}let r={topic:e[35],latestData:e[8].filter(f),otherData:e[9].filter(I),initialData:e[10].filter(u),visibleAreas:e[5],baselineComparisonArea:e[6]};return e[0]!==void 0&&(r.globalVisibleAreasTracker=e[0]),e[1]!==void 0&&(r.chosenId1=e[1]),e[4]!==void 0&&(r.chosenId2=e[4]),e[2]!==void 0&&(r.chosenId4=e[2]),e[3]!==void 0&&(r.chosenId5=e[3]),i=new ra({props:r}),Y.push(()=>F(i,"globalVisibleAreasTracker",d)),Y.push(()=>F(i,"chosenId1",h)),Y.push(()=>F(i,"chosenId2",b)),Y.push(()=>F(i,"chosenId4",v)),Y.push(()=>F(i,"chosenId5",V)),{c(){ee(i.$$.fragment)},l(o){ie(i.$$.fragment,o)},m(o,m){ae(i,o,m),c=!0},p(o,m){e=o;const _={};m[0]&32&&(_.visibleAreas=e[5]),m[0]&64&&(_.baselineComparisonArea=e[6]),!a&&m[0]&1&&(a=!0,_.globalVisibleAreasTracker=e[0],Q(()=>a=!1)),!n&&m[0]&2&&(n=!0,_.chosenId1=e[1],Q(()=>n=!1)),!t&&m[0]&16&&(t=!0,_.chosenId2=e[4],Q(()=>t=!1)),!l&&m[0]&4&&(l=!0,_.chosenId4=e[2],Q(()=>l=!1)),!s&&m[0]&8&&(s=!0,_.chosenId5=e[3],Q(()=>s=!1)),i.$set(_)},i(o){c||(N(i.$$.fragment,o),c=!0)},o(o){z(i.$$.fragment,o),c=!1},d(o){ne(i,o)}}}function ha(e){let i;return{c(){i=le("Find parent, child and neighbouring areas")},l(a){i=se(a,"Find parent, child and neighbouring areas")},m(a,n){X(a,i,n)},d(a){a&&w(i)}}}function da(e){let i,a,n,t,l,s,c,f,I,u,d,h,b=e[7],v=[];for(let r=0;r<b.length;r+=1)v[r]=li(ti(e,b,r));const V=r=>z(v[r],1,1,()=>{v[r]=null});return t=new Ai({props:{$$slots:{default:[ha]},$$scope:{ctx:e}}}),{c(){i=S("div");for(let r=0;r<v.length;r+=1)v[r].c();a=j(),n=S("section"),ee(t.$$.fragment),l=j(),s=S("section"),c=S("h2"),f=le("Get the data"),I=j(),u=S("p"),d=le("Here, you can find information and links to the data."),this.h()},l(r){i=G(r,"DIV",{class:!0});var o=W(i);for(let p=0;p<v.length;p+=1)v[p].l(o);a=U(o),n=G(o,"SECTION",{title:!0,class:!0});var m=W(n);ie(t.$$.fragment,m),m.forEach(w),l=U(o),s=G(o,"SECTION",{title:!0,class:!0});var _=W(s);c=G(_,"H2",{class:!0});var T=W(c);f=se(T,"Get the data"),T.forEach(w),I=U(_),u=G(_,"P",{});var g=W(u);d=se(g,"Here, you can find information and links to the data."),g.forEach(w),_.forEach(w),o.forEach(w),this.h()},h(){D(n,"title","Related areas"),D(n,"class","svelte-r2srs5"),D(c,"class","ons-u-mt-xl"),D(s,"title","Get the data"),D(s,"class","svelte-r2srs5"),D(i,"class","visual-content-container")},m(r,o){X(r,i,o);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(i,null);C(i,a),C(i,n),ae(t,n,null),C(i,l),C(i,s),C(s,c),C(c,f),C(s,I),C(s,u),C(u,d),h=!0},p(r,o){if(o[0]&2047){b=r[7];let _;for(_=0;_<b.length;_+=1){const T=ti(r,b,_);v[_]?(v[_].p(T,o),N(v[_],1)):(v[_]=li(T),v[_].c(),N(v[_],1),v[_].m(i,a))}for(De(),_=b.length;_<v.length;_+=1)V(_);Ae()}const m={};o[1]&128&&(m.$$scope={dirty:o,ctx:r}),t.$set(m)},i(r){if(!h){for(let o=0;o<b.length;o+=1)N(v[o]);N(t.$$.fragment,r),h=!0}},o(r){v=v.filter(Boolean);for(let o=0;o<v.length;o+=1)z(v[o]);z(t.$$.fragment,r),h=!1},d(r){r&&w(i),Se(v,r),ne(t)}}}function ma(e){let i,a,n,t;return i=new ui({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Pe}/`},{label:"Find a local area",url:`${Pe}/areas`},{label:e[11].areanm}],$$slots:{default:[ua]},$$scope:{ctx:e}}}),n=new Di({props:{contentsLabel:"Explore this area",$$slots:{default:[da]},$$scope:{ctx:e}}}),{c(){ee(i.$$.fragment),a=j(),ee(n.$$.fragment)},l(l){ie(i.$$.fragment,l),a=U(l),ie(n.$$.fragment,l)},m(l,s){ae(i,l,s),X(l,a,s),ae(n,l,s),t=!0},p(l,s){const c={};s[1]&128&&(c.$$scope={dirty:s,ctx:l}),i.$set(c);const f={};s[0]&127|s[1]&128&&(f.$$scope={dirty:s,ctx:l}),n.$set(f)},i(l){t||(N(i.$$.fragment,l),N(n.$$.fragment,l),t=!0)},o(l){z(i.$$.fragment,l),z(n.$$.fragment,l),t=!1},d(l){ne(i,l),l&&w(a),ne(n,l)}}}function _a(e,i,a){let n,t,l,s,c,{data:f}=i,I=x("areas"),u=x("areasParentsLookup"),d=x("areasGeogLevel"),h=x("topics"),b=x("latestData"),v=x("otherData"),V=x("initialData"),r=d.find(E=>E.areacd===f.areacd).level,o=d.filter(E=>["uk","country"].includes(r)?E.level===r:r==="region"?["region","country"].includes(E.level):r==="both"?["both","lower"].includes(E.level):["both",r].includes(E.level)).map(E=>E.areacd);Ce("selectedGeogLevel",r),Ce("areasWithSameGeog",o);let m=["median of all "+ze[r]],_=[],T=I.find(E=>E.areacd===f.areacd);Ce("selectedArea",T),_.push({...T,role:"main"});let g=u.find(E=>E.areacd===f.areacd),p=I.find(E=>E.areacd===g.parentcd);_.push({...p,role:"parent"}),m.push(p.areanm),g.parentcd!=g.countrycd&g.countrycd!=""&&(_.push({...I.find(E=>E.areacd===g.countrycd),role:"country"}),m.push(g.countrynm)),g.parentcd!="K02000001"&&(_.push({...I.find(E=>E.areacd==="K02000001"),role:"uk"}),m.push("United Kingdom")),Ce("baselineComparisonOptions",m),Ce("selectedAndRelatedAreas",_);let H=x("indicators"),R=x("indicatorsCalculations"),$=9999,P=0;R.forEach(E=>{let oe=H.find(he=>E.id===he.id);oe.data.filter(he=>o.includes(he.areacd)),E.calcs={},E.mainMinXDomain=E.maxXDomain,E.mainMaxXDomain=E.minXDomain;for(var fe=E.minXDomain;fe<=E.maxXDomain;fe++){let he=oe.data.filter(ce=>ce.xDomainNumb==fe),Ie=he.filter(ce=>o.includes(ce.areacd));if(he.length>0){if(fe==E.maxXDomain){oe.latestData=he,oe.latestDataSameGeogLevel=Ie;let ce=Le(Ie,"value"),me=Ie.map(Te=>Math.abs(Te.value-ce)),we=Le(me);E.calcs[E.maxXDomain]={median:ce,mad:we}}else E.calcs[fe]={median:Le(Ie,"value")};_.forEach(ce=>{let me=he.find(we=>ce.areacd===we.areacd);E.calcs[fe][ce.role]=me==null?null:me.value,ce.role==="main"&me!=null&&(E.mainMinXDomain=Math.min(fe,E.mainMinXDomain),E.mainMaxXDomain=Math.max(fe,E.mainMaxXDomain))})}$=Math.min($,E.mainMinXDomain),P=Math.max(P,E.mainMaxXDomain)}}),Ce("indicators",H);let q=["earliest available year","previous year",...Array.from({length:P-$+1},(E,oe)=>$+oe).reverse()];Ce("previousTimePeriodOptions",q);let te=[],B=[];const M=(E,oe)=>E.indicatorsList.includes(oe.id),A=(E,oe)=>E.indicatorsList.includes(oe.id),O=(E,oe)=>E.indicatorsList.includes(oe.id);function K(E){l=E,a(0,l)}function Z(E){n=E,a(1,n),a(28,m)}function re(E){c=E,a(4,c),a(34,q)}function J(E){te=E,a(2,te)}function de(E){B=E,a(3,B)}return e.$$set=E=>{"data"in E&&a(12,f=E.data)},e.$$.update=()=>{e.$$.dirty[0]&2&&a(6,t=n.substring(0,6)==="median"?{areacd:"median",areanm:"Median of all "+ze[r],role:"median"}:I.find(E=>E.areanm===n)),e.$$.dirty[0]&1&&a(5,s=[..._.filter(E=>l[E.role]),...l.custom==null?[]:l.custom.map((E,oe)=>({...E,role:"custom"+(oe+1)}))])},a(1,n=m[0]),a(0,l={main:!0,parent:!1,country:!1,uk:!1,neighbour:!1,cluster:!1,custom:null}),a(4,c=q[0]),[l,n,te,B,c,s,t,h,b,v,V,T,f,M,A,O,K,Z,re,J,de]}class Aa extends _e{constructor(i){super(),be(this,i,_a,ma,ge,{data:12},null,[-1,-1])}}export{Aa as component};
