import{S as Ie,i as Ce,s as Oe,F as j,G as Z,m as C,h as m,p as c,b as O,D as A,n as Be,Q as ke,r as K,u as H,k as P,a as $,z as le,e as ve,l as R,c as x,A as ne,U as Bt,B as ie,V as Kt,v as fe,g as N,d as q,C as ae,N as Me,_ as Ze,$ as Ht,x as ye,X as Ee,H as Le,q as be,Y as Se,W as Nt,Z as je,R as Pt,f as We,w as Ve}from"../chunks/index.55d451b5.js";import{b as ze}from"../chunks/paths.7fd8b6af.js";import{a as Rt,b as Ye}from"../chunks/utils.bdf56f5c.js";import{T as Wt,H as Vt,S as qt}from"../chunks/Cards.971dbdfa.js";import{A as jt,l as Qe,s as Zt,S as Gt,P as Ut,D as Yt}from"../chunks/SelectComparisonAreas.svelte_svelte_type_style_lang.041b6613.js";import{A as Qt}from"../chunks/AreaNav.20541bf0.js";import{s as qe,c as Ke,f as Xt}from"../chunks/selectedAreasStore.774560e6.js";import{k as Xe,l as X,m as Je}from"../chunks/config.b800103c.js";import{S as Jt,T as $t}from"../chunks/Spacer.727ac1ab.js";function De(t){return function(){return t}}const Ge=Math.PI,Ue=2*Ge,Ae=1e-6,xt=Ue-Ae;function Tt(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}function el(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Tt;const l=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*l)/l+n[i]}}class tl{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Tt:el(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,n,i){this._append`Q${+e},${+l},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,l,n,i,a,r){this._append`C${+e},${+l},${+n},${+i},${this._x1=+a},${this._y1=+r}`}arcTo(e,l,n,i,a){if(e=+e,l=+l,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let r=this._x1,o=this._y1,f=n-e,u=i-l,s=r-e,h=o-l,p=s*s+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=l}`;else if(p>Ae)if(!(Math.abs(h*f-u*s)>Ae)||!a)this._append`L${this._x1=e},${this._y1=l}`;else{let b=n-r,M=i-o,w=f*f+u*u,E=b*b+M*M,d=Math.sqrt(w),v=Math.sqrt(p),_=a*Math.tan((Ge-Math.acos((w+p-E)/(2*d*v)))/2),z=_/v,y=_/d;Math.abs(z-1)>Ae&&this._append`L${e+z*s},${l+z*h}`,this._append`A${a},${a},0,0,${+(h*b>s*M)},${this._x1=e+y*f},${this._y1=l+y*u}`}}arc(e,l,n,i,a,r){if(e=+e,l=+l,n=+n,r=!!r,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),f=n*Math.sin(i),u=e+o,s=l+f,h=1^r,p=r?i-a:a-i;this._x1===null?this._append`M${u},${s}`:(Math.abs(this._x1-u)>Ae||Math.abs(this._y1-s)>Ae)&&this._append`L${u},${s}`,n&&(p<0&&(p=p%Ue+Ue),p>xt?this._append`A${n},${n},0,1,${h},${e-o},${l-f}A${n},${n},0,1,${h},${this._x1=u},${this._y1=s}`:p>Ae&&this._append`A${n},${n},0,${+(p>=Ge)},${h},${this._x1=e+n*Math.cos(a)},${this._y1=l+n*Math.sin(a)}`)}rect(e,l,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function ll(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(l==null)e=null;else{const n=Math.floor(l);if(!(n>=0))throw new RangeError(`invalid digits: ${l}`);e=n}return t},()=>new tl(e)}function nl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Lt(t){this._context=t}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function il(t){return new Lt(t)}function al(t){return t[0]}function rl(t){return t[1]}function ol(t,e){var l=De(!0),n=null,i=il,a=null,r=ll(o);t=typeof t=="function"?t:t===void 0?al:De(t),e=typeof e=="function"?e:e===void 0?rl:De(e);function o(f){var u,s=(f=nl(f)).length,h,p=!1,b;for(n==null&&(a=i(b=r())),u=0;u<=s;++u)!(u<s&&l(h=f[u],u,f))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(h,u,f),+e(h,u,f));if(b)return a=null,b+""||null}return o.x=function(f){return arguments.length?(t=typeof f=="function"?f:De(+f),o):t},o.y=function(f){return arguments.length?(e=typeof f=="function"?f:De(+f),o):e},o.defined=function(f){return arguments.length?(l=typeof f=="function"?f:De(!!f),o):l},o.curve=function(f){return arguments.length?(i=f,n!=null&&(a=i(n)),o):i},o.context=function(f){return arguments.length?(f==null?n=a=null:a=i(n=f),o):n},o}function $e(t,e,l){const n=t.slice();return n[7]=e[l],n[9]=l,n}function xe(t){let e,l,n,i;return{c(){e=j("line"),this.h()},l(a){e=Z(a,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),C(e).forEach(m),this.h()},h(){c(e,"y1","0"),c(e,"y2",l=-t[3]),c(e,"x1",n=t[1](t[7])),c(e,"x2",i=t[1](t[7])),c(e,"stroke","black"),c(e,"opacity","0.1")},m(a,r){O(a,e,r)},p(a,r){r&8&&l!==(l=-a[3])&&c(e,"y2",l),r&2&&n!==(n=a[1](a[7]))&&c(e,"x1",n),r&2&&i!==(i=a[1](a[7]))&&c(e,"x2",i)},d(a){a&&m(e)}}}function et(t){let e,l,n,i,a,r=t[7]+"",o,f,u=t[4]&&xe(t);return{c(){e=j("g"),l=j("line"),a=j("text"),o=K(r),u&&u.c(),this.h()},l(s){e=Z(s,"g",{class:!0});var h=C(e);l=Z(h,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),C(l).forEach(m),a=Z(h,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var p=C(a);o=H(p,r),p.forEach(m),u&&u.l(h),h.forEach(m),this.h()},h(){c(l,"y1","0"),c(l,"y2","8"),c(l,"x1",n=t[1](t[7])),c(l,"x2",i=t[1](t[7])),c(l,"stroke","black"),c(a,"text-anchor","middle"),c(a,"y",20),c(a,"x",f=t[1](t[7])),c(a,"stroke","none"),c(a,"fill","#333"),c(a,"font-size","14px"),c(e,"class","tick")},m(s,h){O(s,e,h),A(e,l),A(e,a),A(a,o),u&&u.m(e,null)},p(s,h){h&2&&n!==(n=s[1](s[7]))&&c(l,"x1",n),h&2&&i!==(i=s[1](s[7]))&&c(l,"x2",i),h&2&&f!==(f=s[1](s[7]))&&c(a,"x",f),s[4]?u?u.p(s,h):(u=xe(s),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(s){s&&m(e),u&&u.d()}}}function sl(t){let e,l,n,i,a,r=t[5],o=[];for(let f=0;f<r.length;f+=1)o[f]=et($e(t,r,f));return{c(){e=j("g"),l=j("line");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=Z(f,"g",{class:!0,transform:!0});var u=C(e);l=Z(u,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),C(l).forEach(m);for(let s=0;s<o.length;s+=1)o[s].l(u);u.forEach(m),this.h()},h(){c(l,"y1","0"),c(l,"y2","0"),c(l,"x1",n=t[1](t[0][0])),c(l,"x2",i=t[1](t[0][1])),c(l,"stroke","black"),c(e,"class","xAxis"),c(e,"transform",a="translate(0,"+(t[2]+t[3])+")")},m(f,u){O(f,e,u),A(e,l);for(let s=0;s<o.length;s+=1)o[s].m(e,null)},p(f,[u]){if(u&3&&n!==(n=f[1](f[0][0]))&&c(l,"x1",n),u&3&&i!==(i=f[1](f[0][1]))&&c(l,"x2",i),u&58){r=f[5];let s;for(s=0;s<r.length;s+=1){const h=$e(f,r,s);o[s]?o[s].p(h,u):(o[s]=et(h),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=r.length}u&12&&a!==(a="translate(0,"+(f[2]+f[3])+")")&&c(e,"transform",a)},i:Be,o:Be,d(f){f&&m(e),ke(o,f)}}}function fl(t,e,l){let{xDomain:n,x:i,xAxisOffset:a=0,tickInterval:r=5,chartHeight:o,gridlines:f=!1}=e,u=[];for(let s=Math.floor(n[0]);s<=Math.ceil(n[1]);s++)s%r==0&&u.push(s);return t.$$set=s=>{"xDomain"in s&&l(0,n=s.xDomain),"x"in s&&l(1,i=s.x),"xAxisOffset"in s&&l(2,a=s.xAxisOffset),"tickInterval"in s&&l(6,r=s.tickInterval),"chartHeight"in s&&l(3,o=s.chartHeight),"gridlines"in s&&l(4,f=s.gridlines)},[n,i,a,o,f,u,r]}class ul extends Ie{constructor(e){super(),Ce(this,e,fl,sl,Oe,{xDomain:0,x:1,xAxisOffset:2,tickInterval:6,chartHeight:3,gridlines:4})}}function tt(t,e,l){const n=t.slice();return n[26]=e[l],n[28]=l,n}function lt(t,e,l){const n=t.slice();return n[26]=e[l],n[28]=l,n}function nt(t,e,l){const n=t.slice();return n[30]=e[l],n[32]=l,n}function it(t,e,l){const n=t.slice();return n[33]=e[l],n[32]=l,n}function at(t){let e;function l(a,r){return a[33]==="parent"?_l:a[33]==="country"?hl:cl}let n=l(t),i=n(t);return{c(){e=j("g"),i.c(),this.h()},l(a){e=Z(a,"g",{transform:!0});var r=C(e);i.l(r),r.forEach(m),this.h()},h(){c(e,"transform","translate("+10+","+-5+")")},m(a,r){O(a,e,r),i.m(e,null)},p(a,r){n===(n=l(a))&&i?i.p(a,r):(i.d(1),i=n(a),i&&(i.c(),i.m(e,null)))},d(a){a&&m(e),i.d()}}}function cl(t){let e,l;return{c(){e=j("circle"),this.h()},l(n){e=Z(n,"circle",{r:!0,fill:!0,stroke:!0});var i=C(e);i.forEach(m),this.h()},h(){c(e,"r","3.5"),c(e,"fill",l=X[t[33]]),c(e,"stroke","white")},m(n,i){O(n,e,i)},p(n,i){i[0]&2048&&l!==(l=X[n[33]])&&c(e,"fill",l)},d(n){n&&m(e)}}}function hl(t){let e,l;return{c(){e=j("rect"),this.h()},l(n){e=Z(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=C(e);i.forEach(m),this.h()},h(){c(e,"transform","rotate(45)"),c(e,"x","-3"),c(e,"y","-3"),c(e,"width","6"),c(e,"height","6"),c(e,"fill",l=X[t[33]]),c(e,"stroke","white")},m(n,i){O(n,e,i)},p(n,i){i[0]&2048&&l!==(l=X[n[33]])&&c(e,"fill",l)},d(n){n&&m(e)}}}function _l(t){let e,l;return{c(){e=j("rect"),this.h()},l(n){e=Z(n,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=C(e);i.forEach(m),this.h()},h(){c(e,"x","-3"),c(e,"y","-3"),c(e,"width","6"),c(e,"height","6"),c(e,"fill",l=X[t[33]]),c(e,"stroke","white")},m(n,i){O(n,e,i)},p(n,i){i[0]&2048&&l!==(l=X[n[33]])&&c(e,"fill",l)},d(n){n&&m(e)}}}function rt(t){let e,l,n,i=["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(t[33]),a,r=(t[33]==="parent"?t[1].find(ht).areanm:t[33]==="main"?t[1].find(_t).areanm:t[33]==="country"?t[1].find(dt).areanm:t[33]==="custom0"?t[1].find(mt).areanm:t[33]==="custom1"?t[1].find(gt).areanm:t[33]==="custom2"?t[1].find(pt).areanm:t[33]==="custom3"?t[1].find(bt).areanm:t[33]==="custom4"?t[1].find(vt).areanm:t[33]==="neighbour"?"Other areas in "+t[1].find(kt).areanm:t[33]==="similar"?"Statistically similar areas to "+t[1].find(yt).areanm:"")+"",o,f,u=i&&at(t);return{c(){e=j("g"),l=j("line"),u&&u.c(),a=j("text"),o=K(r),this.h()},l(s){e=Z(s,"g",{transform:!0});var h=C(e);l=Z(h,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),C(l).forEach(m),u&&u.l(h),a=Z(h,"text",{x:!0,"font-size":!0,fill:!0});var p=C(a);o=H(p,r),p.forEach(m),h.forEach(m),this.h()},h(){c(l,"x1","0"),c(l,"x2","20"),c(l,"y1","-5"),c(l,"y2","-5"),c(l,"stroke",n=X[t[33]]),c(l,"stroke-width","2px"),c(a,"x","30"),c(a,"font-size","16px"),c(a,"fill",f=X[t[33]]),c(e,"transform","translate(0,"+(t[32]+1)*20+")")},m(s,h){O(s,e,h),A(e,l),u&&u.m(e,null),A(e,a),A(a,o)},p(s,h){h[0]&2048&&n!==(n=X[s[33]])&&c(l,"stroke",n),h[0]&2048&&(i=["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(s[33])),i?u?u.p(s,h):(u=at(s),u.c(),u.m(e,a)):u&&(u.d(1),u=null),h[0]&2050&&r!==(r=(s[33]==="parent"?s[1].find(ht).areanm:s[33]==="main"?s[1].find(_t).areanm:s[33]==="country"?s[1].find(dt).areanm:s[33]==="custom0"?s[1].find(mt).areanm:s[33]==="custom1"?s[1].find(gt).areanm:s[33]==="custom2"?s[1].find(pt).areanm:s[33]==="custom3"?s[1].find(bt).areanm:s[33]==="custom4"?s[1].find(vt).areanm:s[33]==="neighbour"?"Other areas in "+s[1].find(kt).areanm:s[33]==="similar"?"Statistically similar areas to "+s[1].find(yt).areanm:"")+"")&&fe(o,r),h[0]&2048&&f!==(f=X[s[33]])&&c(a,"fill",f)},d(s){s&&m(e),u&&u.d()}}}function ot(t){let e,l=t[26].name+"",n,i,a,r;return{c(){e=j("text"),n=K(l),this.h()},l(o){e=Z(o,"text",{x:!0,y:!0,"font-size":!0,fill:!0});var f=C(e);n=H(f,l),f.forEach(m),this.h()},h(){c(e,"x",i=t[8](t[5][1])+5),c(e,"y",a=5+t[7](t[26].data.find(t[23]).y)),c(e,"font-size","16px"),c(e,"fill",r=t[4]===t[28]?"#F39431":X[t[26].role])},m(o,f){O(o,e,f),A(e,n)},p(o,f){f[0]&8&&l!==(l=o[26].name+"")&&fe(n,l),f[0]&288&&i!==(i=o[8](o[5][1])+5)&&c(e,"x",i),f[0]&168&&a!==(a=5+o[7](o[26].data.find(o[23]).y))&&c(e,"y",a),f[0]&24&&r!==(r=o[4]===o[28]?"#F39431":X[o[26].role])&&c(e,"fill",r)},d(o){o&&m(e)}}}function st(t){let e,l=t[26].data,n=[];for(let i=0;i<l.length;i+=1)n[i]=ft(nt(t,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ve()},l(i){for(let a=0;a<n.length;a+=1)n[a].l(i);e=ve()},m(i,a){for(let r=0;r<n.length;r+=1)n[r].m(i,a);O(i,e,a)},p(i,a){if(a[0]&408){l=i[26].data;let r;for(r=0;r<l.length;r+=1){const o=nt(i,l,r);n[r]?n[r].p(o,a):(n[r]=ft(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(i){ke(n,i),i&&m(e)}}}function dl(t){let e,l;return{c(){e=j("circle"),this.h()},l(n){e=Z(n,"circle",{r:!0,fill:!0,stroke:!0});var i=C(e);i.forEach(m),this.h()},h(){c(e,"r","3.5"),c(e,"fill",l=t[4]===t[28]?"#F39431":X[t[26].role]),c(e,"stroke","white")},m(n,i){O(n,e,i)},p(n,i){i[0]&24&&l!==(l=n[4]===n[28]?"#F39431":X[n[26].role])&&c(e,"fill",l)},d(n){n&&m(e)}}}function ml(t){let e,l;return{c(){e=j("rect"),this.h()},l(n){e=Z(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=C(e);i.forEach(m),this.h()},h(){c(e,"transform","rotate(45)"),c(e,"x","-3"),c(e,"y","-3"),c(e,"width","6"),c(e,"height","6"),c(e,"fill",l=t[4]===t[28]?"#F39431":X[t[26].role]),c(e,"stroke","white")},m(n,i){O(n,e,i)},p(n,i){i[0]&24&&l!==(l=n[4]===n[28]?"#F39431":X[n[26].role])&&c(e,"fill",l)},d(n){n&&m(e)}}}function gl(t){let e,l;return{c(){e=j("rect"),this.h()},l(n){e=Z(n,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var i=C(e);i.forEach(m),this.h()},h(){c(e,"x","-3"),c(e,"y","-3"),c(e,"width","6"),c(e,"height","6"),c(e,"fill",l=t[4]===t[28]?"#F39431":X[t[26].role]),c(e,"stroke","white")},m(n,i){O(n,e,i)},p(n,i){i[0]&24&&l!==(l=n[4]===n[28]?"#F39431":X[n[26].role])&&c(e,"fill",l)},d(n){n&&m(e)}}}function ft(t){let e,l;function n(r,o){return r[26].role==="parent"?gl:r[26].role==="country"?ml:dl}let i=n(t),a=i(t);return{c(){e=j("g"),a.c(),this.h()},l(r){e=Z(r,"g",{transform:!0});var o=C(e);a.l(o),o.forEach(m),this.h()},h(){c(e,"transform",l="translate("+t[8](t[30].x)+","+t[7](t[30].y)+")")},m(r,o){O(r,e,o),a.m(e,null)},p(r,o){i===(i=n(r))&&a?a.p(r,o):(a.d(1),a=i(r),a&&(a.c(),a.m(e,null))),o[0]&392&&l!==(l="translate("+r[8](r[30].x)+","+r[7](r[30].y)+")")&&c(e,"transform",l)},d(r){r&&m(e),a.d()}}}function ut(t){let e,l,n,i,a,r=t[4]===t[28]||["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(t[26].role),o,f=t[4]===t[28]||["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(t[26].role),u,s=r&&ot(t),h=f&&st(t);return{c(){e=j("g"),l=j("path"),s&&s.c(),o=ve(),h&&h.c(),this.h()},l(p){e=Z(p,"g",{opacity:!0});var b=C(e);l=Z(b,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0}),C(l).forEach(m),s&&s.l(b),o=ve(),h&&h.l(b),b.forEach(m),this.h()},h(){c(l,"d",n=t[13](t[26].data)),c(l,"fill","none"),c(l,"stroke",i=t[4]===t[28]?"#F39431":X[t[26].role]),c(l,"stroke-width","2px"),c(l,"opacity",a=t[4]===t[28]||["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(t[26].role)?1:.5),c(e,"opacity",u=t[4]===t[28]||t[4]===null?1:.25)},m(p,b){O(p,e,b),A(e,l),s&&s.m(e,null),A(e,o),h&&h.m(e,null)},p(p,b){b[0]&8200&&n!==(n=p[13](p[26].data))&&c(l,"d",n),b[0]&24&&i!==(i=p[4]===p[28]?"#F39431":X[p[26].role])&&c(l,"stroke",i),b[0]&24&&a!==(a=p[4]===p[28]||["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(p[26].role)?1:.5)&&c(l,"opacity",a),b[0]&24&&(r=p[4]===p[28]||["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(p[26].role)),r?s?s.p(p,b):(s=ot(p),s.c(),s.m(e,o)):s&&(s.d(1),s=null),b[0]&24&&(f=p[4]===p[28]||["main","parent","country","custom0","custom1","custom2","custom3","custom4"].includes(p[26].role)),f?h?h.p(p,b):(h=st(p),h.c(),h.m(e,null)):h&&(h.d(1),h=null),b[0]&16&&u!==(u=p[4]===p[28]||p[4]===null?1:.25)&&c(e,"opacity",u)},d(p){p&&m(e),s&&s.d(),h&&h.d()}}}function ct(t){let e,l,n,i;return{c(){e=j("path"),this.h()},l(a){e=Z(a,"path",{hoverid:!0,class:!0,d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0}),C(e).forEach(m),this.h()},h(){c(e,"hoverid",t[28]),c(e,"class","hoverLine"),c(e,"d",l=t[13](t[26].data)),c(e,"fill","none"),c(e,"stroke","white"),c(e,"stroke-width","15px"),c(e,"opacity",0)},m(a,r){O(a,e,r),n||(i=[Ze(e,"mousemove",t[14]),Ze(e,"mouseleave",t[15])],n=!0)},p(a,r){r[0]&8200&&l!==(l=a[13](a[26].data))&&c(e,"d",l)},d(a){a&&m(e),n=!1,Ht(i)}}}function pl(t){let e,l,n=t[6].area.areanm+"",i,a,r=t[2].label.toLowerCase()+"",o,f,u=t[12]>.02?"increased":t[12]<-.02?"decreased":"barely changed",s,h,p=t[12]>.02||t[12]<-.02?"by "+Math.abs((t[12]*100).toFixed(0))+"%":"",b,M,w=t[5][0]+"",E,d,v,_=t[2].unit+"",z,y,I=t[5][0]+"",T,V,D=t[5][1]+"",re,ue,G,S,W,Y,J,oe,he,Fe,Te,He,te,ge=t[11],Q=[];for(let k=0;k<ge.length;k+=1)Q[k]=rt(it(t,ge,k));J=new jt({props:{yDomain:t[9],y:t[7],tickInterval:t[2].yTicks}}),oe=new ul({props:{chartHeight:Re,xDomain:t[5],x:t[8]}});let pe=t[3],U=[];for(let k=0;k<pe.length;k+=1)U[k]=ut(lt(t,pe,k));let _e=t[3],ee=[];for(let k=0;k<_e.length;k+=1)ee[k]=ct(tt(t,_e,k));return{c(){e=P("div"),l=P("h3"),i=K(n),a=K("'s "),o=K(r),f=K(" has "),s=K(u),h=$(),b=K(p),M=K(" since "),E=K(w),d=$(),v=P("p"),z=K(_),y=K(" by area, "),T=K(I),V=K(" to "),re=K(D),ue=$(),G=P("div"),S=j("svg"),W=j("g");for(let k=0;k<Q.length;k+=1)Q[k].c();Y=j("g"),le(J.$$.fragment),le(oe.$$.fragment);for(let k=0;k<U.length;k+=1)U[k].c();he=ve();for(let k=0;k<ee.length;k+=1)ee[k].c();this.h()},l(k){e=R(k,"DIV",{class:!0});var L=C(e);l=R(L,"H3",{class:!0});var B=C(l);i=H(B,n),a=H(B,"'s "),o=H(B,r),f=H(B," has "),s=H(B,u),h=x(B),b=H(B,p),M=H(B," since "),E=H(B,w),B.forEach(m),d=x(L),v=R(L,"P",{class:!0});var de=C(v);z=H(de,_),y=H(de," by area, "),T=H(de,I),V=H(de," to "),re=H(de,D),de.forEach(m),L.forEach(m),ue=x(k),G=R(k,"DIV",{class:!0});var F=C(G);S=Z(F,"svg",{height:!0,width:!0});var se=C(S);W=Z(se,"g",{class:!0});var Ne=C(W);for(let ce=0;ce<Q.length;ce+=1)Q[ce].l(Ne);Ne.forEach(m),Y=Z(se,"g",{class:!0,transform:!0});var we=C(Y);ne(J.$$.fragment,we),ne(oe.$$.fragment,we);for(let ce=0;ce<U.length;ce+=1)U[ce].l(we);he=ve();for(let ce=0;ce<ee.length;ce+=1)ee[ce].l(we);we.forEach(m),se.forEach(m),F.forEach(m),this.h()},h(){c(l,"class","svelte-ttv9o9"),c(v,"class","svelte-ttv9o9"),c(e,"class","chart-title"),c(W,"class","key"),c(Y,"class","chart-container"),c(Y,"transform",Fe="translate("+t[10].left+","+t[10].top+")"),c(S,"height",Te=Re+t[10].top+t[10].bottom),c(S,"width",t[0]),c(G,"class","svg-container"),Bt(()=>t[24].call(G))},m(k,L){O(k,e,L),A(e,l),A(l,i),A(l,a),A(l,o),A(l,f),A(l,s),A(l,h),A(l,b),A(l,M),A(l,E),A(e,d),A(e,v),A(v,z),A(v,y),A(v,T),A(v,V),A(v,re),O(k,ue,L),O(k,G,L),A(G,S),A(S,W);for(let B=0;B<Q.length;B+=1)Q[B].m(W,null);A(S,Y),ie(J,Y,null),ie(oe,Y,null);for(let B=0;B<U.length;B+=1)U[B].m(Y,null);A(Y,he);for(let B=0;B<ee.length;B+=1)ee[B].m(Y,null);He=Kt(G,t[24].bind(G)),te=!0},p(k,L){if((!te||L[0]&64)&&n!==(n=k[6].area.areanm+"")&&fe(i,n),(!te||L[0]&4)&&r!==(r=k[2].label.toLowerCase()+"")&&fe(o,r),(!te||L[0]&4096)&&u!==(u=k[12]>.02?"increased":k[12]<-.02?"decreased":"barely changed")&&fe(s,u),(!te||L[0]&4096)&&p!==(p=k[12]>.02||k[12]<-.02?"by "+Math.abs((k[12]*100).toFixed(0))+"%":"")&&fe(b,p),(!te||L[0]&32)&&w!==(w=k[5][0]+"")&&fe(E,w),(!te||L[0]&4)&&_!==(_=k[2].unit+"")&&fe(z,_),(!te||L[0]&32)&&I!==(I=k[5][0]+"")&&fe(T,I),(!te||L[0]&32)&&D!==(D=k[5][1]+"")&&fe(re,D),L[0]&2050){ge=k[11];let F;for(F=0;F<ge.length;F+=1){const se=it(k,ge,F);Q[F]?Q[F].p(se,L):(Q[F]=rt(se),Q[F].c(),Q[F].m(W,null))}for(;F<Q.length;F+=1)Q[F].d(1);Q.length=ge.length}const B={};L[0]&512&&(B.yDomain=k[9]),L[0]&128&&(B.y=k[7]),L[0]&4&&(B.tickInterval=k[2].yTicks),J.$set(B);const de={};if(L[0]&32&&(de.xDomain=k[5]),L[0]&256&&(de.x=k[8]),oe.$set(de),L[0]&8632){pe=k[3];let F;for(F=0;F<pe.length;F+=1){const se=lt(k,pe,F);U[F]?U[F].p(se,L):(U[F]=ut(se),U[F].c(),U[F].m(Y,he))}for(;F<U.length;F+=1)U[F].d(1);U.length=pe.length}if(L[0]&57352){_e=k[3];let F;for(F=0;F<_e.length;F+=1){const se=tt(k,_e,F);ee[F]?ee[F].p(se,L):(ee[F]=ct(se),ee[F].c(),ee[F].m(Y,null))}for(;F<ee.length;F+=1)ee[F].d(1);ee.length=_e.length}(!te||L[0]&1024&&Fe!==(Fe="translate("+k[10].left+","+k[10].top+")"))&&c(Y,"transform",Fe),(!te||L[0]&1024&&Te!==(Te=Re+k[10].top+k[10].bottom))&&c(S,"height",Te),(!te||L[0]&1)&&c(S,"width",k[0])},i(k){te||(N(J.$$.fragment,k),N(oe.$$.fragment,k),te=!0)},o(k){q(J.$$.fragment,k),q(oe.$$.fragment,k),te=!1},d(k){k&&m(e),k&&m(ue),k&&m(G),ke(Q,k),ae(J),ae(oe),ke(U,k),ke(ee,k),He()}}}let Re=300;const ht=t=>t.role=="parent",_t=t=>t.role=="main",dt=t=>t.role=="country",mt=t=>t.role=="custom0",gt=t=>t.role=="custom1",pt=t=>t.role=="custom2",bt=t=>t.role=="custom3",vt=t=>t.role=="custom4",kt=t=>t.role=="parent",yt=t=>t.role=="main";function bl(t,e,l){let n,i,a,r,o,f,u,s,h,p,b,M,w;Me(t,qe,S=>l(22,w=S));let{data:E,indicator:d,width:v=360,zeroBaseline:_=!0,labelsOnChart:z=!0,legend:y=!0,visibleAreas:I}=e,T=[];function V(S,W){let Y=[];S=S.sort((J,oe)=>Je[oe.role]-Je[J.role]),S.forEach(J=>{let oe=[];for(var he=W.years[0];he<=W.years[1];he++)he in J&&oe.push({x:he,y:J[he]});Y.push({name:J.areanm,z:J.areacd,data:oe,role:J.role})}),l(3,T=Y)}function D(S){l(4,M=parseFloat(Zt(this).attr("hoverid")))}function re(S){l(4,M=null)}const ue=S=>S.x===f[1];function G(){v=this.clientWidth,l(0,v)}return t.$$set=S=>{"data"in S&&l(1,E=S.data),"indicator"in S&&l(2,d=S.indicator),"width"in S&&l(0,v=S.width),"zeroBaseline"in S&&l(16,_=S.zeroBaseline),"labelsOnChart"in S&&l(17,z=S.labelsOnChart),"legend"in S&&l(18,y=S.legend),"visibleAreas"in S&&l(19,I=S.visibleAreas)},t.$$.update=()=>{t.$$.dirty[0]&4194306&&l(6,n={area:w,data:E.find(S=>S.areacd===w.areacd)}),t.$$.dirty[0]&524290&&l(21,i=E.filter(S=>I.map(W=>W.areacd).includes(S.areacd))),t.$$.dirty[0]&2097156&&V(i,d),t.$$.dirty[0]&8&&l(11,a=[...new Set(T.map(S=>S.role))].sort((S,W)=>Xe[S]-Xe[W])),t.$$.dirty[0]&2048&&l(10,r={top:(a.length+1)*20,left:70,right:180,bottom:40}),t.$$.dirty[0]&1025&&l(20,o=v-r.left-r.right),t.$$.dirty[0]&8&&l(5,f=[Math.min(...T.map(S=>Math.min(...S.data.map(W=>W.x)))),Math.max(...T.map(S=>Math.max(...S.data.map(W=>W.x))))]),t.$$.dirty[0]&1048608&&l(8,u=Qe().domain(f).range([0,o])),t.$$.dirty[0]&65544&&l(9,s=[_?0:Math.min(...T.map(S=>Math.min(...S.data.map(W=>W.y)))),Math.max(...T.map(S=>Math.max(...S.data.map(W=>W.y))))]),t.$$.dirty[0]&512&&l(7,h=Qe().domain(s).range([Re,0])),t.$$.dirty[0]&384&&l(13,p=ol().x(S=>u(S.x)).y(S=>h(S.y))),t.$$.dirty[0]&4&&console.log(d.label.toLowerCase()),t.$$.dirty[0]&96&&l(12,b=(n.data[f[1]]-n.data[f[0]])/n.data[f[0]]),t.$$.dirty[0]&16&&console.log(M)},l(4,M=null),[v,E,d,T,M,f,n,h,u,s,r,a,b,p,D,re,_,z,y,I,o,i,w,ue,G]}class vl extends Ie{constructor(e){super(),Ce(this,e,bl,pl,Oe,{data:1,indicator:2,width:0,zeroBaseline:16,labelsOnChart:17,legend:18,visibleAreas:19},null,[-1,-1])}}function kl(t){let e,l,n,i,a,r,o,f,u;function s(d){t[39](d)}function h(d){t[40](d)}function p(d){t[41](d)}function b(d){t[42](d)}function M(d){t[43](d)}function w(d){t[44](d)}let E={id:t[2],container:t[3],items:t[4],placeholder:t[5],isMulti:t[10],isSearchable:t[6],groupBy:t[22],loadOptions:t[9],getSelectionLabel:t[12],getOptionLabel:t[21],itemFilter:t[19],ariaValues:t[25],ariaListOpen:t[26],ariaFocused:t[27],noOptionsMessage:t[20],indicatorSvg:t[23],containerStyles:t[24],optionIdentifier:t[8],showIndicator:!0,isClearable:t[7]?!t[10]:!1};return t[15]!==void 0&&(E.isFocused=t[15]),t[0]!==void 0&&(E.value=t[0]),t[16]!==void 0&&(E.listOpen=t[16]),t[1]!==void 0&&(E.filterText=t[1]),t[13]!==void 0&&(E.isWaiting=t[13]),t[17]!==void 0&&(E.handleClear=t[17]),l=new Jt({props:E}),ye.push(()=>Ee(l,"isFocused",s)),ye.push(()=>Ee(l,"value",h)),ye.push(()=>Ee(l,"listOpen",p)),ye.push(()=>Ee(l,"filterText",b)),ye.push(()=>Ee(l,"isWaiting",M)),ye.push(()=>Ee(l,"handleClear",w)),l.$on("select",t[28]),l.$on("clear",t[45]),l.$on("loaded",t[46]),l.$on("error",t[47]),{c(){e=P("div"),le(l.$$.fragment),this.h()},l(d){e=R(d,"DIV",{class:!0});var v=C(e);ne(l.$$.fragment,v),v.forEach(m),this.h()},h(){c(e,"class","selectbox svelte-1w33mjb"),Le(e,"multi-selected",t[0]&&t[10]),Le(e,"focused",t[15]),Le(e,"selected",t[0]&&!t[16]&&!t[10]),be(e,"--borderColor",t[11]),be(e,"--firstItem",t[18](0)),be(e,"--secondItem",t[18](1)),be(e,"--thirdItem",t[18](2)),be(e,"--fourthItem",t[18](3))},m(d,v){O(d,e,v),ie(l,e,null),t[48](e),u=!0},p(d,v){const _={};v[0]&4&&(_.id=d[2]),v[0]&8&&(_.container=d[3]),v[0]&16&&(_.items=d[4]),v[0]&32&&(_.placeholder=d[5]),v[0]&1024&&(_.isMulti=d[10]),v[0]&64&&(_.isSearchable=d[6]),v[0]&512&&(_.loadOptions=d[9]),v[0]&4096&&(_.getSelectionLabel=d[12]),v[0]&524288&&(_.itemFilter=d[19]),v[0]&1048576&&(_.noOptionsMessage=d[20]),v[0]&256&&(_.optionIdentifier=d[8]),v[0]&1152&&(_.isClearable=d[7]?!d[10]:!1),!n&&v[0]&32768&&(n=!0,_.isFocused=d[15],Se(()=>n=!1)),!i&&v[0]&1&&(i=!0,_.value=d[0],Se(()=>i=!1)),!a&&v[0]&65536&&(a=!0,_.listOpen=d[16],Se(()=>a=!1)),!r&&v[0]&2&&(r=!0,_.filterText=d[1],Se(()=>r=!1)),!o&&v[0]&8192&&(o=!0,_.isWaiting=d[13],Se(()=>o=!1)),!f&&v[0]&131072&&(f=!0,_.handleClear=d[17],Se(()=>f=!1)),l.$set(_),(!u||v[0]&1025)&&Le(e,"multi-selected",d[0]&&d[10]),(!u||v[0]&32768)&&Le(e,"focused",d[15]),(!u||v[0]&66561)&&Le(e,"selected",d[0]&&!d[16]&&!d[10]),v[0]&2048&&be(e,"--borderColor",d[11]),v[0]&262144&&be(e,"--firstItem",d[18](0)),v[0]&262144&&be(e,"--secondItem",d[18](1)),v[0]&262144&&be(e,"--thirdItem",d[18](2)),v[0]&262144&&be(e,"--fourthItem",d[18](3))},i(d){u||(N(l.$$.fragment,d),u=!0)},o(d){q(l.$$.fragment,d),u=!1},d(d){d&&m(e),ae(l),t[48](null)}}}function yl(t,e,l){let n,i,a;const r='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',o='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',f=Nt();let{id:u=""}=e,{container:s=void 0}=e,{mode:h="default"}=e,{items:p}=e,{placeholder:b="Select one..."}=e,{value:M=null}=e,{filterText:w=""}=e,{isSearchable:E=!0}=e,{isClearable:d=!0}=e,{autoClear:v=!1}=e,{idKey:_="value"}=e,{labelKey:z="label"}=e,{groupKey:y=null}=e,{groupItems:I=!1}=e,{loadOptions:T=void 0}=e,{fontSize:V="1em"}=e,{height:D=42}=e,{isMulti:re=!1}=e,{maxSelected:ue=4}=e,{colors:G=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=e,{darkMode:S=!1}=e,{borderColor:W=S?"white":"#206095"}=e;const Y=y&&!I?g=>`${g[z]} <span class="group">${g[y]}</span>`:g=>g[z];let{getSelectionLabel:J=g=>g?Y(g):null}=e;const oe=I&&y?g=>g[y]:void 0,he=h=="search"?r:o,Fe=`--inputFontSize: ${V}; --groupTitleFontSize: ${V}; --height: ${D}px; font-size: ${V};`,Te=g=>`${g}, selected.`,He=(g,me)=>`You are currently focused on ${g}. There are ${me} results available.`,te=()=>"Select is focused, type to refine list, press down to open the menu.";let ge,Q,pe,U,_e;const ee=g=>new Promise(me=>setTimeout(me,g));async function k(g){if(f("select",g.detail),v)_e();else if(d){await ee(10);let me=ge.getElementsByClassName("clearSelect")[0];me&&(me.tabIndex=0,me.onkeypress=Pe=>{Pe.key=="Enter"&&_e()},me.removeAttribute("aria-hidden"),me.setAttribute("aria-label","Clear selection"))}}function L(g){Q=g,l(15,Q)}function B(g){M=g,l(0,M)}function de(g){pe=g,l(16,pe)}function F(g){w=g,l(1,w)}function se(g){U=g,l(13,U)}function Ne(g){_e=g,l(17,_e)}function we(g){je.call(this,t,g)}function ce(g){je.call(this,t,g)}function Dt(g){je.call(this,t,g)}function zt(g){ye[g?"unshift":"push"](()=>{ge=g,l(14,ge)})}return t.$$set=g=>{"id"in g&&l(2,u=g.id),"container"in g&&l(3,s=g.container),"mode"in g&&l(29,h=g.mode),"items"in g&&l(4,p=g.items),"placeholder"in g&&l(5,b=g.placeholder),"value"in g&&l(0,M=g.value),"filterText"in g&&l(1,w=g.filterText),"isSearchable"in g&&l(6,E=g.isSearchable),"isClearable"in g&&l(7,d=g.isClearable),"autoClear"in g&&l(30,v=g.autoClear),"idKey"in g&&l(8,_=g.idKey),"labelKey"in g&&l(31,z=g.labelKey),"groupKey"in g&&l(32,y=g.groupKey),"groupItems"in g&&l(33,I=g.groupItems),"loadOptions"in g&&l(9,T=g.loadOptions),"fontSize"in g&&l(34,V=g.fontSize),"height"in g&&l(35,D=g.height),"isMulti"in g&&l(10,re=g.isMulti),"maxSelected"in g&&l(36,ue=g.maxSelected),"colors"in g&&l(37,G=g.colors),"darkMode"in g&&l(38,S=g.darkMode),"borderColor"in g&&l(11,W=g.borderColor),"getSelectionLabel"in g&&l(12,J=g.getSelectionLabel)},t.$$.update=()=>{t.$$.dirty[0]&536879106&&l(20,n=U?"Loading...":h=="search"&&w.length<3?"Enter 3 or more characters for suggestions":`No results match ${w}`),t.$$.dirty[0]&536870915|t.$$.dirty[1]&33&&l(19,i=Array.isArray(M)&&M.length>=ue||h=="search"&&w.length<3?(g,me,Pe)=>!1:(g,me,Pe)=>`${Pe[z]}`.match(new RegExp(`\\b${me}`,"i"))),t.$$.dirty[1]&64&&l(18,a=g=>G[g%G.length])},[M,w,u,s,p,b,E,d,_,T,re,W,J,U,ge,Q,pe,_e,a,i,n,Y,oe,he,Fe,Te,He,te,k,h,v,z,y,I,V,D,ue,G,S,L,B,de,F,se,Ne,we,ce,Dt,zt]}class wl extends Ie{constructor(e){super(),Ce(this,e,yl,kl,Oe,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function El(t){let e,l,n,i;function a(o){t[3](o)}let r={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:t[0],isMulti:!0,maxSelected:4,placeholder:"Add additional comparison areas"};return t[1][4]!==void 0&&(r.value=t[1][4]),l=new wl({props:r}),ye.push(()=>Ee(l,"value",a)),l.$on("select",t[2]),{c(){e=P("form"),le(l.$$.fragment),this.h()},l(o){e=R(o,"FORM",{class:!0});var f=C(e);ne(l.$$.fragment,f),f.forEach(m),this.h()},h(){c(e,"class","svelte-1x1lqqe")},m(o,f){O(o,e,f),ie(l,e,null),i=!0},p(o,[f]){const u={};f&1&&(u.items=o[0]),!n&&f&2&&(n=!0,u.value=o[1][4],Se(()=>n=!1)),l.$set(u)},i(o){i||(N(l.$$.fragment,o),i=!0)},o(o){q(l.$$.fragment,o),i=!1},d(o){o&&m(e),ae(l)}}}function Sl(t,e,l){let n;Me(t,Ke,o=>l(1,n=o));let{areas:i}=e;function a(o){o.detail&&o.detail}function r(o){t.$$.not_equal(n[4],o)&&(n[4]=o,Ke.set(n))}return t.$$set=o=>{"areas"in o&&l(0,i=o.areas)},[i,n,a,r]}class Al extends Ie{constructor(e){super(),Ce(this,e,Sl,El,Oe,{areas:0})}}function wt(t,e,l){const n=t.slice();return n[7]=e[l],n[8]=e,n[9]=l,n}function Et(t){let e,l,n=t[7].text+"",i,a,r;function o(){t[5].call(l,t[9])}return{c(){e=P("label"),l=P("input"),i=K(n),this.h()},l(f){e=R(f,"LABEL",{class:!0});var u=C(e);l=R(u,"INPUT",{type:!0,class:!0}),i=H(u,n),u.forEach(m),this.h()},h(){c(l,"type","checkbox"),c(l,"class","svelte-rbiw5k"),c(e,"class","svelte-rbiw5k")},m(f,u){O(f,e,u),A(e,l),l.checked=t[4][t[9]],A(e,i),a||(r=Ze(l,"change",o),a=!0)},p(f,u){t=f,u&16&&(l.checked=t[4][t[9]]),u&8&&n!==(n=t[7].text+"")&&fe(i,n)},d(f){f&&m(e),a=!1,r()}}}function Ml(t){let e,l,n,i,a=t[3],r=[];for(let o=0;o<a.length;o+=1)r[o]=Et(wt(t,a,o));return n=new Al({props:{areas:t[0]}}),{c(){e=P("div");for(let o=0;o<r.length;o+=1)r[o].c();l=$(),le(n.$$.fragment),this.h()},l(o){e=R(o,"DIV",{class:!0});var f=C(e);for(let u=0;u<r.length;u+=1)r[u].l(f);l=x(f),ne(n.$$.fragment,f),f.forEach(m),this.h()},h(){c(e,"class","comparisonInputContainer svelte-rbiw5k")},m(o,f){O(o,e,f);for(let u=0;u<r.length;u+=1)r[u].m(e,null);A(e,l),ie(n,e,null),i=!0},p(o,f){if(f&24){a=o[3];let s;for(s=0;s<a.length;s+=1){const h=wt(o,a,s);r[s]?r[s].p(h,f):(r[s]=Et(h),r[s].c(),r[s].m(e,l))}for(;s<r.length;s+=1)r[s].d(1);r.length=a.length}const u={};f&1&&(u.areas=o[0]),n.$set(u)},i(o){i||(N(n.$$.fragment,o),i=!0)},o(o){q(n.$$.fragment,o),i=!1},d(o){o&&m(e),ke(r,o),ae(n)}}}function Il(t){let e,l,n;return l=new $t({props:{label:"Select areas to compare "+t[2].areanm+" to",open:t[1],$$slots:{default:[Ml]},$$scope:{ctx:t}}}),{c(){e=P("div"),le(l.$$.fragment),this.h()},l(i){e=R(i,"DIV",{class:!0});var a=C(e);ne(l.$$.fragment,a),a.forEach(m),this.h()},h(){c(e,"class",Pt("twisty-container")+" svelte-rbiw5k")},m(i,a){O(i,e,a),ie(l,e,null),n=!0},p(i,[a]){const r={};a&4&&(r.label="Select areas to compare "+i[2].areanm+" to"),a&2&&(r.open=i[1]),a&1049&&(r.$$scope={dirty:a,ctx:i}),l.$set(r)},i(i){n||(N(l.$$.fragment,i),n=!0)},o(i){q(l.$$.fragment,i),n=!1},d(i){i&&m(e),ae(l)}}}function Cl(t,e,l){let n,i,a;Me(t,qe,u=>l(2,i=u)),Me(t,Ke,u=>l(4,a=u));let{areas:r,open:o=!1}=e;function f(u){a[u]=this.checked,Ke.set(a)}return t.$$set=u=>{"areas"in u&&l(0,r=u.areas),"open"in u&&l(1,o=u.open)},t.$$.update=()=>{t.$$.dirty&5&&l(3,n=[{id:"country",text:{E:"England",N:"Northern Ireland",S:"Scotland",W:"Wales"}[i.areacd.slice(0,1)]},{id:"parent",text:r.find(u=>i.parentcd===u.areacd).areanm},{id:"othersInRegion",text:"Other local authorities in "+r.find(u=>i.parentcd===u.areacd).areanm},{id:"statsSimilar",text:"Statistically similar local authorities"}])},[r,o,i,n,a,f]}class Ol extends Ie{constructor(e){super(),Ce(this,e,Cl,Il,Oe,{areas:0,open:1})}}function St(t,e,l){const n=t.slice();return n[17]=e[l],n}function Fl(t){let e,l=t[17].textBelow+"",n;return{c(){e=P("h5"),n=K(l)},l(i){e=R(i,"H5",{});var a=C(e);n=H(a,l),a.forEach(m)},m(i,a){O(i,e,a),A(e,n)},p:Be,d(i){i&&m(e)}}}function At(t){let e,l,n,i=t[17].textAbove+"",a,r,o,f=t[17].figure+"",u,s,h,p,b,M=t[17].textRight+"",w,E,d=t[17].textBelow&&Fl(t);return{c(){e=P("div"),l=P("div"),n=P("h4"),a=K(i),r=$(),o=P("h1"),u=K(f),s=$(),d&&d.c(),h=$(),p=P("div"),b=P("p"),w=K(M),E=$(),this.h()},l(v){e=R(v,"DIV",{class:!0});var _=C(e);l=R(_,"DIV",{class:!0});var z=C(l);n=R(z,"H4",{class:!0});var y=C(n);a=H(y,i),y.forEach(m),r=x(z),o=R(z,"H1",{class:!0});var I=C(o);u=H(I,f),I.forEach(m),s=x(z),d&&d.l(z),z.forEach(m),h=x(_),p=R(_,"DIV",{class:!0});var T=C(p);b=R(T,"P",{class:!0});var V=C(b);w=H(V,M),V.forEach(m),T.forEach(m),E=x(_),_.forEach(m),this.h()},h(){c(n,"class","svelte-l4ixs4"),c(o,"class","svelte-l4ixs4"),c(l,"class","left svelte-l4ixs4"),c(b,"class","svelte-l4ixs4"),c(p,"class","right svelte-l4ixs4"),c(e,"class","indicatorContainer svelte-l4ixs4")},m(v,_){O(v,e,_),A(e,l),A(l,n),A(n,a),A(l,r),A(l,o),A(o,u),A(l,s),d&&d.m(l,null),A(e,h),A(e,p),A(p,b),A(b,w),A(e,E)},p(v,_){v[17].textBelow&&d.p(v,_)},d(v){v&&m(e),d&&d.d()}}}function Tl(t){let e,l=t[0],n=[];for(let i=0;i<l.length;i+=1)n[i]=At(St(t,l,i));return{c(){e=P("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=R(i,"DIV",{class:!0});var a=C(e);for(let r=0;r<n.length;r+=1)n[r].l(a);a.forEach(m),this.h()},h(){c(e,"class","keyIndicatorsContainer svelte-l4ixs4")},m(i,a){O(i,e,a);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(i,[a]){if(a&1){l=i[0];let r;for(r=0;r<l.length;r+=1){const o=St(i,l,r);n[r]?n[r].p(o,a):(n[r]=At(o),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},i:Be,o:Be,d(i){i&&m(e),ke(n,i)}}}function Ll(t,e,l){let n;Me(t,qe,_=>l(3,n=_));let{data3:i,data4:a}=e,r=i.find(_=>_.indicator.code==="population"&&_.role==="main"),o=i.find(_=>_.indicator.code==="population"&&_.role==="country"),f=i.find(_=>_.indicator.code==="population_density"&&_.role==="main"),u=a.find(_=>_.indicator.code==="population_density"&&_.role==="main");f[f.indicator.years[1]];let s=Math.round(u.rank_localauthority_2020/337*100),h=s>90?n.areanm+" is among the UK's 10% of local authorities with the highest population density.":s<20?n.areanm+" is among the UK's 20% of local authorities with the lowest population density.":100-s+"% of local authorities in the UK have a higher population density than "+n.areanm+".",p=i.find(_=>_.indicator.code==="female_life_expectancy"&&_.role==="main"),b=i.find(_=>_.indicator.code==="female_life_expectancy"&&_.role==="country"),M="On average, people in "+n.areanm+" live "+(Math.round(Math.abs(p[2018]-b[2018])*10)/10).toFixed(1)+" years "+(p[2018]>b[2018]?"longer":"shorter")+" than the average across "+b.areanm+".",w=i.find(_=>_.indicator.code==="gdhi"&&_.role==="main"),E=i.find(_=>_.indicator.code==="gdhi"&&_.role==="country"),d=n.areanm+" is £"+Math.abs(Math.round(w[2020]-E[2020])).toLocaleString()+" per person "+(w[2020]-E[2020]>0?"richer":"poorer")+" than "+b.areanm+" overall.",v=[{id:"population",textAbove:"Population:",textBelow:null,figure:Math.round(r[2020]).toLocaleString(),textRight:`This means that ${Math.round(r[2020]/o[2020]*1e4)/100}% of all people in England live in ${n.areanm}.`},{id:"population_density",textAbove:"Population density:",textBelow:"people per square kilometre",figure:Math.round(f[f.indicator.years[1]]).toLocaleString(),textRight:h},{id:"life_expectancy",textAbove:"Life expectancy:",figure:(Math.round(p[2018]*10)/10).toFixed(1),textRight:M,textBelow:"years"},{id:"gdhi",textAbove:"Disposable income per person:",figure:"£"+Math.round(w[2020]).toLocaleString(),textRight:d}];return t.$$set=_=>{"data3"in _&&l(1,i=_.data3),"data4"in _&&l(2,a=_.data4)},t.$$.update=()=>{t.$$.dirty&2&&console.log(i)},[v,i,a]}class Dl extends Ie{constructor(e){super(),Ce(this,e,Ll,Tl,Oe,{data3:1,data4:2})}}function Mt(t,e,l){const n=t.slice();return n[13]=e[l],n[15]=l,n}function It(t,e,l){const n=t.slice();return n[16]=e[l],n[15]=l,n}function Ct(t){let e,l,n,i,a,r;return e=new Wt({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${ze}/`},{label:"Find a local area",url:`${ze}/areas`},{label:t[3].areanm}],$$slots:{default:[Kl]},$$scope:{ctx:t}}}),n=new Qt({}),a=new Gt({props:{contentsLabel:"Explore this area",$$slots:{default:[Rl]},$$scope:{ctx:t}}}),{c(){le(e.$$.fragment),l=$(),le(n.$$.fragment),i=$(),le(a.$$.fragment)},l(o){ne(e.$$.fragment,o),l=x(o),ne(n.$$.fragment,o),i=x(o),ne(a.$$.fragment,o)},m(o,f){ie(e,o,f),O(o,l,f),ie(n,o,f),O(o,i,f),ie(a,o,f),r=!0},p(o,f){const u={};f&8&&(u.breadcrumb=[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${ze}/`},{label:"Find a local area",url:`${ze}/areas`},{label:o[3].areanm}]),f&262152&&(u.$$scope={dirty:f,ctx:o}),e.$set(u);const s={};f&262167&&(s.$$scope={dirty:f,ctx:o}),a.$set(s)},i(o){r||(N(e.$$.fragment,o),N(n.$$.fragment,o),N(a.$$.fragment,o),r=!0)},o(o){q(e.$$.fragment,o),q(n.$$.fragment,o),q(a.$$.fragment,o),r=!1},d(o){ae(e,o),o&&m(l),ae(n,o),o&&m(i),ae(a,o)}}}function zl(t){let e=t[3].areanm+"",l;return{c(){l=K(e)},l(n){l=H(n,e)},m(n,i){O(n,l,i)},p(n,i){i&8&&e!==(e=n[3].areanm+"")&&fe(l,e)},d(n){n&&m(l)}}}function Bl(t){let e,l=Ye(t[3],"the")+"",n;return{c(){e=K("Get localised data, insights and trends for "),n=K(l)},l(i){e=H(i,"Get localised data, insights and trends for "),n=H(i,l)},m(i,a){O(i,e,a),O(i,n,a)},p(i,a){a&8&&l!==(l=Ye(i[3],"the")+"")&&fe(n,l)},d(i){i&&m(e),i&&m(n)}}}function Kl(t){let e,l,n,i;return e=new Vt({props:{$$slots:{default:[zl]},$$scope:{ctx:t}}}),n=new qt({props:{$$slots:{default:[Bl]},$$scope:{ctx:t}}}),{c(){le(e.$$.fragment),l=$(),le(n.$$.fragment)},l(a){ne(e.$$.fragment,a),l=x(a),ne(n.$$.fragment,a)},m(a,r){ie(e,a,r),O(a,l,r),ie(n,a,r),i=!0},p(a,r){const o={};r&262152&&(o.$$scope={dirty:r,ctx:a}),e.$set(o);const f={};r&262152&&(f.$$scope={dirty:r,ctx:a}),n.$set(f)},i(a){i||(N(e.$$.fragment,a),N(n.$$.fragment,a),i=!0)},o(a){q(e.$$.fragment,a),q(n.$$.fragment,a),i=!1},d(a){ae(e,a),a&&m(l),ae(n,a)}}}function Hl(t){let e,l;function n(...i){return t[10](t[16],...i)}return e=new Yt({props:{data:[...t[5],...t[4]].filter(n),indicator:t[16].indicator,zeroBaseline:t[16].indicator.zeroBaseline,visibleAreas:t[2]}}),{c(){le(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){ie(e,i,a),l=!0},p(i,a){t=i;const r={};a&19&&(r.data=[...t[5],...t[4]].filter(n)),a&3&&(r.indicator=t[16].indicator),a&3&&(r.zeroBaseline=t[16].indicator.zeroBaseline),a&4&&(r.visibleAreas=t[2]),e.$set(r)},i(i){l||(N(e.$$.fragment,i),l=!0)},o(i){q(e.$$.fragment,i),l=!1},d(i){ae(e,i)}}}function Nl(t){let e,l;function n(...i){return t[9](t[16],...i)}return e=new vl({props:{data:[...t[5],...t[4]].filter(n),indicator:t[16].indicator,zeroBaseline:t[16].indicator.zeroBaseline,visibleAreas:t[2]}}),{c(){le(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,a){ie(e,i,a),l=!0},p(i,a){t=i;const r={};a&19&&(r.data=[...t[5],...t[4]].filter(n)),a&3&&(r.indicator=t[16].indicator),a&3&&(r.zeroBaseline=t[16].indicator.zeroBaseline),a&4&&(r.visibleAreas=t[2]),e.$set(r)},i(i){l||(N(e.$$.fragment,i),l=!0)},o(i){q(e.$$.fragment,i),l=!1},d(i){ae(e,i)}}}function Ot(t){let e,l,n,i,a,r;e=new Ol({props:{areas:t[0].areas}});const o=[Nl,Hl],f=[];function u(s,h){return s[16].type==="line"?0:s[16].type==="double-beeswarm"?1:-1}return~(n=u(t))&&(i=f[n]=o[n](t)),{c(){le(e.$$.fragment),l=$(),i&&i.c(),a=ve()},l(s){ne(e.$$.fragment,s),l=x(s),i&&i.l(s),a=ve()},m(s,h){ie(e,s,h),O(s,l,h),~n&&f[n].m(s,h),O(s,a,h),r=!0},p(s,h){const p={};h&1&&(p.areas=s[0].areas),e.$set(p);let b=n;n=u(s),n===b?~n&&f[n].p(s,h):(i&&(Ve(),q(f[b],1,1,()=>{f[b]=null}),We()),~n?(i=f[n],i?i.p(s,h):(i=f[n]=o[n](s),i.c()),N(i,1),i.m(a.parentNode,a)):i=null)},i(s){r||(N(e.$$.fragment,s),N(i),r=!0)},o(s){q(e.$$.fragment,s),q(i),r=!1},d(s){ae(e,s),s&&m(l),~n&&f[n].d(s),s&&m(a)}}}function Ft(t){let e,l,n=t[13]+"",i,a,r,o,f;function u(...b){return t[8](t[13],...b)}let s=t[0].componentsArray.filter(u),h=[];for(let b=0;b<s.length;b+=1)h[b]=Ot(It(t,s,b));const p=b=>q(h[b],1,1,()=>{h[b]=null});return{c(){e=P("section"),l=P("h1"),i=K(n),a=$();for(let b=0;b<h.length;b+=1)h[b].c();r=$(),this.h()},l(b){e=R(b,"SECTION",{title:!0,class:!0});var M=C(e);l=R(M,"H1",{});var w=C(l);i=H(w,n),w.forEach(m),a=x(M);for(let E=0;E<h.length;E+=1)h[E].l(M);r=x(M),M.forEach(m),this.h()},h(){c(e,"title",o=t[13]),c(e,"class","svelte-t8ay8i")},m(b,M){O(b,e,M),A(e,l),A(l,i),A(e,a);for(let w=0;w<h.length;w+=1)h[w].m(e,null);A(e,r),f=!0},p(b,M){if(t=b,(!f||M&2)&&n!==(n=t[13]+"")&&fe(i,n),M&55){s=t[0].componentsArray.filter(u);let w;for(w=0;w<s.length;w+=1){const E=It(t,s,w);h[w]?(h[w].p(E,M),N(h[w],1)):(h[w]=Ot(E),h[w].c(),N(h[w],1),h[w].m(e,r))}for(Ve(),w=s.length;w<h.length;w+=1)p(w);We()}(!f||M&2&&o!==(o=t[13]))&&c(e,"title",o)},i(b){if(!f){for(let M=0;M<s.length;M+=1)N(h[M]);f=!0}},o(b){h=h.filter(Boolean);for(let M=0;M<h.length;M+=1)q(h[M]);f=!1},d(b){b&&m(e),ke(h,b)}}}function Pl(t){let e;return{c(){e=K("Find parent, child and neighbouring areas")},l(l){e=H(l,"Find parent, child and neighbouring areas")},m(l,n){O(l,e,n)},d(l){l&&m(e)}}}function Rl(t){let e,l,n,i,a,r,o,f,u,s,h,p,b,M,w,E,d;a=new Dl({props:{data3:t[0].data3,data4:t[0].data4}});let v=t[1],_=[];for(let y=0;y<v.length;y+=1)_[y]=Ft(Mt(t,v,y));const z=y=>q(_[y],1,1,()=>{_[y]=null});return u=new Ut({props:{$$slots:{default:[Pl]},$$scope:{ctx:t}}}),{c(){e=P("section"),l=P("h1"),n=K("Key indicators"),i=$(),le(a.$$.fragment),r=$();for(let y=0;y<_.length;y+=1)_[y].c();o=$(),f=P("section"),le(u.$$.fragment),s=$(),h=P("section"),p=P("h2"),b=K("Get the data"),M=$(),w=P("p"),E=K("Here, you can find information and links to the data."),this.h()},l(y){e=R(y,"SECTION",{title:!0,class:!0});var I=C(e);l=R(I,"H1",{});var T=C(l);n=H(T,"Key indicators"),T.forEach(m),i=x(I),ne(a.$$.fragment,I),I.forEach(m),r=x(y);for(let G=0;G<_.length;G+=1)_[G].l(y);o=x(y),f=R(y,"SECTION",{title:!0,class:!0});var V=C(f);ne(u.$$.fragment,V),V.forEach(m),s=x(y),h=R(y,"SECTION",{title:!0,class:!0});var D=C(h);p=R(D,"H2",{class:!0});var re=C(p);b=H(re,"Get the data"),re.forEach(m),M=x(D),w=R(D,"P",{});var ue=C(w);E=H(ue,"Here, you can find information and links to the data."),ue.forEach(m),D.forEach(m),this.h()},h(){c(e,"title","Key indicators"),c(e,"class","svelte-t8ay8i"),c(f,"title","Related areas"),c(f,"class","svelte-t8ay8i"),c(p,"class","ons-u-mt-xl"),c(h,"title","Get the data"),c(h,"class","svelte-t8ay8i")},m(y,I){O(y,e,I),A(e,l),A(l,n),A(e,i),ie(a,e,null),O(y,r,I);for(let T=0;T<_.length;T+=1)_[T].m(y,I);O(y,o,I),O(y,f,I),ie(u,f,null),O(y,s,I),O(y,h,I),A(h,p),A(p,b),A(h,M),A(h,w),A(w,E),d=!0},p(y,I){const T={};if(I&1&&(T.data3=y[0].data3),I&1&&(T.data4=y[0].data4),a.$set(T),I&55){v=y[1];let D;for(D=0;D<v.length;D+=1){const re=Mt(y,v,D);_[D]?(_[D].p(re,I),N(_[D],1)):(_[D]=Ft(re),_[D].c(),N(_[D],1),_[D].m(o.parentNode,o))}for(Ve(),D=v.length;D<_.length;D+=1)z(D);We()}const V={};I&262144&&(V.$$scope={dirty:I,ctx:y}),u.$set(V)},i(y){if(!d){N(a.$$.fragment,y);for(let I=0;I<v.length;I+=1)N(_[I]);N(u.$$.fragment,y),d=!0}},o(y){q(a.$$.fragment,y),_=_.filter(Boolean);for(let I=0;I<_.length;I+=1)q(_[I]);q(u.$$.fragment,y),d=!1},d(y){y&&m(e),ae(a),y&&m(r),ke(_,y),y&&m(o),y&&m(f),ae(u),y&&m(s),y&&m(h)}}}function Wl(t){let e,l,n=t[3]&&Ct(t);return{c(){n&&n.c(),e=ve()},l(i){n&&n.l(i),e=ve()},m(i,a){n&&n.m(i,a),O(i,e,a),l=!0},p(i,[a]){i[3]?n?(n.p(i,a),a&8&&N(n,1)):(n=Ct(i),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Ve(),q(n,1,1,()=>{n=null}),We())},i(i){l||(N(n),l=!0)},o(i){q(n),l=!1},d(i){n&&n.d(i),i&&m(e)}}}function Vl(t,e,l){let n,i,a,r,o;Me(t,Ke,E=>l(7,r=E)),Me(t,qe,E=>l(3,o=E));let{data:f}=e,u=f.data2,s=[];function h(E,d){let v=[],_=[],z=[],y=[];E.forEach(I=>{f.dataImportingInstructions.forEach(T=>{T.type==="data2"&&(v.push(p(T.code,I.areacd)),_.push(T.code),z.push(I.areanm),y.push(I.role))})}),Promise.all(v).then(I=>{I.forEach((T,V)=>{T.areanm=z[V],T.code=_[V],T.role=y[V]}),l(4,s=I)})}async function p(E,d){return Rt(`${ze}/data/json/area/`+E+"/"+d+".json")}const b=(E,d)=>d.section===E,M=(E,d)=>d.code===E.code,w=(E,d)=>d.code===E.code;return t.$$set=E=>{"data"in E&&l(0,f=E.data)},t.$$.update=()=>{t.$$.dirty&137&&l(2,n=Xt(o,r,f.areas)),t.$$.dirty&4&&l(6,i=n.filter(E=>!u.map(d=>d.areacd).includes(E.areacd))),t.$$.dirty&65&&h(i,f.dataImportingInstructions),t.$$.dirty&1&&l(1,a=[...new Set(f.componentsArray.map(E=>E.section))]),t.$$.dirty&2&&console.log(a)},[f,a,n,o,s,u,i,r,b,M,w]}class $l extends Ie{constructor(e){super(),Ce(this,e,Vl,Wl,Oe,{data:0})}}export{$l as component};
