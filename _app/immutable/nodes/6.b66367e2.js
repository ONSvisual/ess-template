//js
import{S as oe,i as fe,s as ue,I as kl,k as G,l as O,m as I,h as w,n as f,p as ge,b as B,K as yl,L as wl,M as Al,g as Y,d as K,D as ie,x as Ye,q as X,a as Z,y as ee,r as J,c as Q,z as ae,W as pe,C as E,A as te,u as me,v as be,B as le,f as ve,U as Ae,V as ne,F as P,G as z,w as ke,Q as ye,R as we,X as Ee,e as De,Y as Wl,Z as Ze,_ as tt,$ as Pe,a0 as ze,E as lt,o as Pl,a1 as xe,a2 as Qe}from"../chunks/index.6979379d.js";import{b as Ce}from"../chunks/paths.2064bf11.js";import{T as zl,H as Bl,S as Nl}from"../chunks/Subhead.bb1cf4de.js";import{S as Gl,s as Re,l as Le,p as Dl,a as Ol,M as Hl,A as qe,K as Yl,b as ql}from"../chunks/Map.2cb76f1c.js";import{t as Ke,b as El,e as Xe,f as Je,h as re}from"../chunks/config.eb4626c9.js";/* empty css                                                     */function Kl(e){let t,l=`${e[0]}px`,a=`${e[1]}px`,i;const r=e[3].default,n=kl(r,e,e[2],null);return{c(){t=G("div"),n&&n.c(),this.h()},l(s){t=O(s,"DIV",{class:!0});var o=I(t);n&&n.l(o),o.forEach(w),this.h()},h(){f(t,"class","placeholder-container svelte-1mhohmc"),ge(t,"height",l),ge(t,"margin-bottom",a)},m(s,o){B(s,t,o),n&&n.m(t,null),i=!0},p(s,[o]){n&&n.p&&(!i||o&4)&&yl(n,r,s,s[2],i?Al(r,s[2],o,null):wl(s[2]),null),o&1&&l!==(l=`${s[0]}px`)&&ge(t,"height",l),o&2&&a!==(a=`${s[1]}px`)&&ge(t,"margin-bottom",a)},i(s){i||(Y(n,s),i=!0)},o(s){K(n,s),i=!1},d(s){s&&w(t),n&&n.d(s)}}}function jl(e,t,l){let{$$slots:a={},$$scope:i}=t,{height:r=400}=t,{margin:n=40}=t;return e.$$set=s=>{"height"in s&&l(0,r=s.height),"margin"in s&&l(1,n=s.margin),"$$scope"in s&&l(2,i=s.$$scope)},[r,n,i,a]}class Ul extends oe{constructor(t){super(),fe(this,t,jl,Kl,ue,{height:0,margin:1})}}function Zl(e){let t;return{c(){t=G("p"),this.h()},l(l){t=O(l,"P",{class:!0});var a=I(t);a.forEach(w),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){B(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ie,o:ie,d(l){l&&w(t)}}}function Ql(e,t,l){let{mainAreaName:a,comparisonAreaName:i,differenceValue:r,comparisonValue:n,indicator:s,prefix:o,suffix:h,subTextShort:u,far:c,length:m}=t;Math.pow(10,s.roundingFactor);let y;return m==="short"?y=(r==0?"Equal":r>0?c?"Far above":"Above":c?"Far below":"Below")+" "+i+"-wide average"+(r==0?".":" ("+o+Math.abs(n).toLocaleString()+h+u+")."):m==="medium"&&(y=r==0?s.label+" in "+a+" is equal to the "+i+"-wide average.":s.label+" in "+a+" is "+o+Math.abs(r).toLocaleString()+h+" "+u+(r?" higher":" lower")+" than the "+i+"-wide average."),e.$$set=g=>{"mainAreaName"in g&&l(1,a=g.mainAreaName),"comparisonAreaName"in g&&l(2,i=g.comparisonAreaName),"differenceValue"in g&&l(3,r=g.differenceValue),"comparisonValue"in g&&l(4,n=g.comparisonValue),"indicator"in g&&l(5,s=g.indicator),"prefix"in g&&l(6,o=g.prefix),"suffix"in g&&l(7,h=g.suffix),"subTextShort"in g&&l(8,u=g.subTextShort),"far"in g&&l(9,c=g.far),"length"in g&&l(10,m=g.length)},[y,a,i,r,n,s,o,h,u,c,m]}let at=class extends oe{constructor(t){super(),fe(this,t,Ql,Zl,ue,{mainAreaName:1,comparisonAreaName:2,differenceValue:3,comparisonValue:4,indicator:5,prefix:6,suffix:7,subTextShort:8,far:9,length:10})}};function Xl(e){let t;return{c(){t=G("p"),this.h()},l(l){t=O(l,"P",{class:!0});var a=I(t);a.forEach(w),this.h()},h(){f(t,"class","additionalInfoText svelte-1xcnew4")},m(l,a){B(l,t,a),t.innerHTML=e[0]},p(l,[a]){a&1&&(t.innerHTML=l[0])},i:ie,o:ie,d(l){l&&w(t)}}}function Jl(e,t,l){let{mainAreaName:a,comparisonAreaName:i,changeValue:r,changePercent:n,mainValue:s,mainValueInitial:o,indicator:h,prefix:u,suffix:c,subTextShort:m,length:y}=t,g;return y==="short"?h.changeSentence==="percent"?g=r===0?"No change from ":Math.abs(n)+"% "+(r>0?"increase":"descrease")+" from "+h.defaultInitialYear+" to "+h.latestYear+".":h.changeSentence==="absolute"?g=(r===0?"No change from":(r>0?"Rose by ":"Fell by ")+u+Math.abs(r.toFixed(h.roundingFactor))+c+m+" from ")+h.defaultInitialYear+" to "+h.latestYear+".":h.changeSentence==="both"&&(g=r===0?"No change between "+h.defaultInitialYear+" and "+h.latestYear+".":(r>0?"Rose from ":"Fell from ")+u+o+c+m+" in "+h.defaultInitialYear+" to "+u+s+c+m+" in "+h.latestYear+"."):y==="medium"&&(g=differenceValue==0?h.label+" in "+a+" is equal to the "+i+"-wide average.":h.label+" in "+a+" is "+u+Math.abs(differenceValue).toLocaleString()+c+" "+m+(differenceValue?" higher":" lower")+" than the "+i+"-wide average."),e.$$set=p=>{"mainAreaName"in p&&l(1,a=p.mainAreaName),"comparisonAreaName"in p&&l(2,i=p.comparisonAreaName),"changeValue"in p&&l(3,r=p.changeValue),"changePercent"in p&&l(4,n=p.changePercent),"mainValue"in p&&l(5,s=p.mainValue),"mainValueInitial"in p&&l(6,o=p.mainValueInitial),"indicator"in p&&l(7,h=p.indicator),"prefix"in p&&l(8,u=p.prefix),"suffix"in p&&l(9,c=p.suffix),"subTextShort"in p&&l(10,m=p.subTextShort),"length"in p&&l(11,y=p.length)},[g,a,i,r,n,s,o,h,u,c,m,y]}class rt extends oe{constructor(t){super(),fe(this,t,Jl,Xl,ue,{mainAreaName:1,comparisonAreaName:2,changeValue:3,changePercent:4,mainValue:5,mainValueInitial:6,indicator:7,prefix:8,suffix:9,subTextShort:10,length:11})}}function xl(e){let t,l;return{c(){t=G("p"),l=X(e[16]),this.h()},l(a){t=O(a,"P",{class:!0});var i=I(t);l=J(i,e[16]),i.forEach(w),this.h()},h(){f(t,"class","subText svelte-1i5rdk3")},m(a,i){B(a,t,i),E(t,l)},p:ie,d(a){a&&w(t)}}}function nt(e){let t,l,a,i,r,n,s;var o=e[0].code in e[3]?e[3][e[0].code][0]:rt;function h(u){return{props:{mainAreaName:u[5],comparisonAreaName:u[2],mainValue:u[4],mainValueInitial:u[10],changeValue:u[11],changePercent:u[12],indicator:u[0],prefix:u[14],suffix:u[15],subTextShort:u[17],length:"short"}}}return o&&(n=Ye(o,h(e))),{c(){t=G("div"),l=G("div"),a=G("p"),i=X(e[13]),r=Z(),n&&ee(n.$$.fragment),this.h()},l(u){t=O(u,"DIV",{class:!0});var c=I(t);l=O(c,"DIV",{class:!0});var m=I(l);a=O(m,"P",{class:!0});var y=I(a);i=J(y,e[13]),y.forEach(w),m.forEach(w),r=Q(c),n&&ae(n.$$.fragment,c),c.forEach(w),this.h()},h(){f(a,"class","svelte-1i5rdk3"),f(l,"class",pe("headlineLabel "+(["Increasing","Falling"].includes(e[13])?null:e[13]==="Little change"?"headlineLabelOkay":e[13]==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1i5rdk3"),f(t,"class","flexV column3 svelte-1i5rdk3")},m(u,c){B(u,t,c),E(t,l),E(l,a),E(a,i),E(t,r),n&&te(n,t,null),s=!0},p(u,c){const m={};if(c&4&&(m.comparisonAreaName=u[2]),c&1&&(m.indicator=u[0]),c&1&&o!==(o=u[0].code in u[3]?u[3][u[0].code][0]:rt)){if(n){be();const y=n;K(y.$$.fragment,1,0,()=>{le(y,1)}),ve()}o?(n=Ye(o,h(u)),ee(n.$$.fragment),Y(n.$$.fragment,1),te(n,t,null)):n=null}else o&&n.$set(m)},i(u){s||(n&&Y(n.$$.fragment,u),s=!0)},o(u){n&&K(n.$$.fragment,u),s=!1},d(u){u&&w(t),n&&le(n)}}}function $l(e){let t,l,a,i=e[0].label+"",r,n,s,o,h,u,c=e[14]+parseFloat(e[4].toFixed(e[4]>100?0:1)).toLocaleString()+e[15]+"",m,y,g,p,D,_,b,d,k,v,A,W=e[16]!=""&&xl(e);var T=e[0].code in e[3]?e[3][e[0].code][0]:at;function M(L){return{props:{mainAreaName:L[5],comparisonAreaName:L[2],differenceValue:L[7],comparisonValue:L[6],indicator:L[0],prefix:L[14],suffix:L[15],subTextShort:L[17],far:L[8],length:"short"}}}T&&(k=Ye(T,M(e)));let N=e[1]!=null&&nt(e);return{c(){t=G("div"),l=G("h3"),a=G("a"),r=X(i),s=Z(),o=G("div"),h=G("div"),u=G("h4"),m=X(c),y=Z(),W&&W.c(),g=Z(),p=G("div"),D=G("div"),_=G("p"),b=X(e[9]),d=Z(),k&&ee(k.$$.fragment),v=Z(),N&&N.c(),this.h()},l(L){t=O(L,"DIV",{class:!0});var S=I(t);l=O(S,"H3",{class:!0});var F=I(l);a=O(F,"A",{href:!0});var $=I(a);r=J($,i),$.forEach(w),F.forEach(w),s=Q(S),o=O(S,"DIV",{class:!0});var R=I(o);h=O(R,"DIV",{class:!0});var j=I(h);u=O(j,"H4",{class:!0});var q=I(u);m=J(q,c),q.forEach(w),y=Q(j),W&&W.l(j),j.forEach(w),g=Q(R),p=O(R,"DIV",{class:!0});var C=I(p);D=O(C,"DIV",{class:!0});var U=I(D);_=O(U,"P",{class:!0});var V=I(_);b=J(V,e[9]),V.forEach(w),U.forEach(w),d=Q(C),k&&ae(k.$$.fragment,C),C.forEach(w),v=Q(R),N&&N.l(R),R.forEach(w),S.forEach(w),this.h()},h(){f(a,"href",n=Ce+"/indicators/"+e[0].code),f(l,"class","svelte-1i5rdk3"),f(u,"class","svelte-1i5rdk3"),f(h,"class","flexV column1 svelte-1i5rdk3"),f(_,"class","svelte-1i5rdk3"),f(D,"class",pe("headlineLabel "+(["Above average","Below average"].includes(e[9])?null:e[9]==="Similar to average"?"headlineLabelOkay":e[9]==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1i5rdk3"),f(p,"class","flexV column2 svelte-1i5rdk3"),f(o,"class","flexH svelte-1i5rdk3"),f(t,"class","panelContainer svelte-1i5rdk3")},m(L,S){B(L,t,S),E(t,l),E(l,a),E(a,r),E(t,s),E(t,o),E(o,h),E(h,u),E(u,m),E(h,y),W&&W.m(h,null),E(o,g),E(o,p),E(p,D),E(D,_),E(_,b),E(p,d),k&&te(k,p,null),E(o,v),N&&N.m(o,null),A=!0},p(L,[S]){(!A||S&1)&&i!==(i=L[0].label+"")&&me(r,i),(!A||S&1&&n!==(n=Ce+"/indicators/"+L[0].code))&&f(a,"href",n),L[16]!=""&&W.p(L,S);const F={};if(S&4&&(F.comparisonAreaName=L[2]),S&1&&(F.indicator=L[0]),S&1&&T!==(T=L[0].code in L[3]?L[3][L[0].code][0]:at)){if(k){be();const $=k;K($.$$.fragment,1,0,()=>{le($,1)}),ve()}T?(k=Ye(T,M(L)),ee(k.$$.fragment),Y(k.$$.fragment,1),te(k,p,null)):k=null}else T&&k.$set(F);L[1]!=null?N?(N.p(L,S),S&2&&Y(N,1)):(N=nt(L),N.c(),Y(N,1),N.m(o,null)):N&&(be(),K(N,1,1,()=>{N=null}),ve())},i(L){A||(k&&Y(k.$$.fragment,L),Y(N),A=!0)},o(L){k&&K(k.$$.fragment,L),K(N),A=!1},d(L){L&&w(t),W&&W.d(),k&&le(k),N&&N.d()}}}function ea(e,t,l){let{indicator:a,latestData:i,initialData:r,selectedAreas:n}=t,s=Ae("areas"),o={},h=Math.pow(10,a.roundingFactor),u=i.find(q=>q.areacd===n.find(C=>C.role==="main").data.areacd),c=Math.round(u.value*h)/h,m=s.find(q=>q.areacd===u.areacd).areanm,y=i.filter(q=>q.areacd===n.find(C=>C.role==="country").data.areacd),g=i.filter(q=>q.areacd===n.find(C=>C.role==="uk").data.areacd),p=i.filter(q=>q.areacd===n.find(C=>C.role==="parent").data.areacd),D=y.length>0?y[0]:g.length>0?g[0]:p.length>0?p[0]:void 0,_=Math.round(D.value*h)/h,b=s.find(q=>q.areacd===D.areacd).areanm;b=b==="United Kingdom"?"UK":b;let d=c-_,k=a.code in Ke?Ke[a.code]:El,v=Math.abs(d)/_<k[0]/100,A=Math.abs(d)/_>k[1]/100,W=v?Xe.similar:c>_?Xe.high[a.highEqualsGood]:Xe.low[a.highEqualsGood],T=r===void 0?null:Math.round(r.find(q=>q.areacd===n.find(C=>C.role==="main").data.areacd).value*h)/h,M=c-T,N=Math.abs(M/T*100)<1?Math.round(M/T*1e3)/10:Math.round(M/T*100),S=Math.abs(N)<k[0]?Je.similar:c>T?Je.high[a.highEqualsGood]:Je.low[a.highEqualsGood],F=a.prefix===null?"":a.prefix==="pounds"?"£":a.prefix,$=a.suffix===null?"":a.suffix,R=a.subText===null?"":a.subText,j=a.subTextShort===null?"":a.subTextShort;return e.$$set=q=>{"indicator"in q&&l(0,a=q.indicator),"latestData"in q&&l(18,i=q.latestData),"initialData"in q&&l(1,r=q.initialData),"selectedAreas"in q&&l(19,n=q.selectedAreas)},[a,r,b,o,c,m,_,d,A,W,T,M,N,S,F,$,R,j,i,n]}class ta extends oe{constructor(t){super(),fe(this,t,ea,$l,ue,{indicator:0,latestData:18,initialData:1,selectedAreas:19})}}function it(e,t,l){const a=e.slice();return a[7]=t[l],a}function st(e){let t,l;function a(...r){return e[5](e[7],...r)}function i(...r){return e[6](e[7],...r)}return t=new ta({props:{indicator:e[2].find(a),latestData:e[1].filter(i),initialData:e[3][e[7].code],selectedAreas:e[4]}}),{c(){ee(t.$$.fragment)},l(r){ae(t.$$.fragment,r)},m(r,n){te(t,r,n),l=!0},p(r,n){e=r;const s={};n&5&&(s.indicator=e[2].find(a)),n&3&&(s.latestData=e[1].filter(i)),n&9&&(s.initialData=e[3][e[7].code]),n&16&&(s.selectedAreas=e[4]),t.$set(s)},i(r){l||(Y(t.$$.fragment,r),l=!0)},o(r){K(t.$$.fragment,r),l=!1},d(r){le(t,r)}}}function la(e){let t,l,a,i,r,n,s=e[0],o=[];for(let u=0;u<s.length;u+=1)o[u]=st(it(e,s,u));const h=u=>K(o[u],1,1,()=>{o[u]=null});return{c(){t=G("section"),l=G("h1"),a=X("Key indicators"),i=Z(),r=G("div");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){t=O(u,"SECTION",{title:!0});var c=I(t);l=O(c,"H1",{});var m=I(l);a=J(m,"Key indicators"),m.forEach(w),i=Q(c),r=O(c,"DIV",{class:!0});var y=I(r);for(let g=0;g<o.length;g+=1)o[g].l(y);y.forEach(w),c.forEach(w),this.h()},h(){f(r,"class","rowsContainer"),f(t,"title","Key indicators")},m(u,c){B(u,t,c),E(t,l),E(l,a),E(t,i),E(t,r);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(r,null);n=!0},p(u,[c]){if(c&31){s=u[0];let m;for(m=0;m<s.length;m+=1){const y=it(u,s,m);o[m]?(o[m].p(y,c),Y(o[m],1)):(o[m]=st(y),o[m].c(),Y(o[m],1),o[m].m(r,null))}for(be(),m=s.length;m<o.length;m+=1)h(m);ve()}},i(u){if(!n){for(let c=0;c<s.length;c+=1)Y(o[c]);n=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)K(o[c]);n=!1},d(u){u&&w(t),ne(o,u)}}}function aa(e,t,l){let{areaKeyIndicators:a,latestData:i,trimmedIndicators:r,initialData:n,selectedAreas:s}=t;const o=(u,c)=>c.id===u.id,h=(u,c)=>c.codeId===u.id;return e.$$set=u=>{"areaKeyIndicators"in u&&l(0,a=u.areaKeyIndicators),"latestData"in u&&l(1,i=u.latestData),"trimmedIndicators"in u&&l(2,r=u.trimmedIndicators),"initialData"in u&&l(3,n=u.initialData),"selectedAreas"in u&&l(4,s=u.selectedAreas)},[a,i,r,n,s,o,h]}class ra extends oe{constructor(t){super(),fe(this,t,aa,la,ue,{areaKeyIndicators:0,latestData:1,trimmedIndicators:2,initialData:3,selectedAreas:4})}}function ot(e){let t,l,a,i,r,n,s,o,h,u,c;return{c(){t=G("summary"),l=G("h3"),a=X(e[1]),r=Z(),n=G("span"),s=P("svg"),o=P("path"),this.h()},l(m){t=O(m,"SUMMARY",{class:!0});var y=I(t);l=O(y,"H3",{class:!0});var g=I(l);a=J(g,e[1]),g.forEach(w),r=Q(y),n=O(y,"SPAN",{class:!0});var p=I(n);s=z(p,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var D=I(s);o=z(D,"path",{class:!0,d:!0,transform:!0}),I(o).forEach(w),D.forEach(w),p.forEach(w),y.forEach(w),this.h()},h(){f(l,"class",i=pe("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),f(o,"class",h=pe(e[0]?" path_styling_override":"")+" svelte-lfupja"),f(o,"d",u=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),f(o,"transform",c=e[0]?null:"translate(-5.02 -1.59)"),f(s,"class","ons-svg-icon"),f(s,"viewBox","0 0 8 13"),f(s,"xmlns","http://www.w3.org/2000/svg"),f(s,"focusable","false"),f(n,"class","ons-collapsible__icon"),f(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(m,y){B(m,t,y),E(t,l),E(l,a),E(t,r),E(t,n),E(n,s),E(s,o)},p(m,y){y&2&&me(a,m[1]),y&1&&i!==(i=pe("ons-collapsible__title"+(m[0]?" title_styling_override":""))+" svelte-lfupja")&&f(l,"class",i),y&1&&h!==(h=pe(m[0]?" path_styling_override":"")+" svelte-lfupja")&&f(o,"class",h),y&1&&u!==(u=m[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&f(o,"d",u),y&1&&c!==(c=m[0]?null:"translate(-5.02 -1.59)")&&f(o,"transform",c)},d(m){m&&w(t)}}}function na(e){let t,l,a,i,r,n,s=!e[3]&&ot(e);const o=e[5].default,h=kl(o,e,e[4],null);return{c(){t=G("details"),s&&s.c(),l=Z(),a=G("div"),h&&h.c(),this.h()},l(u){t=O(u,"DETAILS",{class:!0});var c=I(t);s&&s.l(c),l=Q(c),a=O(c,"DIV",{class:!0});var m=I(a);h&&h.l(m),m.forEach(w),c.forEach(w),this.h()},h(){f(a,"class",i=pe(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),f(t,"class",r=pe("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(u,c){B(u,t,c),s&&s.m(t,null),E(t,l),E(t,a),h&&h.m(a,null),n=!0},p(u,[c]){u[3]?s&&(s.d(1),s=null):s?s.p(u,c):(s=ot(u),s.c(),s.m(t,l)),h&&h.p&&(!n||c&16)&&yl(h,o,u,u[4],n?Al(o,u[4],c,null):wl(u[4]),null),(!n||c&5&&i!==(i=pe(u[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(u[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&f(a,"class",i),(!n||c&1&&r!==(r=pe("ons-collapsible ons-js-collapsible"+(u[0]?" details_styling_override":""))+" svelte-lfupja"))&&f(t,"class",r),(!n||c&8)&&(t.open=u[3])},i(u){n||(Y(h,u),n=!0)},o(u){K(h,u),n=!1},d(u){u&&w(t),s&&s.d(),h&&h.d(u)}}}function ia(e,t,l){let{$$slots:a={},$$scope:i}=t,{cross:r=!1}=t,{label:n="Label"}=t,{blank:s=!1}=t,{open:o=!1}=t;return e.$$set=h=>{"cross"in h&&l(0,r=h.cross),"label"in h&&l(1,n=h.label),"blank"in h&&l(2,s=h.blank),"open"in h&&l(3,o=h.open),"$$scope"in h&&l(4,i=h.$$scope)},[r,n,s,o,i,a]}class sa extends oe{constructor(t){super(),fe(this,t,ia,na,ue,{cross:0,label:1,blank:2,open:3})}}function ft(e,t,l){const a=e.slice();return a[10]=t[l],a[11]=t,a[12]=l,a}function ut(e,t,l){const a=e.slice();return a[10]=t[l],a[13]=t,a[12]=l,a}function ht(e){let t,l,a=e[10].data.areanm+"",i,r,n;function s(){e[6].call(l,e[10])}return{c(){t=G("label"),l=G("input"),i=X(a),this.h()},l(o){t=O(o,"LABEL",{class:!0});var h=I(t);l=O(h,"INPUT",{type:!0,class:!0}),i=J(h,a),h.forEach(w),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(o,h){B(o,t,h),E(t,l),l.checked=e[0][e[10].role],E(t,i),r||(n=Ee(l,"change",s),r=!0)},p(o,h){e=o,h&3&&(l.checked=e[0][e[10].role]),h&2&&a!==(a=e[10].data.areanm+"")&&me(i,a)},d(o){o&&w(t),r=!1,n()}}}function ct(e){let t,l,a,i,r=["neighbour","cluster"],n=[];for(let s=0;s<2;s+=1)n[s]=dt(ft(e,r,s));return{c(){t=G("p"),l=X("Related areas"),a=Z();for(let s=0;s<2;s+=1)n[s].c();i=De(),this.h()},l(s){t=O(s,"P",{class:!0});var o=I(t);l=J(o,"Related areas"),o.forEach(w),a=Q(s);for(let h=0;h<2;h+=1)n[h].l(s);i=De(),this.h()},h(){f(t,"class","svelte-thy20g")},m(s,o){B(s,t,o),E(t,l),B(s,a,o);for(let h=0;h<2;h+=1)n[h]&&n[h].m(s,o);B(s,i,o)},p(s,o){if(o&33){r=["neighbour","cluster"];let h;for(h=0;h<2;h+=1){const u=ft(s,r,h);n[h]?n[h].p(u,o):(n[h]=dt(u),n[h].c(),n[h].m(i.parentNode,i))}for(;h<2;h+=1)n[h].d(1)}},d(s){s&&w(t),s&&w(a),ne(n,s),s&&w(i)}}}function dt(e){let t,l,a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas",i,r,n,s;function o(){e[7].call(l,e[10])}return{c(){t=G("label"),l=G("input"),i=X(a),r=Z(),this.h()},l(h){t=O(h,"LABEL",{class:!0});var u=I(t);l=O(u,"INPUT",{type:!0,class:!0}),i=J(u,a),r=Q(u),u.forEach(w),this.h()},h(){f(l,"type","checkbox"),f(l,"class","svelte-thy20g"),f(t,"class","svelte-thy20g")},m(h,u){B(h,t,u),E(t,l),l.checked=e[0][e[10]],E(t,i),E(t,r),n||(s=Ee(l,"change",o),n=!0)},p(h,u){e=h,u&1&&(l.checked=e[0][e[10]]),u&32&&a!==(a=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas")&&me(i,a)},d(h){h&&w(t),n=!1,s()}}}function oa(e){let t,l,a,i,r,n,s,o,h,u=e[1],c=[];for(let p=0;p<u.length;p+=1)c[p]=ht(ut(e,u,p));let m=e[3]&&ct(e);function y(p){e[8](p)}let g={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(g.checkboxedRoles=e[0]),s=new Gl({props:g}),ke.push(()=>ye(s,"checkboxedRoles",y)),{c(){t=G("div"),l=G("p"),a=X("Parent areas"),i=Z();for(let p=0;p<c.length;p+=1)c[p].c();r=Z(),m&&m.c(),n=Z(),ee(s.$$.fragment),this.h()},l(p){t=O(p,"DIV",{class:!0});var D=I(t);l=O(D,"P",{class:!0});var _=I(l);a=J(_,"Parent areas"),_.forEach(w),i=Q(D);for(let b=0;b<c.length;b+=1)c[b].l(D);r=Q(D),m&&m.l(D),n=Q(D),ae(s.$$.fragment,D),D.forEach(w),this.h()},h(){f(l,"class","svelte-thy20g"),f(t,"class","comparisonInputContainer svelte-thy20g")},m(p,D){B(p,t,D),E(t,l),E(l,a),E(t,i);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(t,null);E(t,r),m&&m.m(t,null),E(t,n),te(s,t,null),h=!0},p(p,D){if(D&3){u=p[1];let b;for(b=0;b<u.length;b+=1){const d=ut(p,u,b);c[b]?c[b].p(d,D):(c[b]=ht(d),c[b].c(),c[b].m(t,r))}for(;b<c.length;b+=1)c[b].d(1);c.length=u.length}p[3]?m?m.p(p,D):(m=ct(p),m.c(),m.m(t,n)):m&&(m.d(1),m=null);const _={};D&2&&(_.selectedAreas=p[1]),D&4&&(_.areasWithData=p[2]),!o&&D&1&&(o=!0,_.checkboxedRoles=p[0],we(()=>o=!1)),s.$set(_)},i(p){h||(Y(s.$$.fragment,p),h=!0)},o(p){K(s.$$.fragment,p),h=!1},d(p){p&&w(t),ne(c,p),m&&m.d(),le(s)}}}function fa(e){let t,l,a;return l=new sa({props:{label:"Add areas to compare to "+e[4],open:ua,$$slots:{default:[oa]},$$scope:{ctx:e}}}),{c(){t=G("div"),ee(l.$$.fragment),this.h()},l(i){t=O(i,"DIV",{class:!0});var r=I(t);ae(l.$$.fragment,r),r.forEach(w),this.h()},h(){f(t,"class",pe("twisty-container")+" svelte-thy20g")},m(i,r){B(i,t,r),te(l,t,null),a=!0},p(i,[r]){const n={};r&16&&(n.label="Add areas to compare to "+i[4]),r&16431&&(n.$$scope={dirty:r,ctx:i}),l.$set(n)},i(i){a||(Y(l.$$.fragment,i),a=!0)},o(i){K(l.$$.fragment,i),a=!1},d(i){i&&w(t),le(l)}}}let ua=!1;function ha(e,t,l){let{selectedAreas:a,areasWithData:i,checkboxedRoles:r,includeSiblings:n=!0,selectedArea:s,parentArea:o}=t;a.map(m=>m.role);function h(m){r[m.role]=this.checked,l(0,r)}function u(m){r[m]=this.checked,l(0,r)}function c(m){r=m,l(0,r)}return e.$$set=m=>{"selectedAreas"in m&&l(1,a=m.selectedAreas),"areasWithData"in m&&l(2,i=m.areasWithData),"checkboxedRoles"in m&&l(0,r=m.checkboxedRoles),"includeSiblings"in m&&l(3,n=m.includeSiblings),"selectedArea"in m&&l(4,s=m.selectedArea),"parentArea"in m&&l(5,o=m.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&console.log(a)},[r,a,i,n,s,o,h,u,c]}class Il extends oe{constructor(t){super(),fe(this,t,ha,fa,ue,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function _t(e,t,l){const a=e.slice();return a[5]=t[l],a[7]=l,a}function mt(e){let t,l;return{c(){t=G("p"),l=X("Compare..."),this.h()},l(a){t=O(a,"P",{class:!0});var i=I(t);l=J(i,"Compare..."),i.forEach(w),this.h()},h(){f(t,"class","svelte-46qqxz")},m(a,i){B(a,t,i),E(t,l)},d(a){a&&w(t)}}}function gt(e){let t,l,a,i,r,n=e[5].toLowerCase()+"",s,o,h,u,c,m;return u=Wl(e[4][0]),{c(){t=G("label"),l=G("input"),a=Z(),i=G("div"),r=G("p"),s=X(n),h=Z(),this.h()},l(y){t=O(y,"LABEL",{});var g=I(t);l=O(g,"INPUT",{style:!0,type:!0,name:!0}),a=Q(g),i=O(g,"DIV",{class:!0,style:!0});var p=I(i);r=O(p,"P",{class:!0});var D=I(r);s=J(D,n),D.forEach(w),p.forEach(w),h=Q(g),g.forEach(w),this.h()},h(){ge(l,"display","none"),f(l,"type","radio"),l.__value=e[7]+1,l.value=l.__value,f(l,"name","chosenChart"),f(r,"class","svelte-46qqxz"),f(i,"class","optionLabel svelte-46qqxz"),f(i,"style",o="background-color: "+(e[0]===e[7]+1?"white":"#d4d4d4")),u.p(l)},m(y,g){B(y,t,g),E(t,l),l.checked=l.__value===e[0],E(t,a),E(t,i),E(i,r),E(r,s),E(t,h),c||(m=Ee(l,"change",e[3]),c=!0)},p(y,g){g&3&&(l.checked=l.__value===y[0]),g&2&&n!==(n=y[5].toLowerCase()+"")&&me(s,n),g&1&&o!==(o="background-color: "+(y[0]===y[7]+1?"white":"#d4d4d4"))&&f(i,"style",o)},d(y){y&&w(t),u.r(),c=!1,m()}}}function ca(e){let t,l,a=e[2]&&mt(),i=e[1],r=[];for(let n=0;n<i.length;n+=1)r[n]=gt(_t(e,i,n));return{c(){t=G("div"),a&&a.c(),l=Z();for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=O(n,"DIV",{class:!0});var s=I(t);a&&a.l(s),l=Q(s);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(w),this.h()},h(){f(t,"class","radioContainer svelte-46qqxz")},m(n,s){B(n,t,s),a&&a.m(t,null),E(t,l);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(n,[s]){if(n[2]?a||(a=mt(),a.c(),a.m(t,l)):a&&(a.d(1),a=null),s&3){i=n[1];let o;for(o=0;o<i.length;o+=1){const h=_t(n,i,o);r[o]?r[o].p(h,s):(r[o]=gt(h),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},i:ie,o:ie,d(n){n&&w(t),a&&a.d(),ne(r,n)}}}function da(e,t,l){let{optionsArray:a,chosenChart:i,compareIntroText:r=!0}=t;const n=[[]];function s(){i=this.__value,l(0,i)}return e.$$set=o=>{"optionsArray"in o&&l(1,a=o.optionsArray),"chosenChart"in o&&l(0,i=o.chosenChart),"compareIntroText"in o&&l(2,r=o.compareIntroText)},[i,a,r,s,n]}class Ml extends oe{constructor(t){super(),fe(this,t,da,ca,ue,{optionsArray:1,chosenChart:0,compareIntroText:2})}}function pt(e,t,l){const a=e.slice();return a[11]=t[l],a[13]=l,a}function bt(e){let t,l=e[4],a=[];for(let i=0;i<l.length;i+=1)a[i]=vt(pt(e,l,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=De()},l(i){for(let r=0;r<a.length;r+=1)a[r].l(i);t=De()},m(i,r){for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(i,r);B(i,t,r)},p(i,r){if(r&114){l=i[4];let n;for(n=0;n<l.length;n+=1){const s=pt(i,l,n);a[n]?a[n].p(s,r):(a[n]=vt(s),a[n].c(),a[n].m(t.parentNode,t))}for(;n<a.length;n+=1)a[n].d(1);a.length=l.length}},d(i){ne(a,i),i&&w(t)}}}function vt(e){let t,l,a,i,r,n=e[5]+e[11].toLocaleString()+e[6]+"",s,o;return{c(){t=P("g"),l=P("line"),r=P("text"),s=X(n),this.h()},l(h){t=z(h,"g",{class:!0});var u=I(t);l=z(u,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(w),r=z(u,"text",{"text-anchor":!0,x:!0,y:!0,stroke:!0,fill:!0,"font-size":!0});var c=I(r);s=J(c,n),c.forEach(w),u.forEach(w),this.h()},h(){f(l,"x1","0"),f(l,"x2","-8"),f(l,"y1",a=e[1](e[11])),f(l,"y2",i=e[1](e[11])),f(l,"stroke","black"),f(r,"text-anchor","end"),f(r,"x",-10),f(r,"y",o=e[1](e[11])+5),f(r,"stroke","none"),f(r,"fill","#333"),f(r,"font-size","14px"),f(t,"class","tick")},m(h,u){B(h,t,u),E(t,l),E(t,r),E(r,s)},p(h,u){u&18&&a!==(a=h[1](h[11]))&&f(l,"y1",a),u&18&&i!==(i=h[1](h[11]))&&f(l,"y2",i),u&16&&n!==(n=h[5]+h[11].toLocaleString()+h[6]+"")&&me(s,n),u&18&&o!==(o=h[1](h[11])+5)&&f(r,"y",o)},d(h){h&&w(t)}}}function _a(e){let t,l,a,i,r,n=e[3]==0&&bt(e);return{c(){t=P("g"),l=P("line"),n&&n.c(),this.h()},l(s){t=z(s,"g",{class:!0,transform:!0});var o=I(t);l=z(o,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(w),n&&n.l(o),o.forEach(w),this.h()},h(){f(l,"x1","0"),f(l,"x2","0"),f(l,"y1",a=e[1](e[0][1])),f(l,"y2",i=e[1](e[0][0])),f(l,"stroke","black"),f(t,"class","yAxis"),f(t,"transform",r="translate("+-e[2]+",0)")},m(s,o){B(s,t,o),E(t,l),n&&n.m(t,null)},p(s,[o]){o&3&&a!==(a=s[1](s[0][1]))&&f(l,"y1",a),o&3&&i!==(i=s[1](s[0][0]))&&f(l,"y2",i),s[3]==0?n?n.p(s,o):(n=bt(s),n.c(),n.m(t,null)):n&&(n.d(1),n=null),o&4&&r!==(r="translate("+-s[2]+",0)")&&f(t,"transform",r)},i:ie,o:ie,d(s){s&&w(t),n&&n.d()}}}function ma(e,t,l){let a,i,r,{yDomain:n,y:s,yAxisOffset:o=0,column:h=0,indicator:u}=t,c=[],m=u.prefix===null?"":u.prefix==="pounds"?"£":u.prefix,y=u.suffix===null?"":u.suffix;return e.$$set=g=>{"yDomain"in g&&l(0,n=g.yDomain),"y"in g&&l(1,s=g.y),"yAxisOffset"in g&&l(2,o=g.yAxisOffset),"column"in g&&l(3,h=g.column),"indicator"in g&&l(7,u=g.indicator)},e.$$.update=()=>{if(e.$$.dirty&1&&l(10,a=Math.abs(n[1]-n[0])),e.$$.dirty&1024&&l(9,i=10**Math.floor(Math.log10(a))),e.$$.dirty&1536&&l(8,r=a/i<=1.5?i/5:a/i<=3?i/2:a/i<=6?i:i*2),e.$$.dirty&273){l(4,c=[]);for(let g=Math.ceil(n[0]);g<=Math.floor(n[1]);g++)g%r==0&&c.push(g)}},[n,s,o,h,c,m,y,u,r,i,a]}class Rl extends oe{constructor(t){super(),fe(this,t,ma,_a,ue,{yDomain:0,y:1,yAxisOffset:2,column:3,indicator:7})}}function kt(e,t,l){const a=e.slice();return a[8]=t[l],a[10]=l,a}function yt(e){let t,l,a,i;return{c(){t=P("line"),this.h()},l(r){t=z(r,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),I(t).forEach(w),this.h()},h(){f(t,"y1","0"),f(t,"y2",l=-e[3]),f(t,"x1",a=e[1](e[8])),f(t,"x2",i=e[1](e[8])),f(t,"stroke","black"),f(t,"opacity","0.1")},m(r,n){B(r,t,n)},p(r,n){n&8&&l!==(l=-r[3])&&f(t,"y2",l),n&2&&a!==(a=r[1](r[8]))&&f(t,"x1",a),n&2&&i!==(i=r[1](r[8]))&&f(t,"x2",i)},d(r){r&&w(t)}}}function wt(e){let t,l,a,i,r,n=e[8]+"",s,o,h=e[4]&&yt(e);return{c(){t=P("g"),l=P("line"),r=P("text"),s=X(n),h&&h.c(),this.h()},l(u){t=z(u,"g",{class:!0});var c=I(t);l=z(c,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(w),r=z(c,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var m=I(r);s=J(m,n),m.forEach(w),h&&h.l(c),c.forEach(w),this.h()},h(){f(l,"y1","0"),f(l,"y2","8"),f(l,"x1",a=e[1](e[8])),f(l,"x2",i=e[1](e[8])),f(l,"stroke","black"),f(r,"text-anchor","middle"),f(r,"y",20),f(r,"x",o=e[1](e[8])),f(r,"stroke","none"),f(r,"fill","#333"),f(r,"font-size","14px"),f(t,"class","tick")},m(u,c){B(u,t,c),E(t,l),E(t,r),E(r,s),h&&h.m(t,null)},p(u,c){c&2&&a!==(a=u[1](u[8]))&&f(l,"x1",a),c&2&&i!==(i=u[1](u[8]))&&f(l,"x2",i),c&2&&o!==(o=u[1](u[8]))&&f(r,"x",o),u[4]?h?h.p(u,c):(h=yt(u),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},d(u){u&&w(t),h&&h.d()}}}function ga(e){let t,l,a,i,r,n=e[5],s=[];for(let o=0;o<n.length;o+=1)s[o]=wt(kt(e,n,o));return{c(){t=P("g"),l=P("line");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=z(o,"g",{class:!0,transform:!0});var h=I(t);l=z(h,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(w);for(let u=0;u<s.length;u+=1)s[u].l(h);h.forEach(w),this.h()},h(){f(l,"y1","0"),f(l,"y2","0"),f(l,"x1",a=e[1](e[0][0])),f(l,"x2",i=e[1](e[0][1])),f(l,"stroke","black"),f(t,"class","xAxis"),f(t,"transform",r="translate(0,"+(e[2]+e[3])+")")},m(o,h){B(o,t,h),E(t,l);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null)},p(o,[h]){if(h&3&&a!==(a=o[1](o[0][0]))&&f(l,"x1",a),h&3&&i!==(i=o[1](o[0][1]))&&f(l,"x2",i),h&58){n=o[5];let u;for(u=0;u<n.length;u+=1){const c=kt(o,n,u);s[u]?s[u].p(c,h):(s[u]=wt(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}h&12&&r!==(r="translate(0,"+(o[2]+o[3])+")")&&f(t,"transform",r)},i:ie,o:ie,d(o){o&&w(t),ne(s,o)}}}function pa(e,t,l){let{xDomain:a,x:i,xAxisOffset:r=0,chartHeight:n,gridlines:s=!1}=t,o=Math.abs(a[1]-a[0]),h=o>=15?5:o>=6?2:1,u=[];for(let c=Math.floor(a[0]);c<=Math.ceil(a[1]);c++)c%h==0&&u.push(c);return e.$$set=c=>{"xDomain"in c&&l(0,a=c.xDomain),"x"in c&&l(1,i=c.x),"xAxisOffset"in c&&l(2,r=c.xAxisOffset),"chartHeight"in c&&l(3,n=c.chartHeight),"gridlines"in c&&l(4,s=c.gridlines)},[a,i,r,n,s,u]}class ba extends oe{constructor(t){super(),fe(this,t,pa,ga,ue,{xDomain:0,x:1,xAxisOffset:2,chartHeight:3,gridlines:4})}}function Se(e){return function(){return e}}const $e=Math.PI,et=2*$e,Fe=1e-6,va=et-Fe;function Ll(e){this._+=e[0];for(let t=1,l=e.length;t<l;++t)this._+=arguments[t]+e[t]}function ka(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ll;const l=10**t;return function(a){this._+=a[0];for(let i=1,r=a.length;i<r;++i)this._+=Math.round(arguments[i]*l)/l+a[i]}}class ya{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ll:ka(t)}moveTo(t,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,l){this._append`L${this._x1=+t},${this._y1=+l}`}quadraticCurveTo(t,l,a,i){this._append`Q${+t},${+l},${this._x1=+a},${this._y1=+i}`}bezierCurveTo(t,l,a,i,r,n){this._append`C${+t},${+l},${+a},${+i},${this._x1=+r},${this._y1=+n}`}arcTo(t,l,a,i,r){if(t=+t,l=+l,a=+a,i=+i,r=+r,r<0)throw new Error(`negative radius: ${r}`);let n=this._x1,s=this._y1,o=a-t,h=i-l,u=n-t,c=s-l,m=u*u+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=l}`;else if(m>Fe)if(!(Math.abs(c*o-h*u)>Fe)||!r)this._append`L${this._x1=t},${this._y1=l}`;else{let y=a-n,g=i-s,p=o*o+h*h,D=y*y+g*g,_=Math.sqrt(p),b=Math.sqrt(m),d=r*Math.tan(($e-Math.acos((p+m-D)/(2*_*b)))/2),k=d/b,v=d/_;Math.abs(k-1)>Fe&&this._append`L${t+k*u},${l+k*c}`,this._append`A${r},${r},0,0,${+(c*y>u*g)},${this._x1=t+v*o},${this._y1=l+v*h}`}}arc(t,l,a,i,r,n){if(t=+t,l=+l,a=+a,n=!!n,a<0)throw new Error(`negative radius: ${a}`);let s=a*Math.cos(i),o=a*Math.sin(i),h=t+s,u=l+o,c=1^n,m=n?i-r:r-i;this._x1===null?this._append`M${h},${u}`:(Math.abs(this._x1-h)>Fe||Math.abs(this._y1-u)>Fe)&&this._append`L${h},${u}`,a&&(m<0&&(m=m%et+et),m>va?this._append`A${a},${a},0,1,${c},${t-s},${l-o}A${a},${a},0,1,${c},${this._x1=h},${this._y1=u}`:m>Fe&&this._append`A${a},${a},0,${+(m>=$e)},${c},${this._x1=t+a*Math.cos(r)},${this._y1=l+a*Math.sin(r)}`)}rect(t,l,a,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+l}h${a=+a}v${+i}h${-a}Z`}toString(){return this._}}function wa(e){let t=3;return e.digits=function(l){if(!arguments.length)return t;if(l==null)t=null;else{const a=Math.floor(l);if(!(a>=0))throw new RangeError(`invalid digits: ${l}`);t=a}return e},()=>new ya(t)}function Aa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fl(e){this._context=e}Fl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Da(e){return new Fl(e)}function Ea(e){return e[0]}function Ia(e){return e[1]}function Ma(e,t){var l=Se(!0),a=null,i=Da,r=null,n=wa(s);e=typeof e=="function"?e:e===void 0?Ea:Se(e),t=typeof t=="function"?t:t===void 0?Ia:Se(t);function s(o){var h,u=(o=Aa(o)).length,c,m=!1,y;for(a==null&&(r=i(y=n())),h=0;h<=u;++h)!(h<u&&l(c=o[h],h,o))===m&&((m=!m)?r.lineStart():r.lineEnd()),m&&r.point(+e(c,h,o),+t(c,h,o));if(y)return r=null,y+""||null}return s.x=function(o){return arguments.length?(e=typeof o=="function"?o:Se(+o),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:Se(+o),s):t},s.defined=function(o){return arguments.length?(l=typeof o=="function"?o:Se(!!o),s):l},s.curve=function(o){return arguments.length?(i=o,a!=null&&(r=i(a)),s):i},s.context=function(o){return arguments.length?(o==null?a=r=null:r=i(a=o),s):a},s}function At(e,t,l){const a=e.slice();return a[12]=t[l],a[14]=l,a}function Dt(e){let t,l=e[2],a=[];for(let i=0;i<l.length;i+=1)a[i]=Et(At(e,l,i));return{c(){t=P("g");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){t=z(i,"g",{class:!0});var r=I(t);for(let n=0;n<a.length;n+=1)a[n].l(r);r.forEach(w),this.h()},h(){f(t,"class","pointsContainer")},m(i,r){B(i,t,r);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(t,null)},p(i,r){if(r&125){l=i[2];let n;for(n=0;n<l.length;n+=1){const s=At(i,l,n);a[n]?a[n].p(s,r):(a[n]=Et(s),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=l.length}},d(i){i&&w(t),ne(a,i)}}}function Ra(e){let t,l;return{c(){t=P("circle"),this.h()},l(a){t=z(a,"circle",{r:!0,fill:!0,stroke:!0});var i=I(t);i.forEach(w),this.h()},h(){f(t,"r","3.5"),f(t,"fill",l=e[0]===e[3]?"#F39431":re[e[6].role]),f(t,"stroke","white")},m(a,i){B(a,t,i)},p(a,i){i&73&&l!==(l=a[0]===a[3]?"#F39431":re[a[6].role])&&f(t,"fill",l)},d(a){a&&w(t)}}}function La(e){let t,l,a;return{c(){t=P("rect"),this.h()},l(i){t=z(i,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var r=I(t);r.forEach(w),this.h()},h(){f(t,"transform",l=["country","uk"].includes(e[6].role)?"rotate(45)":null),f(t,"x","-3"),f(t,"y","-3"),f(t,"width","6"),f(t,"height","6"),f(t,"fill",a=e[0]===e[3]?"#F39431":re[e[6].role]),f(t,"stroke","white")},m(i,r){B(i,t,r)},p(i,r){r&64&&l!==(l=["country","uk"].includes(i[6].role)?"rotate(45)":null)&&f(t,"transform",l),r&73&&a!==(a=i[0]===i[3]?"#F39431":re[i[6].role])&&f(t,"fill",a)},d(i){i&&w(t)}}}function Et(e){let t,l,a;function i(s,o){return o&64&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[6].role)),l?La:Ra}let r=i(e,-1),n=r(e);return{c(){t=P("g"),n.c(),this.h()},l(s){t=z(s,"g",{transform:!0});var o=I(t);n.l(o),o.forEach(w),this.h()},h(){f(t,"transform",a="translate("+e[4](e[12].year)+","+e[5](e[12].value)+")")},m(s,o){B(s,t,o),n.m(t,null)},p(s,o){r===(r=i(s,o))&&n?n.p(s,o):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null))),o&52&&a!==(a="translate("+s[4](s[12].year)+","+s[5](s[12].value)+")")&&f(t,"transform",a)},d(s){s&&w(t),n.d()}}}function Fa(e){let t,l,a,i,r,n,s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1],o,h,u,c=s&&Dt(e);return{c(){t=P("g"),l=P("path"),c&&c.c(),this.h()},l(m){t=z(m,"g",{class:!0,opacity:!0});var y=I(t);l=z(y,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0,hoverid:!0}),I(l).forEach(w),c&&c.l(y),y.forEach(w),this.h()},h(){f(l,"d",a=e[7](e[2])),f(l,"fill","none"),f(l,"stroke",i=e[0]===e[3]?"#F39431":re[e[6].role]),f(l,"stroke-width",r=e[1]?"16px":"2px"),f(l,"opacity",n=e[1]?0:e[0]===e[3]||e[10]?1:.25),f(l,"hoverid",e[3]),f(t,"class","lineContainer"),f(t,"opacity",o=e[0]===e[3]||e[0]===null?1:.25)},m(m,y){B(m,t,y),E(t,l),c&&c.m(t,null),h||(u=[Ee(l,"mouseover",function(){Ze(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)}),Ee(l,"mouseleave",function(){Ze(e[1]?e[9]:null)&&(e[1]?e[9]:null).apply(this,arguments)}),Ee(l,"focus",function(){Ze(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)})],h=!0)},p(m,[y]){e=m,y&132&&a!==(a=e[7](e[2]))&&f(l,"d",a),y&73&&i!==(i=e[0]===e[3]?"#F39431":re[e[6].role])&&f(l,"stroke",i),y&2&&r!==(r=e[1]?"16px":"2px")&&f(l,"stroke-width",r),y&11&&n!==(n=e[1]?0:e[0]===e[3]||e[10]?1:.25)&&f(l,"opacity",n),y&8&&f(l,"hoverid",e[3]),y&75&&(s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1]),s?c?c.p(e,y):(c=Dt(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),y&9&&o!==(o=e[0]===e[3]||e[0]===null?1:.25)&&f(t,"opacity",o)},i:ie,o:ie,d(m){m&&w(t),c&&c.d(),h=!1,tt(u)}}}function Ca(e,t,l){let a,{overlay:i=!1,lineData:r,i:n,hoverIndex:s,x:o,y:h,xDomain:u,area:c}=t;function m(p){l(0,s=parseFloat(Re(this).attr("hoverid")))}function y(p){l(0,s=null)}let g=["main","parent","country","uk","custom1","custom2","custom3","custom4"];return e.$$set=p=>{"overlay"in p&&l(1,i=p.overlay),"lineData"in p&&l(2,r=p.lineData),"i"in p&&l(3,n=p.i),"hoverIndex"in p&&l(0,s=p.hoverIndex),"x"in p&&l(4,o=p.x),"y"in p&&l(5,h=p.y),"xDomain"in p&&l(11,u=p.xDomain),"area"in p&&l(6,c=p.area)},e.$$.update=()=>{e.$$.dirty&48&&l(7,a=Ma().x(p=>o(p.year)).y(p=>h(p.value)))},[s,i,r,n,o,h,c,a,m,y,g,u]}class Cl extends oe{constructor(t){super(),fe(this,t,Ca,Fa,ue,{overlay:1,lineData:2,i:3,hoverIndex:0,x:4,y:5,xDomain:11,area:6})}}function It(e,t,l){const a=e.slice();return a[3]=t[l],a}function Mt(e){let t,l=e[3].datum.areanm+"",a,i,r,n=e[3].datum.areanm+"",s,o,h,u;return{c(){t=P("text"),a=X(l),r=P("text"),s=X(n),this.h()},l(c){t=z(c,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var m=I(t);a=J(m,l),m.forEach(w),r=z(c,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var y=I(r);s=J(y,n),y.forEach(w),this.h()},h(){f(t,"y",i=e[3].y+8),f(t,"font-size","16px"),f(t,"fill","white"),f(t,"stroke","white"),f(t,"stroke-width","4px"),f(r,"y",o=e[3].y+8),f(r,"font-size","16px"),f(r,"fill",h=e[2]!=null?"#F39431":re[e[3].datum.role]),f(r,"stroke",u=e[2]!=null?"#F39431":re[e[3].datum.role]),f(r,"stroke-width","0.5px")},m(c,m){B(c,t,m),E(t,a),B(c,r,m),E(r,s)},p(c,m){m&2&&l!==(l=c[3].datum.areanm+"")&&me(a,l),m&2&&i!==(i=c[3].y+8)&&f(t,"y",i),m&2&&n!==(n=c[3].datum.areanm+"")&&me(s,n),m&2&&o!==(o=c[3].y+8)&&f(r,"y",o),m&6&&h!==(h=c[2]!=null?"#F39431":re[c[3].datum.role])&&f(r,"fill",h),m&6&&u!==(u=c[2]!=null?"#F39431":re[c[3].datum.role])&&f(r,"stroke",u)},d(c){c&&w(t),c&&w(r)}}}function Ta(e){let t,l,a=e[1],i=[];for(let r=0;r<a.length;r+=1)i[r]=Mt(It(e,a,r));return{c(){t=P("g");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=z(r,"g",{class:!0,transform:!0});var n=I(t);for(let s=0;s<i.length;s+=1)i[s].l(n);n.forEach(w),this.h()},h(){f(t,"class","labelsContainer"),f(t,"transform",l="translate("+e[0]+",0)")},m(r,n){B(r,t,n);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null)},p(r,[n]){if(n&6){a=r[1];let s;for(s=0;s<a.length;s+=1){const o=It(r,a,s);i[s]?i[s].p(o,n):(i[s]=Mt(o),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=a.length}n&1&&l!==(l="translate("+r[0]+",0)")&&f(t,"transform",l)},i:ie,o:ie,d(r){r&&w(t),ne(i,r)}}}function Sa(e,t,l){let{x:a,labelPlacements:i,hoverIndex:r}=t;return e.$$set=n=>{"x"in n&&l(0,a=n.x),"labelPlacements"in n&&l(1,i=n.labelPlacements),"hoverIndex"in n&&l(2,r=n.hoverIndex)},[a,i,r]}class Tl extends oe{constructor(t){super(),fe(this,t,Sa,Ta,ue,{x:0,labelPlacements:1,hoverIndex:2})}}function Rt(e,t,l){const a=e.slice();return a[22]=t[l],a[24]=l,a}function Lt(e,t,l){const a=e.slice();return a[22]=t[l],a[24]=l,a}function Ft(e){let t,l;function a(...i){return e[15](e[22],...i)}return t=new Cl({props:{area:e[22],lineData:e[1].filter(a),i:e[24],hoverIndex:e[6],x:e[12],y:e[7],xDomain:e[10]}}),{c(){ee(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,r){te(t,i,r),l=!0},p(i,r){e=i;const n={};r&1&&(n.area=e[22]),r&3&&(n.lineData=e[1].filter(a)),r&64&&(n.hoverIndex=e[6]),r&4096&&(n.x=e[12]),r&128&&(n.y=e[7]),r&1024&&(n.xDomain=e[10]),t.$set(n)},i(i){l||(Y(t.$$.fragment,i),l=!0)},o(i){K(t.$$.fragment,i),l=!1},d(i){le(t,i)}}}function Ct(e){let t,l,a;function i(...s){return e[16](e[22],...s)}function r(s){e[17](s)}let n={overlay:"true",area:e[22],lineData:e[1].filter(i),i:e[24],x:e[12],y:e[7],xDomain:e[10]};return e[6]!==void 0&&(n.hoverIndex=e[6]),t=new Cl({props:n}),ke.push(()=>ye(t,"hoverIndex",r)),{c(){ee(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){te(t,s,o),a=!0},p(s,o){e=s;const h={};o&1&&(h.area=e[22]),o&3&&(h.lineData=e[1].filter(i)),o&4096&&(h.x=e[12]),o&128&&(h.y=e[7]),o&1024&&(h.xDomain=e[10]),!l&&o&64&&(l=!0,h.hoverIndex=e[6],we(()=>l=!1)),t.$set(h)},i(s){a||(Y(t.$$.fragment,s),a=!0)},o(s){K(t.$$.fragment,s),a=!1},d(s){le(t,s)}}}function Va(e){let t,l,a,i,r,n,s,o,h,u,c,m;r=new Rl({props:{yDomain:e[8],y:e[7],indicator:e[2]}}),n=new ba({props:{chartHeight:e[4],xDomain:e[10],x:e[12]}});let y=e[0].reverse(),g=[];for(let d=0;d<y.length;d+=1)g[d]=Ft(Lt(e,y,d));const p=d=>K(g[d],1,1,()=>{g[d]=null});let D=e[0],_=[];for(let d=0;d<D.length;d+=1)_[d]=Ct(Rt(e,D,d));const b=d=>K(_[d],1,1,()=>{_[d]=null});return h=new Tl({props:{x:e[12](e[10][1])+5,labelPlacements:e[11],hoverIndex:e[6]}}),{c(){t=G("div"),l=P("svg"),a=P("g"),i=P("rect"),ee(r.$$.fragment),ee(n.$$.fragment),s=P("g");for(let d=0;d<g.length;d+=1)g[d].c();o=P("g");for(let d=0;d<_.length;d+=1)_[d].c();ee(h.$$.fragment),this.h()},l(d){t=O(d,"DIV",{class:!0});var k=I(t);l=z(k,"svg",{height:!0,width:!0});var v=I(l);a=z(v,"g",{class:!0,transform:!0});var A=I(a);i=z(A,"rect",{width:!0,height:!0,fill:!0,opacity:!0,stroke:!0}),I(i).forEach(w),ae(r.$$.fragment,A),ae(n.$$.fragment,A),s=z(A,"g",{class:!0});var W=I(s);for(let M=0;M<g.length;M+=1)g[M].l(W);W.forEach(w),o=z(A,"g",{class:!0});var T=I(o);for(let M=0;M<_.length;M+=1)_[M].l(T);T.forEach(w),ae(h.$$.fragment,A),A.forEach(w),v.forEach(w),k.forEach(w),this.h()},h(){f(i,"width",e[9]),f(i,"height",e[4]),f(i,"fill","black"),f(i,"opacity","0.02"),f(i,"stroke","none"),f(s,"class","visibleLinesGroup"),f(o,"class","overlayLinesGroup"),f(a,"class","chart-container"),f(a,"transform",u="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[13]),f(l,"width",e[3]),f(t,"class","svg-container"),Pe(()=>e[18].call(t))},m(d,k){B(d,t,k),E(t,l),E(l,a),E(a,i),te(r,a,null),te(n,a,null),E(a,s);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(s,null);E(a,o);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(o,null);te(h,a,null),c=ze(t,e[18].bind(t)),m=!0},p(d,[k]){(!m||k&512)&&f(i,"width",d[9]),(!m||k&16)&&f(i,"height",d[4]);const v={};k&256&&(v.yDomain=d[8]),k&128&&(v.y=d[7]),k&4&&(v.indicator=d[2]),r.$set(v);const A={};if(k&16&&(A.chartHeight=d[4]),k&1024&&(A.xDomain=d[10]),k&4096&&(A.x=d[12]),n.$set(A),k&5315){y=d[0].reverse();let T;for(T=0;T<y.length;T+=1){const M=Lt(d,y,T);g[T]?(g[T].p(M,k),Y(g[T],1)):(g[T]=Ft(M),g[T].c(),Y(g[T],1),g[T].m(s,null))}for(be(),T=y.length;T<g.length;T+=1)p(T);ve()}if(k&5315){D=d[0];let T;for(T=0;T<D.length;T+=1){const M=Rt(d,D,T);_[T]?(_[T].p(M,k),Y(_[T],1)):(_[T]=Ct(M),_[T].c(),Y(_[T],1),_[T].m(o,null))}for(be(),T=D.length;T<_.length;T+=1)b(T);ve()}const W={};k&5120&&(W.x=d[12](d[10][1])+5),k&2048&&(W.labelPlacements=d[11]),k&64&&(W.hoverIndex=d[6]),h.$set(W),(!m||k&32&&u!==(u="translate("+d[5].left+","+d[5].top+")"))&&f(a,"transform",u),(!m||k&8)&&f(l,"width",d[3])},i(d){if(!m){Y(r.$$.fragment,d),Y(n.$$.fragment,d);for(let k=0;k<y.length;k+=1)Y(g[k]);for(let k=0;k<D.length;k+=1)Y(_[k]);Y(h.$$.fragment,d),m=!0}},o(d){K(r.$$.fragment,d),K(n.$$.fragment,d),g=g.filter(Boolean);for(let k=0;k<g.length;k+=1)K(g[k]);_=_.filter(Boolean);for(let k=0;k<_.length;k+=1)K(_[k]);K(h.$$.fragment,d),m=!1},d(d){d&&w(t),le(r),le(n),ne(g,d),ne(_,d),le(h),c()}}}function Wa(e,t,l){let a,i,r,n,s,o,h,u,c,m,y=Ae("areas"),{plottedAreas:g,filteredData:p,indicator:D}=t,_=400,b=500,d=170,k=["main","parent","country","uk","custom1","custom2","custom3","custom4"];const v=(M,N)=>N.areacd===M.areacd,A=(M,N)=>N.areacd===M.areacd;function W(M){u=M,l(6,u)}function T(){_=this.clientWidth,l(3,_)}return e.$$set=M=>{"plottedAreas"in M&&l(0,g=M.plottedAreas),"filteredData"in M&&l(1,p=M.filteredData),"indicator"in M&&l(2,D=M.indicator)},e.$$.update=()=>{e.$$.dirty&40&&l(9,i=_-a.left-a.right),e.$$.dirty&32&&l(4,r=b-a.top-a.bottom),e.$$.dirty&2&&l(10,n=[Math.min(...p.map(M=>M.year)),Math.max(...p.map(M=>M.year))]),e.$$.dirty&1536&&l(12,s=Le().domain(n).range([0,i])),e.$$.dirty&6&&l(8,o=[D.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...p.map(M=>M.value))),Math.ceil(Math.max(...p.map(M=>M.value)))]),e.$$.dirty&272&&l(7,h=Le().domain(o).range([r,0])),e.$$.dirty&195&&l(14,c=g.map(M=>({...M,yPosition:h(p.find(N=>N.areacd===M.areacd&N.year===Math.max.apply(null,p.filter(L=>L.areacd===M.areacd).map(L=>L.year))).value),areanm:y.find(N=>M.areacd===N.areacd).areanm})).filter((M,N)=>u!=null?N==u:k.includes(M.role))),e.$$.dirty&16432&&l(11,m=Dl(c,[-a.top,r],M=>M.yPosition,M=>M.areanm.length>20?34:17))},l(5,a={top:10,left:80,right:d+5,bottom:40}),l(6,u=null),[g,p,D,_,r,a,u,h,o,i,n,m,s,b,c,v,A,W,T]}class Pa extends oe{constructor(t){super(),fe(this,t,Wa,Va,ue,{plottedAreas:0,filteredData:1,indicator:2})}}function Tt(e,t,l){const a=e.slice();return a[10]=t[l],a[12]=l,a}function St(e,t,l){const a=e.slice();return a[10]=t[l],a[12]=l,a}function Vt(e){let t,l,a,i=e[1],r=[];for(let o=0;o<i.length;o+=1)r[o]=Wt(St(e,i,o));let n=e[1],s=[];for(let o=0;o<n.length;o+=1)s[o]=Pt(Tt(e,n,o));return{c(){t=P("g");for(let o=0;o<r.length;o+=1)r[o].c();l=Z(),a=P("g");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){t=z(o,"g",{class:!0});var h=I(t);for(let c=0;c<r.length;c+=1)r[c].l(h);h.forEach(w),l=Q(o),a=z(o,"g",{class:!0});var u=I(a);for(let c=0;c<s.length;c+=1)s[c].l(u);u.forEach(w),this.h()},h(){f(t,"class","overlayCirclesContainer"),f(a,"class","visibleCirclesContainer")},m(o,h){B(o,t,h);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);B(o,l,h),B(o,a,h);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,null)},p(o,h){if(h&14){i=o[1];let u;for(u=0;u<i.length;u+=1){const c=St(o,i,u);r[u]?r[u].p(c,h):(r[u]=Wt(c),r[u].c(),r[u].m(t,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}if(h&3){n=o[1];let u;for(u=0;u<n.length;u+=1){const c=Tt(o,n,u);s[u]?s[u].p(c,h):(s[u]=Pt(c),s[u].c(),s[u].m(a,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}},d(o){o&&w(t),ne(r,o),o&&w(l),o&&w(a),ne(s,o)}}}function Wt(e){let t,l,a,i,r,n;return{c(){t=P("g"),l=P("circle"),this.h()},l(s){t=z(s,"g",{transform:!0});var o=I(t);l=z(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0}),I(l).forEach(w),o.forEach(w),this.h()},h(){f(l,"hoverid",e[12]),f(l,"r",a=1.5*e[10].datum.radius),f(l,"stroke","none"),f(l,"fill","white"),f(t,"transform",i="translate("+e[10].y+","+e[10].x+")")},m(s,o){B(s,t,o),E(t,l),r||(n=[Ee(l,"mouseover",e[2]),Ee(l,"mouseleave",e[3]),Ee(l,"focus",e[2])],r=!0)},p(s,o){o&2&&a!==(a=1.5*s[10].datum.radius)&&f(l,"r",a),o&2&&i!==(i="translate("+s[10].y+","+s[10].x+")")&&f(t,"transform",i)},d(s){s&&w(t),r=!1,tt(n)}}}function za(e){let t,l,a,i;return{c(){t=P("circle"),this.h()},l(r){t=z(r,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,opacity:!0});var n=I(t);n.forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"r",l=e[0]===e[12]?e[10].datum.radius+3:e[10].datum.radius),f(t,"fill",a=e[0]===e[12]?"#F39431":re[e[10].datum.role]),f(t,"stroke","white"),f(t,"opacity",i=e[0]===e[12]||e[0]===null?1:.2)},m(r,n){B(r,t,n)},p(r,n){n&3&&l!==(l=r[0]===r[12]?r[10].datum.radius+3:r[10].datum.radius)&&f(t,"r",l),n&3&&a!==(a=r[0]===r[12]?"#F39431":re[r[10].datum.role])&&f(t,"fill",a),n&1&&i!==(i=r[0]===r[12]||r[0]===null?1:.2)&&f(t,"opacity",i)},d(r){r&&w(t)}}}function Ba(e){let t,l,a,i,r,n,s,o;return{c(){t=P("rect"),this.h()},l(h){t=z(h,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,opacity:!0});var u=I(t);u.forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[10].datum.role)?"rotate(45)":null),f(t,"x",a=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),f(t,"y",i=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),f(t,"width",r=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),f(t,"height",n=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),f(t,"fill",s=e[0]===e[12]?"#F39431":re[e[10].datum.role]),f(t,"stroke","white"),f(t,"opacity",o=e[0]===e[12]||e[0]===null?1:.2)},m(h,u){B(h,t,u)},p(h,u){u&2&&l!==(l=["country","uk"].includes(h[10].datum.role)?"rotate(45)":null)&&f(t,"transform",l),u&3&&a!==(a=h[0]===h[12]?-.75*h[10].datum.radius-3:-.75*h[10].datum.radius)&&f(t,"x",a),u&3&&i!==(i=h[0]===h[12]?-.75*h[10].datum.radius-3:-.75*h[10].datum.radius)&&f(t,"y",i),u&3&&r!==(r=h[0]===h[12]?h[10].datum.radius*1.5+6:h[10].datum.radius*1.5)&&f(t,"width",r),u&3&&n!==(n=h[0]===h[12]?h[10].datum.radius*1.5+6:h[10].datum.radius*1.5)&&f(t,"height",n),u&3&&s!==(s=h[0]===h[12]?"#F39431":re[h[10].datum.role])&&f(t,"fill",s),u&1&&o!==(o=h[0]===h[12]||h[0]===null?1:.2)&&f(t,"opacity",o)},d(h){h&&w(t)}}}function Pt(e){let t,l,a;function i(s,o){return o&2&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[10].datum.role)),l?Ba:za}let r=i(e,-1),n=r(e);return{c(){t=P("g"),n.c(),this.h()},l(s){t=z(s,"g",{transform:!0});var o=I(t);n.l(o),o.forEach(w),this.h()},h(){f(t,"transform",a="translate("+e[10].y+","+e[10].x+")")},m(s,o){B(s,t,o),n.m(t,null)},p(s,o){r===(r=i(s,o))&&n?n.p(s,o):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null))),o&2&&a!==(a="translate("+s[10].y+","+s[10].x+")")&&f(t,"transform",a)},d(s){s&&w(t),n.d()}}}function Na(e){let t,l=e[1].length>0&&Vt(e);return{c(){l&&l.c(),t=De()},l(a){l&&l.l(a),t=De()},m(a,i){l&&l.m(a,i),B(a,t,i)},p(a,[i]){a[1].length>0?l?l.p(a,i):(l=Vt(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:ie,o:ie,d(a){l&&l.d(a),a&&w(t)}}}let zt=1,Bt=1,Ga=0;function Oa(e,t,l){let a,{circleData:i,plottedAreas:r,y:n,hoverIndex:s,lineData:o}=t;class h{constructor(g,p,D){this.items=g,this.radiusFun=p,this.xFun=D,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,zt),this.maxR=Math.max(...g.map(_=>p(_))),this.rng=this._sfc32(1,2,3,zt)}calculateYPositions(){let g=this.items.map((_,b)=>({datum:_,originalIndex:b,x:this.xFun(_),y:null,placed:!1})).sort((_,b)=>_.x-b.x);g.forEach(function(_,b){_.index=b});let p=this.tieBreakFn;g.forEach(function(_){_.tieBreaker=p(_.x)});let D=[...g].sort((_,b)=>{let d=this.radiusFun(_.datum)+_.tieBreaker*Bt;return this.radiusFun(b.datum)+b.tieBreaker*Bt-d});for(let _ of D)_.placed=!0,_.y=this._getBestYPosition(_,g);return g.sort((_,b)=>_.originalIndex-b.originalIndex),g.map(_=>({datum:_.datum,x:_.x,y:_.y}))}_sfc32(g,p,D,_){let b=function(){g>>>=0,p>>>=0,D>>>=0,_>>>=0;var d=g+p|0;return g=p^p>>>9,p=D+(D<<3)|0,D=D<<21|D>>>11,_=_+1|0,d=d+_|0,D=D+d|0,(d>>>0)/4294967296};for(let d=0;d<10;d++)b();return b}_getBestYPosition(g,p){let D=[];for(let b of[-1,1]){let d,k=this.radiusFun(g.datum);for(let v=g.index+b;v>=0&&v<p.length&&(d=Math.abs(g.x-p[v].x))<k+this.maxR;v+=b){let A=p[v];if(!A.placed)continue;let W=k+this.radiusFun(A.datum);if(d>=k+this.radiusFun(A.datum))continue;let T=Math.sqrt(W*W-d*d),M=[A.y-T,A.y+T];D.push(M)}}if(D.length==0)return this.radiusFun(g.datum)*(this.rng()-.5)*Ga;let _=D.flat();_.push(0),_.sort((b,d)=>{let k=Math.abs(b),v=Math.abs(d);return k<v?-1:k>v?1:b-d});for(let b=0;b<_.length;b++){let d=_[b];if(D.every(k=>d<=k[0]||d>=k[1]))return d}}}let u=["main","parent","country","uk","custom1","custom2","custom3","custom4"];function c(y){l(0,s=parseFloat(Re(this).attr("hoverid")))}function m(y){l(0,s=null)}return e.$$set=y=>{"circleData"in y&&l(5,i=y.circleData),"plottedAreas"in y&&l(6,r=y.plottedAreas),"y"in y&&l(7,n=y.y),"hoverIndex"in y&&l(0,s=y.hoverIndex),"lineData"in y&&l(4,o=y.lineData)},e.$$.update=()=>{e.$$.dirty&224&&l(1,a=new h(r,y=>"radius"in y?y.radius*1.1:5,y=>n(i.find(g=>g.areacd===y.areacd).value)).calculateYPositions()),e.$$.dirty&3&&l(4,o=s===null?a.filter(y=>u.includes(y.datum.role)):[a[s]])},[s,a,c,m,o,i,r,n]}class Ha extends oe{constructor(t){super(),fe(this,t,Oa,Na,ue,{circleData:5,plottedAreas:6,y:7,hoverIndex:0,lineData:4})}}function Nt(e,t,l){const a=e.slice();return a[25]=t[l],a[26]=t,a[27]=l,a}function Gt(e){let t,l;return t=new Ol({props:{lineDataArray:e[11],x1:e[13](e[7][0]),x2:e[13](e[7][1]),hoverIndex:e[6]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&2048&&(r.lineDataArray=a[11]),i&8320&&(r.x1=a[13](a[7][0])),i&8320&&(r.x2=a[13](a[7][1])),i&64&&(r.hoverIndex=a[6]),t.$set(r)},i(a){l||(Y(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Ot(e){let t,l,a,i,r,n=e[25]+"",s,o,h,u,c,m;function y(..._){return e[18](e[25],..._)}function g(_){e[19](_)}function p(_){e[20](_,e[27])}let D={plottedAreas:e[0],circleData:e[1].filter(y),y:e[8]};return e[6]!==void 0&&(D.hoverIndex=e[6]),e[11][e[27]]!==void 0&&(D.lineData=e[11][e[27]]),o=new Ha({props:D}),ke.push(()=>ye(o,"hoverIndex",g)),ke.push(()=>ye(o,"lineData",p)),{c(){t=P("g"),l=P("line"),r=P("text"),s=X(n),ee(o.$$.fragment),this.h()},l(_){t=z(_,"g",{transform:!0});var b=I(t);l=z(b,"line",{y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),I(l).forEach(w),r=z(b,"text",{y:!0,"text-anchor":!0,"font-size":!0,fill:!0});var d=I(r);s=J(d,n),d.forEach(w),ae(o.$$.fragment,b),b.forEach(w),this.h()},h(){f(l,"y1",a=e[8](e[9][0])),f(l,"y2",i=e[8](e[9][1])-20),f(l,"stroke-width","1px"),f(l,"stroke","black"),f(r,"y","-30"),f(r,"text-anchor","middle"),f(r,"font-size","14px"),f(r,"fill","black"),f(t,"transform",c="translate("+e[13](e[25])+",0)")},m(_,b){B(_,t,b),E(t,l),E(t,r),E(r,s),te(o,t,null),m=!0},p(_,b){e=_,(!m||b&768&&a!==(a=e[8](e[9][0])))&&f(l,"y1",a),(!m||b&768&&i!==(i=e[8](e[9][1])-20))&&f(l,"y2",i),(!m||b&128)&&n!==(n=e[25]+"")&&me(s,n);const d={};b&1&&(d.plottedAreas=e[0]),b&130&&(d.circleData=e[1].filter(y)),b&256&&(d.y=e[8]),!h&&b&64&&(h=!0,d.hoverIndex=e[6],we(()=>h=!1)),!u&&b&2048&&(u=!0,d.lineData=e[11][e[27]],we(()=>u=!1)),o.$set(d),(!m||b&8320&&c!==(c="translate("+e[13](e[25])+",0)"))&&f(t,"transform",c)},i(_){m||(Y(o.$$.fragment,_),m=!0)},o(_){K(o.$$.fragment,_),m=!1},d(_){_&&w(t),le(o)}}}function Ya(e){let t,l,a,i,r,n,s,o,h,u,c,m,y;r=new Rl({props:{yDomain:e[9],y:e[8],indicator:e[2]}});let g=e[7][1]!=e[7][0]&&Gt(e),p=e[7][0]===e[7][1]?[e[7][0]]:e[7],D=[];for(let b=0;b<p.length;b+=1)D[b]=Ot(Nt(e,p,b));const _=b=>K(D[b],1,1,()=>{D[b]=null});return u=new Tl({props:{x:e[13](e[7][1])+35+(e[11][1].length>0?Math.max(...e[11][1].map(Ht)):0),labelPlacements:e[12],hoverIndex:e[6]}}),{c(){t=G("div"),l=P("svg"),a=P("g"),i=P("g"),ee(r.$$.fragment),n=P("rect"),g&&g.c(),o=De();for(let b=0;b<D.length;b+=1)D[b].c();h=De(),ee(u.$$.fragment),this.h()},l(b){t=O(b,"DIV",{class:!0});var d=I(t);l=z(d,"svg",{height:!0,width:!0});var k=I(l);a=z(k,"g",{class:!0,transform:!0});var v=I(a);i=z(v,"g",{transform:!0});var A=I(i);ae(r.$$.fragment,A),A.forEach(w),n=z(v,"rect",{x:!0,width:!0,height:!0,stroke:!0,fill:!0,opacity:!0}),I(n).forEach(w),g&&g.l(v),o=De();for(let W=0;W<D.length;W+=1)D[W].l(v);h=De(),ae(u.$$.fragment,v),v.forEach(w),k.forEach(w),d.forEach(w),this.h()},h(){f(i,"transform","translate("+-e[15]+",0)"),f(n,"x",-e[15]/2),f(n,"width",s=e[10]+e[15]),f(n,"height",e[4]),f(n,"stroke","none"),f(n,"fill","black"),f(n,"opacity","0.02"),f(a,"class","chart-container"),f(a,"transform",c="translate("+e[5].left+","+e[5].top+")"),f(l,"height",e[14]),f(l,"width",e[3]),f(t,"class","svg-container"),Pe(()=>e[21].call(t))},m(b,d){B(b,t,d),E(t,l),E(l,a),E(a,i),te(r,i,null),E(a,n),g&&g.m(a,null),E(a,o);for(let k=0;k<D.length;k+=1)D[k]&&D[k].m(a,null);E(a,h),te(u,a,null),m=ze(t,e[21].bind(t)),y=!0},p(b,[d]){const k={};if(d&512&&(k.yDomain=b[9]),d&256&&(k.y=b[8]),d&4&&(k.indicator=b[2]),r.$set(k),(!y||d&1024&&s!==(s=b[10]+b[15]))&&f(n,"width",s),(!y||d&16)&&f(n,"height",b[4]),b[7][1]!=b[7][0]?g?(g.p(b,d),d&128&&Y(g,1)):(g=Gt(b),g.c(),Y(g,1),g.m(a,o)):g&&(be(),K(g,1,1,()=>{g=null}),ve()),d&11203){p=b[7][0]===b[7][1]?[b[7][0]]:b[7];let A;for(A=0;A<p.length;A+=1){const W=Nt(b,p,A);D[A]?(D[A].p(W,d),Y(D[A],1)):(D[A]=Ot(W),D[A].c(),Y(D[A],1),D[A].m(a,h))}for(be(),A=p.length;A<D.length;A+=1)_(A);ve()}const v={};d&10368&&(v.x=b[13](b[7][1])+35+(b[11][1].length>0?Math.max(...b[11][1].map(Ht)):0)),d&4096&&(v.labelPlacements=b[12]),d&64&&(v.hoverIndex=b[6]),u.$set(v),(!y||d&32&&c!==(c="translate("+b[5].left+","+b[5].top+")"))&&f(a,"transform",c),(!y||d&8)&&f(l,"width",b[3])},i(b){if(!y){Y(r.$$.fragment,b),Y(g);for(let d=0;d<p.length;d+=1)Y(D[d]);Y(u.$$.fragment,b),y=!0}},o(b){K(r.$$.fragment,b),K(g),D=D.filter(Boolean);for(let d=0;d<D.length;d+=1)K(D[d]);K(u.$$.fragment,b),y=!1},d(b){b&&w(t),le(r),g&&g.d(),ne(D,b),le(u),m()}}}const Ht=e=>e.y;function qa(e,t,l){let a,i,r,n,s,o,h,u,c,m,y=Ae("areas"),{plottedAreas:g,filteredData:p,indicator:D,selectedAreas:_}=t,b=400,d=470,k=220,v=120,A=["main","parent","country","uk","custom1","custom2","custom3","custom4"],W=[[],[]];const T=(S,F)=>F.year==S;function M(S){u=S,l(6,u)}function N(S,F){e.$$.not_equal(W[F],S)&&(W[F]=S,l(11,W))}function L(){b=this.clientWidth,l(3,b)}return e.$$set=S=>{"plottedAreas"in S&&l(0,g=S.plottedAreas),"filteredData"in S&&l(1,p=S.filteredData),"indicator"in S&&l(2,D=S.indicator),"selectedAreas"in S&&l(16,_=S.selectedAreas)},e.$$.update=()=>{e.$$.dirty&40&&l(10,i=b-a.left-a.right),e.$$.dirty&32&&l(4,r=d-a.top-a.bottom),e.$$.dirty&2&&l(7,n=[Math.min(...p.map(S=>S.year)),Math.max(...p.map(S=>S.year))]),e.$$.dirty&1152&&l(13,s=Le().domain(n).range([0,i])),e.$$.dirty&6&&l(9,o=[D.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...p.map(S=>S.value))),Math.ceil(Math.max(...p.map(S=>S.value)))]),e.$$.dirty&528&&l(8,h=Le().domain(o).range([r,0])),e.$$.dirty&1&&l(0,g=g.map(S=>({...S,radius:A.includes(S.role)?10:6}))),e.$$.dirty&451&&l(17,c=g.map(S=>({...S,yPosition:h(p.find(F=>F.areacd===S.areacd&F.year===n[1]).value),areanm:y.find(F=>S.areacd===F.areacd).areanm})).filter((S,F)=>u!=null?F==u:A.includes(S.role))),e.$$.dirty&131120&&l(12,m=Dl(c,[-a.top,r],S=>S.yPosition,S=>S.areanm.length>20?34:17))},l(5,a={top:40,left:200,right:k+5,bottom:40}),l(6,u=null),[g,p,D,b,r,a,u,n,h,o,i,W,m,s,d,v,_,c,T,M,N,L]}class Ka extends oe{constructor(t){super(),fe(this,t,qa,Ya,ue,{plottedAreas:0,filteredData:1,indicator:2,selectedAreas:16})}}function Yt(e){let t,l=e[1].unit+"",a;return{c(){t=G("p"),a=X(l),this.h()},l(i){t=O(i,"P",{class:!0});var r=I(t);a=J(r,l),r.forEach(w),this.h()},h(){f(t,"class","svelte-awo2mx")},m(i,r){B(i,t,r),E(t,a)},p(i,r){r&2&&l!==(l=i[1].unit+"")&&me(a,l)},d(i){i&&w(t)}}}function ja(e){let t,l;return t=new Hl({props:{selectedAreas:e[5],filteredData:e[11]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&32&&(r.selectedAreas=a[5]),i&2048&&(r.filteredData=a[11]),t.$set(r)},i(a){l||(Y(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Ua(e){let t,l;return t=new Ka({props:{selectedAreas:e[5],plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&32&&(r.selectedAreas=a[5]),i&512&&(r.plottedAreas=a[9]),i&2048&&(r.filteredData=a[11]),i&2&&(r.indicator=a[1]),t.$set(r)},i(a){l||(Y(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Za(e){let t,l;return t=new Pa({props:{plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){ee(t.$$.fragment)},l(a){ae(t.$$.fragment,a)},m(a,i){te(t,a,i),l=!0},p(a,i){const r={};i&512&&(r.plottedAreas=a[9]),i&2048&&(r.filteredData=a[11]),i&2&&(r.indicator=a[1]),t.$set(r)},i(a){l||(Y(t.$$.fragment,a),l=!0)},o(a){K(t.$$.fragment,a),l=!1},d(a){le(t,a)}}}function Qa(e){let t,l,a,i,r,n,s=e[1].label+"",o,h,u,c,m,y,g,p,D,_,b,d,k,v,A;function W(R){e[15](R)}let T={optionsArray:e[12]};e[8]!==void 0&&(T.chosenChart=e[8]),l=new Ml({props:T}),ke.push(()=>ye(l,"chosenChart",W));let M=e[1].unit!=null&&Yt(e);function N(R){e[17](R)}let L={selectedAreas:e[5].filter(e[16]),areasWithData:e[10],selectedArea:e[6],parentArea:e[7]};e[0]!==void 0&&(L.checkboxedRoles=e[0]),c=new Il({props:L}),ke.push(()=>ye(c,"checkboxedRoles",N));const S=[Za,Ua,ja],F=[];function $(R,j){return R[12][R[8]-1]==="Over time"?0:R[12][R[8]-1]==="To other areas"?1:R[12][R[8]-1]==="Geographically"?2:-1}return~(g=$(e))&&(p=F[g]=S[g](e)),{c(){t=G("div"),ee(l.$$.fragment),i=Z(),r=G("div"),n=G("h3"),o=X(s),h=Z(),M&&M.c(),u=Z(),ee(c.$$.fragment),y=Z(),p&&p.c(),D=Z(),_=G("p"),b=X("Source: Office for National Statistics"),d=Z(),k=G("img"),this.h()},l(R){t=O(R,"DIV",{class:!0});var j=I(t);ae(l.$$.fragment,j),i=Q(j),r=O(j,"DIV",{class:!0});var q=I(r);n=O(q,"H3",{class:!0});var C=I(n);o=J(C,s),C.forEach(w),h=Q(q),M&&M.l(q),u=Q(q),ae(c.$$.fragment,q),y=Q(q),p&&p.l(q),D=Q(q),_=O(q,"P",{class:!0});var U=I(_);b=J(U,"Source: Office for National Statistics"),U.forEach(w),q.forEach(w),d=Q(j),k=O(j,"IMG",{style:!0,width:!0,src:!0,alt:!0}),j.forEach(w),this.h()},h(){f(n,"class","svelte-awo2mx"),f(_,"class","svelte-awo2mx"),f(r,"class","chartOutlineGroup svelte-awo2mx"),ge(k,"padding-top","10px"),f(k,"width","75%"),lt(k.src,v=`${Ce}/img/image1.png`)||f(k,"src",v),f(k,"alt","download buttons"),f(t,"class","mainChartContainer")},m(R,j){B(R,t,j),te(l,t,null),E(t,i),E(t,r),E(r,n),E(n,o),E(r,h),M&&M.m(r,null),E(r,u),te(c,r,null),E(r,y),~g&&F[g].m(r,null),E(r,D),E(r,_),E(_,b),E(t,d),E(t,k),A=!0},p(R,[j]){const q={};!a&&j&256&&(a=!0,q.chosenChart=R[8],we(()=>a=!1)),l.$set(q),(!A||j&2)&&s!==(s=R[1].label+"")&&me(o,s),R[1].unit!=null?M?M.p(R,j):(M=Yt(R),M.c(),M.m(r,u)):M&&(M.d(1),M=null);const C={};j&60&&(C.selectedAreas=R[5].filter(R[16])),j&1024&&(C.areasWithData=R[10]),j&64&&(C.selectedArea=R[6]),j&128&&(C.parentArea=R[7]),!m&&j&1&&(m=!0,C.checkboxedRoles=R[0],we(()=>m=!1)),c.$set(C);let U=g;g=$(R),g===U?~g&&F[g].p(R,j):(p&&(be(),K(F[U],1,1,()=>{F[U]=null}),ve()),~g?(p=F[g],p?p.p(R,j):(p=F[g]=S[g](R),p.c()),Y(p,1),p.m(r,D)):p=null)},i(R){A||(Y(l.$$.fragment,R),Y(c.$$.fragment,R),Y(p),A=!0)},o(R){K(l.$$.fragment,R),K(c.$$.fragment,R),K(p),A=!1},d(R){R&&w(t),le(l),M&&M.d(),le(c),~g&&F[g].d()}}}function Xa(e,t,l){let a,i,r,n,{indicator:s,latestData:o,otherData:h,initialData:u,selectedAreas:c,checkboxedRoles:m,siblingAreas:y,selectedArea:g,parentArea:p}=t,D=1,_=[...h,...u].filter(v=>v.areacd===c.find(A=>A.role==="main").data.areacd).length>0?["Over time","To other areas","To other metrics","Geographically"]:["To other areas","To other metrics","Geographically"];function b(v){D=v,l(8,D)}const d=v=>[...o,...h,...u].filter(A=>v.data.areacd===A.areacd).length>0&v.role!=="main";function k(v){m=v,l(0,m)}return e.$$set=v=>{"indicator"in v&&l(1,s=v.indicator),"latestData"in v&&l(2,o=v.latestData),"otherData"in v&&l(3,h=v.otherData),"initialData"in v&&l(4,u=v.initialData),"selectedAreas"in v&&l(5,c=v.selectedAreas),"checkboxedRoles"in v&&l(0,m=v.checkboxedRoles),"siblingAreas"in v&&l(13,y=v.siblingAreas),"selectedArea"in v&&l(6,g=v.selectedArea),"parentArea"in v&&l(7,p=v.parentArea)},e.$$.update=()=>{e.$$.dirty&284&&l(14,a=(_[D-1]==="Over time"?[...o,...u,...h]:_[D-1]==="To other areas"?[...o,...u]:o).sort((v,A)=>v.year-A.year)),e.$$.dirty&16384&&l(10,i=[...new Set(a.map(v=>v.areacd))]),e.$$.dirty&9249&&l(9,r=[...c.map(v=>v.role==="main"||m[v.role]?{role:v.role,areacd:v.data.areacd}:null).filter(v=>v!=null),...m.custom===null||m.custom===void 0?[]:m.custom.map((v,A)=>({role:"custom"+(A+1),areacd:v.areacd})),...m.neighbour?y.neighbours.map(v=>({role:"neighbour",areacd:v})):[],...m.cluster?y.similar.map(v=>({role:"cluster",areacd:v})):[]].filter(v=>i.includes(v.areacd))),e.$$.dirty&16896&&l(11,n=a.filter(v=>r.map(A=>A.areacd).includes(v.areacd)))},[m,s,o,h,u,c,g,p,D,r,i,n,_,y,a,b,d,k]}class Ja extends oe{constructor(t){super(),fe(this,t,Xa,Qa,ue,{indicator:1,latestData:2,otherData:3,initialData:4,selectedAreas:5,checkboxedRoles:0,siblingAreas:13,selectedArea:6,parentArea:7})}}function qt(e,t,l){const a=e.slice();return a[14]=t[l],a[16]=l,a}function Kt(e){let t,l,a=e[14].indicator.label+"",i,r,n,s,o=e[14].prefix+e[14].value+e[14].suffix+"",h,u,c=e[14].subTextShort+"",m,y,g=e[14].comparison+"",p,D,_,b=e[14].change+"",d,k;return{c(){t=G("div"),l=G("p"),i=X(a),r=Z(),n=G("div"),s=G("p"),h=Z(),u=G("p"),m=Z(),y=G("p"),p=X(g),D=Z(),_=G("p"),d=X(b),k=Z(),this.h()},l(v){t=O(v,"DIV",{class:!0,style:!0});var A=I(t);l=O(A,"P",{class:!0});var W=I(l);i=J(W,a),W.forEach(w),r=Q(A),n=O(A,"DIV",{class:!0});var T=I(n);s=O(T,"P",{class:!0});var M=I(s);M.forEach(w),h=Q(T),u=O(T,"P",{class:!0});var N=I(u);N.forEach(w),T.forEach(w),m=Q(A),y=O(A,"P",{class:!0});var L=I(y);p=J(L,g),L.forEach(w),D=Q(A),_=O(A,"P",{class:!0});var S=I(_);d=J(S,b),S.forEach(w),k=Q(A),A.forEach(w),this.h()},h(){f(l,"class","col1 svelte-17dtptv"),f(s,"class","mainValue svelte-17dtptv"),f(u,"class","subText svelte-17dtptv"),f(n,"class","col2 svelte-17dtptv"),f(y,"class","col3 "+(["Above average","Below average"].includes(e[14].comparison)?null:e[14].comparison==="Similar to average"?"headlineLabelOkay":e[14].comparison==="Worse than average"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(_,"class","col4 "+(["Increasing","Falling"].includes(e[14].change)?null:e[14].change==="Little change"?"headlineLabelOkay":e[14].change==="Worsening"?"headlineLabelBad":"headlineLabelGood")+" svelte-17dtptv"),f(t,"class","rowContainer svelte-17dtptv"),ge(t,"grid-template-columns","[line1] "+e[0]+"px [line2] "+e[2]+"px [line3] "+e[4]+"px [line4] "+e[3]+"px [end]"),ge(t,"background-color",e[16]%2===0?"#fafafa":"#ffffff")},m(v,A){B(v,t,A),E(t,l),E(l,i),E(t,r),E(t,n),E(n,s),s.innerHTML=o,E(n,h),E(n,u),u.innerHTML=c,E(t,m),E(t,y),E(y,p),E(t,D),E(t,_),E(_,d),E(t,k)},p(v,A){A&29&&ge(t,"grid-template-columns","[line1] "+v[0]+"px [line2] "+v[2]+"px [line3] "+v[4]+"px [line4] "+v[3]+"px [end]")},d(v){v&&w(t)}}}function xa(e){let t,l,a,i,r,n=e[5],s=[];for(let o=0;o<n.length;o+=1)s[o]=Kt(qt(e,n,o));return{c(){t=G("div");for(let o=0;o<s.length;o+=1)s[o].c();a=Z(),i=G("img"),this.h()},l(o){t=O(o,"DIV",{class:!0});var h=I(t);for(let u=0;u<s.length;u+=1)s[u].l(h);h.forEach(w),a=Q(o),i=O(o,"IMG",{style:!0,width:!0,src:!0,alt:!0}),this.h()},h(){f(t,"class","keyFiguresListContainer svelte-17dtptv"),Pe(()=>e[12].call(t)),ge(i,"padding-top","10px"),f(i,"width","75%"),lt(i.src,r=`${Ce}/img/image1.png`)||f(i,"src",r),f(i,"alt","download buttons")},m(o,h){B(o,t,h);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null);l=ze(t,e[12].bind(t)),B(o,a,h),B(o,i,h)},p(o,[h]){if(h&61){n=o[5];let u;for(u=0;u<n.length;u+=1){const c=qt(o,n,u);s[u]?s[u].p(c,h):(s[u]=Kt(c),s[u].c(),s[u].m(t,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}},i:ie,o:ie,d(o){o&&w(t),ne(s,o),l(),o&&w(a),o&&w(i)}}}function $a(e){const t=e.split(" ");let l="";for(const a of t){const i=a.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");i.length>l.length&&(l=i)}return l.length}function er(e,t,l){let a,i,r,{indicators:n,latestData:s,initialData:o,selectedAreas:h,col1Width:u}=t,c=0,m=0,y={T:[["Worse than average","Better than average"],["Improving","Worsening"]],F:[["Better than average","Worse than average"],["Worsening","Improving"]],I:[["Above average","Below average"],["Increasing","Falling"]]},g=[];n.forEach(_=>{Math.pow(10,_.roundingFactor);let b=s.filter(v=>v.codeId===_.id),d=h.find(v=>v.role==="main").data.areacd,k=b.filter(v=>v.areacd===d);if(k=k.length>0?k[0].value:void 0,k!=null){let v=b.filter(_e=>_e.areacd===h.find(he=>he.role==="country").data.areacd),A=b.filter(_e=>_e.areacd===h.find(he=>he.role==="uk").data.areacd),W=b.filter(_e=>_e.areacd===h.find(he=>he.role==="parent").data.areacd),T=v.length>0?v[0]:A.length>0?A[0]:W.length>0?W[0]:void 0,M=T!=null?T.value:void 0,L=(_.code in o?o[_.code]:[]).filter(_e=>_e.areacd===d);L=L.length>0?L[0].value:void 0;let S=_.code in Ke?Ke[_.code]:El,$=(k===void 0||M===void 0?!0:Math.abs(k-M)/M<S[0]/100)?"Similar to average":k<M?y[_.highEqualsGood][0][0]:y[_.highEqualsGood][0][1],j=(k===void 0||L===void 0?!0:Math.abs(k-L)/L<S[0]/100)?"Little change":k<L?y[_.highEqualsGood][1][0]:y[_.highEqualsGood][1][1];l(10,c=Math.max(_.label.length,c)),l(11,m=Math.max($a(_.label),m));let q=_.prefix===null?"":_.prefix==="pounds"?"£":_.prefix,C=_.suffix===null?"":_.suffix,U=_.subText===null?"":_.subText,V=_.subTextShort===null?"":_.subTextShort,se=Math.pow(10,_.roundingFactor);g.push({indicator:_,comparison:$,change:j,value:(Math.round(k*se)/se).toLocaleString(),prefix:q,suffix:C,subText:U,subTextShort:V})}});let p=400;function D(){p=this.clientWidth,l(1,p)}return e.$$set=_=>{"indicators"in _&&l(6,n=_.indicators),"latestData"in _&&l(7,s=_.latestData),"initialData"in _&&l(8,o=_.initialData),"selectedAreas"in _&&l(9,h=_.selectedAreas),"col1Width"in _&&l(0,u=_.col1Width)},e.$$.update=()=>{e.$$.dirty&3072&&l(0,u=c>45||m>10?250:c>30?210:180),e.$$.dirty&7&&l(4,i=(p-u-a)/2),e.$$.dirty&7&&l(3,r=(p-u-a)/2)},l(2,a=120),[u,p,a,r,i,g,n,s,o,h,c,m,D]}class tr extends oe{constructor(t){super(),fe(this,t,er,xa,ue,{indicators:6,latestData:7,initialData:8,selectedAreas:9,col1Width:0})}}function jt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Ut(e,t,l){const a=e.slice();return a[45]=t[l],a[48]=t,a[47]=l,a}function Zt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Qt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Xt(e,t,l){const a=e.slice();return a[45]=t[l],a[47]=l,a}function Jt(e){let t,l,a,i,r,n;return{c(){t=P("g"),l=P("circle"),this.h()},l(s){t=z(s,"g",{transform:!0});var o=I(t);l=z(o,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),I(l).forEach(w),o.forEach(w),this.h()},h(){f(l,"hoverid",e[47]),f(l,"r","5"),f(l,"stroke","none"),f(l,"fill","#6e6e6e"),f(l,"fill-opacity",a=e[9]===null?.15:.05),f(t,"transform",i="translate("+e[45].x+","+e[14](e[45].y)+")")},m(s,o){B(s,t,o),E(t,l),r||(n=[Ee(l,"mouseover",e[21]),Ee(l,"mouseleave",e[22])],r=!0)},p(s,o){o[0]&512&&a!==(a=s[9]===null?.15:.05)&&f(l,"fill-opacity",a),o[0]&16400&&i!==(i="translate("+s[45].x+","+s[14](s[45].y)+")")&&f(t,"transform",i)},d(s){s&&w(t),r=!1,tt(n)}}}function xt(e){let t,l,a;return{c(){t=P("circle"),this.h()},l(i){t=z(i,"circle",{transform:!0,labelid:!0,"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(t).forEach(w),this.h()},h(){f(t,"transform",l="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")"),f(t,"labelid",e[47]),f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",a=re[e[45].datum.role]),f(t,"opacity","0")},m(i,r){B(i,t,r)},p(i,r){r[0]&4256&&l!==(l="translate("+i[45].x+","+(i[7]/2+i[45].y-i[12])+")")&&f(t,"transform",l),r[0]&32&&a!==(a=re[i[45].datum.role])&&f(t,"fill",a)},d(i){i&&w(t)}}}function lr(e){let t,l;return{c(){t=P("circle"),this.h()},l(a){t=z(a,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(t).forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"r","6"),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"fill",l=re[e[45].datum.role]),f(t,"opacity","1")},m(a,i){B(a,t,i)},p(a,i){i[0]&32&&l!==(l=re[a[45].datum.role])&&f(t,"fill",l)},d(a){a&&w(t)}}}function ar(e){let t,l,a;return{c(){t=P("rect"),this.h()},l(i){t=z(i,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var r=I(t);r.forEach(w),this.h()},h(){f(t,"pointer-events","none"),f(t,"transform",l=["country","uk"].includes(e[45].datum.role)?"rotate(45)":null),f(t,"x",-5),f(t,"y",-5),f(t,"width",10),f(t,"height",10),f(t,"fill",a=re[e[45].datum.role]),f(t,"stroke","white"),f(t,"stroke-width","1px"),f(t,"opacity","1")},m(i,r){B(i,t,r)},p(i,r){r[0]&32&&l!==(l=["country","uk"].includes(i[45].datum.role)?"rotate(45)":null)&&f(t,"transform",l),r[0]&32&&a!==(a=re[i[45].datum.role])&&f(t,"fill",a)},d(i){i&&w(t)}}}function $t(e){let t,l,a;function i(s,o){return o[0]&32&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[45].datum.role)),l?ar:lr}let r=i(e,[-1,-1]),n=r(e);return{c(){t=P("g"),n.c(),this.h()},l(s){t=z(s,"g",{transform:!0});var o=I(t);n.l(o),o.forEach(w),this.h()},h(){f(t,"transform",a="translate("+e[45].x+","+(e[7]/2+e[45].y-e[12])+")")},m(s,o){B(s,t,o),n.m(t,null)},p(s,o){r===(r=i(s,o))&&n?n.p(s,o):(n.d(1),n=r(s),n&&(n.c(),n.m(t,null))),o[0]&4256&&a!==(a="translate("+s[45].x+","+(s[7]/2+s[45].y-s[12])+")")&&f(t,"transform",a)},d(s){s&&w(t),n.d()}}}function el(e){let t,l,a,i,r,n,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,h,u,c;function m(){e[36].call(n,e[47])}return{c(){t=P("g"),l=P("rect"),n=P("text"),o=X(s),this.h()},l(y){t=z(y,"g",{class:!0});var g=I(t);l=z(g,"rect",{labelid:!0,transform:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(l).forEach(w),n=z(g,"text",{labelid:!0,transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var p=I(n);o=J(p,s),p.forEach(w),g.forEach(w),this.h()},h(){f(l,"labelid",e[47]),f(l,"transform",a=e[20](e[13][e[47]],e[47])),f(l,"x","0"),f(l,"y","0"),f(l,"width",i=e[13].length>e[47]?e[13][e[47]].width+6:0),f(l,"height","18.5"),f(l,"rx","3px"),f(l,"stroke",r=re[e[45].datum.role]),f(l,"fill","white"),f(l,"stroke-width","1px"),f(l,"pointer-events","none"),f(n,"labelid",e[47]),f(n,"transform",h=e[20](e[13][e[47]],e[47])),f(n,"x","3"),f(n,"y","14"),f(n,"text-anchor","start"),f(n,"fill",u=re[e[45].datum.role]),f(n,"font-size","14px"),f(n,"pointer-events","none"),f(t,"class","labelGroup")},m(y,g){B(y,t,g),E(t,l),E(t,n),E(n,o),c=xe.observe(n,m.bind(n))},p(y,g){e=y,g[0]&8192&&a!==(a=e[20](e[13][e[47]],e[47]))&&f(l,"transform",a),g[0]&8192&&i!==(i=e[13].length>e[47]?e[13][e[47]].width+6:0)&&f(l,"width",i),g[0]&32&&r!==(r=re[e[45].datum.role])&&f(l,"stroke",r),g[0]&32&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&me(o,s),g[0]&8192&&h!==(h=e[20](e[13][e[47]],e[47]))&&f(n,"transform",h),g[0]&32&&u!==(u=re[e[45].datum.role])&&f(n,"fill",u)},d(y){y&&w(t),c()}}}function tl(e){let t,l,a,i,r,n,s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",o,h,u,c,m,y,g,p=e[15].find(k).areanm+"",D,_,b,d;function k(...v){return e[38](e[45],...v)}return{c(){t=P("g"),l=P("circle"),a=P("g"),i=P("rect"),n=P("text"),o=X(s),u=P("g"),c=P("rect"),g=P("text"),D=X(p),this.h()},l(v){t=z(v,"g",{transform:!0});var A=I(t);l=z(A,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}),I(l).forEach(w),a=z(A,"g",{class:!0});var W=I(a);i=z(W,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(i).forEach(w),n=z(W,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var T=I(n);o=J(T,s),T.forEach(w),W.forEach(w),u=z(A,"g",{class:!0});var M=I(u);c=z(M,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),I(c).forEach(w),g=z(M,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var N=I(g);D=J(N,p),N.forEach(w),M.forEach(w),A.forEach(w),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","7"),f(l,"stroke","white"),f(l,"stroke-width","1.5px"),f(l,"fill","#F39431"),f(l,"fill-opacity","1"),f(i,"x","5"),f(i,"y","5"),f(i,"width",r=parseFloat(e[10]===void 0?100:e[10].width)+6),f(i,"height","18.5"),f(i,"rx","3px"),f(i,"stroke","#F39431"),f(i,"fill","white"),f(i,"stroke-width","1px"),f(i,"pointer-events","none"),f(n,"x","8"),f(n,"y","19"),f(n,"text-anchor","start"),f(n,"fill","#F39431"),f(n,"font-size","14px"),f(n,"pointer-events","none"),f(a,"class","hoverLabelGroup1"),f(c,"x",m=-(parseFloat(e[11]===void 0?100:e[11].width)+6)),f(c,"y","-22"),f(c,"width",y=parseFloat(e[11]===void 0?100:e[11].width)+6),f(c,"height","18.5"),f(c,"rx","3px"),f(c,"stroke","#F39431"),f(c,"fill","white"),f(c,"stroke-width","1px"),f(c,"pointer-events","none"),f(g,"x",_=-(parseFloat(e[11]===void 0?100:e[11].width)+3)),f(g,"y","-8"),f(g,"text-anchor","start"),f(g,"fill","#F39431"),f(g,"font-size","14px"),f(g,"pointer-events","none"),f(u,"class","hoverLabelGroup2"),f(t,"transform",d="translate("+e[45].x+","+e[14](e[45].y)+")")},m(v,A){B(v,t,A),E(t,l),E(t,a),E(a,i),E(a,n),E(n,o),h=xe.observe(n,e[37].bind(n)),E(t,u),E(u,c),E(u,g),E(g,D),b=xe.observe(g,e[39].bind(g))},p(v,A){e=v,A[0]&1024&&r!==(r=parseFloat(e[10]===void 0?100:e[10].width)+6)&&f(i,"width",r),A[0]&16&&s!==(s=e[17]+(Math.round(e[45].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&me(o,s),A[0]&2048&&m!==(m=-(parseFloat(e[11]===void 0?100:e[11].width)+6))&&f(c,"x",m),A[0]&2048&&y!==(y=parseFloat(e[11]===void 0?100:e[11].width)+6)&&f(c,"width",y),A[0]&16&&p!==(p=e[15].find(k).areanm+"")&&me(D,p),A[0]&2048&&_!==(_=-(parseFloat(e[11]===void 0?100:e[11].width)+3))&&f(g,"x",_),A[0]&16400&&d!==(d="translate("+e[45].x+","+e[14](e[45].y)+")")&&f(t,"transform",d)},d(v){v&&w(t),h(),b()}}}function ll(e){let t,l=e[9]===e[47]&&tl(e);return{c(){l&&l.c(),t=De()},l(a){l&&l.l(a),t=De()},m(a,i){l&&l.m(a,i),B(a,t,i)},p(a,i){a[9]===a[47]?l?l.p(a,i):(l=tl(a),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&w(t)}}}function rr(e){let t,l,a=e[0].label+"",i,r,n,s,o,h,u,c,m,y,g,p,D,_,b,d,k,v,A,W,T=e[4],M=[];for(let C=0;C<T.length;C+=1)M[C]=Jt(Xt(e,T,C));let N=e[5],L=[];for(let C=0;C<N.length;C+=1)L[C]=xt(Qt(e,N,C));let S=e[5],F=[];for(let C=0;C<S.length;C+=1)F[C]=$t(Zt(e,S,C));let $=e[5],R=[];for(let C=0;C<$.length;C+=1)R[C]=el(Ut(e,$,C));let j=e[4],q=[];for(let C=0;C<j.length;C+=1)q[C]=ll(jt(e,j,C));return{c(){t=G("div"),l=G("p"),i=X(a),r=Z(),n=G("div"),s=P("svg"),o=P("g"),h=P("g");for(let C=0;C<M.length;C+=1)M[C].c();u=P("g"),c=P("line"),g=P("g");for(let C=0;C<L.length;C+=1)L[C].c();p=P("g");for(let C=0;C<F.length;C+=1)F[C].c();_=P("g");for(let C=0;C<R.length;C+=1)R[C].c();d=P("g");for(let C=0;C<q.length;C+=1)q[C].c();this.h()},l(C){t=O(C,"DIV",{class:!0,style:!0});var U=I(t);l=O(U,"P",{class:!0});var V=I(l);i=J(V,a),V.forEach(w),r=Q(U),n=O(U,"DIV",{class:!0});var se=I(n);s=z(se,"svg",{class:!0,height:!0,width:!0});var _e=I(s);o=z(_e,"g",{class:!0,transform:!0});var he=I(o);h=z(he,"g",{class:!0});var ce=I(h);for(let x=0;x<M.length;x+=1)M[x].l(ce);ce.forEach(w),u=z(he,"g",{class:!0,transform:!0});var Be=I(u);c=z(Be,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),I(c).forEach(w),Be.forEach(w),g=z(he,"g",{class:!0});var Ne=I(g);for(let x=0;x<L.length;x+=1)L[x].l(Ne);Ne.forEach(w),p=z(he,"g",{class:!0,opacity:!0});var Ge=I(p);for(let x=0;x<F.length;x+=1)F[x].l(Ge);Ge.forEach(w),_=z(he,"g",{class:!0,opacity:!0});var Oe=I(_);for(let x=0;x<R.length;x+=1)R[x].l(Oe);Oe.forEach(w),d=z(he,"g",{class:!0});var H=I(d);for(let x=0;x<q.length;x+=1)q[x].l(H);H.forEach(w),he.forEach(w),_e.forEach(w),se.forEach(w),U.forEach(w),this.h()},h(){f(l,"class","col1 svelte-1fguf2k"),f(h,"class","backgroundCirclesGroup"),f(c,"x1","0"),f(c,"x2","0"),f(c,"y1","-10"),f(c,"y2",m=e[7]+10),f(c,"stroke","#871A5B"),f(c,"stroke-width","1.5px"),f(u,"class","medianLineGroup"),f(u,"transform",y="translate("+e[6](0)+",0)"),f(g,"class","labelsCirclesGroup"),f(p,"class","primaryCirclesGroup"),f(p,"opacity",D=e[9]===null?1:.1),f(_,"class","labelsGroup"),f(_,"opacity",b=e[9]===null?1:0),f(d,"class","hoverCirclesGroup"),f(o,"class","chart-container"),f(o,"transform",k="translate("+e[8].left+","+e[8].top+")"),f(s,"class",v=pe("beeswarm-row-svg-"+e[0].id)+" svelte-1fguf2k"),f(s,"height",e[16]),f(s,"width",A=e[3]-e[1]),f(n,"class","svg-container"),f(t,"class","rowContainer svelte-1fguf2k"),ge(t,"grid-template-columns","[line1] "+e[1]+"px [line2] "+(e[3]-e[1])+"px [end]"),ge(t,"background-color",e[2]%2===0?"#fafafa":"#ffffff"),Pe(()=>e[40].call(t))},m(C,U){B(C,t,U),E(t,l),E(l,i),E(t,r),E(t,n),E(n,s),E(s,o),E(o,h);for(let V=0;V<M.length;V+=1)M[V]&&M[V].m(h,null);E(o,u),E(u,c),E(o,g);for(let V=0;V<L.length;V+=1)L[V]&&L[V].m(g,null);E(o,p);for(let V=0;V<F.length;V+=1)F[V]&&F[V].m(p,null);E(o,_);for(let V=0;V<R.length;V+=1)R[V]&&R[V].m(_,null);E(o,d);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(d,null);W=ze(t,e[40].bind(t))},p(C,U){if(U[0]&1&&a!==(a=C[0].label+"")&&me(i,a),U[0]&6308368){T=C[4];let V;for(V=0;V<T.length;V+=1){const se=Xt(C,T,V);M[V]?M[V].p(se,U):(M[V]=Jt(se),M[V].c(),M[V].m(h,null))}for(;V<M.length;V+=1)M[V].d(1);M.length=T.length}if(U[0]&128&&m!==(m=C[7]+10)&&f(c,"y2",m),U[0]&64&&y!==(y="translate("+C[6](0)+",0)")&&f(u,"transform",y),U[0]&4256){N=C[5];let V;for(V=0;V<N.length;V+=1){const se=Qt(C,N,V);L[V]?L[V].p(se,U):(L[V]=xt(se),L[V].c(),L[V].m(g,null))}for(;V<L.length;V+=1)L[V].d(1);L.length=N.length}if(U[0]&4256){S=C[5];let V;for(V=0;V<S.length;V+=1){const se=Zt(C,S,V);F[V]?F[V].p(se,U):(F[V]=$t(se),F[V].c(),F[V].m(p,null))}for(;V<F.length;V+=1)F[V].d(1);F.length=S.length}if(U[0]&512&&D!==(D=C[9]===null?1:.1)&&f(p,"opacity",D),U[0]&1974304){$=C[5];let V;for(V=0;V<$.length;V+=1){const se=Ut(C,$,V);R[V]?R[V].p(se,U):(R[V]=el(se),R[V].c(),R[V].m(_,null))}for(;V<R.length;V+=1)R[V].d(1);R.length=$.length}if(U[0]&512&&b!==(b=C[9]===null?1:0)&&f(_,"opacity",b),U[0]&970256){j=C[4];let V;for(V=0;V<j.length;V+=1){const se=jt(C,j,V);q[V]?q[V].p(se,U):(q[V]=ll(se),q[V].c(),q[V].m(d,null))}for(;V<q.length;V+=1)q[V].d(1);q.length=j.length}U[0]&256&&k!==(k="translate("+C[8].left+","+C[8].top+")")&&f(o,"transform",k),U[0]&1&&v!==(v=pe("beeswarm-row-svg-"+C[0].id)+" svelte-1fguf2k")&&f(s,"class",v),U[0]&10&&A!==(A=C[3]-C[1])&&f(s,"width",A),U[0]&10&&ge(t,"grid-template-columns","[line1] "+C[1]+"px [line2] "+(C[3]-C[1])+"px [end]"),U[0]&4&&ge(t,"background-color",C[2]%2===0?"#fafafa":"#ffffff")},i:ie,o:ie,d(C){C&&w(t),ne(M,C),ne(L,C),ne(F,C),ne(R,C),ne(q,C),W()}}}function al(e,t,l,a,i,r,n,s){return console.log(e,t,l,a,i,r,n,s),e<r&&t>i&&l<s&&a>n}function nr(e,t){const l=e.map(i=>i[t]);l.sort((i,r)=>i-r);const a=l.length;if(a%2===0){const i=l[a/2-1],r=l[a/2];return(i+r)/2}else return l[Math.floor(a/2)]}function ir(e,t,l){let a,i,r,n,s,o,h,u,c,m,y,g,p,D,_,b=Ae("areas"),{filteredData:d,selectedAreas:k,areasWithData:v,plottedAreas:A,siblingAreas:W,selectedArea:T,indicator:M,col1Width:N,rowNumb:L}=t,S=500,F=60,$=M.prefix===null?"":M.prefix==="pounds"?"£":M.prefix,R=M.suffix===null?"":M.suffix;M.subText===null||M.subText,M.subTextShort===null||M.subTextShort;let j=Math.pow(10,M.roundingFactor),q=!1;Pl(()=>{q=!0});const C=(H,x)=>{if(q){let de=parseFloat(H.width),Ve=[{x:-de-10,y:0,name:"topLeft"},{x:-de-10,y:20,name:"bottomLeft"},{x:-de-10,y:10,name:"left"},{x:2,y:0,name:"topRight"},{x:2,y:20,name:"bottomRight"},{x:-de/2,y:-3,name:"top"},{x:-de/2,y:24,name:"bottom"},{x:8,y:10,name:"right"},{x:-de-2,y:-10,name:"furtherTopLeft"},{x:-de-2,y:30,name:"furtherBottomLeft"},{x:-de-18,y:10,name:"furtherLeft"},{x:-de-12,y:0,name:"bottomFurtherLeft"},{x:-de-12,y:0,name:"topFurtherLeft"},{x:0,y:-10,name:"furtherTopRight"},{x:0,y:30,name:"furtherBottomRight"},{x:10,y:0,name:"topFurtherRight"},{x:10,y:20,name:"bottomFurtherRight"},{x:10,y:-10,name:"furtherTopFurtherRight"},{x:-de-12,y:-10,name:"furtherTopFurtherLeft"},{x:10,y:30,name:"furtherBottomFurtherRight"},{x:-de-12,y:30,name:"furtherBottomFurtherLeft"},{x:-de/2,y:-13,name:"furtherTop"},{x:-de/2,y:34,name:"furtherBottom"},{x:28,y:10,name:"furtherRight"},{x:-de/2,y:-23,name:"furtherFurtherTop"},{x:-de/2,y:44,name:"furtherFurtherBottom"},{x:-de-28,y:10,name:"furtherFurtherLeft"},{x:28,y:10,name:"furtherFurtherRight"}],Sl=Re(".beeswarm-row-svg-"+M.id).selectAll(".labelGroup").selectAll("rect"),Vl=Re(".beeswarm-row-svg-"+M.id).select(".labelsCirclesGroup").selectAll("circle");for(var Te=0;Te<Ve.length;Te++){let Ie={x1:p[x].x+Ve[Te].x,x2:p[x].x+Ve[Te].x+de,y1:p[x].y-_+Ve[Te].y,y2:p[x].y-_+Ve[Te].y+18.5},je=!0;if(Sl.each(function(){let We=Re(this);const Ue=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let Me=Re(this).attr("transform").match(Ue);al(Ie.x1,Ie.x2,Ie.y1,Ie.y2,parseFloat(Me[1]),parseFloat(Me[1])+parseFloat(We.attr("width")),parseFloat(Me[2]),parseFloat(Me[2])+18.5)&We.attr("labelid")!=x&&(je=!1)}),Vl.each(function(){let We=Re(this);const Ue=/translate\(([\d.-]+),\s*([\d.-]+)\)/;let Me=Re(this).attr("transform").match(Ue),He=parseFloat(We.attr("r"))+3;al(Ie.x1,Ie.x2,Ie.y1,Ie.y2,parseFloat(Me[1])-He,parseFloat(Me[1])+He,parseFloat(Me[2])-He,parseFloat(Me[2])+He)&We.attr("labelid")!=x&&(je=!1)}),je)return"translate("+Ie.x1+","+Ie.y1+")"}return"translate(200,0)"}else return"translate(0,0)"};let U=null;function V(H){l(9,U=parseFloat(Re(this).attr("hoverid")))}function se(H){l(9,U=null)}let _e,he;function ce(H){var x;D[H]=(x=Qe.entries.get(this))==null?void 0:x.contentRect,l(13,D)}function Be(){var H;_e=(H=Qe.entries.get(this))==null?void 0:H.contentRect,l(10,_e)}const Ne=(H,x)=>x.areacd===H.datum.areacd;function Ge(){var H;he=(H=Qe.entries.get(this))==null?void 0:H.contentRect,l(11,he)}function Oe(){S=this.clientWidth,l(3,S)}return e.$$set=H=>{"filteredData"in H&&l(23,d=H.filteredData),"selectedAreas"in H&&l(24,k=H.selectedAreas),"areasWithData"in H&&l(25,v=H.areasWithData),"plottedAreas"in H&&l(26,A=H.plottedAreas),"siblingAreas"in H&&l(27,W=H.siblingAreas),"selectedArea"in H&&l(28,T=H.selectedArea),"indicator"in H&&l(0,M=H.indicator),"col1Width"in H&&l(1,N=H.col1Width),"rowNumb"in H&&l(2,L=H.rowNumb)},e.$$.update=()=>{e.$$.dirty[0]&266&&l(31,i=S-a.left-a.right-N),e.$$.dirty[0]&256&&l(7,r=F-a.top-a.bottom),e.$$.dirty[0]&159383552&&l(35,n=d.filter(H=>W.siblings.includes(H.areacd)||H.areacd===k.find(x=>x.role==="main").data.areacd)),e.$$.dirty[1]&16&&l(34,s=nr(n,"value")),e.$$.dirty[1]&24&&l(33,o=Math.max(Math.abs(s-Math.min(...n.map(H=>H.value))),Math.abs(s-Math.max(...n.map(H=>H.value))))),e.$$.dirty[1]&12,e.$$.dirty[1]&28&&l(30,h=n.map(H=>({...H,calcYValue:(H.value-s)/o}))),e.$$.dirty[0]&75497472|e.$$.dirty[1]&12&&l(29,u=A.map(H=>({...H,value:d.filter(x=>x.areacd===H.areacd).length>0?d.find(x=>x.areacd===H.areacd).value:null,calcYValue:d.filter(x=>x.areacd===H.areacd).length>0?(d.find(x=>x.areacd===H.areacd).value-s)/o:null})).filter(H=>H.value!==null).sort((H,x)=>H.calcYValue-x.calcYValue)),e.$$.dirty[1]&3&&l(6,m=Le().domain(c).range([0,i])),e.$$.dirty[0]&1073741889&&l(4,y=new qe(h,4,H=>m((H.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(H.calcYValue),M.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&144&&l(14,g=Le().domain([Math.min(...y.map(H=>H.y)),Math.max(...y.map(H=>H.y))]).range([0,r])),e.$$.dirty[0]&536870977&&l(5,p=new qe(u,7,H=>m((H.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(H.calcYValue),M.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&32&&l(12,_=Math.min(...p.map(H=>H.y))+(Math.max(...p.map(H=>H.y))-Math.min(...p.map(H=>H.y)))/2),e.$$.dirty[0]&16&&console.log(y)},l(8,a={top:10,left:10,right:10,bottom:10}),l(32,c=[-1,1]),l(13,D=[]),[M,N,L,S,y,p,m,r,a,U,_e,he,_,D,g,b,F,$,R,j,C,V,se,d,k,v,A,W,T,u,h,i,c,o,s,n,ce,Be,Ne,Ge,Oe]}class sr extends oe{constructor(t){super(),fe(this,t,ir,rr,ue,{filteredData:23,selectedAreas:24,areasWithData:25,plottedAreas:26,siblingAreas:27,selectedArea:28,indicator:0,col1Width:1,rowNumb:2},null,[-1,-1])}}function rl(e,t,l){const a=e.slice();return a[26]=t[l],a[28]=l,a}function nl(e,t,l){const a=e.slice();return a[29]=t[l],a[28]=l,a}function or(e,t,l){const a=e.slice();return a[31]=t[l],a[28]=l,a}function il(e,t,l){const a=e.slice();return a[29]=t[l],a[28]=l,a}function sl(e){let t,l,a,i;return{c(){t=P("g"),l=P("circle"),this.h()},l(r){t=z(r,"g",{transform:!0});var n=I(t);l=z(n,"circle",{"pointer-events":!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),I(l).forEach(w),n.forEach(w),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","4"),f(l,"stroke",a=e[29].datum.areacd===e[6].datum.areacd?"black":"none"),f(l,"fill","#6e6e6e"),f(l,"fill-opacity","0.15"),f(t,"transform",i="translate("+e[29].x+","+e[8](e[29].y)+")")},m(r,n){B(r,t,n),E(t,l)},p(r,n){n[0]&66&&a!==(a=r[29].datum.areacd===r[6].datum.areacd?"black":"none")&&f(l,"stroke",a),n[0]&258&&i!==(i="translate("+r[29].x+","+r[8](r[29].y)+")")&&f(t,"transform",i)},d(r){r&&w(t)}}}function fr(e){let t,l,a,i,r,n,s;return{c(){t=P("path"),l=P("path"),a=P("text"),i=X(e[31]),r=X(" than"),n=P("text"),s=X("average"),this.h()},l(o){t=z(o,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0}),I(t).forEach(w),l=z(o,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(l).forEach(w),a=z(o,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var h=I(a);i=J(h,e[31]),r=J(h," than"),h.forEach(w),n=z(o,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var u=I(n);s=J(u,"average"),u.forEach(w),this.h()},h(){f(t,"transform","translate(0,-40)"),f(t,"d","M "+-90*[-1,1][e[28]]+" 0 l"+-50*[-1,1][e[28]]+" 0"),f(t,"stroke-width","1px"),f(t,"stroke","black"),f(l,"transform","translate(0,-40)"),f(l,"d","M "+-148*[-1,1][e[28]]+" 0 l"+6*[-1,1][e[28]]+" -6 l0 12 z"),f(l,"stroke","none"),f(l,"fill","black"),f(a,"transform","translate(0,-40)"),f(a,"x",-145*[-1,1][e[28]]),f(a,"y","15"),f(a,"text-anchor","middle"),f(a,"fill","black"),f(a,"font-size","14px"),f(n,"transform","translate(0,-40)"),f(n,"x",-145*[-1,1][e[28]]),f(n,"y","27"),f(n,"text-anchor","middle"),f(n,"fill","black"),f(n,"font-size","14px")},m(o,h){B(o,t,h),B(o,l,h),B(o,a,h),E(a,i),E(a,r),B(o,n,h),E(n,s)},p:ie,d(o){o&&w(t),o&&w(l),o&&w(a),o&&w(n)}}}function ol(e){let t,l,a,i,r,n,s,o="49%",h,u,c;return{c(){t=P("g"),l=P("circle"),i=P("g"),r=P("rect"),s=P("text"),h=X(o),this.h()},l(m){t=z(m,"g",{transform:!0});var y=I(t);l=z(y,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(l).forEach(w),i=z(y,"g",{class:!0});var g=I(i);r=z(g,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0}),I(r).forEach(w),s=z(g,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var p=I(s);h=J(p,o),p.forEach(w),g.forEach(w),y.forEach(w),this.h()},h(){f(l,"pointer-events","none"),f(l,"r","6"),f(l,"stroke","white"),f(l,"stroke-width","1px"),f(l,"fill",a=re[e[29].datum.role]),f(l,"opacity","1"),f(r,"x","3"),f(r,"y","-20"),f(r,"width","35"),f(r,"height","18.5"),f(r,"rx","3px"),f(r,"stroke",n=re[e[29].datum.role]),f(r,"fill","white"),f(r,"stroke-width","1px"),f(s,"x","6"),f(s,"y","-6"),f(s,"text-anchor","start"),f(s,"fill",u=re[e[29].datum.role]),f(s,"font-size","14px"),f(i,"class","labelGroup"),f(t,"transform",c="translate("+e[2](.4)+","+e[8](e[29].y)+")")},m(m,y){B(m,t,y),E(t,l),E(t,i),E(i,r),E(i,s),E(s,h)},p(m,y){y[0]&128&&a!==(a=re[m[29].datum.role])&&f(l,"fill",a),y[0]&128&&n!==(n=re[m[29].datum.role])&&f(r,"stroke",n),y[0]&128&&u!==(u=re[m[29].datum.role])&&f(s,"fill",u),y[0]&388&&c!==(c="translate("+m[2](.4)+","+m[8](m[29].y)+")")&&f(t,"transform",c)},d(m){m&&w(t)}}}function fl(e){let t,l=e[26]+"",a;return{c(){t=P("text"),a=X(l),this.h()},l(i){t=z(i,"text",{transform:!0,"text-anchor":!0,x:!0,y:!0,fill:!0,"font-size":!0});var r=I(t);a=J(r,l),r.forEach(w),this.h()},h(){f(t,"transform","translate(-22,42)"),f(t,"text-anchor","end"),f(t,"x","0"),f(t,"y",e[28]*14),f(t,"fill","black"),f(t,"font-size","14px")},m(i,r){B(i,t,r),E(t,a)},p(i,r){r[0]&32&&l!==(l=i[26]+"")&&me(a,l)},d(i){i&&w(t)}}}function ur(e){let t,l,a,i,r,n,s,o,h,u,c,m,y,g,p,D,_,b,d,k,v=e[1],A=[];for(let F=0;F<v.length;F+=1)A[F]=sl(il(e,v,F));let W=["better","worse"],T=[];for(let F=0;F<2;F+=1)T[F]=fr(or(e,W,F));let M=e[7],N=[];for(let F=0;F<M.length;F+=1)N[F]=ol(nl(e,M,F));let L=e[5],S=[];for(let F=0;F<L.length;F+=1)S[F]=fl(rl(e,L,F));return{c(){t=G("div"),l=G("div"),a=P("svg"),i=P("g"),r=P("g");for(let F=0;F<A.length;F+=1)A[F].c();n=P("g"),s=P("line"),h=P("text"),u=X("Half of areas have a value"),c=P("text"),m=X("higher/lower than this line");for(let F=0;F<2;F+=1)T[F].c();g=P("g");for(let F=0;F<N.length;F+=1)N[F].c();p=P("g"),D=P("path"),_=P("path");for(let F=0;F<S.length;F+=1)S[F].c();this.h()},l(F){t=O(F,"DIV",{class:!0});var $=I(t);l=O($,"DIV",{class:!0});var R=I(l);a=z(R,"svg",{height:!0,width:!0});var j=I(a);i=z(j,"g",{class:!0,transform:!0});var q=I(i);r=z(q,"g",{class:!0});var C=I(r);for(let ce=0;ce<A.length;ce+=1)A[ce].l(C);C.forEach(w),n=z(q,"g",{class:!0,transform:!0});var U=I(n);s=z(U,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),I(s).forEach(w),h=z(U,"text",{y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var V=I(h);u=J(V,"Half of areas have a value"),V.forEach(w),c=z(U,"text",{y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var se=I(c);m=J(se,"higher/lower than this line"),se.forEach(w);for(let ce=0;ce<2;ce+=1)T[ce].l(U);U.forEach(w),g=z(q,"g",{class:!0});var _e=I(g);for(let ce=0;ce<N.length;ce+=1)N[ce].l(_e);_e.forEach(w),p=z(q,"g",{class:!0,transform:!0});var he=I(p);D=z(he,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0,fill:!0}),I(D).forEach(w),_=z(he,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(_).forEach(w);for(let ce=0;ce<S.length;ce+=1)S[ce].l(he);he.forEach(w),q.forEach(w),j.forEach(w),R.forEach(w),$.forEach(w),this.h()},h(){f(r,"class","backgroundCirclesGroup"),f(s,"x1","0"),f(s,"x2","0"),f(s,"y1","-18"),f(s,"y2",o=e[3]+10),f(s,"stroke","#871A5B"),f(s,"stroke-width","1.5px"),f(h,"y","-36"),f(h,"text-anchor","middle"),f(h,"fill","#871A5B"),f(h,"font-size","14px"),f(c,"y","-22"),f(c,"text-anchor","middle"),f(c,"fill","#871A5B"),f(c,"font-size","14px"),f(n,"class","medianLineGroup"),f(n,"transform",y="translate("+e[2](0)+",0)"),f(g,"class","primaryCirclesGroup"),f(D,"transform","translate(0,18)"),f(D,"d","M 0 0 l 0 20 l-20 0"),f(D,"stroke-width","1px"),f(D,"stroke","black"),f(D,"fill","none"),f(_,"transform","translate(0,10)"),f(_,"d","M 0 0 l6 6 l-12 0 z"),f(_,"stroke","none"),f(_,"fill","black"),f(p,"class","explanationGroup"),f(p,"transform",b="translate("+e[6].x+","+e[8](e[6].y)+")"),f(i,"class","chart-container"),f(i,"transform",d="translate("+e[4].left+","+e[4].top+")"),f(a,"height",e[9]),f(a,"width",e[0]),f(l,"class","svg-container svelte-1ng210p"),Pe(()=>e[23].call(l)),f(t,"class","keyContainer")},m(F,$){B(F,t,$),E(t,l),E(l,a),E(a,i),E(i,r);for(let R=0;R<A.length;R+=1)A[R]&&A[R].m(r,null);E(i,n),E(n,s),E(n,h),E(h,u),E(n,c),E(c,m);for(let R=0;R<2;R+=1)T[R]&&T[R].m(n,null);E(i,g);for(let R=0;R<N.length;R+=1)N[R]&&N[R].m(g,null);E(i,p),E(p,D),E(p,_);for(let R=0;R<S.length;R+=1)S[R]&&S[R].m(p,null);k=ze(l,e[23].bind(l))},p(F,$){if($[0]&322){v=F[1];let R;for(R=0;R<v.length;R+=1){const j=il(F,v,R);A[R]?A[R].p(j,$):(A[R]=sl(j),A[R].c(),A[R].m(r,null))}for(;R<A.length;R+=1)A[R].d(1);A.length=v.length}if($[0]&8&&o!==(o=F[3]+10)&&f(s,"y2",o),$[0]&4&&y!==(y="translate("+F[2](0)+",0)")&&f(n,"transform",y),$[0]&388){M=F[7];let R;for(R=0;R<M.length;R+=1){const j=nl(F,M,R);N[R]?N[R].p(j,$):(N[R]=ol(j),N[R].c(),N[R].m(g,null))}for(;R<N.length;R+=1)N[R].d(1);N.length=M.length}if($[0]&32){L=F[5];let R;for(R=0;R<L.length;R+=1){const j=rl(F,L,R);S[R]?S[R].p(j,$):(S[R]=fl(j),S[R].c(),S[R].m(p,null))}for(;R<S.length;R+=1)S[R].d(1);S.length=L.length}$[0]&320&&b!==(b="translate("+F[6].x+","+F[8](F[6].y)+")")&&f(p,"transform",b),$[0]&16&&d!==(d="translate("+F[4].left+","+F[4].top+")")&&f(i,"transform",d),$[0]&1&&f(a,"width",F[0])},i:ie,o:ie,d(F){F&&w(t),ne(A,F),ne(T,F),ne(N,F),ne(S,F),k()}}}function hr(e,t){const l=e.map(i=>i[t]);l.sort((i,r)=>i-r);const a=l.length;if(a%2===0){const i=l[a/2-1],r=l[a/2];return(i+r)/2}else return l[Math.floor(a/2)]}function cr(e,t){const l=e.split(" "),a=Math.ceil(l.length/t),i=[];let r=[];return l.forEach(n=>{r.length<a?r.push(n):(i.push(r.join(" ")),r=[n])}),r.length>0&&i.push(r.join(" ")),i}function dr(e,t,l){let a,i,r,n,s,o,h,u,c,m,y,g,p,D,_;Ae("areas");let{filteredData:b,selectedAreas:d,areasWithData:k,plottedAreas:v,siblingAreas:A,selectedArea:W}=t,T=100,M=130;function N(){T=this.clientWidth,l(0,T)}return e.$$set=L=>{"filteredData"in L&&l(10,b=L.filteredData),"selectedAreas"in L&&l(11,d=L.selectedAreas),"areasWithData"in L&&l(12,k=L.areasWithData),"plottedAreas"in L&&l(13,v=L.plottedAreas),"siblingAreas"in L&&l(14,A=L.siblingAreas),"selectedArea"in L&&l(15,W=L.selectedArea)},e.$$.update=()=>{e.$$.dirty[0]&17&&l(18,i=T-a.left-a.right),e.$$.dirty[0]&16&&l(3,r=M-a.top-a.bottom),e.$$.dirty[0]&19456&&l(22,n=b.filter(L=>A.siblings.includes(L.areacd)||L.areacd===d.find(S=>S.role==="main").data.areacd)),e.$$.dirty[0]&4194304&&l(21,s=hr(n,"value")),e.$$.dirty[0]&6291456&&l(20,o=Math.max(Math.abs(s-Math.min(...n.map(L=>L.value))),Math.abs(s-Math.max(...n.map(L=>L.value))))),e.$$.dirty[0]&3145728,e.$$.dirty[0]&7340032&&l(17,h=n.map(L=>({...L,calcYValue:(s-L.value)/o}))),e.$$.dirty[0]&3154944&&l(16,u=v.filter(L=>L.role==="main").map(L=>({...L,value:b.filter(S=>S.areacd===L.areacd).length>0?b.find(S=>S.areacd===L.areacd).value:null,calcYValue:b.filter(S=>S.areacd===L.areacd).length>0?(s-b.find(S=>S.areacd===L.areacd).value)/o:null})).filter(L=>L.yValue!==null)),e.$$.dirty[0]&786432&&l(2,m=Le().domain(c).range([0,i])),e.$$.dirty[0]&131076&&l(1,y=new qe(h,6,L=>m(Math.pow(L.calcYValue,1))).calculateYPositions()),e.$$.dirty[0]&10&&l(8,g=Le().domain([Math.min(...y.map(L=>L.y)),Math.max(...y.map(L=>L.y))]).range([0,r])),e.$$.dirty[0]&65540&&l(7,p=new qe(u,8,L=>m(Math.pow(L.calcYValue,1))).calculateYPositions()),e.$$.dirty[0]&2&&l(6,D=y.reduce((L,S)=>L.x>S.x?L:S))},l(4,a={top:55,left:40,right:40,bottom:45}),l(19,c=[-1,1]),l(5,_=cr("Each circle represents a local authority. This is the highest ranking area.",2)),[T,y,m,r,a,_,D,p,g,M,b,d,k,v,A,W,u,h,i,c,o,s,n,N]}class _r extends oe{constructor(t){super(),fe(this,t,dr,ur,ue,{filteredData:10,selectedAreas:11,areasWithData:12,plottedAreas:13,siblingAreas:14,selectedArea:15},null,[-1,-1])}}function ul(e,t,l){const a=e.slice();return a[15]=t[l],a[17]=l,a}function hl(e){let t,l;function a(...i){return e[14](e[15],...i)}return t=new sr({props:{indicator:e[15],filteredData:e[1].filter(a),selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5],col1Width:e[7],rowNumb:e[17]}}),{c(){ee(t.$$.fragment)},l(i){ae(t.$$.fragment,i)},m(i,r){te(t,i,r),l=!0},p(i,r){e=i;const n={};r&4&&(n.indicator=e[15]),r&6&&(n.filteredData=e[1].filter(a)),r&8&&(n.selectedAreas=e[3]),r&256&&(n.areasWithData=e[8]),r&512&&(n.plottedAreas=e[9]),r&16&&(n.siblingAreas=e[4]),r&32&&(n.selectedArea=e[5]),r&128&&(n.col1Width=e[7]),t.$set(n)},i(i){l||(Y(t.$$.fragment,i),l=!0)},o(i){K(t.$$.fragment,i),l=!1},d(i){le(t,i)}}}function mr(e){let t,l,a,i,r,n,s,o,h,u,c,m,y;function g(d){e[13](d)}let p={selectedAreas:e[3].filter(e[12]),areasWithData:e[8],includeSiblings:!1,selectedArea:e[5],parentArea:e[6]};e[0]!==void 0&&(p.checkboxedRoles=e[0]),l=new Il({props:p}),ke.push(()=>ye(l,"checkboxedRoles",g)),r=new Yl({props:{plottedAreas:e[9]}}),o=new _r({props:{filteredData:e[10],selectedAreas:e[3],areasWithData:e[8],plottedAreas:e[9],siblingAreas:e[4],selectedArea:e[5]}});let D=e[2].filter(cl),_=[];for(let d=0;d<D.length;d+=1)_[d]=hl(ul(e,D,d));const b=d=>K(_[d],1,1,()=>{_[d]=null});return{c(){t=G("div"),ee(l.$$.fragment),i=Z(),ee(r.$$.fragment),n=Z(),s=G("div"),ee(o.$$.fragment),h=Z();for(let d=0;d<_.length;d+=1)_[d].c();u=Z(),c=G("img"),this.h()},l(d){t=O(d,"DIV",{class:!0});var k=I(t);ae(l.$$.fragment,k),i=Q(k),ae(r.$$.fragment,k),n=Q(k),s=O(k,"DIV",{class:!0});var v=I(s);ae(o.$$.fragment,v),v.forEach(w),h=Q(k);for(let A=0;A<_.length;A+=1)_[A].l(k);k.forEach(w),u=Q(d),c=O(d,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){f(s,"class","keyContainer svelte-f2pwib"),f(t,"class","beeswarmRowsContainer svelte-f2pwib"),ge(c,"padding-top","10px"),f(c,"width","75%"),lt(c.src,m=`${Ce}/img/image1.png`)||f(c,"src",m),f(c,"alt","download buttons"),f(c,"class","svelte-f2pwib")},m(d,k){B(d,t,k),te(l,t,null),E(t,i),te(r,t,null),E(t,n),E(t,s),te(o,s,null),E(t,h);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(t,null);B(d,u,k),B(d,c,k),y=!0},p(d,[k]){const v={};k&10&&(v.selectedAreas=d[3].filter(d[12])),k&256&&(v.areasWithData=d[8]),k&32&&(v.selectedArea=d[5]),k&64&&(v.parentArea=d[6]),!a&&k&1&&(a=!0,v.checkboxedRoles=d[0],we(()=>a=!1)),l.$set(v);const A={};k&512&&(A.plottedAreas=d[9]),r.$set(A);const W={};if(k&8&&(W.selectedAreas=d[3]),k&256&&(W.areasWithData=d[8]),k&512&&(W.plottedAreas=d[9]),k&16&&(W.siblingAreas=d[4]),k&32&&(W.selectedArea=d[5]),o.$set(W),k&958){D=d[2].filter(cl);let T;for(T=0;T<D.length;T+=1){const M=ul(d,D,T);_[T]?(_[T].p(M,k),Y(_[T],1)):(_[T]=hl(M),_[T].c(),Y(_[T],1),_[T].m(t,null))}for(be(),T=D.length;T<_.length;T+=1)b(T);ve()}},i(d){if(!y){Y(l.$$.fragment,d),Y(r.$$.fragment,d),Y(o.$$.fragment,d);for(let k=0;k<D.length;k+=1)Y(_[k]);y=!0}},o(d){K(l.$$.fragment,d),K(r.$$.fragment,d),K(o.$$.fragment,d),_=_.filter(Boolean);for(let k=0;k<_.length;k+=1)K(_[k]);y=!1},d(d){d&&w(t),le(l),le(r),le(o),ne(_,d),d&&w(u),d&&w(c)}}}const cl=e=>e.includeAsBeeswarm==="T";function gr(e,t,l){let a,i,r=Ae("beeswarmKeyData"),{trimmedIndicators:n,latestData:s,indicators:o,selectedAreas:h,siblingAreas:u,checkboxedRoles:c,selectedArea:m,parentArea:y,col1Width:g}=t;const p=b=>s.filter(d=>b.data.areacd===d.areacd).length>0&b.role!=="main";function D(b){c=b,l(0,c)}const _=(b,d)=>d.codeId===b.id;return e.$$set=b=>{"trimmedIndicators"in b&&l(11,n=b.trimmedIndicators),"latestData"in b&&l(1,s=b.latestData),"indicators"in b&&l(2,o=b.indicators),"selectedAreas"in b&&l(3,h=b.selectedAreas),"siblingAreas"in b&&l(4,u=b.siblingAreas),"checkboxedRoles"in b&&l(0,c=b.checkboxedRoles),"selectedArea"in b&&l(5,m=b.selectedArea),"parentArea"in b&&l(6,y=b.parentArea),"col1Width"in b&&l(7,g=b.col1Width)},e.$$.update=()=>{e.$$.dirty&4&&console.log(o),e.$$.dirty&2&&l(8,a=[...new Set(s.map(b=>b.areacd))]),e.$$.dirty&265&&l(9,i=[...h.map(b=>b.role==="main"||c[b.role]?{role:b.role,areacd:b.data.areacd}:null).filter(b=>b!=null),...c.custom===null||c.custom===void 0?[]:c.custom.map((b,d)=>({role:"custom"+(d+1),areacd:b.areacd}))].filter(b=>a.includes(b.areacd)))},console.log(r),[c,s,o,h,u,m,y,g,a,i,r,n,p,D,_]}class pr extends oe{constructor(t){super(),fe(this,t,gr,mr,ue,{trimmedIndicators:11,latestData:1,indicators:2,selectedAreas:3,siblingAreas:4,checkboxedRoles:0,selectedArea:5,parentArea:6,col1Width:7})}}function br(e){let t,l,a;function i(n){e[16](n)}let r={trimmedIndicators:e[4],latestData:e[1],indicators:[...e[5],...e[6],...e[7]],selectedAreas:e[3],siblingAreas:e[8],selectedArea:e[9],parentArea:e[10],col1Width:e[11]};return e[0]!==void 0&&(r.checkboxedRoles=e[0]),t=new pr({props:r}),ke.push(()=>ye(t,"checkboxedRoles",i)),{c(){ee(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,s){te(t,n,s),a=!0},p(n,s){const o={};s&16&&(o.trimmedIndicators=n[4]),s&2&&(o.latestData=n[1]),s&224&&(o.indicators=[...n[5],...n[6],...n[7]]),s&8&&(o.selectedAreas=n[3]),s&256&&(o.siblingAreas=n[8]),s&512&&(o.selectedArea=n[9]),s&1024&&(o.parentArea=n[10]),s&2048&&(o.col1Width=n[11]),!l&&s&1&&(l=!0,o.checkboxedRoles=n[0],we(()=>l=!1)),t.$set(o)},i(n){a||(Y(t.$$.fragment,n),a=!0)},o(n){K(t.$$.fragment,n),a=!1},d(n){le(t,n)}}}function vr(e){let t,l,a;function i(n){e[15](n)}let r={indicators:[...e[5],...e[6],...e[7]],latestData:e[1],initialData:e[2],selectedAreas:e[3]};return e[11]!==void 0&&(r.col1Width=e[11]),t=new tr({props:r}),ke.push(()=>ye(t,"col1Width",i)),{c(){ee(t.$$.fragment)},l(n){ae(t.$$.fragment,n)},m(n,s){te(t,n,s),a=!0},p(n,s){const o={};s&224&&(o.indicators=[...n[5],...n[6],...n[7]]),s&2&&(o.latestData=n[1]),s&4&&(o.initialData=n[2]),s&8&&(o.selectedAreas=n[3]),!l&&s&2048&&(l=!0,o.col1Width=n[11],we(()=>l=!1)),t.$set(o)},i(n){a||(Y(t.$$.fragment,n),a=!0)},o(n){K(t.$$.fragment,n),a=!1},d(n){le(t,n)}}}function kr(e){let t,l,a,i,r,n,s;function o(y){e[14](y)}let h={compareIntroText:!1,optionsArray:e[13]};e[12]!==void 0&&(h.chosenChart=e[12]),l=new Ml({props:h}),ke.push(()=>ye(l,"chosenChart",o));const u=[vr,br],c=[];function m(y,g){return y[13][y[12]-1]==="Summary"?0:y[13][y[12]-1]==="Compared to other areas"?1:-1}return~(r=m(e))&&(n=c[r]=u[r](e)),{c(){t=G("div"),ee(l.$$.fragment),i=Z(),n&&n.c(),this.h()},l(y){t=O(y,"DIV",{class:!0});var g=I(t);ae(l.$$.fragment,g),i=Q(g),n&&n.l(g),g.forEach(w),this.h()},h(){f(t,"class","mainListContainer svelte-1ahp7ns")},m(y,g){B(y,t,g),te(l,t,null),E(t,i),~r&&c[r].m(t,null),s=!0},p(y,[g]){const p={};!a&&g&4096&&(a=!0,p.chosenChart=y[12],we(()=>a=!1)),l.$set(p);let D=r;r=m(y),r===D?~r&&c[r].p(y,g):(n&&(be(),K(c[D],1,1,()=>{c[D]=null}),ve()),~r?(n=c[r],n?n.p(y,g):(n=c[r]=u[r](y),n.c()),Y(n,1),n.m(t,null)):n=null)},i(y){s||(Y(l.$$.fragment,y),Y(n),s=!0)},o(y){K(l.$$.fragment,y),K(n),s=!1},d(y){y&&w(t),le(l),~r&&c[r].d()}}}function yr(e,t,l){let{latestData:a,initialData:i,selectedAreas:r,trimmedIndicators:n,primaryIndicators:s,secondaryIndicators:o,otherIndicators:h,siblingAreas:u,checkboxedRoles:c,selectedArea:m,parentArea:y}=t,g=1,p=["Summary","Compared to other areas"],D;function _(k){g=k,l(12,g)}function b(k){D=k,l(11,D)}function d(k){c=k,l(0,c)}return e.$$set=k=>{"latestData"in k&&l(1,a=k.latestData),"initialData"in k&&l(2,i=k.initialData),"selectedAreas"in k&&l(3,r=k.selectedAreas),"trimmedIndicators"in k&&l(4,n=k.trimmedIndicators),"primaryIndicators"in k&&l(5,s=k.primaryIndicators),"secondaryIndicators"in k&&l(6,o=k.secondaryIndicators),"otherIndicators"in k&&l(7,h=k.otherIndicators),"siblingAreas"in k&&l(8,u=k.siblingAreas),"checkboxedRoles"in k&&l(0,c=k.checkboxedRoles),"selectedArea"in k&&l(9,m=k.selectedArea),"parentArea"in k&&l(10,y=k.parentArea)},e.$$.update=()=>{e.$$.dirty&2048&&console.log(D)},[c,a,i,r,n,s,o,h,u,m,y,D,g,p,_,b,d]}class wr extends oe{constructor(t){super(),fe(this,t,yr,kr,ue,{latestData:1,initialData:2,selectedAreas:3,trimmedIndicators:4,primaryIndicators:5,secondaryIndicators:6,otherIndicators:7,siblingAreas:8,checkboxedRoles:0,selectedArea:9,parentArea:10})}}function dl(e,t,l){const a=e.slice();return a[19]=t[l],a}function _l(e){let t,l,a;function i(...s){return e[17](e[19],...s)}function r(s){e[18](s)}let n={indicator:e[19],latestData:e[1].filter(i),otherData:e[19].code in e[4]?e[4][e[19].code]:[],initialData:e[19].code in e[5]?e[5][e[19].code]:[],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};return e[2]!==void 0&&(n.checkboxedRoles=e[2]),t=new Ja({props:n}),ke.push(()=>ye(t,"checkboxedRoles",r)),{c(){ee(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){te(t,s,o),a=!0},p(s,o){e=s;const h={};o&2&&(h.latestData=e[1].filter(i)),o&16&&(h.otherData=e[19].code in e[4]?e[4][e[19].code]:[]),o&32&&(h.initialData=e[19].code in e[5]?e[5][e[19].code]:[]),o&8&&(h.selectedAreas=e[3]),o&64&&(h.siblingAreas=e[6]),!l&&o&4&&(l=!0,h.checkboxedRoles=e[2],we(()=>l=!1)),t.$set(h)},i(s){a||(Y(t.$$.fragment,s),a=!0)},o(s){K(t.$$.fragment,s),a=!1},d(s){le(t,s)}}}function ml(e){let t,l,a,i,r;return{c(){t=G("div"),l=G("a"),a=X("Find out more about the local labour market in "),i=X(e[11]),this.h()},l(n){t=O(n,"DIV",{class:!0});var s=I(t);l=O(s,"A",{href:!0,class:!0});var o=I(l);a=J(o,"Find out more about the local labour market in "),i=J(o,e[11]),o.forEach(w),s.forEach(w),this.h()},h(){f(l,"href",r="https://www.ons.gov.uk/visualisations/labourmarketlocal/"+e[3].find(gl).data.areacd+"/"),f(l,"class","svelte-urpow4"),f(t,"class","findOutMoreContainer svelte-urpow4")},m(n,s){B(n,t,s),E(t,l),E(l,a),E(l,i)},p(n,s){s&8&&r!==(r="https://www.ons.gov.uk/visualisations/labourmarketlocal/"+n[3].find(gl).data.areacd+"/")&&f(l,"href",r)},d(n){n&&w(t)}}}function Ar(e){let t,l,a,i,r,n=(e[0]in e[13]?e[13][e[0]]:"")+"",s,o,h,u,c,m;function y(d){e[16](d)}let g={indicators:[...e[8],...e[9],...e[10]],latestData:e[1],initialData:e[5],selectedAreas:e[3],trimmedIndicators:e[7],primaryIndicators:e[8],secondaryIndicators:e[9],otherIndicators:e[10],siblingAreas:e[6],selectedArea:e[11],parentArea:e[12]};e[2]!==void 0&&(g.checkboxedRoles=e[2]),o=new wr({props:g}),ke.push(()=>ye(o,"checkboxedRoles",y));let p=e[8],D=[];for(let d=0;d<p.length;d+=1)D[d]=_l(dl(e,p,d));const _=d=>K(D[d],1,1,()=>{D[d]=null});let b=e[0]==="Economy"&&ml(e);return{c(){t=G("section"),l=G("h1"),a=X(e[0]),i=Z(),r=G("p"),s=Z(),ee(o.$$.fragment),u=Z();for(let d=0;d<D.length;d+=1)D[d].c();c=Z(),b&&b.c(),this.h()},l(d){t=O(d,"SECTION",{title:!0,class:!0});var k=I(t);l=O(k,"H1",{});var v=I(l);a=J(v,e[0]),v.forEach(w),i=Q(k),r=O(k,"P",{});var A=I(r);A.forEach(w),s=Q(k),ae(o.$$.fragment,k),u=Q(k);for(let W=0;W<D.length;W+=1)D[W].l(k);c=Q(k),b&&b.l(k),k.forEach(w),this.h()},h(){f(t,"title",e[0]),f(t,"class","svelte-urpow4")},m(d,k){B(d,t,k),E(t,l),E(l,a),E(t,i),E(t,r),r.innerHTML=n,E(t,s),te(o,t,null),E(t,u);for(let v=0;v<D.length;v+=1)D[v]&&D[v].m(t,null);E(t,c),b&&b.m(t,null),m=!0},p(d,[k]){(!m||k&1)&&me(a,d[0]),(!m||k&1)&&n!==(n=(d[0]in d[13]?d[13][d[0]]:"")+"")&&(r.innerHTML=n);const v={};if(k&2&&(v.latestData=d[1]),k&32&&(v.initialData=d[5]),k&8&&(v.selectedAreas=d[3]),k&64&&(v.siblingAreas=d[6]),!h&&k&4&&(h=!0,v.checkboxedRoles=d[2],we(()=>h=!1)),o.$set(v),k&6526){p=d[8];let A;for(A=0;A<p.length;A+=1){const W=dl(d,p,A);D[A]?(D[A].p(W,k),Y(D[A],1)):(D[A]=_l(W),D[A].c(),Y(D[A],1),D[A].m(t,c))}for(be(),A=p.length;A<D.length;A+=1)_(A);ve()}d[0]==="Economy"?b?b.p(d,k):(b=ml(d),b.c(),b.m(t,null)):b&&(b.d(1),b=null),(!m||k&1)&&f(t,"title",d[0])},i(d){if(!m){Y(o.$$.fragment,d);for(let k=0;k<p.length;k+=1)Y(D[k]);m=!0}},o(d){K(o.$$.fragment,d),D=D.filter(Boolean);for(let k=0;k<D.length;k+=1)K(D[k]);m=!1},d(d){d&&w(t),le(o),ne(D,d),b&&b.d()}}}const gl=e=>e.role==="main";function Dr(e,t,l){let{sectionName:a,sectionIndicators:i,indicators:r,selectedAreas:n,latestData:s,otherData:o,initialData:h,checkboxedRoles:u,siblingAreas:c}=t;a=a[0].toUpperCase()+a.substring(1),s=s.filter(A=>i.map(W=>W.id).includes(A.codeId));const m=r.filter(A=>i.map(W=>W.id).includes(A.id)),y=m.filter(A=>i.filter(W=>W.priority==="p").map(W=>W.id).includes(A.id)),g=m.filter(A=>i.filter(W=>W.priority==="s").map(W=>W.id).includes(A.id)),p=m.filter(A=>![...y.map(W=>W.id),...g.map(W=>W.id)].includes(A.id));let D=n.find(A=>A.role==="main").data.areanm,_=n.find(A=>A.role==="parent").data.areanm,b={Demographics:"[Dummy text] "+D+" is a rural area in "+_+". It is a popular retirement destination.",Economy:"[Dummy text] "+D+" has above average employment. Its primary industry is retail.",Health:"[Dummy text] "+D+" is an ageing area with above average level of deprivation.",Connectivity:"[Dummy text] "+D+" is a rural area in "+_+".",Skills:"[Dummy text] "+D+" has an above average level of deprivation.",Education:"[Dummy text] "+D+" has a low student population. The area has an above average number of people who do not hold qualifications.",Wellbeing:"[Dummy text] "+D+" has an above average level of deprivation and above average employment."};function d(A){u=A,l(2,u)}const k=(A,W)=>W.codeId===A.id;function v(A){u=A,l(2,u)}return e.$$set=A=>{"sectionName"in A&&l(0,a=A.sectionName),"sectionIndicators"in A&&l(14,i=A.sectionIndicators),"indicators"in A&&l(15,r=A.indicators),"selectedAreas"in A&&l(3,n=A.selectedAreas),"latestData"in A&&l(1,s=A.latestData),"otherData"in A&&l(4,o=A.otherData),"initialData"in A&&l(5,h=A.initialData),"checkboxedRoles"in A&&l(2,u=A.checkboxedRoles),"siblingAreas"in A&&l(6,c=A.siblingAreas)},[a,s,u,n,o,h,c,m,y,g,p,D,_,b,i,r,d,k,v]}class Er extends oe{constructor(t){super(),fe(this,t,Dr,Ar,ue,{sectionName:0,sectionIndicators:14,indicators:15,selectedAreas:3,latestData:1,otherData:4,initialData:5,checkboxedRoles:2,siblingAreas:6})}}function pl(e,t,l){const a=e.slice();return a[18]=t[l],a}function Ir(e){let t=e[5].find(Tr).data.areanm+"",l;return{c(){l=X(t)},l(a){l=J(a,t)},m(a,i){B(a,l,i)},p:ie,d(a){a&&w(l)}}}function Mr(e){let t,l=e[5].find(Sr).data.areanm+"",a;return{c(){t=X("Get localised data, insights and trends for "),a=X(l)},l(i){t=J(i,"Get localised data, insights and trends for "),a=J(i,l)},m(i,r){B(i,t,r),B(i,a,r)},p:ie,d(i){i&&w(t),i&&w(a)}}}function Rr(e){let t,l,a,i;return t=new Bl({props:{$$slots:{default:[Ir]},$$scope:{ctx:e}}}),a=new Nl({props:{$$slots:{default:[Mr]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Z(),ee(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Q(r),ae(a.$$.fragment,r)},m(r,n){te(t,r,n),B(r,l,n),te(a,r,n),i=!0},p(r,n){const s={};n&2097152&&(s.$$scope={dirty:n,ctx:r}),t.$set(s);const o={};n&2097152&&(o.$$scope={dirty:n,ctx:r}),a.$set(o)},i(r){i||(Y(t.$$.fragment,r),Y(a.$$.fragment,r),i=!0)},o(r){K(t.$$.fragment,r),K(a.$$.fragment,r),i=!1},d(r){le(t,r),r&&w(l),le(a,r)}}}function bl(e){let t,l,a;function i(...s){return e[8](e[18],...s)}function r(s){e[9](s)}let n={sectionName:e[18],sectionIndicators:e[0].configData.areaSections.filter(i),indicators:e[4],selectedAreas:e[5],latestData:e[3],initialData:e[0].preloadedData.initialData,otherData:e[0].preloadedData.otherData,siblingAreas:e[1]};return e[2]!==void 0&&(n.checkboxedRoles=e[2]),t=new Er({props:n}),ke.push(()=>ye(t,"checkboxedRoles",r)),{c(){ee(t.$$.fragment)},l(s){ae(t.$$.fragment,s)},m(s,o){te(t,s,o),a=!0},p(s,o){e=s;const h={};o&1&&(h.sectionName=e[18]),o&1&&(h.sectionIndicators=e[0].configData.areaSections.filter(i)),o&1&&(h.initialData=e[0].preloadedData.initialData),o&1&&(h.otherData=e[0].preloadedData.otherData),o&2&&(h.siblingAreas=e[1]),!l&&o&4&&(l=!0,h.checkboxedRoles=e[2],we(()=>l=!1)),t.$set(h)},i(s){a||(Y(t.$$.fragment,s),a=!0)},o(s){K(t.$$.fragment,s),a=!1},d(s){le(t,s)}}}function Lr(e){let t;return{c(){t=X("Find parent, child and neighbouring areas")},l(l){t=J(l,"Find parent, child and neighbouring areas")},m(l,a){B(l,t,a)},d(l){l&&w(t)}}}function Fr(e){let t,l,a,i,r,n,s,o,h,u,c,m,y;t=new ra({props:{areaKeyIndicators:e[0].configData.areaKeyIndicators,latestData:e[3].filter(e[6]),initialData:e[0].preloadedData.initialData,trimmedIndicators:e[4].filter(e[7]),selectedAreas:e[5]}});let g=[...new Set(e[0].configData.areaSections.map(vl))],p=[];for(let _=0;_<g.length;_+=1)p[_]=bl(pl(e,g,_));const D=_=>K(p[_],1,1,()=>{p[_]=null});return r=new Ul({props:{$$slots:{default:[Lr]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Z();for(let _=0;_<p.length;_+=1)p[_].c();a=Z(),i=G("section"),ee(r.$$.fragment),n=Z(),s=G("section"),o=G("h2"),h=X("Get the data"),u=Z(),c=G("p"),m=X("Here, you can find information and links to the data."),this.h()},l(_){ae(t.$$.fragment,_),l=Q(_);for(let A=0;A<p.length;A+=1)p[A].l(_);a=Q(_),i=O(_,"SECTION",{title:!0,class:!0});var b=I(i);ae(r.$$.fragment,b),b.forEach(w),n=Q(_),s=O(_,"SECTION",{title:!0,class:!0});var d=I(s);o=O(d,"H2",{class:!0});var k=I(o);h=J(k,"Get the data"),k.forEach(w),u=Q(d),c=O(d,"P",{});var v=I(c);m=J(v,"Here, you can find information and links to the data."),v.forEach(w),d.forEach(w),this.h()},h(){f(i,"title","Related areas"),f(i,"class","svelte-r2srs5"),f(o,"class","ons-u-mt-xl"),f(s,"title","Get the data"),f(s,"class","svelte-r2srs5")},m(_,b){te(t,_,b),B(_,l,b);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(_,b);B(_,a,b),B(_,i,b),te(r,i,null),B(_,n,b),B(_,s,b),E(s,o),E(o,h),E(s,u),E(s,c),E(c,m),y=!0},p(_,b){const d={};if(b&1&&(d.areaKeyIndicators=_[0].configData.areaKeyIndicators),b&1&&(d.latestData=_[3].filter(_[6])),b&1&&(d.initialData=_[0].preloadedData.initialData),b&1&&(d.trimmedIndicators=_[4].filter(_[7])),t.$set(d),b&63){g=[...new Set(_[0].configData.areaSections.map(vl))];let v;for(v=0;v<g.length;v+=1){const A=pl(_,g,v);p[v]?(p[v].p(A,b),Y(p[v],1)):(p[v]=bl(A),p[v].c(),Y(p[v],1),p[v].m(a.parentNode,a))}for(be(),v=g.length;v<p.length;v+=1)D(v);ve()}const k={};b&2097152&&(k.$$scope={dirty:b,ctx:_}),r.$set(k)},i(_){if(!y){Y(t.$$.fragment,_);for(let b=0;b<g.length;b+=1)Y(p[b]);Y(r.$$.fragment,_),y=!0}},o(_){K(t.$$.fragment,_),p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)K(p[b]);K(r.$$.fragment,_),y=!1},d(_){le(t,_),_&&w(l),ne(p,_),_&&w(a),_&&w(i),le(r),_&&w(n),_&&w(s)}}}function Cr(e){let t,l,a,i;return t=new zl({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Ce}/`},{label:"Find a local area",url:`${Ce}/areas`},{label:e[5].find(Vr).data.areanm}],$$slots:{default:[Rr]},$$scope:{ctx:e}}}),a=new ql({props:{contentsLabel:"Explore this area",$$slots:{default:[Fr]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Z(),ee(a.$$.fragment)},l(r){ae(t.$$.fragment,r),l=Q(r),ae(a.$$.fragment,r)},m(r,n){te(t,r,n),B(r,l,n),te(a,r,n),i=!0},p(r,[n]){const s={};n&2097152&&(s.$$scope={dirty:n,ctx:r}),t.$set(s);const o={};n&2097159&&(o.$$scope={dirty:n,ctx:r}),a.$set(o)},i(r){i||(Y(t.$$.fragment,r),Y(a.$$.fragment,r),i=!0)},o(r){K(t.$$.fragment,r),K(a.$$.fragment,r),i=!1},d(r){le(t,r),r&&w(l),le(a,r)}}}const Tr=e=>e.role==="main",Sr=e=>e.role==="main",Vr=e=>e.role==="main",vl=e=>e.section;function Wr(e,t,l){let a,{data:i}=t;console.log(i);let r=Ae("latestData"),n=Ae("areas"),s=Ae("areasParentsLookup"),o=Ae("areasGeogLevel"),h=Ae("indicators"),u=Ae("areasGeogInfo"),c=s.find(v=>v.areacd===i.areaCode),m=[];m.push({data:n.find(v=>v.areacd===i.areaCode),role:"main"}),m.push({data:n.find(v=>v.areacd===c.parentcd),role:"parent"}),c.countrycd!==null&c.parentcd!==c.countrycd&&m.push({data:n.find(v=>v.areacd===c.countrycd),role:"country"}),c.parentcd!=="K02000001"&&m.push({data:n.find(v=>v.areacd==="K02000001"),role:"uk"});let y=o.find(v=>v.areacd===i.areaCode).level,g=o.filter(v=>["uk","country"].includes(y)?v.level===y:y==="region"?["region","country"].includes(v.level):y==="both"?["both","lower"].includes(v.level):["both",y].includes(v.level)),p=u.find(v=>v.areacd===i.areaCode).headline,D={};D.neighbours=s.filter(v=>v.areacd!=i.areaCode&v.parentcd===c.parentcd&g.map(A=>A.areacd).includes(v.areacd)).map(v=>v.areacd),D.similar=p===null?[]:u.filter(v=>v.areacd!=i.areaCode&v.headline===p&g.map(A=>A.areacd).includes(v.areacd)).map(v=>v.areacd),D.siblings=s.filter(v=>v.areacd!=i.areaCode&g.map(A=>A.areacd).includes(v.areacd)).map(v=>v.areacd);const _=v=>i.configData.areaKeyIndicators.map(A=>A.id).includes(v.codeId),b=v=>i.configData.areaKeyIndicators.map(A=>A.id).includes(v.id),d=(v,A)=>A.section===v;function k(v){a=v,l(2,a)}return e.$$set=v=>{"data"in v&&l(0,i=v.data)},l(2,a={parent:!0,country:!0,uk:!0,neighbour:!1,cluster:!1,custom:null}),console.log(m),[i,D,a,r,h,m,_,b,d,k]}class Yr extends oe{constructor(t){super(),fe(this,t,Wr,Cr,ue,{data:0})}}export{Yr as component};
