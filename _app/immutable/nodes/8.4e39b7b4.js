//js
import{S as fe,i as ce,s as he,e as ie,b as V,D as oe,h as b,F as T,a as Q,G,m as F,c as X,n,V as ae,C,X as de,_ as Pe,q as $,r as x,u as se,k as N,y as ee,l as q,z as te,$ as Me,A as le,a0 as ze,g as K,v as ye,d as U,f as De,B as re,U as Ee,w as _e,Q as me,R as ge,p as Z,E as Ft,Y as Lt,W as Re,o as At,a2 as Ie,a1 as Ce}from"../chunks/index.6979379d.js";import{b as Fe}from"../chunks/paths.2064bf11.js";import{h as J}from"../chunks/config.eb4626c9.js";import{T as Pt,H as Wt,S as St}from"../chunks/Subhead.bb1cf4de.js";import{s as We,l as pe,p as Tt,a as Gt,K as Bt,A as Ae,S as Mt,b as Vt,M as Ht}from"../chunks/Map.2cb76f1c.js";function Se(e,t,l){const r=e.slice();return r[11]=t[l],r[13]=l,r}function Te(e,t,l){const r=e.slice();return r[11]=t[l],r[13]=l,r}function Ge(e){let t,l,r,a=e[2],i=[];for(let u=0;u<a.length;u+=1)i[u]=Be(Te(e,a,u));let o=e[2],s=[];for(let u=0;u<o.length;u+=1)s[u]=Ve(Se(e,o,u));return{c(){t=T("g");for(let u=0;u<i.length;u+=1)i[u].c();l=Q(),r=T("g");for(let u=0;u<s.length;u+=1)s[u].c();this.h()},l(u){t=G(u,"g",{class:!0});var d=F(t);for(let g=0;g<i.length;g+=1)i[g].l(d);d.forEach(b),l=X(u),r=G(u,"g",{class:!0});var _=F(r);for(let g=0;g<s.length;g+=1)s[g].l(_);_.forEach(b),this.h()},h(){n(t,"class","overlayCirclesContainer"),n(r,"class","visibleCirclesContainer")},m(u,d){V(u,t,d);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(t,null);V(u,l,d),V(u,r,d);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(r,null)},p(u,d){if(d&30){a=u[2];let _;for(_=0;_<a.length;_+=1){const g=Te(u,a,_);i[_]?i[_].p(g,d):(i[_]=Be(g),i[_].c(),i[_].m(t,null))}for(;_<i.length;_+=1)i[_].d(1);i.length=a.length}if(d&7){o=u[2];let _;for(_=0;_<o.length;_+=1){const g=Se(u,o,_);s[_]?s[_].p(g,d):(s[_]=Ve(g),s[_].c(),s[_].m(r,null))}for(;_<s.length;_+=1)s[_].d(1);s.length=o.length}},d(u){u&&b(t),ae(i,u),u&&b(l),u&&b(r),ae(s,u)}}}function Be(e){let t,l,r,a,i;return{c(){t=T("g"),l=T("circle"),this.h()},l(o){t=G(o,"g",{transform:!0});var s=F(t);l=G(s,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0}),F(l).forEach(b),s.forEach(b),this.h()},h(){n(l,"hoverid",e[13]),n(l,"r",e[1]),n(l,"stroke","none"),n(l,"fill","white"),n(t,"transform",r="translate("+e[11].y+","+e[11].x+")")},m(o,s){V(o,t,s),C(t,l),a||(i=[de(l,"mouseover",e[3]),de(l,"mouseleave",e[4]),de(l,"focus",e[3])],a=!0)},p(o,s){s&2&&n(l,"r",o[1]),s&4&&r!==(r="translate("+o[11].y+","+o[11].x+")")&&n(t,"transform",r)},d(o){o&&b(t),a=!1,Pe(i)}}}function Yt(e){let t,l,r;return{c(){t=T("circle"),this.h()},l(a){t=G(a,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,opacity:!0});var i=F(t);i.forEach(b),this.h()},h(){n(t,"pointer-events","none"),n(t,"r",e[1]),n(t,"fill",l=e[0]===e[13]?"#F39431":J[e[11].datum.role]),n(t,"stroke","white"),n(t,"opacity",r=e[0]===e[13]||e[0]===null?1:.2)},m(a,i){V(a,t,i)},p(a,i){i&2&&n(t,"r",a[1]),i&5&&l!==(l=a[0]===a[13]?"#F39431":J[a[11].datum.role])&&n(t,"fill",l),i&1&&r!==(r=a[0]===a[13]||a[0]===null?1:.2)&&n(t,"opacity",r)},d(a){a&&b(t)}}}function Nt(e){let t,l,r,a,i,o,s,u;return{c(){t=T("rect"),this.h()},l(d){t=G(d,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,opacity:!0});var _=F(t);_.forEach(b),this.h()},h(){n(t,"pointer-events","none"),n(t,"transform",l=["country","uk"].includes(e[11].datum.role)?"rotate(45)":null),n(t,"x",r=e[0]===e[13]?-.75*e[11].datum.radius-3:-.75*e[11].datum.radius),n(t,"y",a=e[0]===e[13]?-.75*e[11].datum.radius-3:-.75*e[11].datum.radius),n(t,"width",i=e[0]===e[13]?e[11].datum.radius*1.5+6:e[11].datum.radius*1.5),n(t,"height",o=e[0]===e[13]?e[11].datum.radius*1.5+6:e[11].datum.radius*1.5),n(t,"fill",s=e[0]===e[13]?"#F39431":J[e[11].datum.role]),n(t,"stroke","white"),n(t,"opacity",u=e[0]===e[13]||e[0]===null?1:.2)},m(d,_){V(d,t,_)},p(d,_){_&4&&l!==(l=["country","uk"].includes(d[11].datum.role)?"rotate(45)":null)&&n(t,"transform",l),_&5&&r!==(r=d[0]===d[13]?-.75*d[11].datum.radius-3:-.75*d[11].datum.radius)&&n(t,"x",r),_&5&&a!==(a=d[0]===d[13]?-.75*d[11].datum.radius-3:-.75*d[11].datum.radius)&&n(t,"y",a),_&5&&i!==(i=d[0]===d[13]?d[11].datum.radius*1.5+6:d[11].datum.radius*1.5)&&n(t,"width",i),_&5&&o!==(o=d[0]===d[13]?d[11].datum.radius*1.5+6:d[11].datum.radius*1.5)&&n(t,"height",o),_&5&&s!==(s=d[0]===d[13]?"#F39431":J[d[11].datum.role])&&n(t,"fill",s),_&1&&u!==(u=d[0]===d[13]||d[0]===null?1:.2)&&n(t,"opacity",u)},d(d){d&&b(t)}}}function Ve(e){let t,l,r;function a(s,u){return u&4&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[11].datum.role)),l?Nt:Yt}let i=a(e,-1),o=i(e);return{c(){t=T("g"),o.c(),this.h()},l(s){t=G(s,"g",{transform:!0});var u=F(t);o.l(u),u.forEach(b),this.h()},h(){n(t,"transform",r="translate("+e[11].y+","+e[11].x+")")},m(s,u){V(s,t,u),o.m(t,null)},p(s,u){i===(i=a(s,u))&&o?o.p(s,u):(o.d(1),o=i(s),o&&(o.c(),o.m(t,null))),u&4&&r!==(r="translate("+s[11].y+","+s[11].x+")")&&n(t,"transform",r)},d(s){s&&b(t),o.d()}}}function qt(e){let t,l=e[2].length>0&&Ge(e);return{c(){l&&l.c(),t=ie()},l(r){l&&l.l(r),t=ie()},m(r,a){l&&l.m(r,a),V(r,t,a)},p(r,[a]){r[2].length>0?l?l.p(r,a):(l=Ge(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:oe,o:oe,d(r){l&&l.d(r),r&&b(t)}}}let He=1,Ye=1,Ot=0;function Kt(e,t,l){let r,{circleData:a,plottedAreas:i,y:o,hoverIndex:s,lineData:u,r:d}=t;class _{constructor(c,k,v){this.items=c,this.radiusFun=k,this.xFun=v,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,He),this.maxR=Math.max(...c.map(p=>k(p))),this.rng=this._sfc32(1,2,3,He)}calculateYPositions(){let c=this.items.map((p,R)=>({datum:p,originalIndex:R,x:this.xFun(p),y:null,placed:!1})).sort((p,R)=>p.x-R.x);c.forEach(function(p,R){p.index=R});let k=this.tieBreakFn;c.forEach(function(p){p.tieBreaker=k(p.x)});let v=[...c].sort((p,R)=>{let M=this.radiusFun(p.datum)+p.tieBreaker*Ye;return this.radiusFun(R.datum)+R.tieBreaker*Ye-M});for(let p of v)p.placed=!0,p.y=this._getBestYPosition(p,c);return c.sort((p,R)=>p.originalIndex-R.originalIndex),c.map(p=>({datum:p.datum,x:p.x,y:p.y}))}_sfc32(c,k,v,p){let R=function(){c>>>=0,k>>>=0,v>>>=0,p>>>=0;var M=c+k|0;return c=k^k>>>9,k=v+(v<<3)|0,v=v<<21|v>>>11,p=p+1|0,M=M+p|0,v=v+M|0,(M>>>0)/4294967296};for(let M=0;M<10;M++)R();return R}_getBestYPosition(c,k){let v=[];for(let R of[-1,1]){let M,W=this.radiusFun(c.datum);for(let z=c.index+R;z>=0&&z<k.length&&(M=Math.abs(c.x-k[z].x))<W+this.maxR;z+=R){let H=k[z];if(!H.placed)continue;let S=W+this.radiusFun(H.datum);if(M>=W+this.radiusFun(H.datum))continue;let I=Math.sqrt(S*S-M*M),A=[H.y-I,H.y+I];v.push(A)}}if(v.length==0)return this.radiusFun(c.datum)*(this.rng()-.5)*Ot;let p=v.flat();p.push(0),p.sort((R,M)=>{let W=Math.abs(R),z=Math.abs(M);return W<z?-1:W>z?1:R-M});for(let R=0;R<p.length;R++){let M=p[R];if(v.every(W=>M<=W[0]||M>=W[1]))return M}}}let g=["main","parent","country","uk","custom1","custom2","custom3","custom4"];function E(w){l(0,s=parseFloat(We(this).attr("hoverid")))}function y(w){l(0,s=null)}return e.$$set=w=>{"circleData"in w&&l(6,a=w.circleData),"plottedAreas"in w&&l(7,i=w.plottedAreas),"y"in w&&l(8,o=w.y),"hoverIndex"in w&&l(0,s=w.hoverIndex),"lineData"in w&&l(5,u=w.lineData),"r"in w&&l(1,d=w.r)},e.$$.update=()=>{e.$$.dirty&448&&l(2,r=new _(i,w=>"radius"in w?w.radius*1.1:5,w=>o(a.find(c=>c.areacd===w.areacd).value)).calculateYPositions()),e.$$.dirty&5&&l(5,u=s===null?r.filter(w=>g.includes(w.datum.role)):[r[s]])},[s,d,r,E,y,u,a,i,o]}class jt extends fe{constructor(t){super(),ce(this,t,Kt,qt,he,{circleData:6,plottedAreas:7,y:8,hoverIndex:0,lineData:5,r:1})}}function Ne(e,t,l){const r=e.slice();return r[10]=t[l],r}function qe(e){let t,l=e[4]+Math.round(e[3].find(s).value*e[6])/e[6]+e[5]+"",r,a,i,o;function s(...u){return e[8](e[10],...u)}return{c(){t=T("text"),r=$(l),this.h()},l(u){t=G(u,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var d=F(t);r=x(d,l),d.forEach(b),this.h()},h(){n(t,"y",a=e[10].y+8),n(t,"font-size","16px"),n(t,"fill",i=e[2]!=null?"#F39431":J[e[10].datum.role]),n(t,"stroke",o=e[2]!=null?"#F39431":J[e[10].datum.role]),n(t,"stroke-width","0.5px")},m(u,d){V(u,t,d),C(t,r)},p(u,d){e=u,d&10&&l!==(l=e[4]+Math.round(e[3].find(s).value*e[6])/e[6]+e[5]+"")&&se(r,l),d&2&&a!==(a=e[10].y+8)&&n(t,"y",a),d&6&&i!==(i=e[2]!=null?"#F39431":J[e[10].datum.role])&&n(t,"fill",i),d&6&&o!==(o=e[2]!=null?"#F39431":J[e[10].datum.role])&&n(t,"stroke",o)},d(u){u&&b(t)}}}function Ut(e){let t,l,r=e[1],a=[];for(let i=0;i<r.length;i+=1)a[i]=qe(Ne(e,r,i));return{c(){t=T("g");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){t=G(i,"g",{class:!0,transform:!0});var o=F(t);for(let s=0;s<a.length;s+=1)a[s].l(o);o.forEach(b),this.h()},h(){n(t,"class","labelsContainer"),n(t,"transform",l="translate("+e[0]+",0)")},m(i,o){V(i,t,o);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(t,null)},p(i,[o]){if(o&126){r=i[1];let s;for(s=0;s<r.length;s+=1){const u=Ne(i,r,s);a[s]?a[s].p(u,o):(a[s]=qe(u),a[s].c(),a[s].m(t,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}o&1&&l!==(l="translate("+i[0]+",0)")&&n(t,"transform",l)},i:oe,o:oe,d(i){i&&b(t),ae(a,i)}}}function Qt(e,t,l){let{x:r,labelPlacements:a,hoverIndex:i,latestData:o,indicator:s}=t,u=s.prefix===null?"":s.prefix==="pounds"?"£":s.prefix,d=s.suffix===null?"":s.suffix;s.subTextShort===null||s.subTextShort;let _=Math.pow(10,s.roundingFactor);const g=(E,y)=>y.areacd===E.datum.areacd;return e.$$set=E=>{"x"in E&&l(0,r=E.x),"labelPlacements"in E&&l(1,a=E.labelPlacements),"hoverIndex"in E&&l(2,i=E.hoverIndex),"latestData"in E&&l(3,o=E.latestData),"indicator"in E&&l(7,s=E.indicator)},[r,a,i,o,u,d,_,s,g]}class Xt extends fe{constructor(t){super(),ce(this,t,Qt,Ut,he,{x:0,labelPlacements:1,hoverIndex:2,latestData:3,indicator:7})}}function Oe(e,t,l){const r=e.slice();return r[27]=t[l],r[28]=t,r[29]=l,r}function Ke(e){let t,l;return t=new Gt({props:{lineDataArray:e[9],x1:e[11](e[6][0]),x2:e[11](e[6][1]),hoverIndex:e[5]}}),{c(){ee(t.$$.fragment)},l(r){te(t.$$.fragment,r)},m(r,a){le(t,r,a),l=!0},p(r,a){const i={};a&512&&(i.lineDataArray=r[9]),a&2112&&(i.x1=r[11](r[6][0])),a&2112&&(i.x2=r[11](r[6][1])),a&32&&(i.hoverIndex=r[5]),t.$set(i)},i(r){l||(K(t.$$.fragment,r),l=!0)},o(r){U(t.$$.fragment,r),l=!1},d(r){re(t,r)}}}function je(e){let t,l,r,a,i,o=e[27]+"",s,u,d,_,g,E;function y(...v){return e[19](e[27],...v)}function w(v){e[20](v)}function c(v){e[21](v,e[29])}let k={plottedAreas:e[0],circleData:e[1].filter(y),y:e[7],r:"5"};return e[5]!==void 0&&(k.hoverIndex=e[5]),e[9][e[29]]!==void 0&&(k.lineData=e[9][e[29]]),u=new jt({props:k}),_e.push(()=>me(u,"hoverIndex",w)),_e.push(()=>me(u,"lineData",c)),{c(){t=T("g"),l=T("line"),i=T("text"),s=$(o),ee(u.$$.fragment),this.h()},l(v){t=G(v,"g",{transform:!0});var p=F(t);l=G(p,"line",{y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),F(l).forEach(b),i=G(p,"text",{y:!0,"text-anchor":!0,"font-size":!0,fill:!0});var R=F(i);s=x(R,o),R.forEach(b),te(u.$$.fragment,p),p.forEach(b),this.h()},h(){n(l,"y1",r=e[7](e[8][0])),n(l,"y2",a=e[7](e[8][1])-20),n(l,"stroke-width","1px"),n(l,"stroke","black"),n(i,"y","-30"),n(i,"text-anchor","middle"),n(i,"font-size","14px"),n(i,"fill","black"),n(t,"transform",g="translate("+e[11](e[27])+",0)")},m(v,p){V(v,t,p),C(t,l),C(t,i),C(i,s),le(u,t,null),E=!0},p(v,p){e=v,(!E||p&384&&r!==(r=e[7](e[8][0])))&&n(l,"y1",r),(!E||p&384&&a!==(a=e[7](e[8][1])-20))&&n(l,"y2",a),(!E||p&64)&&o!==(o=e[27]+"")&&se(s,o);const R={};p&1&&(R.plottedAreas=e[0]),p&66&&(R.circleData=e[1].filter(y)),p&128&&(R.y=e[7]),!d&&p&32&&(d=!0,R.hoverIndex=e[5],ge(()=>d=!1)),!_&&p&512&&(_=!0,R.lineData=e[9][e[29]],ge(()=>_=!1)),u.$set(R),(!E||p&2112&&g!==(g="translate("+e[11](e[27])+",0)"))&&n(t,"transform",g)},i(v){E||(K(u.$$.fragment,v),E=!0)},o(v){U(u.$$.fragment,v),E=!1},d(v){v&&b(t),re(u)}}}function Jt(e){let t,l,r,a,i,o,s,u,d,_,g=e[6][1]!=e[6][0]&&Ke(e),E=e[6][0]===e[6][1]?[e[6][0]]:e[6],y=[];for(let c=0;c<E.length;c+=1)y[c]=je(Oe(e,E,c));const w=c=>U(y[c],1,1,()=>{y[c]=null});return s=new Xt({props:{x:e[11](e[6][1])+10+(e[9][1].length>0?Math.max(...e[9][1].map(Ue)):0),labelPlacements:e[10],hoverIndex:e[5],latestData:e[1].filter(e[22]),indicator:e[2]}}),{c(){t=N("div"),l=T("svg"),r=T("g"),a=T("g"),g&&g.c(),i=ie();for(let c=0;c<y.length;c+=1)y[c].c();o=ie(),ee(s.$$.fragment),this.h()},l(c){t=q(c,"DIV",{class:!0});var k=F(t);l=G(k,"svg",{height:!0,width:!0});var v=F(l);r=G(v,"g",{class:!0,transform:!0});var p=F(r);a=G(p,"g",{transform:!0});var R=F(a);R.forEach(b),g&&g.l(p),i=ie();for(let M=0;M<y.length;M+=1)y[M].l(p);o=ie(),te(s.$$.fragment,p),p.forEach(b),v.forEach(b),k.forEach(b),this.h()},h(){n(a,"transform","translate("+-e[13]+",0)"),n(r,"class","chart-container"),n(r,"transform",u="translate("+e[4].left+","+e[4].top+")"),n(l,"height",e[12]),n(l,"width",e[3]),n(t,"class","svg-container"),Me(()=>e[23].call(t))},m(c,k){V(c,t,k),C(t,l),C(l,r),C(r,a),g&&g.m(r,null),C(r,i);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(r,null);C(r,o),le(s,r,null),d=ze(t,e[23].bind(t)),_=!0},p(c,[k]){if(c[6][1]!=c[6][0]?g?(g.p(c,k),k&64&&K(g,1)):(g=Ke(c),g.c(),K(g,1),g.m(r,i)):g&&(ye(),U(g,1,1,()=>{g=null}),De()),k&3043){E=c[6][0]===c[6][1]?[c[6][0]]:c[6];let p;for(p=0;p<E.length;p+=1){const R=Oe(c,E,p);y[p]?(y[p].p(R,k),K(y[p],1)):(y[p]=je(R),y[p].c(),K(y[p],1),y[p].m(r,o))}for(ye(),p=E.length;p<y.length;p+=1)w(p);De()}const v={};k&2624&&(v.x=c[11](c[6][1])+10+(c[9][1].length>0?Math.max(...c[9][1].map(Ue)):0)),k&1024&&(v.labelPlacements=c[10]),k&32&&(v.hoverIndex=c[5]),k&66&&(v.latestData=c[1].filter(c[22])),k&4&&(v.indicator=c[2]),s.$set(v),(!_||k&16&&u!==(u="translate("+c[4].left+","+c[4].top+")"))&&n(r,"transform",u),(!_||k&8)&&n(l,"width",c[3])},i(c){if(!_){K(g);for(let k=0;k<E.length;k+=1)K(y[k]);K(s.$$.fragment,c),_=!0}},o(c){U(g),y=y.filter(Boolean);for(let k=0;k<y.length;k+=1)U(y[k]);U(s.$$.fragment,c),_=!1},d(c){c&&b(t),g&&g.d(),ae(y,c),re(s),d()}}}const Ue=e=>e.y;function Zt(e,t,l){let r,a,i,o,s,u,d,_,g,E,y,w=Ee("areas"),{plottedAreas:c,filteredData:k,indicator:v,selectedAreas:p}=t,R=400,M=150,W=60,z=0,H=["main","parent","country","uk","custom1","custom2","custom3","custom4"],S=[[],[]];const I=(h,f)=>f.year==h;function A(h){g=h,l(5,g)}function Y(h,f){e.$$.not_equal(S[f],h)&&(S[f]=h,l(9,S))}const L=h=>h.year===s[1];function j(){R=this.clientWidth,l(3,R)}return e.$$set=h=>{"plottedAreas"in h&&l(0,c=h.plottedAreas),"filteredData"in h&&l(1,k=h.filteredData),"indicator"in h&&l(2,v=h.indicator),"selectedAreas"in h&&l(14,p=h.selectedAreas)},e.$$.update=()=>{e.$$.dirty&2&&l(18,r=[...new Set(k.map(h=>h.areacd))]),e.$$.dirty&262145&&l(0,c=c.filter(h=>r.includes(h.areacd))),e.$$.dirty&24&&l(17,i=R-a.left-a.right),e.$$.dirty&16&&l(15,o=M-a.top-a.bottom),e.$$.dirty&2&&l(6,s=[Math.min(...k.map(h=>h.year)),Math.max(...k.map(h=>h.year))]),e.$$.dirty&131136&&l(11,u=pe().domain(s).range([0,i])),e.$$.dirty&6&&l(8,d=[v.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...k.map(h=>h.value))),Math.ceil(Math.max(...k.map(h=>h.value)))]),e.$$.dirty&33024&&l(7,_=pe().domain(d).range([o,0])),e.$$.dirty&1&&l(0,c=c.map(h=>({...h,radius:(H.includes(h.role),2)}))),e.$$.dirty&227&&l(16,E=c.map(h=>({...h,yPosition:_(k.find(f=>f.areacd===h.areacd&f.year===s[1]).value),areanm:w.find(f=>h.areacd===f.areacd).areanm})).filter((h,f)=>g!=null?f==g:H.includes(h.role))),e.$$.dirty&98320&&l(10,y=Tt(E,[-a.top,o],h=>h.yPosition,h=>h.areanm.length>20?34:17))},l(4,a={top:40,left:20,right:W+5,bottom:10}),l(5,g=null),[c,k,v,R,a,g,s,_,d,S,y,u,M,z,p,o,E,i,r,I,A,Y,L,j]}class $t extends fe{constructor(t){super(),ce(this,t,Zt,Jt,he,{plottedAreas:0,filteredData:1,indicator:2,selectedAreas:14})}}function Qe(e,t,l){const r=e.slice();return r[12]=t[l],r[14]=l,r}function Xe(e){let t,l,r=e[12].label+"",a,i,o,s,u,d;function _(...g){return e[9](e[12],...g)}return s=new $t({props:{selectedAreas:e[5],plottedAreas:e[4],filteredData:[...e[1].filter(_),...e[2][e[12].code].filter(e[10])],indicator:e[12]}}),{c(){t=N("div"),l=N("h3"),a=$(r),i=Q(),o=N("div"),ee(s.$$.fragment),u=Q(),this.h()},l(g){t=q(g,"DIV",{style:!0});var E=F(t);l=q(E,"H3",{class:!0});var y=F(l);a=x(y,r),y.forEach(b),i=X(E),o=q(E,"DIV",{style:!0});var w=F(o);te(s.$$.fragment,w),w.forEach(b),u=X(E),E.forEach(b),this.h()},h(){n(l,"class","svelte-ryr9lr"),Z(o,"padding-left","5px"),Z(o,"padding","right: 5px"),Z(t,"background-color",e[14]==0||e[14]==3?"#fafafa":"#ffffff")},m(g,E){V(g,t,E),C(t,l),C(l,a),C(t,i),C(t,o),le(s,o,null),C(t,u),d=!0},p(g,E){e=g,(!d||E&1)&&r!==(r=e[12].label+"")&&se(a,r);const y={};E&16&&(y.plottedAreas=e[4]),E&23&&(y.filteredData=[...e[1].filter(_),...e[2][e[12].code].filter(e[10])]),E&1&&(y.indicator=e[12]),s.$set(y)},i(g){d||(K(s.$$.fragment,g),d=!0)},o(g){U(s.$$.fragment,g),d=!1},d(g){g&&b(t),re(s)}}}function xt(e){let t,l,r,a,i,o,s,u,d,_,g,E,y;o=new Bt({props:{plottedAreas:e[4]}});let w=e[0],c=[];for(let v=0;v<w.length;v+=1)c[v]=Xe(Qe(e,w,v));const k=v=>U(c[v],1,1,()=>{c[v]=null});return{c(){t=N("section"),l=N("h1"),r=$("Key indicators"),a=Q(),i=N("div"),ee(o.$$.fragment),s=Q(),u=N("div");for(let v=0;v<c.length;v+=1)c[v].c();d=Q(),_=N("img"),this.h()},l(v){t=q(v,"SECTION",{title:!0,class:!0});var p=F(t);l=q(p,"H1",{});var R=F(l);r=x(R,"Key indicators"),R.forEach(b),a=X(p),i=q(p,"DIV",{class:!0});var M=F(i);te(o.$$.fragment,M),s=X(M),u=q(M,"DIV",{class:!0,style:!0});var W=F(u);for(let z=0;z<c.length;z+=1)c[z].l(W);W.forEach(b),M.forEach(b),d=X(p),_=q(p,"IMG",{style:!0,width:!0,src:!0,alt:!0}),p.forEach(b),this.h()},h(){n(u,"class","grid svelte-ryr9lr"),Z(u,"grid-template-columns","[line1] "+(e[3]/4-2)+"px [line2] "+(e[3]/4-2)+"px [line3] "+(e[3]/4-2)+"px [line4] "+(e[3]/4-2)+"px [end]"),n(i,"class","container svelte-ryr9lr"),Z(_,"padding-top","10px"),n(_,"width","75%"),Ft(_.src,g=`${Fe}/img/image1.png`)||n(_,"src",g),n(_,"alt","download buttons"),n(t,"title","Key indicators"),n(t,"class","svelte-ryr9lr"),Me(()=>e[11].call(t))},m(v,p){V(v,t,p),C(t,l),C(l,r),C(t,a),C(t,i),le(o,i,null),C(i,s),C(i,u);for(let R=0;R<c.length;R+=1)c[R]&&c[R].m(u,null);C(t,d),C(t,_),E=ze(t,e[11].bind(t)),y=!0},p(v,[p]){const R={};if(p&16&&(R.plottedAreas=v[4]),o.$set(R),p&55){w=v[0];let M;for(M=0;M<w.length;M+=1){const W=Qe(v,w,M);c[M]?(c[M].p(W,p),K(c[M],1)):(c[M]=Xe(W),c[M].c(),K(c[M],1),c[M].m(u,null))}for(ye(),M=w.length;M<c.length;M+=1)k(M);De()}(!y||p&8)&&Z(u,"grid-template-columns","[line1] "+(v[3]/4-2)+"px [line2] "+(v[3]/4-2)+"px [line3] "+(v[3]/4-2)+"px [line4] "+(v[3]/4-2)+"px [end]")},i(v){if(!y){K(o.$$.fragment,v);for(let p=0;p<w.length;p+=1)K(c[p]);y=!0}},o(v){U(o.$$.fragment,v),c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)U(c[p]);y=!1},d(v){v&&b(t),re(o),ae(c,v),E()}}}function el(e,t,l){let r,a,i,{indicators:o,checkboxedRoles:s,latestData:u,initialData:d}=t,_=600,g=[];const E=(c,k)=>i.map(v=>v.areacd).includes(k.areacd)&k.codeId==c.id,y=c=>i.map(k=>k.areacd).includes(c.areacd);function w(){_=this.clientWidth,l(3,_)}return e.$$set=c=>{"indicators"in c&&l(0,o=c.indicators),"checkboxedRoles"in c&&l(6,s=c.checkboxedRoles),"latestData"in c&&l(1,u=c.latestData),"initialData"in c&&l(2,d=c.initialData)},e.$$.update=()=>{e.$$.dirty&2&&l(8,r=[...new Set(u.map(c=>c.areacd))]),e.$$.dirty&320&&l(7,a=[...g.map(c=>c.role==="main"||s[c.role]?{role:c.role,areacd:c.data.areacd}:null).filter(c=>c!=null),...s.custom===null||s.custom===void 0?[]:s.custom.map((c,k)=>({role:"custom"+(k+1),areacd:c.areacd}))].filter(c=>r.includes(c.areacd))),e.$$.dirty&128&&l(4,i=a.length>0?a:[{role:"custom1",areacd:"E92000001"},{role:"custom2",areacd:"N92000002"},{role:"custom3",areacd:"S92000003"},{role:"custom4",areacd:"W92000004"}])},[o,u,d,_,i,g,s,a,r,E,y,w]}class tl extends fe{constructor(t){super(),ce(this,t,el,xt,he,{indicators:0,checkboxedRoles:6,latestData:1,initialData:2})}}function Je(e,t,l){const r=e.slice();return r[5]=t[l],r[7]=l,r}function Ze(e){let t,l;return{c(){t=N("p"),l=$("Split by..."),this.h()},l(r){t=q(r,"P",{class:!0});var a=F(t);l=x(a,"Split by..."),a.forEach(b),this.h()},h(){n(t,"class","svelte-46qqxz")},m(r,a){V(r,t,a),C(t,l)},d(r){r&&b(t)}}}function $e(e){let t,l,r,a,i,o=e[5].toLowerCase()+"",s,u,d,_,g,E;return _=Lt(e[4][0]),{c(){t=N("label"),l=N("input"),r=Q(),a=N("div"),i=N("p"),s=$(o),d=Q(),this.h()},l(y){t=q(y,"LABEL",{});var w=F(t);l=q(w,"INPUT",{style:!0,type:!0,name:!0}),r=X(w),a=q(w,"DIV",{class:!0,style:!0});var c=F(a);i=q(c,"P",{class:!0});var k=F(i);s=x(k,o),k.forEach(b),c.forEach(b),d=X(w),w.forEach(b),this.h()},h(){Z(l,"display","none"),n(l,"type","radio"),l.__value=e[7]+1,l.value=l.__value,n(l,"name","chosenChart"),n(i,"class","svelte-46qqxz"),n(a,"class","optionLabel svelte-46qqxz"),n(a,"style",u="background-color: "+(e[0]===e[7]+1?"white":"#d4d4d4")),_.p(l)},m(y,w){V(y,t,w),C(t,l),l.checked=l.__value===e[0],C(t,r),C(t,a),C(a,i),C(i,s),C(t,d),g||(E=de(l,"change",e[3]),g=!0)},p(y,w){w&3&&(l.checked=l.__value===y[0]),w&2&&o!==(o=y[5].toLowerCase()+"")&&se(s,o),w&1&&u!==(u="background-color: "+(y[0]===y[7]+1?"white":"#d4d4d4"))&&n(a,"style",u)},d(y){y&&b(t),_.r(),g=!1,E()}}}function ll(e){let t,l,r=e[2]&&Ze(),a=e[1],i=[];for(let o=0;o<a.length;o+=1)i[o]=$e(Je(e,a,o));return{c(){t=N("div"),r&&r.c(),l=Q();for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){t=q(o,"DIV",{class:!0});var s=F(t);r&&r.l(s),l=X(s);for(let u=0;u<i.length;u+=1)i[u].l(s);s.forEach(b),this.h()},h(){n(t,"class","radioContainer svelte-46qqxz")},m(o,s){V(o,t,s),r&&r.m(t,null),C(t,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null)},p(o,[s]){if(o[2]?r||(r=Ze(),r.c(),r.m(t,l)):r&&(r.d(1),r=null),s&3){a=o[1];let u;for(u=0;u<a.length;u+=1){const d=Je(o,a,u);i[u]?i[u].p(d,s):(i[u]=$e(d),i[u].c(),i[u].m(t,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=a.length}},i:oe,o:oe,d(o){o&&b(t),r&&r.d(),ae(i,o)}}}function rl(e,t,l){let{optionsArray:r,chosenChart:a,compareIntroText:i=!0}=t;const o=[[]];function s(){a=this.__value,l(0,a)}return e.$$set=u=>{"optionsArray"in u&&l(1,r=u.optionsArray),"chosenChart"in u&&l(0,a=u.chosenChart),"compareIntroText"in u&&l(2,i=u.compareIntroText)},[a,r,i,s,o]}class al extends fe{constructor(t){super(),ce(this,t,rl,ll,he,{optionsArray:1,chosenChart:0,compareIntroText:2})}}function xe(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function et(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function tt(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function lt(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function rt(e){let t,l,r,a,i,o;return{c(){t=T("g"),l=T("circle"),this.h()},l(s){t=G(s,"g",{transform:!0});var u=F(t);l=G(u,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),F(l).forEach(b),u.forEach(b),this.h()},h(){n(l,"hoverid",e[40]),n(l,"r","5"),n(l,"stroke","none"),n(l,"fill","#6e6e6e"),n(l,"fill-opacity",r=e[10]===null?.15:.05),n(t,"transform",a="translate("+e[38].x+","+e[14](e[38].y)+")")},m(s,u){V(s,t,u),C(t,l),i||(o=[de(l,"mouseover",e[20]),de(l,"mouseleave",e[21])],i=!0)},p(s,u){u[0]&1024&&r!==(r=s[10]===null?.15:.05)&&n(l,"fill-opacity",r),u[0]&16640&&a!==(a="translate("+s[38].x+","+s[14](s[38].y)+")")&&n(t,"transform",a)},d(s){s&&b(t),i=!1,Pe(o)}}}function at(e){let t,l,r;return{c(){t=T("circle"),this.h()},l(a){t=G(a,"circle",{transform:!0,labelid:!0,"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),F(t).forEach(b),this.h()},h(){n(t,"transform",l="translate("+e[38].x+","+(e[7]/2+e[38].y-e[13])+")"),n(t,"labelid",e[40]),n(t,"pointer-events","none"),n(t,"r","6"),n(t,"stroke","white"),n(t,"stroke-width","1px"),n(t,"fill",r=J[e[38].datum.role]),n(t,"opacity","0")},m(a,i){V(a,t,i)},p(a,i){i[0]&8352&&l!==(l="translate("+a[38].x+","+(a[7]/2+a[38].y-a[13])+")")&&n(t,"transform",l),i[0]&32&&r!==(r=J[a[38].datum.role])&&n(t,"fill",r)},d(a){a&&b(t)}}}function nl(e){let t,l;return{c(){t=T("circle"),this.h()},l(r){t=G(r,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),F(t).forEach(b),this.h()},h(){n(t,"pointer-events","none"),n(t,"r","6"),n(t,"stroke","white"),n(t,"stroke-width","1px"),n(t,"fill",l=J["custom"+(1+e[3].custom.map(ut).indexOf(e[38].datum.areacd))]),n(t,"opacity","1")},m(r,a){V(r,t,a)},p(r,a){a[0]&40&&l!==(l=J["custom"+(1+r[3].custom.map(ut).indexOf(r[38].datum.areacd))])&&n(t,"fill",l)},d(r){r&&b(t)}}}function il(e){let t,l,r;return{c(){t=T("rect"),this.h()},l(a){t=G(a,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var i=F(t);i.forEach(b),this.h()},h(){n(t,"pointer-events","none"),n(t,"transform",l=["country","uk"].includes(e[38].datum.role)?"rotate(45)":null),n(t,"x",-5),n(t,"y",-5),n(t,"width",10),n(t,"height",10),n(t,"fill",r=J["custom"+(1+e[3].custom.map(st).indexOf(e[38].datum.areacd))]),n(t,"stroke","white"),n(t,"stroke-width","1px"),n(t,"opacity","1")},m(a,i){V(a,t,i)},p(a,i){i[0]&32&&l!==(l=["country","uk"].includes(a[38].datum.role)?"rotate(45)":null)&&n(t,"transform",l),i[0]&40&&r!==(r=J["custom"+(1+a[3].custom.map(st).indexOf(a[38].datum.areacd))])&&n(t,"fill",r)},d(a){a&&b(t)}}}function nt(e){let t,l,r;function a(s,u){return u[0]&32&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[38].datum.role)),l?il:nl}let i=a(e,[-1,-1]),o=i(e);return{c(){t=T("g"),o.c(),this.h()},l(s){t=G(s,"g",{transform:!0});var u=F(t);o.l(u),u.forEach(b),this.h()},h(){n(t,"transform",r="translate("+e[38].x+","+(e[7]/2+e[38].y-e[13])+")")},m(s,u){V(s,t,u),o.m(t,null)},p(s,u){i===(i=a(s,u))&&o?o.p(s,u):(o.d(1),o=i(s),o&&(o.c(),o.m(t,null))),u[0]&8352&&r!==(r="translate("+s[38].x+","+(s[7]/2+s[38].y-s[13])+")")&&n(t,"transform",r)},d(s){s&&b(t),o.d()}}}function it(e){let t,l,r,a,i,o,s=e[17]+(Math.round(e[38].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",u,d,_,g,E,y,w,c=e[16].find(M).areanm+"",k,v,p,R;function M(...W){return e[30](e[38],...W)}return{c(){t=T("g"),l=T("circle"),r=T("g"),a=T("rect"),o=T("text"),u=$(s),_=T("g"),g=T("rect"),w=T("text"),k=$(c),this.h()},l(W){t=G(W,"g",{transform:!0});var z=F(t);l=G(z,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}),F(l).forEach(b),r=G(z,"g",{class:!0});var H=F(r);a=G(H,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),F(a).forEach(b),o=G(H,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var S=F(o);u=x(S,s),S.forEach(b),H.forEach(b),_=G(z,"g",{class:!0});var I=F(_);g=G(I,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),F(g).forEach(b),w=G(I,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var A=F(w);k=x(A,c),A.forEach(b),I.forEach(b),z.forEach(b),this.h()},h(){n(l,"pointer-events","none"),n(l,"r","7"),n(l,"stroke","white"),n(l,"stroke-width","1.5px"),n(l,"fill","#F39431"),n(l,"fill-opacity","1"),n(a,"x","5"),n(a,"y","5"),n(a,"width",i=parseFloat(e[11]===void 0?100:e[11].width)+6),n(a,"height","18.5"),n(a,"rx","3px"),n(a,"stroke","#F39431"),n(a,"fill","white"),n(a,"stroke-width","1px"),n(a,"pointer-events","none"),n(o,"x","8"),n(o,"y","19"),n(o,"text-anchor","start"),n(o,"fill","#F39431"),n(o,"font-size","14px"),n(o,"pointer-events","none"),n(r,"class","hoverLabelGroup1"),n(g,"x",E=-(parseFloat(e[12]===void 0?100:e[12].width)+6)),n(g,"y","-22"),n(g,"width",y=parseFloat(e[12]===void 0?100:e[12].width)+6),n(g,"height","18.5"),n(g,"rx","3px"),n(g,"stroke","#F39431"),n(g,"fill","white"),n(g,"stroke-width","1px"),n(g,"pointer-events","none"),n(w,"x",v=-(parseFloat(e[12]===void 0?100:e[12].width)+3)),n(w,"y","-8"),n(w,"text-anchor","start"),n(w,"fill","#F39431"),n(w,"font-size","14px"),n(w,"pointer-events","none"),n(_,"class","hoverLabelGroup2"),n(t,"transform",R="translate("+e[38].x+","+e[14](e[38].y)+")")},m(W,z){V(W,t,z),C(t,l),C(t,r),C(r,a),C(r,o),C(o,u),d=Ce.observe(o,e[29].bind(o)),C(t,_),C(_,g),C(_,w),C(w,k),p=Ce.observe(w,e[31].bind(w))},p(W,z){e=W,z[0]&2048&&i!==(i=parseFloat(e[11]===void 0?100:e[11].width)+6)&&n(a,"width",i),z[0]&256&&s!==(s=e[17]+(Math.round(e[38].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&se(u,s),z[0]&4096&&E!==(E=-(parseFloat(e[12]===void 0?100:e[12].width)+6))&&n(g,"x",E),z[0]&4096&&y!==(y=parseFloat(e[12]===void 0?100:e[12].width)+6)&&n(g,"width",y),z[0]&256&&c!==(c=e[16].find(M).areanm+"")&&se(k,c),z[0]&4096&&v!==(v=-(parseFloat(e[12]===void 0?100:e[12].width)+3))&&n(w,"x",v),z[0]&16640&&R!==(R="translate("+e[38].x+","+e[14](e[38].y)+")")&&n(t,"transform",R)},d(W){W&&b(t),d(),p()}}}function ot(e){let t,l=e[10]===e[40]&&it(e);return{c(){l&&l.c(),t=ie()},l(r){l&&l.l(r),t=ie()},m(r,a){l&&l.m(r,a),V(r,t,a)},p(r,a){r[10]===r[40]?l?l.p(r,a):(l=it(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&b(t)}}}function ol(e){let t,l,r,a,i,o,s,u,d,_,g,E,y,w,c,k,v,p,R,M,W,z,H=e[8],S=[];for(let f=0;f<H.length;f+=1)S[f]=rt(lt(e,H,f));let I=e[5],A=[];for(let f=0;f<I.length;f+=1)A[f]=at(tt(e,I,f));let Y=e[5],L=[];for(let f=0;f<Y.length;f+=1)L[f]=nt(et(e,Y,f));let j=e[8],h=[];for(let f=0;f<j.length;f+=1)h[f]=ot(xe(e,j,f));return{c(){t=N("div"),l=N("p"),r=$(e[0]),a=Q(),i=N("div"),o=T("svg"),s=T("g"),u=T("g");for(let f=0;f<S.length;f+=1)S[f].c();d=T("g"),_=T("line"),y=T("g");for(let f=0;f<A.length;f+=1)A[f].c();w=T("g");for(let f=0;f<L.length;f+=1)L[f].c();k=T("g"),p=T("g");for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){t=q(f,"DIV",{class:!0,style:!0});var P=F(t);l=q(P,"P",{class:!0});var m=F(l);r=x(m,e[0]),m.forEach(b),a=X(P),i=q(P,"DIV",{class:!0});var B=F(i);o=G(B,"svg",{class:!0,height:!0,width:!0});var ne=F(o);s=G(ne,"g",{class:!0,transform:!0});var D=F(s);u=G(D,"g",{class:!0});var ue=F(u);for(let O=0;O<S.length;O+=1)S[O].l(ue);ue.forEach(b),d=G(D,"g",{class:!0,transform:!0});var ve=F(d);_=G(ve,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),F(_).forEach(b),ve.forEach(b),y=G(D,"g",{class:!0});var be=F(y);for(let O=0;O<A.length;O+=1)A[O].l(be);be.forEach(b),w=G(D,"g",{class:!0,opacity:!0});var ke=F(w);for(let O=0;O<L.length;O+=1)L[O].l(ke);ke.forEach(b),k=G(D,"g",{class:!0,opacity:!0});var Le=F(k);Le.forEach(b),p=G(D,"g",{class:!0});var we=F(p);for(let O=0;O<h.length;O+=1)h[O].l(we);we.forEach(b),D.forEach(b),ne.forEach(b),B.forEach(b),P.forEach(b),this.h()},h(){n(l,"class","col1 svelte-12bpxe2"),n(u,"class","backgroundCirclesGroup"),n(_,"x1","0"),n(_,"x2","0"),n(_,"y1","-10"),n(_,"y2",g=e[7]+10),n(_,"stroke","#871A5B"),n(_,"stroke-width","1.5px"),n(d,"class","medianLineGroup"),n(d,"transform",E="translate("+e[6](0)+",0)"),n(y,"class","labelsCirclesGroup"),n(w,"class","primaryCirclesGroup"),n(w,"opacity",c=e[10]===null?1:.1),n(k,"class","labelsGroup"),n(k,"opacity",v=e[10]===null?1:0),n(p,"class","hoverCirclesGroup"),n(s,"class","chart-container"),n(s,"transform",R="translate("+e[9].left+","+e[9].top+")"),n(o,"class",M=Re("beeswarm-row-svg-"+e[2])+" svelte-12bpxe2"),n(o,"height",e[15]),n(o,"width",W=e[4]-e[1]),n(i,"class","svg-container"),n(t,"class","rowContainer svelte-12bpxe2"),Z(t,"grid-template-columns","[line1] "+e[1]+"px [line2] "+(e[4]-e[1])+"px [end]"),Z(t,"background-color",e[2]%2===0?"#fafafa":"#ffffff"),Me(()=>e[32].call(t))},m(f,P){V(f,t,P),C(t,l),C(l,r),C(t,a),C(t,i),C(i,o),C(o,s),C(s,u);for(let m=0;m<S.length;m+=1)S[m]&&S[m].m(u,null);C(s,d),C(d,_),C(s,y);for(let m=0;m<A.length;m+=1)A[m]&&A[m].m(y,null);C(s,w);for(let m=0;m<L.length;m+=1)L[m]&&L[m].m(w,null);C(s,k),C(s,p);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(p,null);z=ze(t,e[32].bind(t))},p(f,P){if(P[0]&1&&se(r,f[0]),P[0]&3163392){H=f[8];let m;for(m=0;m<H.length;m+=1){const B=lt(f,H,m);S[m]?S[m].p(B,P):(S[m]=rt(B),S[m].c(),S[m].m(u,null))}for(;m<S.length;m+=1)S[m].d(1);S.length=H.length}if(P[0]&128&&g!==(g=f[7]+10)&&n(_,"y2",g),P[0]&64&&E!==(E="translate("+f[6](0)+",0)")&&n(d,"transform",E),P[0]&8352){I=f[5];let m;for(m=0;m<I.length;m+=1){const B=tt(f,I,m);A[m]?A[m].p(B,P):(A[m]=at(B),A[m].c(),A[m].m(y,null))}for(;m<A.length;m+=1)A[m].d(1);A.length=I.length}if(P[0]&8360){Y=f[5];let m;for(m=0;m<Y.length;m+=1){const B=et(f,Y,m);L[m]?L[m].p(B,P):(L[m]=nt(B),L[m].c(),L[m].m(w,null))}for(;m<L.length;m+=1)L[m].d(1);L.length=Y.length}if(P[0]&1024&&c!==(c=f[10]===null?1:.1)&&n(w,"opacity",c),P[0]&1024&&v!==(v=f[10]===null?1:0)&&n(k,"opacity",v),P[0]&1006848){j=f[8];let m;for(m=0;m<j.length;m+=1){const B=xe(f,j,m);h[m]?h[m].p(B,P):(h[m]=ot(B),h[m].c(),h[m].m(p,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=j.length}P[0]&512&&R!==(R="translate("+f[9].left+","+f[9].top+")")&&n(s,"transform",R),P[0]&4&&M!==(M=Re("beeswarm-row-svg-"+f[2])+" svelte-12bpxe2")&&n(o,"class",M),P[0]&18&&W!==(W=f[4]-f[1])&&n(o,"width",W),P[0]&18&&Z(t,"grid-template-columns","[line1] "+f[1]+"px [line2] "+(f[4]-f[1])+"px [end]"),P[0]&4&&Z(t,"background-color",f[2]%2===0?"#fafafa":"#ffffff")},i:oe,o:oe,d(f){f&&b(t),ae(S,f),ae(A,f),ae(L,f),ae(h,f),z()}}}const st=e=>e.areacd,ut=e=>e.areacd;function sl(e,t,l){let r,a,i,o,s,u,d,_,{name:g,yDomain:E,col1Width:y,siblingsDataCalcRange:w,indicator:c,id:k,selectedAreasWithData:v,checkboxedRoles:p,xDomain:R,xDom:M}=t,W=400,z=40,H=Ee("areas"),S=c.prefix===null?"":c.prefix==="pounds"?"£":c.prefix,I=c.suffix===null?"":c.suffix;c.subText===null||c.subText,c.subTextShort===null||c.subTextShort;let A=Math.pow(10,c.roundingFactor);At(()=>{});let Y=null;function L(D){l(10,Y=parseFloat(We(this).attr("hoverid")))}function j(D){l(10,Y=null)}let h,f;function P(){var D;h=(D=Ie.entries.get(this))==null?void 0:D.contentRect,l(11,h)}const m=(D,ue)=>ue.areacd===D.datum.areacd;function B(){var D;f=(D=Ie.entries.get(this))==null?void 0:D.contentRect,l(12,f)}function ne(){W=this.clientWidth,l(4,W)}return e.$$set=D=>{"name"in D&&l(0,g=D.name),"yDomain"in D&&l(23,E=D.yDomain),"col1Width"in D&&l(1,y=D.col1Width),"siblingsDataCalcRange"in D&&l(24,w=D.siblingsDataCalcRange),"indicator"in D&&l(25,c=D.indicator),"id"in D&&l(2,k=D.id),"selectedAreasWithData"in D&&l(26,v=D.selectedAreasWithData),"checkboxedRoles"in D&&l(3,p=D.checkboxedRoles),"xDomain"in D&&l(22,R=D.xDomain),"xDom"in D&&l(27,M=D.xDom)},e.$$.update=()=>{e.$$.dirty[0]&530&&l(28,a=W-r.left-r.right-y),e.$$.dirty[0]&512&&l(7,i=z-r.top-r.bottom),e.$$.dirty[0]&276824064&&l(6,o=pe().domain(E).range([0,a])),e.$$.dirty[0]&50331712&&l(8,s=new Ae(w,4,D=>o((D.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(D.calcYValue),c.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&256&&l(22,R=s!=null?[Math.min(...s.map(D=>D.y)),Math.max(...s.map(D=>D.y))]:[0,1]),e.$$.dirty[0]&134217856&&l(14,u=pe().domain(M).range([0,i])),e.$$.dirty[0]&100663360&&l(5,d=new Ae(v,7,D=>o((D.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(D.calcYValue),c.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&32&&l(13,_=Math.min(...d.map(D=>D.y))+(Math.max(...d.map(D=>D.y))-Math.min(...d.map(D=>D.y)))/2)},l(9,r={top:10,left:10,right:10,bottom:10}),[g,y,k,p,W,d,o,i,s,r,Y,h,f,_,u,z,H,S,I,A,L,j,R,E,w,c,v,M,a,P,m,B,ne]}class ul extends fe{constructor(t){super(),ce(this,t,sl,ol,he,{name:0,yDomain:23,col1Width:1,siblingsDataCalcRange:24,indicator:25,id:2,selectedAreasWithData:26,checkboxedRoles:3,xDomain:22,xDom:27},null,[-1,-1])}}function ft(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function ct(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function ht(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function dt(e,t,l){const r=e.slice();return r[38]=t[l],r[40]=l,r}function _t(e){let t,l,r,a,i,o;return{c(){t=T("g"),l=T("circle"),this.h()},l(s){t=G(s,"g",{transform:!0});var u=F(t);l=G(u,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0,"fill-opacity":!0}),F(l).forEach(b),u.forEach(b),this.h()},h(){n(l,"hoverid",e[40]),n(l,"r","5"),n(l,"stroke","none"),n(l,"fill","#6e6e6e"),n(l,"fill-opacity",r=e[10]===null?.15:.05),n(t,"transform",a="translate("+e[38].x+","+e[14](e[38].y)+")")},m(s,u){V(s,t,u),C(t,l),i||(o=[de(l,"mouseover",e[20]),de(l,"mouseleave",e[21])],i=!0)},p(s,u){u[0]&1024&&r!==(r=s[10]===null?.15:.05)&&n(l,"fill-opacity",r),u[0]&16640&&a!==(a="translate("+s[38].x+","+s[14](s[38].y)+")")&&n(t,"transform",a)},d(s){s&&b(t),i=!1,Pe(o)}}}function mt(e){let t,l,r;return{c(){t=T("circle"),this.h()},l(a){t=G(a,"circle",{transform:!0,labelid:!0,"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),F(t).forEach(b),this.h()},h(){n(t,"transform",l="translate("+e[38].x+","+(e[7]/2+e[38].y-e[13])+")"),n(t,"labelid",e[40]),n(t,"pointer-events","none"),n(t,"r","6"),n(t,"stroke","white"),n(t,"stroke-width","1px"),n(t,"fill",r=J[e[38].datum.role]),n(t,"opacity","0")},m(a,i){V(a,t,i)},p(a,i){i[0]&8352&&l!==(l="translate("+a[38].x+","+(a[7]/2+a[38].y-a[13])+")")&&n(t,"transform",l),i[0]&32&&r!==(r=J[a[38].datum.role])&&n(t,"fill",r)},d(a){a&&b(t)}}}function fl(e){let t,l;return{c(){t=T("circle"),this.h()},l(r){t=G(r,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),F(t).forEach(b),this.h()},h(){n(t,"pointer-events","none"),n(t,"r","6"),n(t,"stroke","white"),n(t,"stroke-width","1px"),n(t,"fill",l=J["custom"+(1+e[3].custom.map(kt).indexOf(e[38].datum.areacd))]),n(t,"opacity","1")},m(r,a){V(r,t,a)},p(r,a){a[0]&40&&l!==(l=J["custom"+(1+r[3].custom.map(kt).indexOf(r[38].datum.areacd))])&&n(t,"fill",l)},d(r){r&&b(t)}}}function cl(e){let t,l,r;return{c(){t=T("rect"),this.h()},l(a){t=G(a,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var i=F(t);i.forEach(b),this.h()},h(){n(t,"pointer-events","none"),n(t,"transform",l=["country","uk"].includes(e[38].datum.role)?"rotate(45)":null),n(t,"x",-5),n(t,"y",-5),n(t,"width",10),n(t,"height",10),n(t,"fill",r=J["custom"+(1+e[3].custom.map(bt).indexOf(e[38].datum.areacd))]),n(t,"stroke","white"),n(t,"stroke-width","1px"),n(t,"opacity","1")},m(a,i){V(a,t,i)},p(a,i){i[0]&32&&l!==(l=["country","uk"].includes(a[38].datum.role)?"rotate(45)":null)&&n(t,"transform",l),i[0]&40&&r!==(r=J["custom"+(1+a[3].custom.map(bt).indexOf(a[38].datum.areacd))])&&n(t,"fill",r)},d(a){a&&b(t)}}}function gt(e){let t,l,r;function a(s,u){return u[0]&32&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[38].datum.role)),l?cl:fl}let i=a(e,[-1,-1]),o=i(e);return{c(){t=T("g"),o.c(),this.h()},l(s){t=G(s,"g",{transform:!0});var u=F(t);o.l(u),u.forEach(b),this.h()},h(){n(t,"transform",r="translate("+e[38].x+","+(e[7]/2+e[38].y-e[13])+")")},m(s,u){V(s,t,u),o.m(t,null)},p(s,u){i===(i=a(s,u))&&o?o.p(s,u):(o.d(1),o=i(s),o&&(o.c(),o.m(t,null))),u[0]&8352&&r!==(r="translate("+s[38].x+","+(s[7]/2+s[38].y-s[13])+")")&&n(t,"transform",r)},d(s){s&&b(t),o.d()}}}function pt(e){let t,l,r,a,i,o,s=e[17]+(Math.round(e[38].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"",u,d,_,g,E,y,w,c=e[16].find(M).areanm+"",k,v,p,R;function M(...W){return e[30](e[38],...W)}return{c(){t=T("g"),l=T("circle"),r=T("g"),a=T("rect"),o=T("text"),u=$(s),_=T("g"),g=T("rect"),w=T("text"),k=$(c),this.h()},l(W){t=G(W,"g",{transform:!0});var z=F(t);l=G(z,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}),F(l).forEach(b),r=G(z,"g",{class:!0});var H=F(r);a=G(H,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),F(a).forEach(b),o=G(H,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var S=F(o);u=x(S,s),S.forEach(b),H.forEach(b),_=G(z,"g",{class:!0});var I=F(_);g=G(I,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,stroke:!0,fill:!0,"stroke-width":!0,"pointer-events":!0}),F(g).forEach(b),w=G(I,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0,"pointer-events":!0});var A=F(w);k=x(A,c),A.forEach(b),I.forEach(b),z.forEach(b),this.h()},h(){n(l,"pointer-events","none"),n(l,"r","7"),n(l,"stroke","white"),n(l,"stroke-width","1.5px"),n(l,"fill","#F39431"),n(l,"fill-opacity","1"),n(a,"x","5"),n(a,"y","5"),n(a,"width",i=parseFloat(e[11]===void 0?100:e[11].width)+6),n(a,"height","18.5"),n(a,"rx","3px"),n(a,"stroke","#F39431"),n(a,"fill","white"),n(a,"stroke-width","1px"),n(a,"pointer-events","none"),n(o,"x","8"),n(o,"y","19"),n(o,"text-anchor","start"),n(o,"fill","#F39431"),n(o,"font-size","14px"),n(o,"pointer-events","none"),n(r,"class","hoverLabelGroup1"),n(g,"x",E=-(parseFloat(e[12]===void 0?100:e[12].width)+6)),n(g,"y","-22"),n(g,"width",y=parseFloat(e[12]===void 0?100:e[12].width)+6),n(g,"height","18.5"),n(g,"rx","3px"),n(g,"stroke","#F39431"),n(g,"fill","white"),n(g,"stroke-width","1px"),n(g,"pointer-events","none"),n(w,"x",v=-(parseFloat(e[12]===void 0?100:e[12].width)+3)),n(w,"y","-8"),n(w,"text-anchor","start"),n(w,"fill","#F39431"),n(w,"font-size","14px"),n(w,"pointer-events","none"),n(_,"class","hoverLabelGroup2"),n(t,"transform",R="translate("+e[38].x+","+e[14](e[38].y)+")")},m(W,z){V(W,t,z),C(t,l),C(t,r),C(r,a),C(r,o),C(o,u),d=Ce.observe(o,e[29].bind(o)),C(t,_),C(_,g),C(_,w),C(w,k),p=Ce.observe(w,e[31].bind(w))},p(W,z){e=W,z[0]&2048&&i!==(i=parseFloat(e[11]===void 0?100:e[11].width)+6)&&n(a,"width",i),z[0]&256&&s!==(s=e[17]+(Math.round(e[38].datum.value*e[19])/e[19]).toLocaleString()+e[18]+"")&&se(u,s),z[0]&4096&&E!==(E=-(parseFloat(e[12]===void 0?100:e[12].width)+6))&&n(g,"x",E),z[0]&4096&&y!==(y=parseFloat(e[12]===void 0?100:e[12].width)+6)&&n(g,"width",y),z[0]&256&&c!==(c=e[16].find(M).areanm+"")&&se(k,c),z[0]&4096&&v!==(v=-(parseFloat(e[12]===void 0?100:e[12].width)+3))&&n(w,"x",v),z[0]&16640&&R!==(R="translate("+e[38].x+","+e[14](e[38].y)+")")&&n(t,"transform",R)},d(W){W&&b(t),d(),p()}}}function vt(e){let t,l=e[10]===e[40]&&pt(e);return{c(){l&&l.c(),t=ie()},l(r){l&&l.l(r),t=ie()},m(r,a){l&&l.m(r,a),V(r,t,a)},p(r,a){r[10]===r[40]?l?l.p(r,a):(l=pt(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&b(t)}}}function hl(e){let t,l,r,a,i,o,s,u,d,_,g,E,y,w,c,k,v,p,R,M,W,z,H=e[8],S=[];for(let f=0;f<H.length;f+=1)S[f]=_t(dt(e,H,f));let I=e[5],A=[];for(let f=0;f<I.length;f+=1)A[f]=mt(ht(e,I,f));let Y=e[5],L=[];for(let f=0;f<Y.length;f+=1)L[f]=gt(ct(e,Y,f));let j=e[8],h=[];for(let f=0;f<j.length;f+=1)h[f]=vt(ft(e,j,f));return{c(){t=N("div"),l=N("p"),r=$(e[0]),a=Q(),i=N("div"),o=T("svg"),s=T("g"),u=T("g");for(let f=0;f<S.length;f+=1)S[f].c();d=T("g"),_=T("line"),y=T("g");for(let f=0;f<A.length;f+=1)A[f].c();w=T("g");for(let f=0;f<L.length;f+=1)L[f].c();k=T("g"),p=T("g");for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){t=q(f,"DIV",{class:!0,style:!0});var P=F(t);l=q(P,"P",{class:!0});var m=F(l);r=x(m,e[0]),m.forEach(b),a=X(P),i=q(P,"DIV",{class:!0});var B=F(i);o=G(B,"svg",{class:!0,height:!0,width:!0});var ne=F(o);s=G(ne,"g",{class:!0,transform:!0});var D=F(s);u=G(D,"g",{class:!0});var ue=F(u);for(let O=0;O<S.length;O+=1)S[O].l(ue);ue.forEach(b),d=G(D,"g",{class:!0,transform:!0});var ve=F(d);_=G(ve,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),F(_).forEach(b),ve.forEach(b),y=G(D,"g",{class:!0});var be=F(y);for(let O=0;O<A.length;O+=1)A[O].l(be);be.forEach(b),w=G(D,"g",{class:!0,opacity:!0});var ke=F(w);for(let O=0;O<L.length;O+=1)L[O].l(ke);ke.forEach(b),k=G(D,"g",{class:!0,opacity:!0});var Le=F(k);Le.forEach(b),p=G(D,"g",{class:!0});var we=F(p);for(let O=0;O<h.length;O+=1)h[O].l(we);we.forEach(b),D.forEach(b),ne.forEach(b),B.forEach(b),P.forEach(b),this.h()},h(){n(l,"class","col1 svelte-12bpxe2"),n(u,"class","backgroundCirclesGroup"),n(_,"x1","0"),n(_,"x2","0"),n(_,"y1","-10"),n(_,"y2",g=e[7]+10),n(_,"stroke","#871A5B"),n(_,"stroke-width","1.5px"),n(d,"class","medianLineGroup"),n(d,"transform",E="translate("+e[6](0)+",0)"),n(y,"class","labelsCirclesGroup"),n(w,"class","primaryCirclesGroup"),n(w,"opacity",c=e[10]===null?1:.1),n(k,"class","labelsGroup"),n(k,"opacity",v=e[10]===null?1:0),n(p,"class","hoverCirclesGroup"),n(s,"class","chart-container"),n(s,"transform",R="translate("+e[9].left+","+e[9].top+")"),n(o,"class",M=Re("beeswarm-row-svg-"+e[2])+" svelte-12bpxe2"),n(o,"height",e[15]),n(o,"width",W=e[4]-e[1]),n(i,"class","svg-container"),n(t,"class","rowContainer svelte-12bpxe2"),Z(t,"grid-template-columns","[line1] "+e[1]+"px [line2] "+(e[4]-e[1])+"px [end]"),Z(t,"background-color",e[2]%2===0?"#fafafa":"#ffffff"),Me(()=>e[32].call(t))},m(f,P){V(f,t,P),C(t,l),C(l,r),C(t,a),C(t,i),C(i,o),C(o,s),C(s,u);for(let m=0;m<S.length;m+=1)S[m]&&S[m].m(u,null);C(s,d),C(d,_),C(s,y);for(let m=0;m<A.length;m+=1)A[m]&&A[m].m(y,null);C(s,w);for(let m=0;m<L.length;m+=1)L[m]&&L[m].m(w,null);C(s,k),C(s,p);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(p,null);z=ze(t,e[32].bind(t))},p(f,P){if(P[0]&1&&se(r,f[0]),P[0]&3163392){H=f[8];let m;for(m=0;m<H.length;m+=1){const B=dt(f,H,m);S[m]?S[m].p(B,P):(S[m]=_t(B),S[m].c(),S[m].m(u,null))}for(;m<S.length;m+=1)S[m].d(1);S.length=H.length}if(P[0]&128&&g!==(g=f[7]+10)&&n(_,"y2",g),P[0]&64&&E!==(E="translate("+f[6](0)+",0)")&&n(d,"transform",E),P[0]&8352){I=f[5];let m;for(m=0;m<I.length;m+=1){const B=ht(f,I,m);A[m]?A[m].p(B,P):(A[m]=mt(B),A[m].c(),A[m].m(y,null))}for(;m<A.length;m+=1)A[m].d(1);A.length=I.length}if(P[0]&8360){Y=f[5];let m;for(m=0;m<Y.length;m+=1){const B=ct(f,Y,m);L[m]?L[m].p(B,P):(L[m]=gt(B),L[m].c(),L[m].m(w,null))}for(;m<L.length;m+=1)L[m].d(1);L.length=Y.length}if(P[0]&1024&&c!==(c=f[10]===null?1:.1)&&n(w,"opacity",c),P[0]&1024&&v!==(v=f[10]===null?1:0)&&n(k,"opacity",v),P[0]&1006848){j=f[8];let m;for(m=0;m<j.length;m+=1){const B=ft(f,j,m);h[m]?h[m].p(B,P):(h[m]=vt(B),h[m].c(),h[m].m(p,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=j.length}P[0]&512&&R!==(R="translate("+f[9].left+","+f[9].top+")")&&n(s,"transform",R),P[0]&4&&M!==(M=Re("beeswarm-row-svg-"+f[2])+" svelte-12bpxe2")&&n(o,"class",M),P[0]&18&&W!==(W=f[4]-f[1])&&n(o,"width",W),P[0]&18&&Z(t,"grid-template-columns","[line1] "+f[1]+"px [line2] "+(f[4]-f[1])+"px [end]"),P[0]&4&&Z(t,"background-color",f[2]%2===0?"#fafafa":"#ffffff")},i:oe,o:oe,d(f){f&&b(t),ae(S,f),ae(A,f),ae(L,f),ae(h,f),z()}}}const bt=e=>e.areacd,kt=e=>e.areacd;function dl(e,t,l){let r,a,i,o,s,u,d,_,{name:g,yDomain:E,col1Width:y,siblingsDataCalcRange:w,indicator:c,id:k,selectedAreasWithData:v,checkboxedRoles:p,xDomain:R,xDom:M}=t,W=400,z=40,H=Ee("areas"),S=c.prefix===null?"":c.prefix==="pounds"?"£":c.prefix,I=c.suffix===null?"":c.suffix;c.subText===null||c.subText,c.subTextShort===null||c.subTextShort;let A=Math.pow(10,c.roundingFactor);At(()=>{});let Y=null;function L(D){l(10,Y=parseFloat(We(this).attr("hoverid")))}function j(D){l(10,Y=null)}let h,f;function P(){var D;h=(D=Ie.entries.get(this))==null?void 0:D.contentRect,l(11,h)}const m=(D,ue)=>ue.areacd===D.datum.areacd;function B(){var D;f=(D=Ie.entries.get(this))==null?void 0:D.contentRect,l(12,f)}function ne(){W=this.clientWidth,l(4,W)}return e.$$set=D=>{"name"in D&&l(0,g=D.name),"yDomain"in D&&l(23,E=D.yDomain),"col1Width"in D&&l(1,y=D.col1Width),"siblingsDataCalcRange"in D&&l(24,w=D.siblingsDataCalcRange),"indicator"in D&&l(25,c=D.indicator),"id"in D&&l(2,k=D.id),"selectedAreasWithData"in D&&l(26,v=D.selectedAreasWithData),"checkboxedRoles"in D&&l(3,p=D.checkboxedRoles),"xDomain"in D&&l(22,R=D.xDomain),"xDom"in D&&l(27,M=D.xDom)},e.$$.update=()=>{e.$$.dirty[0]&530&&l(28,a=W-r.left-r.right-y),e.$$.dirty[0]&512&&l(7,i=z-r.top-r.bottom),e.$$.dirty[0]&276824064&&l(6,o=pe().domain(E).range([0,a])),e.$$.dirty[0]&50331712&&l(8,s=new Ae(w,4,D=>o((D.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(D.calcYValue),c.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&256&&l(22,R=s!=null?[Math.min(...s.map(D=>D.y)),Math.max(...s.map(D=>D.y))]:[0,1]),e.$$.dirty[0]&134217856&&l(14,u=pe().domain(M).range([0,i])),e.$$.dirty[0]&100663360&&l(5,d=new Ae(v,7,D=>o((D.calcYValue<0?-1:1)*(1-Math.pow(1-Math.abs(D.calcYValue),c.beeswarmPower)))).calculateYPositions()),e.$$.dirty[0]&32&&l(13,_=Math.min(...d.map(D=>D.y))+(Math.max(...d.map(D=>D.y))-Math.min(...d.map(D=>D.y)))/2)},l(9,r={top:10,left:10,right:10,bottom:10}),[g,y,k,p,W,d,o,i,s,r,Y,h,f,_,u,z,H,S,I,A,L,j,R,E,w,c,v,M,a,P,m,B,ne]}class _l extends fe{constructor(t){super(),ce(this,t,dl,hl,he,{name:0,yDomain:23,col1Width:1,siblingsDataCalcRange:24,indicator:25,id:2,selectedAreasWithData:26,checkboxedRoles:3,xDomain:22,xDom:27},null,[-1,-1])}}function wt(e,t,l){const r=e.slice();return r[28]=t[l],r[29]=t,r[30]=l,r}function ml(e){let t,l=e[9].unit+"",r;return{c(){t=N("p"),r=$(l),this.h()},l(a){t=q(a,"P",{class:!0});var i=F(t);r=x(i,l),i.forEach(b),this.h()},h(){n(t,"class","svelte-hj2rm3")},m(a,i){V(a,t,i),C(t,r)},p:oe,d(a){a&&b(t)}}}function gl(e){let t,l,r;function a(...u){return e[24](e[28],...u)}function i(...u){return e[25](e[28],...u)}function o(u){e[26](u,e[30])}let s={name:{1:"Most deprived",2:"Some deprivation",3:"Average",4:"Low deprivation",5:"Least deprived"}[e[28]],yDomain:e[6],col1Width:zt,siblingsDataCalcRange:e[8].filter(a),selectedAreasWithData:e[7].filter(i),indicator:e[9],id:e[30],checkboxedRoles:e[0],xDom:e[5].length>2?e[5][2]:[0,1]};return e[5][e[30]]!==void 0&&(s.xDomain=e[5][e[30]]),t=new _l({props:s}),_e.push(()=>me(t,"xDomain",o)),{c(){ee(t.$$.fragment)},l(u){te(t.$$.fragment,u)},m(u,d){le(t,u,d),r=!0},p(u,d){e=u;const _={};d&16&&(_.name={1:"Most deprived",2:"Some deprivation",3:"Average",4:"Low deprivation",5:"Least deprived"}[e[28]]),d&64&&(_.yDomain=e[6]),d&276&&(_.siblingsDataCalcRange=e[8].filter(a)),d&148&&(_.selectedAreasWithData=e[7].filter(i)),d&1&&(_.checkboxedRoles=e[0]),d&32&&(_.xDom=e[5].length>2?e[5][2]:[0,1]),!l&&d&32&&(l=!0,_.xDomain=e[5][e[30]],ge(()=>l=!1)),t.$set(_)},i(u){r||(K(t.$$.fragment,u),r=!0)},o(u){U(t.$$.fragment,u),r=!1},d(u){re(t,u)}}}function pl(e){let t,l,r;function a(...d){return e[20](e[28],...d)}function i(...d){return e[21](e[28],...d)}function o(...d){return e[22](e[28],...d)}function s(d){e[23](d,e[30])}let u={name:e[1].find(a).alternativeDescription,yDomain:e[6],col1Width:zt,siblingsDataCalcRange:e[8].filter(i),selectedAreasWithData:e[7].filter(o),indicator:e[9],id:e[30],checkboxedRoles:e[0],xDom:e[5].length>2?e[5][2]:[0,1]};return e[5][e[30]]!==void 0&&(u.xDomain=e[5][e[30]]),t=new ul({props:u}),_e.push(()=>me(t,"xDomain",s)),{c(){ee(t.$$.fragment)},l(d){te(t.$$.fragment,d)},m(d,_){le(t,d,_),r=!0},p(d,_){e=d;const g={};_&18&&(g.name=e[1].find(a).alternativeDescription),_&64&&(g.yDomain=e[6]),_&276&&(g.siblingsDataCalcRange=e[8].filter(i)),_&148&&(g.selectedAreasWithData=e[7].filter(o)),_&1&&(g.checkboxedRoles=e[0]),_&32&&(g.xDom=e[5].length>2?e[5][2]:[0,1]),!l&&_&32&&(l=!0,g.xDomain=e[5][e[30]],ge(()=>l=!1)),t.$set(g)},i(d){r||(K(t.$$.fragment,d),r=!0)},o(d){U(t.$$.fragment,d),r=!1},d(d){re(t,d)}}}function yt(e){let t,l,r,a;const i=[pl,gl],o=[];function s(u,d){return u[10][u[3]-1]==="Health cluster"?0:1}return t=s(e),l=o[t]=i[t](e),{c(){l.c(),r=ie()},l(u){l.l(u),r=ie()},m(u,d){o[t].m(u,d),V(u,r,d),a=!0},p(u,d){let _=t;t=s(u),t===_?o[t].p(u,d):(ye(),U(o[_],1,1,()=>{o[_]=null}),De(),l=o[t],l?l.p(u,d):(l=o[t]=i[t](u),l.c()),K(l,1),l.m(r.parentNode,r))},i(u){a||(K(l),a=!0)},o(u){U(l),a=!1},d(u){o[t].d(u),u&&b(r)}}}function vl(e){let t,l,r,a,i,o,s,u,d,_,g=e[9].label+"",E,y,w,c,k,v,p,R,M,W;function z(h){e[18](h)}let H={compareIntroText:!0,optionsArray:e[10]};e[3]!==void 0&&(H.chosenChart=e[3]),o=new al({props:H}),_e.push(()=>me(o,"chosenChart",z));let S=e[9].unit!=null&&ml(e);function I(h){e[19](h)}let A={altText:"Select areas",selectedAreas:[],areasWithData:[...new Set(e[11].filter(kl).map(wl))]};e[0]!==void 0&&(A.checkboxedRoles=e[0]),c=new Mt({props:A}),_e.push(()=>me(c,"checkboxedRoles",I));let Y=e[4],L=[];for(let h=0;h<Y.length;h+=1)L[h]=yt(wt(e,Y,h));const j=h=>U(L[h],1,1,()=>{L[h]=null});return{c(){t=N("section"),l=N("h1"),r=$("Compare across areas"),a=Q(),i=N("div"),ee(o.$$.fragment),u=Q(),d=N("div"),_=N("h3"),E=$(g),y=Q(),S&&S.c(),w=Q(),ee(c.$$.fragment),v=Q();for(let h=0;h<L.length;h+=1)L[h].c();p=Q(),R=N("img"),this.h()},l(h){t=q(h,"SECTION",{title:!0,class:!0});var f=F(t);l=q(f,"H1",{});var P=F(l);r=x(P,"Compare across areas"),P.forEach(b),a=X(f),i=q(f,"DIV",{});var m=F(i);te(o.$$.fragment,m),u=X(m),d=q(m,"DIV",{class:!0});var B=F(d);_=q(B,"H3",{class:!0});var ne=F(_);E=x(ne,g),ne.forEach(b),y=X(B),S&&S.l(B),w=X(B),te(c.$$.fragment,B),v=X(B);for(let D=0;D<L.length;D+=1)L[D].l(B);B.forEach(b),m.forEach(b),p=X(f),R=q(f,"IMG",{style:!0,width:!0,src:!0,alt:!0}),f.forEach(b),this.h()},h(){n(_,"class","svelte-hj2rm3"),n(d,"class","mainContainer svelte-hj2rm3"),Z(R,"padding-top","10px"),n(R,"width","75%"),Ft(R.src,M=`${Fe}/img/image1.png`)||n(R,"src",M),n(R,"alt","download buttons"),n(t,"title","Compare across areas"),n(t,"class","svelte-hj2rm3")},m(h,f){V(h,t,f),C(t,l),C(l,r),C(t,a),C(t,i),le(o,i,null),C(i,u),C(i,d),C(d,_),C(_,E),C(d,y),S&&S.m(d,null),C(d,w),le(c,d,null),C(d,v);for(let P=0;P<L.length;P+=1)L[P]&&L[P].m(d,null);C(t,p),C(t,R),W=!0},p(h,[f]){const P={};!s&&f&8&&(s=!0,P.chosenChart=h[3],ge(()=>s=!1)),o.$set(P),h[9].unit!=null&&S.p(h,f);const m={};if(!k&&f&1&&(k=!0,m.checkboxedRoles=h[0],ge(()=>k=!1)),c.$set(m),f&2047){Y=h[4];let B;for(B=0;B<Y.length;B+=1){const ne=wt(h,Y,B);L[B]?(L[B].p(ne,f),K(L[B],1)):(L[B]=yt(ne),L[B].c(),K(L[B],1),L[B].m(d,null))}for(ye(),B=Y.length;B<L.length;B+=1)j(B);De()}},i(h){if(!W){K(o.$$.fragment,h),K(c.$$.fragment,h);for(let f=0;f<Y.length;f+=1)K(L[f]);W=!0}},o(h){U(o.$$.fragment,h),U(c.$$.fragment,h),L=L.filter(Boolean);for(let f=0;f<L.length;f+=1)U(L[f]);W=!1},d(h){h&&b(t),re(o),S&&S.d(),re(c),ae(L,h)}}}let zt=200;function bl(e,t){const l=e.map(a=>a[t]);l.sort((a,i)=>a-i);const r=l.length;if(r%2===0){const a=l[r/2-1],i=l[r/2];return(a+i)/2}else return l[Math.floor(r/2)]}const kl=e=>!["K02000001","E92000001","N92000002","S92000003","W92000004"].includes(e.areacd),wl=e=>e.areacd;function yl(e,t,l){let r,a,i,o,s,u,d,_,{indicators:g,data:E,checkboxedRoles:y,areasForPlotting:w,clustersLookup:c,areasGeogInfo:k}=t,v=g[0],p=1,R=["Health cluster","Region","Deprivation level"],M=Ee("areas");function W(h){p=h,l(3,p)}function z(h){y=h,l(0,y)}const H=(h,f)=>["health","all"].includes(f.model)&f.id===h,S=(h,f)=>k.find(P=>P.areacd===f.areacd).health===h,I=(h,f)=>k.find(P=>P.areacd===f.areacd).health===h;function A(h,f){e.$$.not_equal(_[f],h)&&(_[f]=h,l(5,_))}const Y=(h,f)=>k.find(P=>P.areacd===f.areacd).imd===h,L=(h,f)=>k.find(P=>P.areacd===f.areacd).imd===h;function j(h,f){e.$$.not_equal(_[f],h)&&(_[f]=h,l(5,_))}return e.$$set=h=>{"indicators"in h&&l(12,g=h.indicators),"data"in h&&l(13,E=h.data),"checkboxedRoles"in h&&l(0,y=h.checkboxedRoles),"areasForPlotting"in h&&l(14,w=h.areasForPlotting),"clustersLookup"in h&&l(1,c=h.clustersLookup),"areasGeogInfo"in h&&l(2,k=h.areasGeogInfo)},e.$$.update=()=>{e.$$.dirty&8&&console.log(R[p-1]),e.$$.dirty&24577&&l(15,r=E.filter(h=>h.codeId===v.id).filter(h=>w.includes(h.areacd)||(y.custom===null?["K02000001","E92000001","N92000002","S92000003","W92000004"]:y.custom.map(f=>f.areacd)).includes(h.areacd)).filter(h=>h.value!==null)),e.$$.dirty&32768&&l(17,a=bl(r,"value")),e.$$.dirty&163840&&l(16,i=Math.max(Math.abs(a-Math.min(...r.map(h=>h.value))),Math.abs(a-Math.max(...r.map(h=>h.value))))),e.$$.dirty&196608,e.$$.dirty&229376&&l(8,o=r.map(h=>({...h,calcYValue:(h.value-a)/i}))),e.$$.dirty&204801&&l(7,s=E.filter(h=>h.codeId===v.id).filter(h=>(y.custom===null?[]:y.custom.map(f=>f.areacd)).includes(h.areacd)).filter(h=>h.value!==null).map(h=>({...h,calcYValue:(h.value-a)/i})).sort((h,f)=>h.calcYValue-f.calcYValue)),e.$$.dirty&32780&&l(4,d=[...new Set(k.filter(h=>r.map(f=>f.areacd).includes(h.areacd)).map(h=>h[R[p-1]==="Health cluster"?"health":"imd"]))].filter(h=>h!=null)),e.$$.dirty&16&&console.log(d)},l(6,u=[-1,1]),l(5,_=[]),[y,c,k,p,d,_,u,s,o,v,R,M,g,E,w,r,i,a,W,z,H,S,I,A,Y,L,j]}class Dl extends fe{constructor(t){super(),ce(this,t,yl,vl,he,{indicators:12,data:13,checkboxedRoles:0,areasForPlotting:14,clustersLookup:1,areasGeogInfo:2})}}function Dt(e,t,l){const r=e.slice();return r[14]=t[l],r[16]=l,r}function El(e){let t=e[0].params.code[0].toUpperCase()+e[0].params.code.substring(1)+"",l;return{c(){l=$(t)},l(r){l=x(r,t)},m(r,a){V(r,l,a)},p(r,a){a&1&&t!==(t=r[0].params.code[0].toUpperCase()+r[0].params.code.substring(1)+"")&&se(l,t)},d(r){r&&b(l)}}}function Rl(e){let t="Topic information",l;return{c(){l=$(t)},l(r){l=x(r,t)},m(r,a){V(r,l,a)},p:oe,d(r){r&&b(l)}}}function Il(e){let t,l,r,a;return t=new Wt({props:{$$slots:{default:[El]},$$scope:{ctx:e}}}),r=new St({props:{$$slots:{default:[Rl]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Q(),ee(r.$$.fragment)},l(i){te(t.$$.fragment,i),l=X(i),te(r.$$.fragment,i)},m(i,o){le(t,i,o),V(i,l,o),le(r,i,o),a=!0},p(i,o){const s={};o&131073&&(s.$$scope={dirty:o,ctx:i}),t.$set(s);const u={};o&131072&&(u.$$scope={dirty:o,ctx:i}),r.$set(u)},i(i){a||(K(t.$$.fragment,i),K(r.$$.fragment,i),a=!0)},o(i){U(t.$$.fragment,i),U(r.$$.fragment,i),a=!1},d(i){re(t,i),i&&b(l),re(r,i)}}}function Et(e){let t,l=e[3].custom,r=[];for(let a=0;a<l.length;a+=1)r[a]=Rt(Dt(e,l,a));return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=ie()},l(a){for(let i=0;i<r.length;i+=1)r[i].l(a);t=ie()},m(a,i){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(a,i);V(a,t,i)},p(a,i){if(i&25){l=a[3].custom;let o;for(o=0;o<l.length;o+=1){const s=Dt(a,l,o);r[o]?r[o].p(s,i):(r[o]=Rt(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=l.length}},d(a){ae(r,a),a&&b(t)}}}function Rt(e){let t,l="<span style='padding: 2px; color: white; background-color: "+J["custom"+(e[16]+1)]+"'>"+e[4].find(r).areanm+"</span> is in the "+e[0].clustersLookup.find(a).alternativeDescription.toLowerCase()+" cluster. [Dummy text] "+e[4].find(i).areanm+" has below average life expectancy and a high percentage of its population are frequrent cigarette smokers.";function r(...o){return e[8](e[14],...o)}function a(...o){return e[9](e[14],...o)}function i(...o){return e[10](e[14],...o)}return{c(){t=N("p"),this.h()},l(o){t=q(o,"P",{style:!0});var s=F(t);s.forEach(b),this.h()},h(){Z(t,"padding-left","30px"),Z(t,"padding-right","50px")},m(o,s){V(o,t,s),t.innerHTML=l},p(o,s){e=o,s&9&&l!==(l="<span style='padding: 2px; color: white; background-color: "+J["custom"+(e[16]+1)]+"'>"+e[4].find(r).areanm+"</span> is in the "+e[0].clustersLookup.find(a).alternativeDescription.toLowerCase()+" cluster. [Dummy text] "+e[4].find(i).areanm+" has below average life expectancy and a high percentage of its population are frequrent cigarette smokers.")&&(t.innerHTML=l)},d(o){o&&b(t)}}}function Cl(e){let t,l,r,a,i,o,s,u,d,_,g,E,y,w,c,k,v,p,R;function M(I){e[7](I)}let W={altText:"Select any areas of interest",selectedAreas:[],areasWithData:[...new Set(e[4].filter(Al).map(Ml))]};e[3]!==void 0&&(W.checkboxedRoles=e[3]),t=new Mt({props:W}),_e.push(()=>me(t,"checkboxedRoles",M));let z=e[3].custom!=null&&Et(e);o=new tl({props:{indicators:e[6],checkboxedRoles:e[3],latestData:e[0].latestData,initialData:e[0].preloadedData.initialData}}),u=new Ht({props:{data:e[2].filter(It).filter(Ct),idKey:"areacd",valueKey:"health",clustersLookup:e[0].clustersLookup}});function H(I){e[11](I)}let S={indicators:e[5],data:e[0].latestData,areasForPlotting:e[1],clustersLookup:e[0].clustersLookup,areasGeogInfo:e[0].areasGeogInfo};return e[3]!==void 0&&(S.checkboxedRoles=e[3]),_=new Dl({props:S}),_e.push(()=>me(_,"checkboxedRoles",H)),{c(){ee(t.$$.fragment),r=Q(),a=N("div"),z&&z.c(),i=Q(),ee(o.$$.fragment),s=Q(),ee(u.$$.fragment),d=Q(),ee(_.$$.fragment),E=Q(),y=N("section"),w=N("h2"),c=$("Get the data"),k=Q(),v=N("p"),p=$("Here, you can find information and links to the data."),this.h()},l(I){te(t.$$.fragment,I),r=X(I),a=q(I,"DIV",{style:!0});var A=F(a);z&&z.l(A),A.forEach(b),i=X(I),te(o.$$.fragment,I),s=X(I),te(u.$$.fragment,I),d=X(I),te(_.$$.fragment,I),E=X(I),y=q(I,"SECTION",{title:!0});var Y=F(y);w=q(Y,"H2",{class:!0});var L=F(w);c=x(L,"Get the data"),L.forEach(b),k=X(Y),v=q(Y,"P",{});var j=F(v);p=x(j,"Here, you can find information and links to the data."),j.forEach(b),Y.forEach(b),this.h()},h(){Z(a,"margin-top","40px"),n(w,"class","ons-u-mt-xl"),n(y,"title","Get the data")},m(I,A){le(t,I,A),V(I,r,A),V(I,a,A),z&&z.m(a,null),V(I,i,A),le(o,I,A),V(I,s,A),le(u,I,A),V(I,d,A),le(_,I,A),V(I,E,A),V(I,y,A),C(y,w),C(w,c),C(y,k),C(y,v),C(v,p),R=!0},p(I,A){const Y={};!l&&A&8&&(l=!0,Y.checkboxedRoles=I[3],ge(()=>l=!1)),t.$set(Y),I[3].custom!=null?z?z.p(I,A):(z=Et(I),z.c(),z.m(a,null)):z&&(z.d(1),z=null);const L={};A&8&&(L.checkboxedRoles=I[3]),A&1&&(L.latestData=I[0].latestData),A&1&&(L.initialData=I[0].preloadedData.initialData),o.$set(L);const j={};A&4&&(j.data=I[2].filter(It).filter(Ct)),A&1&&(j.clustersLookup=I[0].clustersLookup),u.$set(j);const h={};A&1&&(h.data=I[0].latestData),A&2&&(h.areasForPlotting=I[1]),A&1&&(h.clustersLookup=I[0].clustersLookup),A&1&&(h.areasGeogInfo=I[0].areasGeogInfo),!g&&A&8&&(g=!0,h.checkboxedRoles=I[3],ge(()=>g=!1)),_.$set(h)},i(I){R||(K(t.$$.fragment,I),K(o.$$.fragment,I),K(u.$$.fragment,I),K(_.$$.fragment,I),R=!0)},o(I){U(t.$$.fragment,I),U(o.$$.fragment,I),U(u.$$.fragment,I),U(_.$$.fragment,I),R=!1},d(I){re(t,I),I&&b(r),I&&b(a),z&&z.d(),I&&b(i),re(o,I),I&&b(s),re(u,I),I&&b(d),re(_,I),I&&b(E),I&&b(y)}}}function Fl(e){let t,l,r,a;return t=new Pt({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Fe}/`},{label:"Expore indicators",url:`${Fe}/indicators`},{label:"topic"}],$$slots:{default:[Il]},$$scope:{ctx:e}}}),r=new Vt({props:{contentsLabel:"Explore this indicator",$$slots:{default:[Cl]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment),l=Q(),ee(r.$$.fragment)},l(i){te(t.$$.fragment,i),l=X(i),te(r.$$.fragment,i)},m(i,o){le(t,i,o),V(i,l,o),le(r,i,o),a=!0},p(i,[o]){const s={};o&131073&&(s.$$scope={dirty:o,ctx:i}),t.$set(s);const u={};o&131087&&(u.$$scope={dirty:o,ctx:i}),r.$set(u)},i(i){a||(K(t.$$.fragment,i),K(r.$$.fragment,i),a=!0)},o(i){U(t.$$.fragment,i),U(r.$$.fragment,i),a=!1},d(i){re(t,i),i&&b(l),re(r,i)}}}const Al=e=>!["K02000001","E92000001","N92000002","S92000003","W92000004"].includes(e.areacd),Ml=e=>e.areacd,It=e=>e.health!==null,Ct=e=>e.health<=4;function zl(e,t,l){let r,a,i,{data:o}=t;console.log(o);let s=o.params.code,u=Ee("areas"),d=o.indicators.filter(k=>o.topics.find(v=>v.id==k.id).name==s),_=d.filter(k=>["p","s"].includes(o.topics.find(v=>v.id==k.id).priority));function g(k){r=k,l(3,r)}const E=(k,v)=>v.areacd===k.areacd,y=(k,v)=>["health","all"].includes(v.model)&o.areasGeogInfo.find(p=>p.areacd===k.areacd).health==v.id,w=(k,v)=>v.areacd===k.areacd;function c(k){r=k,l(3,r)}return e.$$set=k=>{"data"in k&&l(0,o=k.data)},e.$$.update=()=>{e.$$.dirty&1&&l(1,a=o.areasGeogLevel.filter(k=>["both","lower"].includes(k.level)).map(k=>k.areacd)),e.$$.dirty&3&&l(2,i=o.areasGeogInfo.filter(k=>a.includes(k.areacd)))},l(3,r={parent:!1,country:!1,uk:!1,neighbour:!1,cluster:!1,custom:null}),[o,a,i,r,u,d,_,g,E,y,w,c]}class Gl extends fe{constructor(t){super(),ce(this,t,zl,Fl,he,{data:0})}}export{Gl as component};
