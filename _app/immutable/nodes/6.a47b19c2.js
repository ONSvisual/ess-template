//js
import{S as de,i as _e,s as me,I as qr,k as K,l as x,m as I,h as p,n as u,p as ue,b as N,K as Yr,L as Gr,M as Kr,g as G,d as Z,D as he,x as rt,q as Q,a as te,y as ne,r as X,c as le,z as oe,W as De,C as E,A as ae,u as ie,v as ye,B as se,f as we,U as Me,V as fe,F as P,G as z,X as ut,Y as ht,Z as Ee,_ as ct,e as ge,w as ve,Q as be,H as We,R as ke,P as Mn,T as _t,E as Mt,$ as Sn,a0 as mt}from"../chunks/index.148d55c6.js";import{b as Oe}from"../chunks/paths.bdb1680f.js";import{T as Fn,H as Rn,S as Ln}from"../chunks/Subhead.9af98bf0.js";import{M as Nn,S as Cn}from"../chunks/Map.9133bea2.js";import{t as Ge,b as St,e as gt,f as pt,h as $}from"../chunks/config.eb4626c9.js";import{f as Vn,e as Ue,a as Pn}from"../chunks/locale.a357df68.js";import{S as zn}from"../chunks/Select.bfd8915f.js";/* empty css                                                     */var $e,xr,Ur;Tn({thousands:",",grouping:[3],currency:["$",""]});function Tn(e){return $e=Vn(e),xr=$e.format,Ur=$e.formatPrefix,$e}function Bn(e){return Math.max(0,-Ue(Math.abs(e)))}function On(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ue(t)/3)))*3-Ue(Math.abs(e)))}function Wn(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ue(t)-Ue(e))+1}function Hn(e){let t,l=`${e[0]}px`,r=`${e[1]}px`,n;const a=e[3].default,i=qr(a,e,e[2],null);return{c(){t=K("div"),i&&i.c(),this.h()},l(s){t=x(s,"DIV",{class:!0});var f=I(t);i&&i.l(f),f.forEach(p),this.h()},h(){u(t,"class","placeholder-container svelte-1mhohmc"),ue(t,"height",l),ue(t,"margin-bottom",r)},m(s,f){N(s,t,f),i&&i.m(t,null),n=!0},p(s,[f]){i&&i.p&&(!n||f&4)&&Yr(i,a,s,s[2],n?Kr(a,s[2],f,null):Gr(s[2]),null),f&1&&l!==(l=`${s[0]}px`)&&ue(t,"height",l),f&2&&r!==(r=`${s[1]}px`)&&ue(t,"margin-bottom",r)},i(s){n||(G(i,s),n=!0)},o(s){Z(i,s),n=!1},d(s){s&&p(t),i&&i.d(s)}}}function qn(e,t,l){let{$$slots:r={},$$scope:n}=t,{height:a=400}=t,{margin:i=40}=t;return e.$$set=s=>{"height"in s&&l(0,a=s.height),"margin"in s&&l(1,i=s.margin),"$$scope"in s&&l(2,n=s.$$scope)},[a,i,n,r]}class Yn extends de{constructor(t){super(),_e(this,t,qn,Hn,me,{height:0,margin:1})}}function Gn(e){let t;return{c(){t=K("p"),this.h()},l(l){t=x(l,"P",{class:!0});var r=I(t);r.forEach(p),this.h()},h(){u(t,"class","additionalInfoText svelte-1xcnew4")},m(l,r){N(l,t,r),t.innerHTML=e[0]},p(l,[r]){r&1&&(t.innerHTML=l[0])},i:he,o:he,d(l){l&&p(t)}}}function Kn(e,t,l){let{mainAreaName:r,comparisonAreaName:n,differenceValue:a,comparisonValue:i,indicator:s,prefix:f,suffix:o,subTextShort:h,far:c,length:d}=t;Math.pow(10,s.roundingFactor);let b;return d==="short"?b=(a==0?"Equal":a>0?c?"Far above":"Above":c?"Far below":"Below")+" "+n+"-wide average"+(a==0?".":" ("+f+Math.abs(i).toLocaleString()+o+h+")."):d==="medium"&&(b=a==0?s.label+" in "+r+" is equal to the "+n+"-wide average.":s.label+" in "+r+" is "+f+Math.abs(a).toLocaleString()+o+" "+h+(a?" higher":" lower")+" than the "+n+"-wide average."),e.$$set=_=>{"mainAreaName"in _&&l(1,r=_.mainAreaName),"comparisonAreaName"in _&&l(2,n=_.comparisonAreaName),"differenceValue"in _&&l(3,a=_.differenceValue),"comparisonValue"in _&&l(4,i=_.comparisonValue),"indicator"in _&&l(5,s=_.indicator),"prefix"in _&&l(6,f=_.prefix),"suffix"in _&&l(7,o=_.suffix),"subTextShort"in _&&l(8,h=_.subTextShort),"far"in _&&l(9,c=_.far),"length"in _&&l(10,d=_.length)},[b,r,n,a,i,s,f,o,h,c,d]}let Pt=class extends de{constructor(t){super(),_e(this,t,Kn,Gn,me,{mainAreaName:1,comparisonAreaName:2,differenceValue:3,comparisonValue:4,indicator:5,prefix:6,suffix:7,subTextShort:8,far:9,length:10})}};function xn(e){let t;return{c(){t=K("p"),this.h()},l(l){t=x(l,"P",{class:!0});var r=I(t);r.forEach(p),this.h()},h(){u(t,"class","additionalInfoText svelte-1xcnew4")},m(l,r){N(l,t,r),t.innerHTML=e[0]},p(l,[r]){r&1&&(t.innerHTML=l[0])},i:he,o:he,d(l){l&&p(t)}}}function Un(e,t,l){let{mainAreaName:r,comparisonAreaName:n,changeValue:a,changePercent:i,mainValue:s,mainValueInitial:f,indicator:o,prefix:h,suffix:c,subTextShort:d,length:b}=t,_;return b==="short"?o.changeSentence==="percent"?_=a===0?"No change from ":Math.abs(i)+"% "+(a>0?"increase":"descrease")+" from "+o.defaultInitialYear+" to "+o.latestYear+".":o.changeSentence==="absolute"?_=(a===0?"No change from":(a>0?"Rose by ":"Fell by ")+h+Math.abs(a.toFixed(o.roundingFactor))+c+d+" from ")+o.defaultInitialYear+" to "+o.latestYear+".":o.changeSentence==="both"&&(_=a===0?"No change between "+o.defaultInitialYear+" and "+o.latestYear+".":(a>0?"Rose from ":"Fell from ")+h+f+c+d+" in "+o.defaultInitialYear+" to "+h+s+c+d+" in "+o.latestYear+"."):b==="medium"&&(_=differenceValue==0?o.label+" in "+r+" is equal to the "+n+"-wide average.":o.label+" in "+r+" is "+h+Math.abs(differenceValue).toLocaleString()+c+" "+d+(differenceValue?" higher":" lower")+" than the "+n+"-wide average."),e.$$set=v=>{"mainAreaName"in v&&l(1,r=v.mainAreaName),"comparisonAreaName"in v&&l(2,n=v.comparisonAreaName),"changeValue"in v&&l(3,a=v.changeValue),"changePercent"in v&&l(4,i=v.changePercent),"mainValue"in v&&l(5,s=v.mainValue),"mainValueInitial"in v&&l(6,f=v.mainValueInitial),"indicator"in v&&l(7,o=v.indicator),"prefix"in v&&l(8,h=v.prefix),"suffix"in v&&l(9,c=v.suffix),"subTextShort"in v&&l(10,d=v.subTextShort),"length"in v&&l(11,b=v.length)},[_,r,n,a,i,s,f,o,h,c,d,b]}class zt extends de{constructor(t){super(),_e(this,t,Un,xn,me,{mainAreaName:1,comparisonAreaName:2,changeValue:3,changePercent:4,mainValue:5,mainValueInitial:6,indicator:7,prefix:8,suffix:9,subTextShort:10,length:11})}}function jn(e){let t,l;return{c(){t=K("p"),l=Q(e[16]),this.h()},l(r){t=x(r,"P",{class:!0});var n=I(t);l=X(n,e[16]),n.forEach(p),this.h()},h(){u(t,"class","subText svelte-1nj8n5v")},m(r,n){N(r,t,n),E(t,l)},p:he,d(r){r&&p(t)}}}function Tt(e){let t,l,r,n,a,i,s;var f=e[0].code in e[3]?e[3][e[0].code][0]:zt;function o(h){return{props:{mainAreaName:h[5],comparisonAreaName:h[2],mainValue:h[4],mainValueInitial:h[10],changeValue:h[11],changePercent:h[12],indicator:h[0],prefix:h[14],suffix:h[15],subTextShort:h[17],length:"short"}}}return f&&(i=rt(f,o(e))),{c(){t=K("div"),l=K("div"),r=K("p"),n=Q(e[13]),a=te(),i&&ne(i.$$.fragment),this.h()},l(h){t=x(h,"DIV",{class:!0});var c=I(t);l=x(c,"DIV",{class:!0});var d=I(l);r=x(d,"P",{class:!0});var b=I(r);n=X(b,e[13]),b.forEach(p),d.forEach(p),a=le(c),i&&oe(i.$$.fragment,c),c.forEach(p),this.h()},h(){u(r,"class","svelte-1nj8n5v"),u(l,"class",De("headlineLabel "+(["Increasing","Falling"].includes(e[13])?null:e[13]==="Little change"?"headlineLabelOkay":e[13]==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1nj8n5v"),u(t,"class","flexV column3 svelte-1nj8n5v")},m(h,c){N(h,t,c),E(t,l),E(l,r),E(r,n),E(t,a),i&&ae(i,t,null),s=!0},p(h,c){const d={};if(c&4&&(d.comparisonAreaName=h[2]),c&1&&(d.indicator=h[0]),c&1&&f!==(f=h[0].code in h[3]?h[3][h[0].code][0]:zt)){if(i){ye();const b=i;Z(b.$$.fragment,1,0,()=>{se(b,1)}),we()}f?(i=rt(f,o(h)),ne(i.$$.fragment),G(i.$$.fragment,1),ae(i,t,null)):i=null}else f&&i.$set(d)},i(h){s||(i&&G(i.$$.fragment,h),s=!0)},o(h){i&&Z(i.$$.fragment,h),s=!1},d(h){h&&p(t),i&&se(i)}}}function Zn(e){let t,l,r,n=e[0].label+"",a,i,s,f,o,h,c=e[14]+parseFloat(e[4].toFixed(e[4]>100?0:1)).toLocaleString()+e[15]+"",d,b,_,v,w,m,g,k,y,D,S,R=e[16]!=""&&jn(e);var H=e[0].code in e[3]?e[3][e[0].code][0]:Pt;function B(M){return{props:{mainAreaName:M[5],comparisonAreaName:M[2],differenceValue:M[7],comparisonValue:M[6],indicator:M[0],prefix:M[14],suffix:M[15],subTextShort:M[17],far:M[8],length:"short"}}}H&&(y=rt(H,B(e)));let F=e[1]!=null&&Tt(e);return{c(){t=K("div"),l=K("h3"),r=K("a"),a=Q(n),s=te(),f=K("div"),o=K("div"),h=K("h4"),d=Q(c),b=te(),R&&R.c(),_=te(),v=K("div"),w=K("div"),m=K("p"),g=Q(e[9]),k=te(),y&&ne(y.$$.fragment),D=te(),F&&F.c(),this.h()},l(M){t=x(M,"DIV",{class:!0});var Y=I(t);l=x(Y,"H3",{class:!0});var O=I(l);r=x(O,"A",{href:!0});var J=I(r);a=X(J,n),J.forEach(p),O.forEach(p),s=le(Y),f=x(Y,"DIV",{class:!0});var q=I(f);o=x(q,"DIV",{class:!0});var L=I(o);h=x(L,"H4",{class:!0});var W=I(h);d=X(W,c),W.forEach(p),b=le(L),R&&R.l(L),L.forEach(p),_=le(q),v=x(q,"DIV",{class:!0});var U=I(v);w=x(U,"DIV",{class:!0});var A=I(w);m=x(A,"P",{class:!0});var T=I(m);g=X(T,e[9]),T.forEach(p),A.forEach(p),k=le(U),y&&oe(y.$$.fragment,U),U.forEach(p),D=le(q),F&&F.l(q),q.forEach(p),Y.forEach(p),this.h()},h(){u(r,"href",i=Oe+"/indicators/"+e[0].code),u(l,"class","svelte-1nj8n5v"),u(h,"class","svelte-1nj8n5v"),u(o,"class","flexV column1 svelte-1nj8n5v"),u(m,"class","svelte-1nj8n5v"),u(w,"class",De("headlineLabel "+(["Above average","Below average"].includes(e[9])?null:e[9]==="Similar to average"?"headlineLabelOkay":e[9]==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-1nj8n5v"),u(v,"class","flexV column2 svelte-1nj8n5v"),u(f,"class","flexH svelte-1nj8n5v"),u(t,"class","panelContainer svelte-1nj8n5v")},m(M,Y){N(M,t,Y),E(t,l),E(l,r),E(r,a),E(t,s),E(t,f),E(f,o),E(o,h),E(h,d),E(o,b),R&&R.m(o,null),E(f,_),E(f,v),E(v,w),E(w,m),E(m,g),E(v,k),y&&ae(y,v,null),E(f,D),F&&F.m(f,null),S=!0},p(M,[Y]){(!S||Y&1)&&n!==(n=M[0].label+"")&&ie(a,n),(!S||Y&1&&i!==(i=Oe+"/indicators/"+M[0].code))&&u(r,"href",i),M[16]!=""&&R.p(M,Y);const O={};if(Y&4&&(O.comparisonAreaName=M[2]),Y&1&&(O.indicator=M[0]),Y&1&&H!==(H=M[0].code in M[3]?M[3][M[0].code][0]:Pt)){if(y){ye();const J=y;Z(J.$$.fragment,1,0,()=>{se(J,1)}),we()}H?(y=rt(H,B(M)),ne(y.$$.fragment),G(y.$$.fragment,1),ae(y,v,null)):y=null}else H&&y.$set(O);M[1]!=null?F?(F.p(M,Y),Y&2&&G(F,1)):(F=Tt(M),F.c(),G(F,1),F.m(f,null)):F&&(ye(),Z(F,1,1,()=>{F=null}),we())},i(M){S||(y&&G(y.$$.fragment,M),G(F),S=!0)},o(M){y&&Z(y.$$.fragment,M),Z(F),S=!1},d(M){M&&p(t),R&&R.d(),y&&se(y),F&&F.d()}}}function Qn(e,t,l){let{indicator:r,latestData:n,initialData:a,selectedAreas:i}=t,s=Me("areas"),f={},o=Math.pow(10,r.roundingFactor),h=n.find(W=>W.areacd===i.find(U=>U.role==="main").data.areacd),c=Math.round(h.value*o)/o,d=s.find(W=>W.areacd===h.areacd).areanm,b=n.filter(W=>W.areacd===i.find(U=>U.role==="country").data.areacd),_=n.filter(W=>W.areacd===i.find(U=>U.role==="uk").data.areacd),v=n.filter(W=>W.areacd===i.find(U=>U.role==="parent").data.areacd),w=b.length>0?b[0]:_.length>0?_[0]:v.length>0?v[0]:void 0,m=Math.round(w.value*o)/o,g=s.find(W=>W.areacd===w.areacd).areanm;g=g==="United Kingdom"?"UK":g;let k=c-m,y=r.code in Ge?Ge[r.code]:St,D=Math.abs(k)/m<y[0]/100,S=Math.abs(k)/m>y[1]/100,R=D?gt.similar:c>m?gt.high[r.highEqualsGood]:gt.low[r.highEqualsGood],H=a===void 0?null:Math.round(a.find(W=>W.areacd===i.find(U=>U.role==="main").data.areacd).value*o)/o,B=c-H,F=Math.abs(B/H*100)<1?Math.round(B/H*1e3)/10:Math.round(B/H*100),Y=Math.abs(F)<y[0]?pt.similar:c>H?pt.high[r.highEqualsGood]:pt.low[r.highEqualsGood],O=r.prefix===null?"":r.prefix==="pounds"?"Â£":r.prefix,J=r.suffix===null?"":r.suffix,q=r.subText===null?"":r.subText,L=r.subTextShort===null?"":r.subTextShort;return e.$$set=W=>{"indicator"in W&&l(0,r=W.indicator),"latestData"in W&&l(18,n=W.latestData),"initialData"in W&&l(1,a=W.initialData),"selectedAreas"in W&&l(19,i=W.selectedAreas)},[r,a,g,f,c,d,m,k,S,R,H,B,F,Y,O,J,q,L,n,i]}class Xn extends de{constructor(t){super(),_e(this,t,Qn,Zn,me,{indicator:0,latestData:18,initialData:1,selectedAreas:19})}}function Bt(e,t,l){const r=e.slice();return r[7]=t[l],r}function Ot(e){let t,l;function r(...a){return e[5](e[7],...a)}function n(...a){return e[6](e[7],...a)}return t=new Xn({props:{indicator:e[2].find(r),latestData:e[1].filter(n),initialData:e[3][e[7].code],selectedAreas:e[4]}}),{c(){ne(t.$$.fragment)},l(a){oe(t.$$.fragment,a)},m(a,i){ae(t,a,i),l=!0},p(a,i){e=a;const s={};i&5&&(s.indicator=e[2].find(r)),i&3&&(s.latestData=e[1].filter(n)),i&9&&(s.initialData=e[3][e[7].code]),i&16&&(s.selectedAreas=e[4]),t.$set(s)},i(a){l||(G(t.$$.fragment,a),l=!0)},o(a){Z(t.$$.fragment,a),l=!1},d(a){se(t,a)}}}function Jn(e){let t,l,r,n,a,i,s=e[0],f=[];for(let h=0;h<s.length;h+=1)f[h]=Ot(Bt(e,s,h));const o=h=>Z(f[h],1,1,()=>{f[h]=null});return{c(){t=K("section"),l=K("h1"),r=Q("Key indicators"),n=te(),a=K("div");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){t=x(h,"SECTION",{title:!0});var c=I(t);l=x(c,"H1",{});var d=I(l);r=X(d,"Key indicators"),d.forEach(p),n=le(c),a=x(c,"DIV",{class:!0});var b=I(a);for(let _=0;_<f.length;_+=1)f[_].l(b);b.forEach(p),c.forEach(p),this.h()},h(){u(a,"class","rowsContainer"),u(t,"title","Key indicators")},m(h,c){N(h,t,c),E(t,l),E(l,r),E(t,n),E(t,a);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(a,null);i=!0},p(h,[c]){if(c&31){s=h[0];let d;for(d=0;d<s.length;d+=1){const b=Bt(h,s,d);f[d]?(f[d].p(b,c),G(f[d],1)):(f[d]=Ot(b),f[d].c(),G(f[d],1),f[d].m(a,null))}for(ye(),d=s.length;d<f.length;d+=1)o(d);we()}},i(h){if(!i){for(let c=0;c<s.length;c+=1)G(f[c]);i=!0}},o(h){f=f.filter(Boolean);for(let c=0;c<f.length;c+=1)Z(f[c]);i=!1},d(h){h&&p(t),fe(f,h)}}}function $n(e,t,l){let{areaKeyIndicators:r,latestData:n,trimmedIndicators:a,initialData:i,selectedAreas:s}=t;const f=(h,c)=>c.id===h.id,o=(h,c)=>c.codeId===h.id;return e.$$set=h=>{"areaKeyIndicators"in h&&l(0,r=h.areaKeyIndicators),"latestData"in h&&l(1,n=h.latestData),"trimmedIndicators"in h&&l(2,a=h.trimmedIndicators),"initialData"in h&&l(3,i=h.initialData),"selectedAreas"in h&&l(4,s=h.selectedAreas)},[r,n,a,i,s,f,o]}class ea extends de{constructor(t){super(),_e(this,t,$n,Jn,me,{areaKeyIndicators:0,latestData:1,trimmedIndicators:2,initialData:3,selectedAreas:4})}}function Wt(e){let t,l,r,n,a,i,s,f,o,h,c;return{c(){t=K("summary"),l=K("h3"),r=Q(e[1]),a=te(),i=K("span"),s=P("svg"),f=P("path"),this.h()},l(d){t=x(d,"SUMMARY",{class:!0});var b=I(t);l=x(b,"H3",{class:!0});var _=I(l);r=X(_,e[1]),_.forEach(p),a=le(b),i=x(b,"SPAN",{class:!0});var v=I(i);s=z(v,"svg",{class:!0,viewBox:!0,xmlns:!0,focusable:!0});var w=I(s);f=z(w,"path",{class:!0,d:!0,transform:!0}),I(f).forEach(p),w.forEach(p),v.forEach(p),b.forEach(p),this.h()},h(){u(l,"class",n=De("ons-collapsible__title"+(e[0]?" title_styling_override":""))+" svelte-lfupja"),u(f,"class",o=De(e[0]?" path_styling_override":"")+" svelte-lfupja"),u(f,"d",h=e[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),u(f,"transform",c=e[0]?null:"translate(-5.02 -1.59)"),u(s,"class","ons-svg-icon"),u(s,"viewBox","0 0 8 13"),u(s,"xmlns","http://www.w3.org/2000/svg"),u(s,"focusable","false"),u(i,"class","ons-collapsible__icon"),u(t,"class","ons-collapsible__heading ons-js-collapsible-heading svelte-lfupja")},m(d,b){N(d,t,b),E(t,l),E(l,r),E(t,a),E(t,i),E(i,s),E(s,f)},p(d,b){b&2&&ie(r,d[1]),b&1&&n!==(n=De("ons-collapsible__title"+(d[0]?" title_styling_override":""))+" svelte-lfupja")&&u(l,"class",n),b&1&&o!==(o=De(d[0]?" path_styling_override":"")+" svelte-lfupja")&&u(f,"class",o),b&1&&h!==(h=d[0]?"M0 7.5 l8 0 M 4 3.5 l0 8":"M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z")&&u(f,"d",h),b&1&&c!==(c=d[0]?null:"translate(-5.02 -1.59)")&&u(f,"transform",c)},d(d){d&&p(t)}}}function ta(e){let t,l,r,n,a,i,s=!e[3]&&Wt(e);const f=e[5].default,o=qr(f,e,e[4],null);return{c(){t=K("details"),s&&s.c(),l=te(),r=K("div"),o&&o.c(),this.h()},l(h){t=x(h,"DETAILS",{class:!0});var c=I(t);s&&s.l(c),l=le(c),r=x(c,"DIV",{class:!0});var d=I(r);o&&o.l(d),d.forEach(p),c.forEach(p),this.h()},h(){u(r,"class",n=De(e[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(e[0]?" beeswarm_padding":""))+" svelte-lfupja"),u(t,"class",a=De("ons-collapsible ons-js-collapsible"+(e[0]?" details_styling_override":""))+" svelte-lfupja"),t.open=e[3]},m(h,c){N(h,t,c),s&&s.m(t,null),E(t,l),E(t,r),o&&o.m(r,null),i=!0},p(h,[c]){h[3]?s&&(s.d(1),s=null):s?s.p(h,c):(s=Wt(h),s.c(),s.m(t,l)),o&&o.p&&(!i||c&16)&&Yr(o,f,h,h[4],i?Kr(f,h[4],c,null):Gr(h[4]),null),(!i||c&5&&n!==(n=De(h[2]?"":"ons-collapsible__content ons-js-collapsible-content"+(h[0]?" beeswarm_padding":""))+" svelte-lfupja"))&&u(r,"class",n),(!i||c&1&&a!==(a=De("ons-collapsible ons-js-collapsible"+(h[0]?" details_styling_override":""))+" svelte-lfupja"))&&u(t,"class",a),(!i||c&8)&&(t.open=h[3])},i(h){i||(G(o,h),i=!0)},o(h){Z(o,h),i=!1},d(h){h&&p(t),s&&s.d(),o&&o.d(h)}}}function la(e,t,l){let{$$slots:r={},$$scope:n}=t,{cross:a=!1}=t,{label:i="Label"}=t,{blank:s=!1}=t,{open:f=!1}=t;return e.$$set=o=>{"cross"in o&&l(0,a=o.cross),"label"in o&&l(1,i=o.label),"blank"in o&&l(2,s=o.blank),"open"in o&&l(3,f=o.open),"$$scope"in o&&l(4,n=o.$$scope)},[a,i,s,f,n,r]}class jr extends de{constructor(t){super(),_e(this,t,la,ta,me,{cross:0,label:1,blank:2,open:3})}}class nt{constructor(t,l,r){this.items=t,this.diameter=l*2,this.diameterSq=this.diameter*this.diameter,this.xFun=r,this.tieBreakFn=n=>n,this._oneSided=!1}withTiesBrokenRandomly(){return this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,1),this}oneSided(){return this._oneSided=!0,this}calculateYPositions(){let t=this.items.map((n,a)=>({datum:n,originalIndex:a,x:this.xFun(n),y:null,placed:!1,minPositiveY:0,maxNegativeY:0,score:0,bestPosition:0,heapPos:-1})).sort((n,a)=>n.x-a.x);t.forEach(function(n,a){n.index=a});let l=this.tieBreakFn;t.forEach(function(n){n.tieBreaker=l(n.x)});let r=new ra;for(r.push(...t);!r.isEmpty();){let n=r.pop();n.placed=!0,n.y=n.bestPosition,this._updateYBounds(n,t,r)}return t.sort((n,a)=>n.originalIndex-a.originalIndex),t.map(n=>({datum:n.datum,x:n.x,y:n.y}))}_sfc32(t,l,r,n){let a=function(){t>>>=0,l>>>=0,r>>>=0,n>>>=0;var i=t+l|0;return t=l^l>>>9,l=r+(r<<3)|0,r=r<<21|r>>>11,n=n+1|0,i=i+n|0,r=r+i|0,(i>>>0)/4294967296};for(let i=0;i<10;i++)a();return a}_updateYBounds(t,l,r){for(let n of[-1,1]){let a;for(let i=t.index+n;i>=0&&i<l.length&&(a=Math.abs(t.x-l[i].x))<this.diameter;i+=n){let s=l[i];if(s.placed)continue;let f=Math.sqrt(this.diameterSq-a*a);s.minPositiveY=Math.max(s.minPositiveY,t.y+f);let o=s.score;s.score=s.minPositiveY,s.bestPosition=s.minPositiveY,this._oneSided||(s.maxNegativeY=Math.min(s.maxNegativeY,t.y-f),-s.maxNegativeY<s.score&&(s.score=-s.maxNegativeY,s.bestPosition=s.maxNegativeY)),s.score>o&&r.deprioritise(s)}}}}class ra{parent(t){return(t+1>>>1)-1}left(t){return(t<<1)+1}right(t){return t+1<<1}constructor(){this.TOP=0,this._heap=[]}size(){return this._heap.length}isEmpty(){return this.size()==0}peek(){return this._heap[this.TOP]}push(...t){return t.forEach(l=>{l.heapPos=this.size(),this._heap.push(l),this._siftUp()}),this.size()}pop(){const t=this.peek(),l=this.size()-1;return l>this.TOP&&this._swap(this.TOP,l),this._heap.pop(),this._siftDown(),t}deprioritise(t){this._siftDown(t.heapPos)}_greater(t,l){let r=this._heap[t],n=this._heap[l];return r.score<n.score?!0:r.score>n.score?!1:r.tieBreaker<n.tieBreaker}_swap(t,l){let r=this._heap[t];this._heap[t]=this._heap[l],this._heap[l]=r,this._heap[t].heapPos=t,this._heap[l].heapPos=l}_siftUp(){let t=this.size()-1;for(;t>this.TOP&&this._greater(t,this.parent(t));)this._swap(t,this.parent(t)),t=this.parent(t)}_siftDown(t=this.TOP){let l,r,n=this.size();for(;l=this.left(t),r=this.right(t),l<n&&this._greater(l,t)||r<n&&this._greater(r,t);){let a=r<n&&this._greater(r,l)?r:l;this._swap(t,a),t=a}}}function lt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function na(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zr(e){let t,l,r;e.length!==2?(t=lt,l=(s,f)=>lt(e(s),f),r=(s,f)=>e(s)-f):(t=e===lt||e===na?e:aa,l=e,r=e);function n(s,f,o=0,h=s.length){if(o<h){if(t(f,f)!==0)return h;do{const c=o+h>>>1;l(s[c],f)<0?o=c+1:h=c}while(o<h)}return o}function a(s,f,o=0,h=s.length){if(o<h){if(t(f,f)!==0)return h;do{const c=o+h>>>1;l(s[c],f)<=0?o=c+1:h=c}while(o<h)}return o}function i(s,f,o=0,h=s.length){const c=n(s,f,o,h-1);return c>o&&r(s[c-1],f)>-r(s[c],f)?c-1:c}return{left:n,center:i,right:a}}function aa(){return 0}function ia(e){return e===null?NaN:+e}const sa=Zr(lt),oa=sa.right;Zr(ia).center;const fa=oa,ua=Math.sqrt(50),ha=Math.sqrt(10),ca=Math.sqrt(2);function at(e,t,l){const r=(t-e)/Math.max(0,l),n=Math.floor(Math.log10(r)),a=r/Math.pow(10,n),i=a>=ua?10:a>=ha?5:a>=ca?2:1;let s,f,o;return n<0?(o=Math.pow(10,-n)/i,s=Math.round(e*o),f=Math.round(t*o),s/o<e&&++s,f/o>t&&--f,o=-o):(o=Math.pow(10,n)*i,s=Math.round(e/o),f=Math.round(t/o),s*o<e&&++s,f*o>t&&--f),f<s&&.5<=l&&l<2?at(e,t,l*2):[s,f,o]}function da(e,t,l){if(t=+t,e=+e,l=+l,!(l>0))return[];if(e===t)return[e];const r=t<e,[n,a,i]=r?at(t,e,l):at(e,t,l);if(!(a>=n))return[];const s=a-n+1,f=new Array(s);if(r)if(i<0)for(let o=0;o<s;++o)f[o]=(a-o)/-i;else for(let o=0;o<s;++o)f[o]=(a-o)*i;else if(i<0)for(let o=0;o<s;++o)f[o]=(n+o)/-i;else for(let o=0;o<s;++o)f[o]=(n+o)*i;return f}function kt(e,t,l){return t=+t,e=+e,l=+l,at(e,t,l)[2]}function _a(e,t,l){t=+t,e=+e,l=+l;const r=t<e,n=r?kt(t,e,l):kt(e,t,l);return(r?-1:1)*(n<0?1/-n:n)}function ma(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ft(e,t,l){e.prototype=t.prototype=l,l.constructor=e}function Qr(e,t){var l=Object.create(e.prototype);for(var r in t)l[r]=t[r];return l}function Xe(){}var je=.7,it=1/je,Ye="\\s*([+-]?\\d+)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ga=/^#([0-9a-f]{3,8})$/,pa=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),va=new RegExp(`^rgb\\(${Ne},${Ne},${Ne}\\)$`),ba=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${Ze}\\)$`),ka=new RegExp(`^rgba\\(${Ne},${Ne},${Ne},${Ze}\\)$`),ya=new RegExp(`^hsl\\(${Ze},${Ne},${Ne}\\)$`),wa=new RegExp(`^hsla\\(${Ze},${Ne},${Ne},${Ze}\\)$`),Ht={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ft(Xe,Qe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qt,formatHex:qt,formatHex8:Aa,formatHsl:Da,formatRgb:Yt,toString:Yt});function qt(){return this.rgb().formatHex()}function Aa(){return this.rgb().formatHex8()}function Da(){return Xr(this).formatHsl()}function Yt(){return this.rgb().formatRgb()}function Qe(e){var t,l;return e=(e+"").trim().toLowerCase(),(t=ga.exec(e))?(l=t[1].length,t=parseInt(t[1],16),l===6?Gt(t):l===3?new Se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):l===8?et(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):l===4?et(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pa.exec(e))?new Se(t[1],t[2],t[3],1):(t=va.exec(e))?new Se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ba.exec(e))?et(t[1],t[2],t[3],t[4]):(t=ka.exec(e))?et(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ya.exec(e))?Ut(t[1],t[2]/100,t[3]/100,1):(t=wa.exec(e))?Ut(t[1],t[2]/100,t[3]/100,t[4]):Ht.hasOwnProperty(e)?Gt(Ht[e]):e==="transparent"?new Se(NaN,NaN,NaN,0):null}function Gt(e){return new Se(e>>16&255,e>>8&255,e&255,1)}function et(e,t,l,r){return r<=0&&(e=t=l=NaN),new Se(e,t,l,r)}function Ea(e){return e instanceof Xe||(e=Qe(e)),e?(e=e.rgb(),new Se(e.r,e.g,e.b,e.opacity)):new Se}function yt(e,t,l,r){return arguments.length===1?Ea(e):new Se(e,t,l,r??1)}function Se(e,t,l,r){this.r=+e,this.g=+t,this.b=+l,this.opacity=+r}Ft(Se,yt,Qr(Xe,{brighter(e){return e=e==null?it:Math.pow(it,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?je:Math.pow(je,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Se(Be(this.r),Be(this.g),Be(this.b),st(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kt,formatHex:Kt,formatHex8:Ia,formatRgb:xt,toString:xt}));function Kt(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}`}function Ia(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}${Te((isNaN(this.opacity)?1:this.opacity)*255)}`}function xt(){const e=st(this.opacity);return`${e===1?"rgb(":"rgba("}${Be(this.r)}, ${Be(this.g)}, ${Be(this.b)}${e===1?")":`, ${e})`}`}function st(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Be(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Te(e){return e=Be(e),(e<16?"0":"")+e.toString(16)}function Ut(e,t,l,r){return r<=0?e=t=l=NaN:l<=0||l>=1?e=t=NaN:t<=0&&(e=NaN),new Le(e,t,l,r)}function Xr(e){if(e instanceof Le)return new Le(e.h,e.s,e.l,e.opacity);if(e instanceof Xe||(e=Qe(e)),!e)return new Le;if(e instanceof Le)return e;e=e.rgb();var t=e.r/255,l=e.g/255,r=e.b/255,n=Math.min(t,l,r),a=Math.max(t,l,r),i=NaN,s=a-n,f=(a+n)/2;return s?(t===a?i=(l-r)/s+(l<r)*6:l===a?i=(r-t)/s+2:i=(t-l)/s+4,s/=f<.5?a+n:2-a-n,i*=60):s=f>0&&f<1?0:i,new Le(i,s,f,e.opacity)}function Ma(e,t,l,r){return arguments.length===1?Xr(e):new Le(e,t,l,r??1)}function Le(e,t,l,r){this.h=+e,this.s=+t,this.l=+l,this.opacity=+r}Ft(Le,Ma,Qr(Xe,{brighter(e){return e=e==null?it:Math.pow(it,e),new Le(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?je:Math.pow(je,e),new Le(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,r=l+(l<.5?l:1-l)*t,n=2*l-r;return new Se(vt(e>=240?e-240:e+120,n,r),vt(e,n,r),vt(e<120?e+240:e-120,n,r),this.opacity)},clamp(){return new Le(jt(this.h),tt(this.s),tt(this.l),st(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=st(this.opacity);return`${e===1?"hsl(":"hsla("}${jt(this.h)}, ${tt(this.s)*100}%, ${tt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jt(e){return e=(e||0)%360,e<0?e+360:e}function tt(e){return Math.max(0,Math.min(1,e||0))}function vt(e,t,l){return(e<60?t+(l-t)*e/60:e<180?l:e<240?t+(l-t)*(240-e)/60:t)*255}const Rt=e=>()=>e;function Sa(e,t){return function(l){return e+l*t}}function Fa(e,t,l){return e=Math.pow(e,l),t=Math.pow(t,l)-e,l=1/l,function(r){return Math.pow(e+r*t,l)}}function Ra(e){return(e=+e)==1?Jr:function(t,l){return l-t?Fa(t,l,e):Rt(isNaN(t)?l:t)}}function Jr(e,t){var l=t-e;return l?Sa(e,l):Rt(isNaN(e)?t:e)}const Zt=function e(t){var l=Ra(t);function r(n,a){var i=l((n=yt(n)).r,(a=yt(a)).r),s=l(n.g,a.g),f=l(n.b,a.b),o=Jr(n.opacity,a.opacity);return function(h){return n.r=i(h),n.g=s(h),n.b=f(h),n.opacity=o(h),n+""}}return r.gamma=e,r}(1);function La(e,t){t||(t=[]);var l=e?Math.min(t.length,e.length):0,r=t.slice(),n;return function(a){for(n=0;n<l;++n)r[n]=e[n]*(1-a)+t[n]*a;return r}}function Na(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ca(e,t){var l=t?t.length:0,r=e?Math.min(l,e.length):0,n=new Array(r),a=new Array(l),i;for(i=0;i<r;++i)n[i]=Lt(e[i],t[i]);for(;i<l;++i)a[i]=t[i];return function(s){for(i=0;i<r;++i)a[i]=n[i](s);return a}}function Va(e,t){var l=new Date;return e=+e,t=+t,function(r){return l.setTime(e*(1-r)+t*r),l}}function ot(e,t){return e=+e,t=+t,function(l){return e*(1-l)+t*l}}function Pa(e,t){var l={},r={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?l[n]=Lt(e[n],t[n]):r[n]=t[n];return function(a){for(n in l)r[n]=l[n](a);return r}}var wt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bt=new RegExp(wt.source,"g");function za(e){return function(){return e}}function Ta(e){return function(t){return e(t)+""}}function Ba(e,t){var l=wt.lastIndex=bt.lastIndex=0,r,n,a,i=-1,s=[],f=[];for(e=e+"",t=t+"";(r=wt.exec(e))&&(n=bt.exec(t));)(a=n.index)>l&&(a=t.slice(l,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(n=n[0])?s[i]?s[i]+=n:s[++i]=n:(s[++i]=null,f.push({i,x:ot(r,n)})),l=bt.lastIndex;return l<t.length&&(a=t.slice(l),s[i]?s[i]+=a:s[++i]=a),s.length<2?f[0]?Ta(f[0].x):za(t):(t=f.length,function(o){for(var h=0,c;h<t;++h)s[(c=f[h]).i]=c.x(o);return s.join("")})}function Lt(e,t){var l=typeof t,r;return t==null||l==="boolean"?Rt(t):(l==="number"?ot:l==="string"?(r=Qe(t))?(t=r,Zt):Ba:t instanceof Qe?Zt:t instanceof Date?Va:Na(t)?La:Array.isArray(t)?Ca:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Pa:ot)(e,t)}function Oa(e,t){return e=+e,t=+t,function(l){return Math.round(e*(1-l)+t*l)}}function Wa(e){return function(){return e}}function Ha(e){return+e}var Qt=[0,1];function qe(e){return e}function At(e,t){return(t-=e=+e)?function(l){return(l-e)/t}:Wa(isNaN(t)?NaN:.5)}function qa(e,t){var l;return e>t&&(l=e,e=t,t=l),function(r){return Math.max(e,Math.min(t,r))}}function Ya(e,t,l){var r=e[0],n=e[1],a=t[0],i=t[1];return n<r?(r=At(n,r),a=l(i,a)):(r=At(r,n),a=l(a,i)),function(s){return a(r(s))}}function Ga(e,t,l){var r=Math.min(e.length,t.length)-1,n=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)n[i]=At(e[i],e[i+1]),a[i]=l(t[i],t[i+1]);return function(s){var f=fa(e,s,1,r)-1;return a[f](n[f](s))}}function Ka(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xa(){var e=Qt,t=Qt,l=Lt,r,n,a,i=qe,s,f,o;function h(){var d=Math.min(e.length,t.length);return i!==qe&&(i=qa(e[0],e[d-1])),s=d>2?Ga:Ya,f=o=null,c}function c(d){return d==null||isNaN(d=+d)?a:(f||(f=s(e.map(r),t,l)))(r(i(d)))}return c.invert=function(d){return i(n((o||(o=s(t,e.map(r),ot)))(d)))},c.domain=function(d){return arguments.length?(e=Array.from(d,Ha),h()):e.slice()},c.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},c.rangeRound=function(d){return t=Array.from(d),l=Oa,h()},c.clamp=function(d){return arguments.length?(i=d?!0:qe,h()):i!==qe},c.interpolate=function(d){return arguments.length?(l=d,h()):l},c.unknown=function(d){return arguments.length?(a=d,c):a},function(d,b){return r=d,n=b,h()}}function Ua(){return xa()(qe,qe)}function ja(e,t,l,r){var n=_a(e,t,l),a;switch(r=Pn(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=On(n,i))&&(r.precision=a),Ur(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Wn(n,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Bn(n))&&(r.precision=a-(r.type==="%")*2);break}}return xr(r)}function Za(e){var t=e.domain;return e.ticks=function(l){var r=t();return da(r[0],r[r.length-1],l??10)},e.tickFormat=function(l,r){var n=t();return ja(n[0],n[n.length-1],l??10,r)},e.nice=function(l){l==null&&(l=10);var r=t(),n=0,a=r.length-1,i=r[n],s=r[a],f,o,h=10;for(s<i&&(o=i,i=s,s=o,o=n,n=a,a=o);h-- >0;){if(o=kt(i,s,l),o===f)return r[n]=i,r[a]=s,t(r);if(o>0)i=Math.floor(i/o)*o,s=Math.ceil(s/o)*o;else if(o<0)i=Math.ceil(i*o)/o,s=Math.floor(s*o)/o;else break;f=o}return e},e}function Ve(){var e=Ua();return e.copy=function(){return Ka(e,Ve())},ma.apply(e,arguments),Za(e)}var Dt="http://www.w3.org/1999/xhtml";const Xt={svg:"http://www.w3.org/2000/svg",xhtml:Dt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $r(e){var t=e+="",l=t.indexOf(":");return l>=0&&(t=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),Xt.hasOwnProperty(t)?{space:Xt[t],local:e}:e}function Qa(e){return function(){var t=this.ownerDocument,l=this.namespaceURI;return l===Dt&&t.documentElement.namespaceURI===Dt?t.createElement(e):t.createElementNS(l,e)}}function Xa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function en(e){var t=$r(e);return(t.local?Xa:Qa)(t)}function Ja(){}function tn(e){return e==null?Ja:function(){return this.querySelector(e)}}function $a(e){typeof e!="function"&&(e=tn(e));for(var t=this._groups,l=t.length,r=new Array(l),n=0;n<l;++n)for(var a=t[n],i=a.length,s=r[n]=new Array(i),f,o,h=0;h<i;++h)(f=a[h])&&(o=e.call(f,f.__data__,h,a))&&("__data__"in f&&(o.__data__=f.__data__),s[h]=o);return new Re(r,this._parents)}function ei(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ti(){return[]}function li(e){return e==null?ti:function(){return this.querySelectorAll(e)}}function ri(e){return function(){return ei(e.apply(this,arguments))}}function ni(e){typeof e=="function"?e=ri(e):e=li(e);for(var t=this._groups,l=t.length,r=[],n=[],a=0;a<l;++a)for(var i=t[a],s=i.length,f,o=0;o<s;++o)(f=i[o])&&(r.push(e.call(f,f.__data__,o,i)),n.push(f));return new Re(r,n)}function ai(e){return function(){return this.matches(e)}}function ln(e){return function(t){return t.matches(e)}}var ii=Array.prototype.find;function si(e){return function(){return ii.call(this.children,e)}}function oi(){return this.firstElementChild}function fi(e){return this.select(e==null?oi:si(typeof e=="function"?e:ln(e)))}var ui=Array.prototype.filter;function hi(){return Array.from(this.children)}function ci(e){return function(){return ui.call(this.children,e)}}function di(e){return this.selectAll(e==null?hi:ci(typeof e=="function"?e:ln(e)))}function _i(e){typeof e!="function"&&(e=ai(e));for(var t=this._groups,l=t.length,r=new Array(l),n=0;n<l;++n)for(var a=t[n],i=a.length,s=r[n]=[],f,o=0;o<i;++o)(f=a[o])&&e.call(f,f.__data__,o,a)&&s.push(f);return new Re(r,this._parents)}function rn(e){return new Array(e.length)}function mi(){return new Re(this._enter||this._groups.map(rn),this._parents)}function ft(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ft.prototype={constructor:ft,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function gi(e){return function(){return e}}function pi(e,t,l,r,n,a){for(var i=0,s,f=t.length,o=a.length;i<o;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):l[i]=new ft(e,a[i]);for(;i<f;++i)(s=t[i])&&(n[i]=s)}function vi(e,t,l,r,n,a,i){var s,f,o=new Map,h=t.length,c=a.length,d=new Array(h),b;for(s=0;s<h;++s)(f=t[s])&&(d[s]=b=i.call(f,f.__data__,s,t)+"",o.has(b)?n[s]=f:o.set(b,f));for(s=0;s<c;++s)b=i.call(e,a[s],s,a)+"",(f=o.get(b))?(r[s]=f,f.__data__=a[s],o.delete(b)):l[s]=new ft(e,a[s]);for(s=0;s<h;++s)(f=t[s])&&o.get(d[s])===f&&(n[s]=f)}function bi(e){return e.__data__}function ki(e,t){if(!arguments.length)return Array.from(this,bi);var l=t?vi:pi,r=this._parents,n=this._groups;typeof e!="function"&&(e=gi(e));for(var a=n.length,i=new Array(a),s=new Array(a),f=new Array(a),o=0;o<a;++o){var h=r[o],c=n[o],d=c.length,b=yi(e.call(h,h&&h.__data__,o,r)),_=b.length,v=s[o]=new Array(_),w=i[o]=new Array(_),m=f[o]=new Array(d);l(h,c,v,w,m,b,t);for(var g=0,k=0,y,D;g<_;++g)if(y=v[g]){for(g>=k&&(k=g+1);!(D=w[k])&&++k<_;);y._next=D||null}}return i=new Re(i,r),i._enter=s,i._exit=f,i}function yi(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wi(){return new Re(this._exit||this._groups.map(rn),this._parents)}function Ai(e,t,l){var r=this.enter(),n=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),l==null?a.remove():l(a),r&&n?r.merge(n).order():n}function Di(e){for(var t=e.selection?e.selection():e,l=this._groups,r=t._groups,n=l.length,a=r.length,i=Math.min(n,a),s=new Array(n),f=0;f<i;++f)for(var o=l[f],h=r[f],c=o.length,d=s[f]=new Array(c),b,_=0;_<c;++_)(b=o[_]||h[_])&&(d[_]=b);for(;f<n;++f)s[f]=l[f];return new Re(s,this._parents)}function Ei(){for(var e=this._groups,t=-1,l=e.length;++t<l;)for(var r=e[t],n=r.length-1,a=r[n],i;--n>=0;)(i=r[n])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Ii(e){e||(e=Mi);function t(c,d){return c&&d?e(c.__data__,d.__data__):!c-!d}for(var l=this._groups,r=l.length,n=new Array(r),a=0;a<r;++a){for(var i=l[a],s=i.length,f=n[a]=new Array(s),o,h=0;h<s;++h)(o=i[h])&&(f[h]=o);f.sort(t)}return new Re(n,this._parents).order()}function Mi(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Si(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Fi(){return Array.from(this)}function Ri(){for(var e=this._groups,t=0,l=e.length;t<l;++t)for(var r=e[t],n=0,a=r.length;n<a;++n){var i=r[n];if(i)return i}return null}function Li(){let e=0;for(const t of this)++e;return e}function Ni(){return!this.node()}function Ci(e){for(var t=this._groups,l=0,r=t.length;l<r;++l)for(var n=t[l],a=0,i=n.length,s;a<i;++a)(s=n[a])&&e.call(s,s.__data__,a,n);return this}function Vi(e){return function(){this.removeAttribute(e)}}function Pi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zi(e,t){return function(){this.setAttribute(e,t)}}function Ti(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bi(e,t){return function(){var l=t.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function Oi(e,t){return function(){var l=t.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function Wi(e,t){var l=$r(e);if(arguments.length<2){var r=this.node();return l.local?r.getAttributeNS(l.space,l.local):r.getAttribute(l)}return this.each((t==null?l.local?Pi:Vi:typeof t=="function"?l.local?Oi:Bi:l.local?Ti:zi)(l,t))}function nn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hi(e){return function(){this.style.removeProperty(e)}}function qi(e,t,l){return function(){this.style.setProperty(e,t,l)}}function Yi(e,t,l){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,l)}}function Gi(e,t,l){return arguments.length>1?this.each((t==null?Hi:typeof t=="function"?Yi:qi)(e,t,l??"")):Ki(this.node(),e)}function Ki(e,t){return e.style.getPropertyValue(t)||nn(e).getComputedStyle(e,null).getPropertyValue(t)}function xi(e){return function(){delete this[e]}}function Ui(e,t){return function(){this[e]=t}}function ji(e,t){return function(){var l=t.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function Zi(e,t){return arguments.length>1?this.each((t==null?xi:typeof t=="function"?ji:Ui)(e,t)):this.node()[e]}function an(e){return e.trim().split(/^|\s+/)}function Nt(e){return e.classList||new sn(e)}function sn(e){this._node=e,this._names=an(e.getAttribute("class")||"")}sn.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function on(e,t){for(var l=Nt(e),r=-1,n=t.length;++r<n;)l.add(t[r])}function fn(e,t){for(var l=Nt(e),r=-1,n=t.length;++r<n;)l.remove(t[r])}function Qi(e){return function(){on(this,e)}}function Xi(e){return function(){fn(this,e)}}function Ji(e,t){return function(){(t.apply(this,arguments)?on:fn)(this,e)}}function $i(e,t){var l=an(e+"");if(arguments.length<2){for(var r=Nt(this.node()),n=-1,a=l.length;++n<a;)if(!r.contains(l[n]))return!1;return!0}return this.each((typeof t=="function"?Ji:t?Qi:Xi)(l,t))}function es(){this.textContent=""}function ts(e){return function(){this.textContent=e}}function ls(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rs(e){return arguments.length?this.each(e==null?es:(typeof e=="function"?ls:ts)(e)):this.node().textContent}function ns(){this.innerHTML=""}function as(e){return function(){this.innerHTML=e}}function is(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ss(e){return arguments.length?this.each(e==null?ns:(typeof e=="function"?is:as)(e)):this.node().innerHTML}function os(){this.nextSibling&&this.parentNode.appendChild(this)}function fs(){return this.each(os)}function us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hs(){return this.each(us)}function cs(e){var t=typeof e=="function"?e:en(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ds(){return null}function _s(e,t){var l=typeof e=="function"?e:en(e),r=t==null?ds:typeof t=="function"?t:tn(t);return this.select(function(){return this.insertBefore(l.apply(this,arguments),r.apply(this,arguments)||null)})}function ms(){var e=this.parentNode;e&&e.removeChild(this)}function gs(){return this.each(ms)}function ps(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vs(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bs(e){return this.select(e?vs:ps)}function ks(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ys(e){return function(t){e.call(this,t,this.__data__)}}function ws(e){return e.trim().split(/^|\s+/).map(function(t){var l="",r=t.indexOf(".");return r>=0&&(l=t.slice(r+1),t=t.slice(0,r)),{type:t,name:l}})}function As(e){return function(){var t=this.__on;if(t){for(var l=0,r=-1,n=t.length,a;l<n;++l)a=t[l],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Ds(e,t,l){return function(){var r=this.__on,n,a=ys(t);if(r){for(var i=0,s=r.length;i<s;++i)if((n=r[i]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=l),n.value=t;return}}this.addEventListener(e.type,a,l),n={type:e.type,name:e.name,value:t,listener:a,options:l},r?r.push(n):this.__on=[n]}}function Es(e,t,l){var r=ws(e+""),n,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var f=0,o=s.length,h;f<o;++f)for(n=0,h=s[f];n<a;++n)if((i=r[n]).type===h.type&&i.name===h.name)return h.value}return}for(s=t?Ds:As,n=0;n<a;++n)this.each(s(r[n],t,l));return this}function un(e,t,l){var r=nn(e),n=r.CustomEvent;typeof n=="function"?n=new n(t,l):(n=r.document.createEvent("Event"),l?(n.initEvent(t,l.bubbles,l.cancelable),n.detail=l.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function Is(e,t){return function(){return un(this,e,t)}}function Ms(e,t){return function(){return un(this,e,t.apply(this,arguments))}}function Ss(e,t){return this.each((typeof t=="function"?Ms:Is)(e,t))}function*Fs(){for(var e=this._groups,t=0,l=e.length;t<l;++t)for(var r=e[t],n=0,a=r.length,i;n<a;++n)(i=r[n])&&(yield i)}var Rs=[null];function Re(e,t){this._groups=e,this._parents=t}function Ls(){return this}Re.prototype={constructor:Re,select:$a,selectAll:ni,selectChild:fi,selectChildren:di,filter:_i,data:ki,enter:mi,exit:wi,join:Ai,merge:Di,selection:Ls,order:Ei,sort:Ii,call:Si,nodes:Fi,node:Ri,size:Li,empty:Ni,each:Ci,attr:Wi,style:Gi,property:Zi,classed:$i,text:rs,html:ss,raise:fs,lower:hs,append:cs,insert:_s,remove:gs,clone:bs,datum:ks,on:Es,dispatch:Ss,[Symbol.iterator]:Fs};function Ke(e){return typeof e=="string"?new Re([[document.querySelector(e)]],[document.documentElement]):new Re([[e]],Rs)}function Jt(e,t,l){const r=e.slice();return r[37]=t[l],r[39]=l,r}function $t(e,t,l){const r=e.slice();return r[37]=t[l],r[39]=l,r}function el(e,t,l){const r=e.slice();return r[37]=t[l],r[39]=l,r}function tl(e,t,l){const r=e.slice();return r[42]=t[l],r[39]=l,r}function ll(e,t,l){const r=e.slice();return r[44]=t[l],r[46]=l,r}function rl(e){let t,l,r=e[0].unit+" in "+e[0].latestYear,n,a;return{c(){t=K("p"),l=K("span"),n=Q(r),a=K("p"),this.h()},l(i){t=x(i,"P",{class:!0});var s=I(t);l=x(s,"SPAN",{style:!0});var f=I(l);n=X(f,r),f.forEach(p),s.forEach(p),a=x(i,"P",{class:!0});var o=I(a);o.forEach(p),this.h()},h(){ue(l,"padding-left","0px"),ue(l,"font-size","14px"),ue(l,"font-style","italic"),u(t,"class","svelte-tveaae"),u(a,"class","svelte-tveaae")},m(i,s){N(i,t,s),E(t,l),E(l,n),N(i,a,s)},p(i,s){s[0]&1&&r!==(r=i[0].unit+" in "+i[0].latestYear)&&ie(n,r)},d(i){i&&p(t),i&&p(a)}}}function nl(e){let t,l=[e[6],e[5]],r=[];for(let n=0;n<2;n+=1)r[n]=il(tl(e,l,n));return{c(){t=P("g");for(let n=0;n<2;n+=1)r[n].c();this.h()},l(n){t=z(n,"g",{class:!0});var a=I(t);for(let i=0;i<2;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){u(t,"class","keyContainer")},m(n,a){N(n,t,a);for(let i=0;i<2;i+=1)r[i]&&r[i].m(t,null)},p(n,a){if(a[0]&19552){l=[n[6],n[5]];let i;for(i=0;i<2;i+=1){const s=tl(n,l,i);r[i]?r[i].p(s,a):(r[i]=il(s),r[i].c(),r[i].m(t,null))}for(;i<2;i+=1)r[i].d(1)}},d(n){n&&p(t),fe(r,n)}}}function al(e){let t,l=e[44]+"",r;return{c(){t=P("text"),r=Q(l),this.h()},l(n){t=z(n,"text",{"text-anchor":!0,x:!0,y:!0,"font-size":!0});var a=I(t);r=X(a,l),a.forEach(p),this.h()},h(){u(t,"text-anchor",["start","end"][e[39]]),u(t,"x",[12,-12][e[39]]),u(t,"y",55+e[46]*12),u(t,"font-size","12px")},m(n,a){N(n,t,a),E(t,r)},p(n,a){a[0]&3072&&l!==(l=n[44]+"")&&ie(r,l)},d(n){n&&p(t)}}}function il(e){let t,l,r,n,a=dl([e[11],e[10]][e[39]],2),i=[];for(let s=0;s<a.length;s+=1)i[s]=al(ll(e,a,s));return{c(){t=P("g"),l=P("path"),r=P("path");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){t=z(s,"g",{class:!0,transform:!0});var f=I(t);l=z(f,"path",{d:!0,fill:!0,stroke:!0}),I(l).forEach(p),r=z(f,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),I(r).forEach(p);for(let o=0;o<i.length;o+=1)i[o].l(f);f.forEach(p),this.h()},h(){u(l,"d","M0 0 l-4 4 l8 0 z"),u(l,"fill","black"),u(l,"stroke","black"),u(r,"d","M0 6 l 0 45 l"+[10,-10][e[39]]+" 0"),u(r,"fill","none"),u(r,"stroke","black"),u(r,"stroke-width","1px"),u(t,"class",De(["min","max"][e[39]]+"Element")+" svelte-tveaae"),u(t,"transform",n="translate("+e[42].x+","+(e[14](e[42].y)+20)+")")},m(s,f){N(s,t,f),E(t,l),E(t,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null)},p(s,f){if(f[0]&3072){a=dl([s[11],s[10]][s[39]],2);let o;for(o=0;o<a.length;o+=1){const h=ll(s,a,o);i[o]?i[o].p(h,f):(i[o]=al(h),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}f[0]&16480&&n!==(n="translate("+s[42].x+","+(s[14](s[42].y)+20)+")")&&u(t,"transform",n)},d(s){s&&p(t),fe(i,s)}}}function sl(e){let t,l,r,n,a;return{c(){t=P("g"),l=P("circle"),this.h()},l(i){t=z(i,"g",{transform:!0});var s=I(t);l=z(s,"circle",{r:!0,stroke:!0,fill:!0,opacity:!0,hoverid:!0}),I(l).forEach(p),s.forEach(p),this.h()},h(){u(l,"r","5"),u(l,"stroke","none"),u(l,"fill","black"),u(l,"opacity","0.1"),u(l,"hoverid",e[39]),u(t,"transform",r="translate("+e[37].x+","+e[14](e[37].y)+")")},m(i,s){N(i,t,s),E(t,l),n||(a=[Ee(l,"mouseover",e[19]),Ee(l,"mouseleave",e[20]),Ee(l,"focus",e[19])],n=!0)},p(i,s){s[0]&16400&&r!==(r="translate("+i[37].x+","+i[14](i[37].y)+")")&&u(t,"transform",r)},d(i){i&&p(t),n=!1,ct(a)}}}function ol(e){let t,l,r,n=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",a,i,s,f,o=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",h,c,d,b,_=e[15].find(H).areanm+"",v,w,m,g,k=e[15].find(B).areanm+"",y,D,S,R;function H(...F){return e[34](e[37],...F)}function B(...F){return e[35](e[37],...F)}return{c(){t=P("g"),l=P("circle"),r=P("text"),a=Q(n),f=P("text"),h=Q(o),b=P("text"),v=Q(_),g=P("text"),y=Q(k),this.h()},l(F){t=z(F,"g",{transform:!0});var M=I(t);l=z(M,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(l).forEach(p),r=z(M,"text",{"text-anchor":!0,x:!0,y:!0,"stroke-width":!0,fill:!0,stroke:!0});var Y=I(r);a=X(Y,n),Y.forEach(p),f=z(M,"text",{"text-anchor":!0,x:!0,y:!0,fill:!0,stroke:!0});var O=I(f);h=X(O,o),O.forEach(p),b=z(M,"text",{"text-anchor":!0,x:!0,y:!0,"stroke-width":!0,fill:!0,stroke:!0});var J=I(b);v=X(J,_),J.forEach(p),g=z(M,"text",{"text-anchor":!0,x:!0,y:!0,fill:!0,stroke:!0});var q=I(g);y=X(q,k),q.forEach(p),M.forEach(p),this.h()},h(){u(l,"pointer-events","none"),u(l,"r","8"),u(l,"stroke","white"),u(l,"stroke-width","1.5px"),u(l,"fill","#F39431"),u(l,"opacity","1"),u(r,"text-anchor",i=e[37].x<e[8]/2?"start":"end"),u(r,"x",s=e[37].x<e[8]/2?10:-10),u(r,"y","-30"),u(r,"stroke-width","3px"),u(r,"fill","whtie"),u(r,"stroke","white"),u(f,"text-anchor",c=e[37].x<e[8]/2?"start":"end"),u(f,"x",d=e[37].x<e[8]/2?10:-10),u(f,"y","-30"),u(f,"fill","#F39431"),u(f,"stroke","#F39431"),u(b,"text-anchor",w=e[37].x<e[8]/2?"start":"end"),u(b,"x",m=e[37].x<e[8]/2?10:-10),u(b,"y","-10"),u(b,"stroke-width","3px"),u(b,"fill","whtie"),u(b,"stroke","white"),u(g,"text-anchor",D=e[37].x<e[8]/2?"start":"end"),u(g,"x",S=e[37].x<e[8]/2?10:-10),u(g,"y","-10"),u(g,"fill","#F39431"),u(g,"stroke","#F39431"),u(t,"transform",R="translate("+e[37].x+","+e[14](e[37].y)+")")},m(F,M){N(F,t,M),E(t,l),E(t,r),E(r,a),E(t,f),E(f,h),E(t,b),E(b,v),E(t,g),E(g,y)},p(F,M){e=F,M[0]&17&&n!==(n=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"")&&ie(a,n),M[0]&272&&i!==(i=e[37].x<e[8]/2?"start":"end")&&u(r,"text-anchor",i),M[0]&272&&s!==(s=e[37].x<e[8]/2?10:-10)&&u(r,"x",s),M[0]&17&&o!==(o=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"")&&ie(h,o),M[0]&272&&c!==(c=e[37].x<e[8]/2?"start":"end")&&u(f,"text-anchor",c),M[0]&272&&d!==(d=e[37].x<e[8]/2?10:-10)&&u(f,"x",d),M[0]&16&&_!==(_=e[15].find(H).areanm+"")&&ie(v,_),M[0]&272&&w!==(w=e[37].x<e[8]/2?"start":"end")&&u(b,"text-anchor",w),M[0]&272&&m!==(m=e[37].x<e[8]/2?10:-10)&&u(b,"x",m),M[0]&16&&k!==(k=e[15].find(B).areanm+"")&&ie(y,k),M[0]&272&&D!==(D=e[37].x<e[8]/2?"start":"end")&&u(g,"text-anchor",D),M[0]&272&&S!==(S=e[37].x<e[8]/2?10:-10)&&u(g,"x",S),M[0]&16400&&R!==(R="translate("+e[37].x+","+e[14](e[37].y)+")")&&u(t,"transform",R)},d(F){F&&p(t)}}}function fl(e){let t,l=e[12]===e[39]&&ol(e);return{c(){l&&l.c(),t=ge()},l(r){l&&l.l(r),t=ge()},m(r,n){l&&l.m(r,n),N(r,t,n)},p(r,n){r[12]===r[39]?l?l.p(r,n):(l=ol(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&p(t)}}}function ul(e){let t,l=Math.round(e[3].datum.value).toLocaleString()+"",r,n,a,i=Math.round(e[3].datum.value).toLocaleString()+"",s,f,o,h,c,d,b,_,v,w,m,g,k,y,D,S,R,H,B,F,M,Y,O,J,q,L,W,U;return{c(){t=P("text"),r=Q(l),a=P("text"),s=Q(i),o=P("text"),h=Q("Half of areas have a value"),d=P("text"),b=Q("higher/lower than this line"),v=P("path"),m=P("path"),k=P("text"),y=Q("worse than"),S=P("text"),R=Q("average"),B=P("path"),M=P("path"),O=P("text"),J=Q("better than"),L=P("text"),W=Q("average"),this.h()},l(A){t=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,stroke:!0,"stroke-width":!0,"font-size":!0});var T=I(t);r=X(T,l),T.forEach(p),a=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var V=I(a);s=X(V,i),V.forEach(p),o=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var re=I(o);h=X(re,"Half of areas have a value"),re.forEach(p),d=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var ce=I(d);b=X(ce,"higher/lower than this line"),ce.forEach(p),v=z(A,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0}),I(v).forEach(p),m=z(A,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(m).forEach(p),k=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var C=I(k);y=X(C,"worse than"),C.forEach(p),S=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var ee=I(S);R=X(ee,"average"),ee.forEach(p),B=z(A,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0}),I(B).forEach(p),M=z(A,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(M).forEach(p),O=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var Ie=I(O);J=X(Ie,"better than"),Ie.forEach(p),L=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var Ae=I(L);W=X(Ae,"average"),Ae.forEach(p),this.h()},h(){u(t,"x",n=e[3].x),u(t,"y","80"),u(t,"text-anchor","middle"),u(t,"fill","white"),u(t,"stroke","white"),u(t,"stroke-width","8px"),u(t,"font-size","14px"),u(a,"x",f=e[3].x),u(a,"y","80"),u(a,"text-anchor","middle"),u(a,"fill","#871A5B"),u(a,"font-size","14px"),u(o,"x",c=e[3].x),u(o,"y","120"),u(o,"text-anchor","middle"),u(o,"fill","#871A5B"),u(o,"font-size","12px"),u(d,"x",_=e[3].x),u(d,"y","132"),u(d,"text-anchor","middle"),u(d,"fill","#871A5B"),u(d,"font-size","12px"),u(v,"transform",w="translate("+e[3].x+",120)"),u(v,"d","M -80 0 l-60 0"),u(v,"stroke-width","1px"),u(v,"stroke","black"),u(m,"transform",g="translate("+e[3].x+",120)"),u(m,"d","M -148 0 l6 -6 l0 12 z"),u(m,"stroke","none"),u(m,"fill","black"),u(k,"transform",D="translate("+e[3].x+",120)"),u(k,"x","-150"),u(k,"y","20"),u(k,"text-anchor","middle"),u(k,"fill","black"),u(k,"font-size","12px"),u(S,"transform",H="translate("+e[3].x+",120)"),u(S,"x","-150"),u(S,"y","32"),u(S,"text-anchor","middle"),u(S,"fill","black"),u(S,"font-size","12px"),u(B,"transform",F="translate("+e[3].x+",120)"),u(B,"d","M 80 0 l60 0"),u(B,"stroke-width","1px"),u(B,"stroke","black"),u(M,"transform",Y="translate("+e[3].x+",120)"),u(M,"d","M 148 0 l-6 -6 l0 12 z"),u(M,"stroke","none"),u(M,"fill","black"),u(O,"transform",q="translate("+e[3].x+",120)"),u(O,"x","150"),u(O,"y","20"),u(O,"text-anchor","middle"),u(O,"fill","black"),u(O,"font-size","12px"),u(L,"transform",U="translate("+e[3].x+",120)"),u(L,"x","150"),u(L,"y","32"),u(L,"text-anchor","middle"),u(L,"fill","black"),u(L,"font-size","12px")},m(A,T){N(A,t,T),E(t,r),N(A,a,T),E(a,s),N(A,o,T),E(o,h),N(A,d,T),E(d,b),N(A,v,T),N(A,m,T),N(A,k,T),E(k,y),N(A,S,T),E(S,R),N(A,B,T),N(A,M,T),N(A,O,T),E(O,J),N(A,L,T),E(L,W)},p(A,T){T[0]&8&&l!==(l=Math.round(A[3].datum.value).toLocaleString()+"")&&ie(r,l),T[0]&8&&n!==(n=A[3].x)&&u(t,"x",n),T[0]&8&&i!==(i=Math.round(A[3].datum.value).toLocaleString()+"")&&ie(s,i),T[0]&8&&f!==(f=A[3].x)&&u(a,"x",f),T[0]&8&&c!==(c=A[3].x)&&u(o,"x",c),T[0]&8&&_!==(_=A[3].x)&&u(d,"x",_),T[0]&8&&w!==(w="translate("+A[3].x+",120)")&&u(v,"transform",w),T[0]&8&&g!==(g="translate("+A[3].x+",120)")&&u(m,"transform",g),T[0]&8&&D!==(D="translate("+A[3].x+",120)")&&u(k,"transform",D),T[0]&8&&H!==(H="translate("+A[3].x+",120)")&&u(S,"transform",H),T[0]&8&&F!==(F="translate("+A[3].x+",120)")&&u(B,"transform",F),T[0]&8&&Y!==(Y="translate("+A[3].x+",120)")&&u(M,"transform",Y),T[0]&8&&q!==(q="translate("+A[3].x+",120)")&&u(O,"transform",q),T[0]&8&&U!==(U="translate("+A[3].x+",120)")&&u(L,"transform",U)},d(A){A&&p(t),A&&p(a),A&&p(o),A&&p(d),A&&p(v),A&&p(m),A&&p(k),A&&p(S),A&&p(B),A&&p(M),A&&p(O),A&&p(L)}}}function Ns(e){let t,l,r;return{c(){t=P("circle"),this.h()},l(n){t=z(n,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var a=I(t);a.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"r",8),u(t,"fill",l=$[e[37].datum.role]),u(t,"stroke","white"),u(t,"stroke-width","1.5px"),u(t,"opacity",r=e[12]===null?1:.2)},m(n,a){N(n,t,a)},p(n,a){a[0]&8192&&l!==(l=$[n[37].datum.role])&&u(t,"fill",l),a[0]&4096&&r!==(r=n[12]===null?1:.2)&&u(t,"opacity",r)},d(n){n&&p(t)}}}function Cs(e){let t,l,r,n;return{c(){t=P("rect"),this.h()},l(a){t=z(a,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var i=I(t);i.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"transform",l=["country","uk"].includes(e[37].datum.role)?"rotate(45)":null),u(t,"x",-6),u(t,"y",-6),u(t,"width",12),u(t,"height",12),u(t,"fill",r=$[e[37].datum.role]),u(t,"stroke","white"),u(t,"stroke-width","1.5px"),u(t,"opacity",n=e[12]===null?1:.2)},m(a,i){N(a,t,i)},p(a,i){i[0]&8192&&l!==(l=["country","uk"].includes(a[37].datum.role)?"rotate(45)":null)&&u(t,"transform",l),i[0]&8192&&r!==(r=$[a[37].datum.role])&&u(t,"fill",r),i[0]&4096&&n!==(n=a[12]===null?1:.2)&&u(t,"opacity",n)},d(a){a&&p(t)}}}function hl(e){let t,l,r,n;function a(f,o){return o[0]&8192&&(l=null),o[0]&8192&&(r=null),o[0]&8192&&(n=null),l==null&&(l=f[37].x===Math.min(...f[13].map(Ws))),l?Ts:(r==null&&(r=f[37].x===Math.max(...f[13].map(Hs))),r?zs:(n==null&&(n=f[37].y===Math.max(...f[13].filter(f[33]).map(qs))),n?Ps:Vs))}let i=a(e,[-1,-1]),s=i(e);return{c(){t=P("g"),s.c(),this.h()},l(f){t=z(f,"g",{class:!0});var o=I(t);s.l(o),o.forEach(p),this.h()},h(){u(t,"class","labelGroup")},m(f,o){N(f,t,o),s.m(t,null)},p(f,o){i===(i=a(f,o))&&s?s.p(f,o):(s.d(1),s=i(f),s&&(s.c(),s.m(t,null)))},d(f){f&&p(t),s.d()}}}function Vs(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","0"),u(t,"y","25"),u(t,"text-anchor","middle"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","0"),u(n,"y","25"),u(n,"text-anchor","middle"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function Ps(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","0"),u(t,"y","-15"),u(t,"text-anchor","middle"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","0"),u(n,"y","-15"),u(n,"text-anchor","middle"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function zs(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","10"),u(t,"y","0"),u(t,"text-anchor","start"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","10"),u(n,"y","0"),u(n,"text-anchor","start"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function Ts(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","-10"),u(t,"y","0"),u(t,"text-anchor","end"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","-10"),u(n,"y","0"),u(n,"text-anchor","end"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function cl(e){let t,l,r,n;function a(o,h){return h[0]&8192&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(o[37].datum.role)),l?Cs:Ns}let i=a(e,[-1,-1]),s=i(e),f=e[13].length<=3&&hl(e);return{c(){t=P("g"),s.c(),r=ge(),f&&f.c(),this.h()},l(o){t=z(o,"g",{transform:!0});var h=I(t);s.l(h),r=ge(),f&&f.l(h),h.forEach(p),this.h()},h(){u(t,"transform",n="translate("+e[37].x+","+-e[37].y+")")},m(o,h){N(o,t,h),s.m(t,null),E(t,r),f&&f.m(t,null)},p(o,h){i===(i=a(o,h))&&s?s.p(o,h):(s.d(1),s=i(o),s&&(s.c(),s.m(t,r))),o[13].length<=3?f?f.p(o,h):(f=hl(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null),h[0]&8192&&n!==(n="translate("+o[37].x+","+-o[37].y+")")&&u(t,"transform",n)},d(o){o&&p(t),s.d(),f&&f.d()}}}function Bs(e){let t,l,r,n,a=e[0].label+"",i,s,f,o,h,c,d,b,_,v,w,m,g,k,y,D,S,R,H,B,F=e[0].unit!=null&&rl(e),M=e[1]&&nl(e),Y=e[4],O=[];for(let A=0;A<Y.length;A+=1)O[A]=sl(el(e,Y,A));let J=e[4],q=[];for(let A=0;A<J.length;A+=1)q[A]=fl($t(e,J,A));let L=e[1]&&ul(e),W=e[13],U=[];for(let A=0;A<W.length;A+=1)U[A]=cl(Jt(e,W,A));return{c(){t=K("div"),l=K("div"),r=K("p"),n=K("span"),i=Q(a),s=te(),F&&F.c(),f=te(),o=P("svg"),h=P("rect"),c=P("g"),M&&M.c(),d=P("g");for(let A=0;A<O.length;A+=1)O[A].c();b=P("g");for(let A=0;A<q.length;A+=1)q[A].c();_=P("g"),v=P("line"),L&&L.c(),y=P("g");for(let A=0;A<U.length;A+=1)U[A].c();this.h()},l(A){t=x(A,"DIV",{class:!0});var T=I(t);l=x(T,"DIV",{class:!0});var V=I(l);r=x(V,"P",{style:!0,class:!0});var re=I(r);n=x(re,"SPAN",{style:!0});var ce=I(n);i=X(ce,a),ce.forEach(p),re.forEach(p),s=le(V),F&&F.l(V),f=le(V),o=z(V,"svg",{height:!0,width:!0,class:!0});var C=I(o);h=z(C,"rect",{width:!0,height:!0,fill:!0,opacity:!0}),I(h).forEach(p),c=z(C,"g",{class:!0,transform:!0});var ee=I(c);M&&M.l(ee),d=z(ee,"g",{class:!0});var Ie=I(d);for(let pe=0;pe<O.length;pe+=1)O[pe].l(Ie);Ie.forEach(p),b=z(ee,"g",{class:!0});var Ae=I(b);for(let pe=0;pe<q.length;pe+=1)q[pe].l(Ae);Ae.forEach(p),_=z(ee,"g",{class:!0,transform:!0});var Ce=I(_);v=z(Ce,"line",{x1:!0,x2:!0,y1:!0,y2:!0,fill:!0,stroke:!0,"stroke-width":!0}),I(v).forEach(p),L&&L.l(Ce),Ce.forEach(p),y=z(ee,"g",{class:!0,transform:!0,opacity:!0});var Pe=I(y);for(let pe=0;pe<U.length;pe+=1)U[pe].l(Pe);Pe.forEach(p),ee.forEach(p),C.forEach(p),V.forEach(p),T.forEach(p),this.h()},h(){ue(n,"font-weight","bold"),ue(r,"padding-top","10px"),u(r,"class","svelte-tveaae"),u(h,"width",e[2]),u(h,"height",e[16]),u(h,"fill","grey"),u(h,"opacity","0"),u(d,"class","backgroundElements"),u(b,"class","hoverElements"),u(v,"x1",w=e[3].x),u(v,"x2",m=e[3].x),u(v,"y1","-40"),u(v,"y2",g=e[1]?110:40),u(v,"fill","none"),u(v,"stroke","#871A5B"),u(v,"stroke-width","2px"),u(_,"class","medianLine"),u(_,"transform",k="translate(0,"+e[7]/2+")"),u(y,"class","primaryElements"),u(y,"transform",D="translate(0,"+e[7]/2+")"),u(y,"opacity",S=e[12]===null?1:.1),u(c,"class","chart-container"),u(c,"transform",R="translate("+e[9].left+","+e[9].top+")"),u(o,"height",H=e[16]+(e[1]?110:0)),u(o,"width",e[2]),u(o,"class","svelte-tveaae"),u(l,"class","svg-container"),ut(()=>e[36].call(l)),u(t,"class","rowContainer svelte-tveaae")},m(A,T){N(A,t,T),E(t,l),E(l,r),E(r,n),E(n,i),E(l,s),F&&F.m(l,null),E(l,f),E(l,o),E(o,h),E(o,c),M&&M.m(c,null),E(c,d);for(let V=0;V<O.length;V+=1)O[V]&&O[V].m(d,null);E(c,b);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(b,null);E(c,_),E(_,v),L&&L.m(_,null),E(c,y);for(let V=0;V<U.length;V+=1)U[V]&&U[V].m(y,null);B=ht(l,e[36].bind(l))},p(A,T){if(T[0]&1&&a!==(a=A[0].label+"")&&ie(i,a),A[0].unit!=null?F?F.p(A,T):(F=rl(A),F.c(),F.m(l,f)):F&&(F.d(1),F=null),T[0]&4&&u(h,"width",A[2]),A[1]?M?M.p(A,T):(M=nl(A),M.c(),M.m(c,d)):M&&(M.d(1),M=null),T[0]&1589264){Y=A[4];let V;for(V=0;V<Y.length;V+=1){const re=el(A,Y,V);O[V]?O[V].p(re,T):(O[V]=sl(re),O[V].c(),O[V].m(d,null))}for(;V<O.length;V+=1)O[V].d(1);O.length=Y.length}if(T[0]&446737){J=A[4];let V;for(V=0;V<J.length;V+=1){const re=$t(A,J,V);q[V]?q[V].p(re,T):(q[V]=fl(re),q[V].c(),q[V].m(b,null))}for(;V<q.length;V+=1)q[V].d(1);q.length=J.length}if(T[0]&8&&w!==(w=A[3].x)&&u(v,"x1",w),T[0]&8&&m!==(m=A[3].x)&&u(v,"x2",m),T[0]&2&&g!==(g=A[1]?110:40)&&u(v,"y2",g),A[1]?L?L.p(A,T):(L=ul(A),L.c(),L.m(_,null)):L&&(L.d(1),L=null),T[0]&128&&k!==(k="translate(0,"+A[7]/2+")")&&u(_,"transform",k),T[0]&405505){W=A[13];let V;for(V=0;V<W.length;V+=1){const re=Jt(A,W,V);U[V]?U[V].p(re,T):(U[V]=cl(re),U[V].c(),U[V].m(y,null))}for(;V<U.length;V+=1)U[V].d(1);U.length=W.length}T[0]&128&&D!==(D="translate(0,"+A[7]/2+")")&&u(y,"transform",D),T[0]&4096&&S!==(S=A[12]===null?1:.1)&&u(y,"opacity",S),T[0]&512&&R!==(R="translate("+A[9].left+","+A[9].top+")")&&u(c,"transform",R),T[0]&2&&H!==(H=A[16]+(A[1]?110:0))&&u(o,"height",H),T[0]&4&&u(o,"width",A[2])},i:he,o:he,d(A){A&&p(t),F&&F.d(),M&&M.d(),fe(O,A),fe(q,A),L&&L.d(),fe(U,A),B()}}}function dl(e,t){const l=e.split(" "),r=Math.ceil(l.length/t),n=[];let a=[];return l.forEach(i=>{a.length<r?a.push(i):(n.push(a.join(" ")),a=[i])}),a.length>0&&n.push(a.join(" ")),n}function Os(e){e.sort((l,r)=>l.x-r.x);const t=Math.floor(e.length/2);return e[t]}const Ws=e=>e.x,Hs=e=>e.x,qs=e=>e.y;function Ys(e,t,l){let r,n,a,i,s,f,o,h,c,d,b,_,v,w,m,g,k,y,D=Me("areas"),{filteredData:S,indicator:R,checkboxedRoles:H,siblingAreas:B,selectedAreas:F,areasWithData:M,plottedAreas:Y,key:O=!1}=t,J=400,q=100,L=R.prefix===null?"":R.prefix==="pounds"?"Â£":R.prefix,W=R.suffix===null?"":R.suffix;function U(C){l(12,v=parseFloat(Ke(this).attr("hoverid")))}function A(C){l(12,v=null)}const T=C=>C.x!=Math.max(..._.map(ee=>ee.x))&C.x!=Math.min(..._.map(ee=>ee.x)),V=(C,ee)=>ee.areacd===C.datum.areacd,re=(C,ee)=>ee.areacd===C.datum.areacd;function ce(){J=this.clientWidth,l(2,J)}return e.$$set=C=>{"filteredData"in C&&l(21,S=C.filteredData),"indicator"in C&&l(0,R=C.indicator),"checkboxedRoles"in C&&l(22,H=C.checkboxedRoles),"siblingAreas"in C&&l(23,B=C.siblingAreas),"selectedAreas"in C&&l(24,F=C.selectedAreas),"areasWithData"in C&&l(25,M=C.areasWithData),"plottedAreas"in C&&l(26,Y=C.plottedAreas),"key"in C&&l(1,O=C.key)},e.$$.update=()=>{e.$$.dirty[0]&516&&l(8,n=J-r.left-r.right),e.$$.dirty[0]&512&&l(7,a=q-r.top-r.bottom),e.$$.dirty[0]&27262976&&l(32,i=S.filter(C=>B.siblings.includes(C.areacd)||C.areacd===F.find(ee=>ee.role==="main").data.areacd)),e.$$.dirty[1]&2&&l(28,s=[Math.min(...i.map(C=>C.value)),Math.max(...i.map(C=>C.value))]),e.$$.dirty[0]&268435456|e.$$.dirty[1]&2&&l(30,f=i.map(C=>({...C,calcYValue:(C.value-s[0])/(s[1]-s[0])}))),e.$$.dirty[0]&69206016&&l(29,o=Y.map(C=>({...C,yValue:S.filter(ee=>ee.areacd===C.areacd)})).filter(C=>C.yValue.length>0)),e.$$.dirty[0]&1&&l(31,h=R.highEqualsGood==="F"?[1,0]:[0,1]),e.$$.dirty[0]&256|e.$$.dirty[1]&1&&l(27,c=Ve().domain(h).range([0,n])),e.$$.dirty[0]&1207959553&&l(4,d=new nt(f,5,C=>c(Math.pow(C.calcYValue,R.beeswarmPower))).calculateYPositions()),e.$$.dirty[0]&144&&l(14,b=Ve().domain([Math.min(...d.map(C=>C.y)),Math.max(...d.map(C=>C.y))]).range([0,a])),e.$$.dirty[0]&939524097&&l(13,_=new nt(o.map((C,ee)=>({...C,calcYValue:(C.yValue[0].value-s[0])/(s[1]-s[0])})),8,C=>c(Math.pow(C.calcYValue,R.beeswarmPower))).calculateYPositions()),e.$$.dirty[0]&16&&l(6,w=d.reduce((C,ee)=>C.x<ee.x?C:ee)),e.$$.dirty[0]&16&&l(5,m=d.reduce((C,ee)=>C.x>ee.x?C:ee)),e.$$.dirty[0]&65&&l(11,g=D.find(C=>C.areacd===w.datum.areacd).areanm+" has the "+(R.highEqualsGood==="F"?"higher ":"lowest ")+R.shortDesc.toLowerCase()),e.$$.dirty[0]&33&&l(10,k=D.find(C=>C.areacd===m.datum.areacd).areanm+" has the "+(R.highEqualsGood==="F"?"lowest ":"highest ")+R.shortDesc.toLowerCase()),e.$$.dirty[0]&16&&l(3,y=Os(d)),e.$$.dirty[0]&8&&console.log(y)},l(9,r={top:10,left:20,right:30,bottom:10}),l(12,v=null),[R,O,J,y,d,m,w,a,n,r,k,g,v,_,b,D,q,L,W,U,A,S,H,B,F,M,Y,c,s,o,f,h,i,T,V,re,ce]}class Ct extends de{constructor(t){super(),_e(this,t,Ys,Bs,me,{filteredData:21,indicator:0,checkboxedRoles:22,siblingAreas:23,selectedAreas:24,areasWithData:25,plottedAreas:26,key:1},null,[-1,-1])}}function _l(e,t,l){const r=e.slice();return r[3]=t[l],r[5]=l,r}function Gs(e){let t,l;return{c(){t=P("circle"),this.h()},l(r){t=z(r,"circle",{r:!0,fill:!0,stroke:!0});var n=I(t);n.forEach(p),this.h()},h(){u(t,"r",xe),u(t,"fill",l=$[e[3].role]),u(t,"stroke","white")},m(r,n){N(r,t,n)},p(r,n){n&1&&l!==(l=$[r[3].role])&&u(t,"fill",l)},d(r){r&&p(t)}}}function Ks(e){let t,l,r;return{c(){t=P("rect"),this.h()},l(n){t=z(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var a=I(t);a.forEach(p),this.h()},h(){u(t,"transform",l=["country","uk"].includes(e[3].role)?"rotate(45)":null),u(t,"x",-xe),u(t,"y",-xe),u(t,"width",2*xe),u(t,"height",2*xe),u(t,"fill",r=$[e[3].role]),u(t,"stroke","white")},m(n,a){N(n,t,a)},p(n,a){a&1&&l!==(l=["country","uk"].includes(n[3].role)?"rotate(45)":null)&&u(t,"transform",l),a&1&&r!==(r=$[n[3].role])&&u(t,"fill",r)},d(n){n&&p(t)}}}function ml(e){let t,l,r,n,a,i,s=e[1].find(b).areanm+"",f,o;function h(_,v){return v&1&&(n=null),n==null&&(n=!!["parent","country","uk"].includes(_[3].role)),n?Ks:Gs}let c=h(e,-1),d=c(e);function b(..._){return e[2](e[3],..._)}return{c(){t=K("div"),l=P("svg"),r=P("g"),d.c(),a=te(),i=K("p"),f=Q(s),o=te(),this.h()},l(_){t=x(_,"DIV",{class:!0});var v=I(t);l=z(v,"svg",{width:!0,height:!0});var w=I(l);r=z(w,"g",{transform:!0});var m=I(r);d.l(m),m.forEach(p),w.forEach(p),a=le(v),i=x(v,"P",{style:!0,class:!0});var g=I(i);f=X(g,s),g.forEach(p),o=le(v),v.forEach(p),this.h()},h(){u(r,"transform","translate(10,12)"),u(l,"width","20"),u(l,"height","24"),ue(i,"color",$[e[3].role]),u(i,"class","svelte-1p5l8o2"),u(t,"class","roleContainer svelte-1p5l8o2")},m(_,v){N(_,t,v),E(t,l),E(l,r),d.m(r,null),E(t,a),E(t,i),E(i,f),E(t,o)},p(_,v){e=_,c===(c=h(e,v))&&d?d.p(e,v):(d.d(1),d=c(e),d&&(d.c(),d.m(r,null))),v&1&&s!==(s=e[1].find(b).areanm+"")&&ie(f,s),v&1&&ue(i,"color",$[e[3].role])},d(_){_&&p(t),d.d()}}}function xs(e){let t,l=e[0],r=[];for(let n=0;n<l.length;n+=1)r[n]=ml(_l(e,l,n));return{c(){t=K("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=x(n,"DIV",{class:!0});var a=I(t);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){u(t,"class","keyContainer svelte-1p5l8o2")},m(n,a){N(n,t,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,null)},p(n,[a]){if(a&3){l=n[0];let i;for(i=0;i<l.length;i+=1){const s=_l(n,l,i);r[i]?r[i].p(s,a):(r[i]=ml(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},i:he,o:he,d(n){n&&p(t),fe(r,n)}}}let xe=6;function Us(e,t,l){let r=Me("areas"),{plottedAreas:n}=t;const a=(i,s)=>s.areacd===i.areacd;return e.$$set=i=>{"plottedAreas"in i&&l(0,n=i.plottedAreas)},[n,r,a]}class Vt extends de{constructor(t){super(),_e(this,t,Us,xs,me,{plottedAreas:0})}}function js(e){let t,l,r,n,a,i,s,f,o;function h(m){e[39](m)}function c(m){e[40](m)}function d(m){e[41](m)}function b(m){e[42](m)}function _(m){e[43](m)}function v(m){e[44](m)}let w={id:e[2],container:e[3],items:e[4],placeholder:e[5],isMulti:e[10],isSearchable:e[6],groupBy:e[22],loadOptions:e[9],getSelectionLabel:e[12],getOptionLabel:e[21],itemFilter:e[19],ariaValues:e[25],ariaListOpen:e[26],ariaFocused:e[27],noOptionsMessage:e[20],indicatorSvg:e[23],containerStyles:e[24],optionIdentifier:e[8],showIndicator:!0,isClearable:e[7]?!e[10]:!1};return e[15]!==void 0&&(w.isFocused=e[15]),e[0]!==void 0&&(w.value=e[0]),e[16]!==void 0&&(w.listOpen=e[16]),e[1]!==void 0&&(w.filterText=e[1]),e[13]!==void 0&&(w.isWaiting=e[13]),e[17]!==void 0&&(w.handleClear=e[17]),l=new zn({props:w}),ve.push(()=>be(l,"isFocused",h)),ve.push(()=>be(l,"value",c)),ve.push(()=>be(l,"listOpen",d)),ve.push(()=>be(l,"filterText",b)),ve.push(()=>be(l,"isWaiting",_)),ve.push(()=>be(l,"handleClear",v)),l.$on("select",e[28]),l.$on("clear",e[45]),l.$on("loaded",e[46]),l.$on("error",e[47]),{c(){t=K("div"),ne(l.$$.fragment),this.h()},l(m){t=x(m,"DIV",{class:!0});var g=I(t);oe(l.$$.fragment,g),g.forEach(p),this.h()},h(){u(t,"class","selectbox svelte-1w33mjb"),We(t,"multi-selected",e[0]&&e[10]),We(t,"focused",e[15]),We(t,"selected",e[0]&&!e[16]&&!e[10]),ue(t,"--borderColor",e[11]),ue(t,"--firstItem",e[18](0)),ue(t,"--secondItem",e[18](1)),ue(t,"--thirdItem",e[18](2)),ue(t,"--fourthItem",e[18](3))},m(m,g){N(m,t,g),ae(l,t,null),e[48](t),o=!0},p(m,g){const k={};g[0]&4&&(k.id=m[2]),g[0]&8&&(k.container=m[3]),g[0]&16&&(k.items=m[4]),g[0]&32&&(k.placeholder=m[5]),g[0]&1024&&(k.isMulti=m[10]),g[0]&64&&(k.isSearchable=m[6]),g[0]&512&&(k.loadOptions=m[9]),g[0]&4096&&(k.getSelectionLabel=m[12]),g[0]&524288&&(k.itemFilter=m[19]),g[0]&1048576&&(k.noOptionsMessage=m[20]),g[0]&256&&(k.optionIdentifier=m[8]),g[0]&1152&&(k.isClearable=m[7]?!m[10]:!1),!r&&g[0]&32768&&(r=!0,k.isFocused=m[15],ke(()=>r=!1)),!n&&g[0]&1&&(n=!0,k.value=m[0],ke(()=>n=!1)),!a&&g[0]&65536&&(a=!0,k.listOpen=m[16],ke(()=>a=!1)),!i&&g[0]&2&&(i=!0,k.filterText=m[1],ke(()=>i=!1)),!s&&g[0]&8192&&(s=!0,k.isWaiting=m[13],ke(()=>s=!1)),!f&&g[0]&131072&&(f=!0,k.handleClear=m[17],ke(()=>f=!1)),l.$set(k),(!o||g[0]&1025)&&We(t,"multi-selected",m[0]&&m[10]),(!o||g[0]&32768)&&We(t,"focused",m[15]),(!o||g[0]&66561)&&We(t,"selected",m[0]&&!m[16]&&!m[10]),g[0]&2048&&ue(t,"--borderColor",m[11]),g[0]&262144&&ue(t,"--firstItem",m[18](0)),g[0]&262144&&ue(t,"--secondItem",m[18](1)),g[0]&262144&&ue(t,"--thirdItem",m[18](2)),g[0]&262144&&ue(t,"--fourthItem",m[18](3))},i(m){o||(G(l.$$.fragment,m),o=!0)},o(m){Z(l.$$.fragment,m),o=!1},d(m){m&&p(t),se(l),e[48](null)}}}function Zs(e,t,l){let r,n,a;const i='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',s='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',f=Mn();let{id:o=""}=t,{container:h=void 0}=t,{mode:c="default"}=t,{items:d}=t,{placeholder:b="Select one..."}=t,{value:_=null}=t,{filterText:v=""}=t,{isSearchable:w=!0}=t,{isClearable:m=!0}=t,{autoClear:g=!1}=t,{idKey:k="value"}=t,{labelKey:y="label"}=t,{groupKey:D=null}=t,{groupItems:S=!1}=t,{loadOptions:R=void 0}=t,{fontSize:H="1em"}=t,{height:B=42}=t,{isMulti:F=!1}=t,{maxSelected:M=4}=t,{colors:Y=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=t,{darkMode:O=!1}=t,{borderColor:J=O?"white":"#206095"}=t;const q=D&&!S?j=>`${j[y]} <span class="group">${j[D]}</span>`:j=>j[y];let{getSelectionLabel:L=j=>j?q(j):null}=t;const W=S&&D?j=>j[D]:void 0,U=c=="search"?i:s,A=`--inputFontSize: ${H}; --groupTitleFontSize: ${H}; --height: ${B}px; font-size: ${H};`,T=j=>`${j}, selected.`,V=(j,Fe)=>`You are currently focused on ${j}. There are ${Fe} results available.`,re=()=>"Select is focused, type to refine list, press down to open the menu.";let ce,C,ee,Ie,Ae;const Ce=j=>new Promise(Fe=>setTimeout(Fe,j));async function Pe(j){if(f("select",j.detail),g)Ae();else if(m){await Ce(10);let Fe=ce.getElementsByClassName("clearSelect")[0];Fe&&(Fe.tabIndex=0,Fe.onkeypress=Je=>{Je.key=="Enter"&&Ae()},Fe.removeAttribute("aria-hidden"),Fe.setAttribute("aria-label","Clear selection"))}}function pe(j){C=j,l(15,C)}function vn(j){_=j,l(0,_)}function bn(j){ee=j,l(16,ee)}function kn(j){v=j,l(1,v)}function yn(j){Ie=j,l(13,Ie)}function wn(j){Ae=j,l(17,Ae)}function An(j){_t.call(this,e,j)}function Dn(j){_t.call(this,e,j)}function En(j){_t.call(this,e,j)}function In(j){ve[j?"unshift":"push"](()=>{ce=j,l(14,ce)})}return e.$$set=j=>{"id"in j&&l(2,o=j.id),"container"in j&&l(3,h=j.container),"mode"in j&&l(29,c=j.mode),"items"in j&&l(4,d=j.items),"placeholder"in j&&l(5,b=j.placeholder),"value"in j&&l(0,_=j.value),"filterText"in j&&l(1,v=j.filterText),"isSearchable"in j&&l(6,w=j.isSearchable),"isClearable"in j&&l(7,m=j.isClearable),"autoClear"in j&&l(30,g=j.autoClear),"idKey"in j&&l(8,k=j.idKey),"labelKey"in j&&l(31,y=j.labelKey),"groupKey"in j&&l(32,D=j.groupKey),"groupItems"in j&&l(33,S=j.groupItems),"loadOptions"in j&&l(9,R=j.loadOptions),"fontSize"in j&&l(34,H=j.fontSize),"height"in j&&l(35,B=j.height),"isMulti"in j&&l(10,F=j.isMulti),"maxSelected"in j&&l(36,M=j.maxSelected),"colors"in j&&l(37,Y=j.colors),"darkMode"in j&&l(38,O=j.darkMode),"borderColor"in j&&l(11,J=j.borderColor),"getSelectionLabel"in j&&l(12,L=j.getSelectionLabel)},e.$$.update=()=>{e.$$.dirty[0]&536879106&&l(20,r=Ie?"Loading...":c=="search"&&v.length<3?"Enter 3 or more characters for suggestions":`No results match ${v}`),e.$$.dirty[0]&536870915|e.$$.dirty[1]&33&&l(19,n=Array.isArray(_)&&_.length>=M||c=="search"&&v.length<3?(j,Fe,Je)=>!1:(j,Fe,Je)=>`${Je[y]}`.match(new RegExp(`\\b${Fe}`,"i"))),e.$$.dirty[1]&64&&l(18,a=j=>Y[j%Y.length])},[_,v,o,h,d,b,w,m,k,R,F,J,L,Ie,ce,C,ee,Ae,a,n,r,q,W,U,A,T,V,re,Pe,c,g,y,D,S,H,B,M,Y,O,pe,vn,bn,kn,yn,wn,An,Dn,En,In]}class Qs extends de{constructor(t){super(),_e(this,t,Zs,js,me,{id:2,container:3,mode:29,items:4,placeholder:5,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,loadOptions:9,fontSize:34,height:35,isMulti:10,maxSelected:36,colors:37,darkMode:38,borderColor:11,getSelectionLabel:12},null,[-1,-1])}}function Xs(e){let t,l,r,n;function a(s){e[5](s)}let i={id:"multi",idKey:"areacd",labelKey:"areanm",groupKey:"parentnm",items:e[1],isMulti:!0,maxSelected:4,placeholder:"Add additional comparison areas"};return e[0].custom!==void 0&&(i.value=e[0].custom),l=new Qs({props:i}),ve.push(()=>be(l,"value",a)),l.$on("select",e[2]),{c(){t=K("form"),ne(l.$$.fragment),this.h()},l(s){t=x(s,"FORM",{class:!0});var f=I(t);oe(l.$$.fragment,f),f.forEach(p),this.h()},h(){u(t,"class","svelte-a5e7yj")},m(s,f){N(s,t,f),ae(l,t,null),n=!0},p(s,[f]){const o={};!r&&f&1&&(r=!0,o.value=s[0].custom,ke(()=>r=!1)),l.$set(o)},i(s){n||(G(l.$$.fragment,s),n=!0)},o(s){Z(l.$$.fragment,s),n=!1},d(s){s&&p(t),se(l)}}}function Js(e,t,l){let{areasWithData:r,checkboxedRoles:n,selectedAreas:a}=t,i=Me("areasParentsLookup"),s=Me("areas"),f=i.filter(c=>r.includes(c.areacd)&!a.map(d=>d.data.areacd).includes(c.areacd));f.forEach(c=>{c.areanm=s.find(d=>d.areacd===c.areacd).areanm,c.parentnm=s.find(d=>c.parentcd===d.areacd)===void 0?"":s.find(d=>c.parentcd===d.areacd).areanm});function o(c){c.detail&&c.detail}function h(c){e.$$.not_equal(n.custom,c)&&(n.custom=c,l(0,n))}return e.$$set=c=>{"areasWithData"in c&&l(3,r=c.areasWithData),"checkboxedRoles"in c&&l(0,n=c.checkboxedRoles),"selectedAreas"in c&&l(4,a=c.selectedAreas)},[n,f,o,r,a,h]}class $s extends de{constructor(t){super(),_e(this,t,Js,Xs,me,{areasWithData:3,checkboxedRoles:0,selectedAreas:4})}}function gl(e,t,l){const r=e.slice();return r[10]=t[l],r[11]=t,r[12]=l,r}function pl(e,t,l){const r=e.slice();return r[10]=t[l],r[13]=t,r[12]=l,r}function vl(e){let t,l,r=e[10].data.areanm+"",n,a,i;function s(){e[6].call(l,e[10])}return{c(){t=K("label"),l=K("input"),n=Q(r),this.h()},l(f){t=x(f,"LABEL",{class:!0});var o=I(t);l=x(o,"INPUT",{type:!0,class:!0}),n=X(o,r),o.forEach(p),this.h()},h(){u(l,"type","checkbox"),u(l,"class","svelte-thy20g"),u(t,"class","svelte-thy20g")},m(f,o){N(f,t,o),E(t,l),l.checked=e[0][e[10].role],E(t,n),a||(i=Ee(l,"change",s),a=!0)},p(f,o){e=f,o&3&&(l.checked=e[0][e[10].role]),o&2&&r!==(r=e[10].data.areanm+"")&&ie(n,r)},d(f){f&&p(t),a=!1,i()}}}function bl(e){let t,l,r,n,a=["neighbour","cluster"],i=[];for(let s=0;s<2;s+=1)i[s]=kl(gl(e,a,s));return{c(){t=K("p"),l=Q("Related areas"),r=te();for(let s=0;s<2;s+=1)i[s].c();n=ge(),this.h()},l(s){t=x(s,"P",{class:!0});var f=I(t);l=X(f,"Related areas"),f.forEach(p),r=le(s);for(let o=0;o<2;o+=1)i[o].l(s);n=ge(),this.h()},h(){u(t,"class","svelte-thy20g")},m(s,f){N(s,t,f),E(t,l),N(s,r,f);for(let o=0;o<2;o+=1)i[o]&&i[o].m(s,f);N(s,n,f)},p(s,f){if(f&33){a=["neighbour","cluster"];let o;for(o=0;o<2;o+=1){const h=gl(s,a,o);i[o]?i[o].p(h,f):(i[o]=kl(h),i[o].c(),i[o].m(n.parentNode,n))}for(;o<2;o+=1)i[o].d(1)}},d(s){s&&p(t),s&&p(r),fe(i,s),s&&p(n)}}}function kl(e){let t,l,r=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas",n,a,i,s;function f(){e[7].call(l,e[10])}return{c(){t=K("label"),l=K("input"),n=Q(r),a=te(),this.h()},l(o){t=x(o,"LABEL",{class:!0});var h=I(t);l=x(h,"INPUT",{type:!0,class:!0}),n=X(h,r),a=le(h),h.forEach(p),this.h()},h(){u(l,"type","checkbox"),u(l,"class","svelte-thy20g"),u(t,"class","svelte-thy20g")},m(o,h){N(o,t,h),E(t,l),l.checked=e[0][e[10]],E(t,n),E(t,a),i||(s=Ee(l,"change",f),i=!0)},p(o,h){e=o,h&1&&(l.checked=e[0][e[10]]),h&32&&r!==(r=e[10]==="neighbour"?"Other areas in "+e[5]:"Statistically similar areas")&&ie(n,r)},d(o){o&&p(t),i=!1,s()}}}function eo(e){let t,l,r,n,a,i,s,f,o,h=e[1],c=[];for(let v=0;v<h.length;v+=1)c[v]=vl(pl(e,h,v));let d=e[3]&&bl(e);function b(v){e[8](v)}let _={selectedAreas:e[1],areasWithData:e[2]};return e[0]!==void 0&&(_.checkboxedRoles=e[0]),s=new $s({props:_}),ve.push(()=>be(s,"checkboxedRoles",b)),{c(){t=K("div"),l=K("p"),r=Q("Parent areas"),n=te();for(let v=0;v<c.length;v+=1)c[v].c();a=te(),d&&d.c(),i=te(),ne(s.$$.fragment),this.h()},l(v){t=x(v,"DIV",{class:!0});var w=I(t);l=x(w,"P",{class:!0});var m=I(l);r=X(m,"Parent areas"),m.forEach(p),n=le(w);for(let g=0;g<c.length;g+=1)c[g].l(w);a=le(w),d&&d.l(w),i=le(w),oe(s.$$.fragment,w),w.forEach(p),this.h()},h(){u(l,"class","svelte-thy20g"),u(t,"class","comparisonInputContainer svelte-thy20g")},m(v,w){N(v,t,w),E(t,l),E(l,r),E(t,n);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(t,null);E(t,a),d&&d.m(t,null),E(t,i),ae(s,t,null),o=!0},p(v,w){if(w&3){h=v[1];let g;for(g=0;g<h.length;g+=1){const k=pl(v,h,g);c[g]?c[g].p(k,w):(c[g]=vl(k),c[g].c(),c[g].m(t,a))}for(;g<c.length;g+=1)c[g].d(1);c.length=h.length}v[3]?d?d.p(v,w):(d=bl(v),d.c(),d.m(t,i)):d&&(d.d(1),d=null);const m={};w&2&&(m.selectedAreas=v[1]),w&4&&(m.areasWithData=v[2]),!f&&w&1&&(f=!0,m.checkboxedRoles=v[0],ke(()=>f=!1)),s.$set(m)},i(v){o||(G(s.$$.fragment,v),o=!0)},o(v){Z(s.$$.fragment,v),o=!1},d(v){v&&p(t),fe(c,v),d&&d.d(),se(s)}}}function to(e){let t,l,r;return l=new jr({props:{label:"Add areas to compare to "+e[4],open:lo,$$slots:{default:[eo]},$$scope:{ctx:e}}}),{c(){t=K("div"),ne(l.$$.fragment),this.h()},l(n){t=x(n,"DIV",{class:!0});var a=I(t);oe(l.$$.fragment,a),a.forEach(p),this.h()},h(){u(t,"class",De("twisty-container")+" svelte-thy20g")},m(n,a){N(n,t,a),ae(l,t,null),r=!0},p(n,[a]){const i={};a&16&&(i.label="Add areas to compare to "+n[4]),a&16431&&(i.$$scope={dirty:a,ctx:n}),l.$set(i)},i(n){r||(G(l.$$.fragment,n),r=!0)},o(n){Z(l.$$.fragment,n),r=!1},d(n){n&&p(t),se(l)}}}let lo=!1;function ro(e,t,l){let{selectedAreas:r,areasWithData:n,checkboxedRoles:a,includeSiblings:i=!0,selectedArea:s,parentArea:f}=t;r.map(d=>d.role);function o(d){a[d.role]=this.checked,l(0,a)}function h(d){a[d]=this.checked,l(0,a)}function c(d){a=d,l(0,a)}return e.$$set=d=>{"selectedAreas"in d&&l(1,r=d.selectedAreas),"areasWithData"in d&&l(2,n=d.areasWithData),"checkboxedRoles"in d&&l(0,a=d.checkboxedRoles),"includeSiblings"in d&&l(3,i=d.includeSiblings),"selectedArea"in d&&l(4,s=d.selectedArea),"parentArea"in d&&l(5,f=d.parentArea)},[a,r,n,i,s,f,o,h,c]}class dt extends de{constructor(t){super(),_e(this,t,ro,to,me,{selectedAreas:1,areasWithData:2,checkboxedRoles:0,includeSiblings:3,selectedArea:4,parentArea:5})}}function yl(e,t,l){const r=e.slice();return r[16]=t[l],r}function wl(e,t,l){const r=e.slice();return r[16]=t[l],r[20]=l,r}function no(e){let t,l;function r(...n){return e[14](e[16],...n)}return t=new Ct({props:{key:e[20]==0,indicator:e[16],filteredData:e[1].filter(r),checkboxedRoles:e[0],siblingAreas:e[6],selectedAreas:e[5],areasWithData:e[9],plottedAreas:e[10]}}),{c(){ne(t.$$.fragment)},l(n){oe(t.$$.fragment,n)},m(n,a){ae(t,n,a),l=!0},p(n,a){e=n;const i={};a&12&&(i.indicator=e[16]),a&14&&(i.filteredData=e[1].filter(r)),a&1&&(i.checkboxedRoles=e[0]),a&64&&(i.siblingAreas=e[6]),a&32&&(i.selectedAreas=e[5]),a&512&&(i.areasWithData=e[9]),a&1024&&(i.plottedAreas=e[10]),t.$set(i)},i(n){l||(G(t.$$.fragment,n),l=!0)},o(n){Z(t.$$.fragment,n),l=!1},d(n){se(t,n)}}}function Al(e){let t,l,r=no(e);return{c(){r&&r.c(),t=ge()},l(n){r&&r.l(n),t=ge()},m(n,a){r&&r.m(n,a),N(n,t,a),l=!0},p(n,a){r.p(n,a)},i(n){l||(G(r),l=!0)},o(n){Z(r),l=!1},d(n){r&&r.d(n),n&&p(t)}}}function Dl(e){let t,l;return t=new jr({props:{label:"Show "+e[4].length+" more indicators",open:so,cross:"true",$$slots:{default:[ao]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},l(r){oe(t.$$.fragment,r)},m(r,n){ae(t,r,n),l=!0},p(r,n){const a={};n&16&&(a.label="Show "+r[4].length+" more indicators"),n&2098803&&(a.$$scope={dirty:n,ctx:r}),t.$set(a)},i(r){l||(G(t.$$.fragment,r),l=!0)},o(r){Z(t.$$.fragment,r),l=!1},d(r){se(t,r)}}}function El(e){let t,l;function r(...n){return e[15](e[16],...n)}return t=new Ct({props:{indicator:e[16],filteredData:e[1].filter(r),checkboxedRoles:e[0],siblingAreas:e[6],selectedAreas:e[5],areasWithData:e[9],plottedAreas:e[10]}}),{c(){ne(t.$$.fragment)},l(n){oe(t.$$.fragment,n)},m(n,a){ae(t,n,a),l=!0},p(n,a){e=n;const i={};a&16&&(i.indicator=e[16]),a&18&&(i.filteredData=e[1].filter(r)),a&1&&(i.checkboxedRoles=e[0]),a&64&&(i.siblingAreas=e[6]),a&32&&(i.selectedAreas=e[5]),a&512&&(i.areasWithData=e[9]),a&1024&&(i.plottedAreas=e[10]),t.$set(i)},i(n){l||(G(t.$$.fragment,n),l=!0)},o(n){Z(t.$$.fragment,n),l=!1},d(n){se(t,n)}}}function ao(e){let t,l,r=e[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=El(yl(e,r,i));const a=i=>Z(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=ge()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);t=ge()},m(i,s){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(i,s);N(i,t,s),l=!0},p(i,s){if(s&1651){r=i[4];let f;for(f=0;f<r.length;f+=1){const o=yl(i,r,f);n[f]?(n[f].p(o,s),G(n[f],1)):(n[f]=El(o),n[f].c(),G(n[f],1),n[f].m(t.parentNode,t))}for(ye(),f=r.length;f<n.length;f+=1)a(f);we()}},i(i){if(!l){for(let s=0;s<r.length;s+=1)G(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)Z(n[s]);l=!1},d(i){fe(n,i),i&&p(t)}}}function io(e){let t,l,r,n,a,i,s,f,o,h,c;function d(g){e[13](g)}let b={selectedAreas:e[5].filter(e[12]),areasWithData:e[9],includeSiblings:!1,selectedArea:e[7],parentArea:e[8]};e[0]!==void 0&&(b.checkboxedRoles=e[0]),l=new dt({props:b}),ve.push(()=>be(l,"checkboxedRoles",d)),a=new Vt({props:{plottedAreas:e[10]}});let _=[...e[2],...e[3]].filter(Il),v=[];for(let g=0;g<_.length;g+=1)v[g]=Al(wl(e,_,g));const w=g=>Z(v[g],1,1,()=>{v[g]=null});let m=e[4].length>0&&Dl(e);return{c(){t=K("div"),ne(l.$$.fragment),n=te(),ne(a.$$.fragment),i=te();for(let g=0;g<v.length;g+=1)v[g].c();s=te(),m&&m.c(),f=te(),o=K("img"),this.h()},l(g){t=x(g,"DIV",{class:!0});var k=I(t);oe(l.$$.fragment,k),n=le(k),oe(a.$$.fragment,k),i=le(k);for(let y=0;y<v.length;y+=1)v[y].l(k);s=le(k),m&&m.l(k),k.forEach(p),f=le(g),o=x(g,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){u(t,"class","beeswarmRowsContainer svelte-13dg6nv"),ue(o,"padding-top","10px"),u(o,"width","75%"),Mt(o.src,h=`${Oe}/img/image1.png`)||u(o,"src",h),u(o,"alt","download buttons"),u(o,"class","svelte-13dg6nv")},m(g,k){N(g,t,k),ae(l,t,null),E(t,n),ae(a,t,null),E(t,i);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(t,null);E(t,s),m&&m.m(t,null),N(g,f,k),N(g,o,k),c=!0},p(g,[k]){const y={};k&34&&(y.selectedAreas=g[5].filter(g[12])),k&512&&(y.areasWithData=g[9]),k&128&&(y.selectedArea=g[7]),k&256&&(y.parentArea=g[8]),!r&&k&1&&(r=!0,y.checkboxedRoles=g[0],ke(()=>r=!1)),l.$set(y);const D={};if(k&1024&&(D.plottedAreas=g[10]),a.$set(D),k&1647){_=[...g[2],...g[3]].filter(Il);let S;for(S=0;S<_.length;S+=1){const R=wl(g,_,S);v[S]?(v[S].p(R,k),G(v[S],1)):(v[S]=Al(R),v[S].c(),G(v[S],1),v[S].m(t,s))}for(ye(),S=_.length;S<v.length;S+=1)w(S);we()}g[4].length>0?m?(m.p(g,k),k&16&&G(m,1)):(m=Dl(g),m.c(),G(m,1),m.m(t,null)):m&&(ye(),Z(m,1,1,()=>{m=null}),we())},i(g){if(!c){G(l.$$.fragment,g),G(a.$$.fragment,g);for(let k=0;k<_.length;k+=1)G(v[k]);G(m),c=!0}},o(g){Z(l.$$.fragment,g),Z(a.$$.fragment,g),v=v.filter(Boolean);for(let k=0;k<v.length;k+=1)Z(v[k]);Z(m),c=!1},d(g){g&&p(t),se(l),se(a),fe(v,g),m&&m.d(),g&&p(f),g&&p(o)}}}let so=!1;const Il=e=>e.includeAsBeeswarm==="T";function oo(e,t,l){let r,n,{trimmedIndicators:a,latestData:i,primaryIndicators:s,secondaryIndicators:f,otherIndicators:o,selectedAreas:h,siblingAreas:c,checkboxedRoles:d,selectedArea:b,parentArea:_}=t;const v=k=>i.filter(y=>k.data.areacd===y.areacd).length>0&k.role!=="main";function w(k){d=k,l(0,d)}const m=(k,y)=>y.codeId===k.id,g=(k,y)=>y.codeId===k.id;return e.$$set=k=>{"trimmedIndicators"in k&&l(11,a=k.trimmedIndicators),"latestData"in k&&l(1,i=k.latestData),"primaryIndicators"in k&&l(2,s=k.primaryIndicators),"secondaryIndicators"in k&&l(3,f=k.secondaryIndicators),"otherIndicators"in k&&l(4,o=k.otherIndicators),"selectedAreas"in k&&l(5,h=k.selectedAreas),"siblingAreas"in k&&l(6,c=k.siblingAreas),"checkboxedRoles"in k&&l(0,d=k.checkboxedRoles),"selectedArea"in k&&l(7,b=k.selectedArea),"parentArea"in k&&l(8,_=k.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&l(9,r=[...new Set(i.map(k=>k.areacd))]),e.$$.dirty&545&&l(10,n=[...h.map(k=>k.role==="main"||d[k.role]?{role:k.role,areacd:k.data.areacd}:null).filter(k=>k!=null),...d.custom===null||d.custom===void 0?[]:d.custom.map((k,y)=>({role:"custom"+(y+1),areacd:k.areacd}))].filter(k=>r.includes(k.areacd)))},[d,i,s,f,o,h,c,b,_,r,n,a,v,w,m,g]}class fo extends de{constructor(t){super(),_e(this,t,oo,io,me,{trimmedIndicators:11,latestData:1,primaryIndicators:2,secondaryIndicators:3,otherIndicators:4,selectedAreas:5,siblingAreas:6,checkboxedRoles:0,selectedArea:7,parentArea:8})}}function Ml(e,t,l){const r=e.slice();return r[17]=t[l],r[19]=l,r}function uo(e){let t,l;function r(...n){return e[16](e[17],...n)}return t=new Ct({props:{key:e[19]==0,indicator:e[17],filteredData:e[1].filter(r),checkboxedRoles:e[0],siblingAreas:e[3],selectedAreas:e[2],areasWithData:e[6],plottedAreas:e[8]}}),{c(){ne(t.$$.fragment)},l(n){oe(t.$$.fragment,n)},m(n,a){ae(t,n,a),l=!0},p(n,a){e=n;const i={};a&128&&(i.indicator=e[17]),a&130&&(i.filteredData=e[1].filter(r)),a&1&&(i.checkboxedRoles=e[0]),a&8&&(i.siblingAreas=e[3]),a&4&&(i.selectedAreas=e[2]),a&64&&(i.areasWithData=e[6]),a&256&&(i.plottedAreas=e[8]),t.$set(i)},i(n){l||(G(t.$$.fragment,n),l=!0)},o(n){Z(t.$$.fragment,n),l=!1},d(n){se(t,n)}}}function Sl(e){let t,l,r=uo(e);return{c(){r&&r.c(),t=ge()},l(n){r&&r.l(n),t=ge()},m(n,a){r&&r.m(n,a),N(n,t,a),l=!0},p(n,a){r.p(n,a)},i(n){l||(G(r),l=!0)},o(n){Z(r),l=!1},d(n){r&&r.d(n),n&&p(t)}}}function ho(e){let t,l,r,n,a,i,s,f,o,h;function c(w){e[15](w)}let d={selectedAreas:e[2].filter(e[14]),areasWithData:e[6],includeSiblings:!1,selectedArea:e[4],parentArea:e[5]};e[0]!==void 0&&(d.checkboxedRoles=e[0]),l=new dt({props:d}),ve.push(()=>be(l,"checkboxedRoles",c)),a=new Vt({props:{plottedAreas:e[8]}});let b=e[7],_=[];for(let w=0;w<b.length;w+=1)_[w]=Sl(Ml(e,b,w));const v=w=>Z(_[w],1,1,()=>{_[w]=null});return{c(){t=K("div"),ne(l.$$.fragment),n=te(),ne(a.$$.fragment),i=te();for(let w=0;w<_.length;w+=1)_[w].c();s=te(),f=K("img"),this.h()},l(w){t=x(w,"DIV",{class:!0});var m=I(t);oe(l.$$.fragment,m),n=le(m),oe(a.$$.fragment,m),i=le(m);for(let g=0;g<_.length;g+=1)_[g].l(m);m.forEach(p),s=le(w),f=x(w,"IMG",{style:!0,width:!0,src:!0,alt:!0,class:!0}),this.h()},h(){u(t,"class","beeswarmRowsContainer svelte-13dg6nv"),ue(f,"padding-top","10px"),u(f,"width","75%"),Mt(f.src,o=`${Oe}/img/image1.png`)||u(f,"src",o),u(f,"alt","download buttons"),u(f,"class","svelte-13dg6nv")},m(w,m){N(w,t,m),ae(l,t,null),E(t,n),ae(a,t,null),E(t,i);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(t,null);N(w,s,m),N(w,f,m),h=!0},p(w,[m]){const g={};m&6&&(g.selectedAreas=w[2].filter(w[14])),m&64&&(g.areasWithData=w[6]),m&16&&(g.selectedArea=w[4]),m&32&&(g.parentArea=w[5]),!r&&m&1&&(r=!0,g.checkboxedRoles=w[0],ke(()=>r=!1)),l.$set(g);const k={};if(m&256&&(k.plottedAreas=w[8]),a.$set(k),m&463){b=w[7];let y;for(y=0;y<b.length;y+=1){const D=Ml(w,b,y);_[y]?(_[y].p(D,m),G(_[y],1)):(_[y]=Sl(D),_[y].c(),G(_[y],1),_[y].m(t,null))}for(ye(),y=b.length;y<_.length;y+=1)v(y);we()}},i(w){if(!h){G(l.$$.fragment,w),G(a.$$.fragment,w);for(let m=0;m<b.length;m+=1)G(_[m]);h=!0}},o(w){Z(l.$$.fragment,w),Z(a.$$.fragment,w),_=_.filter(Boolean);for(let m=0;m<_.length;m+=1)Z(_[m]);h=!1},d(w){w&&p(t),se(l),se(a),fe(_,w),w&&p(s),w&&p(f)}}}function co(e,t,l){let r,n,a,{trimmedIndicators:i,latestData:s,primaryIndicators:f,secondaryIndicators:o,otherIndicators:h,selectedAreas:c,siblingAreas:d,checkboxedRoles:b,selectedArea:_,parentArea:v,selectedIndicatorsArray:w}=t;const m=y=>s.filter(D=>y.data.areacd===D.areacd).length>0&y.role!=="main";function g(y){b=y,l(0,b)}const k=(y,D)=>D.codeId===y.id;return e.$$set=y=>{"trimmedIndicators"in y&&l(9,i=y.trimmedIndicators),"latestData"in y&&l(1,s=y.latestData),"primaryIndicators"in y&&l(10,f=y.primaryIndicators),"secondaryIndicators"in y&&l(11,o=y.secondaryIndicators),"otherIndicators"in y&&l(12,h=y.otherIndicators),"selectedAreas"in y&&l(2,c=y.selectedAreas),"siblingAreas"in y&&l(3,d=y.siblingAreas),"checkboxedRoles"in y&&l(0,b=y.checkboxedRoles),"selectedArea"in y&&l(4,_=y.selectedArea),"parentArea"in y&&l(5,v=y.parentArea),"selectedIndicatorsArray"in y&&l(13,w=y.selectedIndicatorsArray)},e.$$.update=()=>{e.$$.dirty&2&&l(6,r=[...new Set(s.map(y=>y.areacd))]),e.$$.dirty&69&&l(8,n=[...c.map(y=>y.role==="main"||b[y.role]?{role:y.role,areacd:y.data.areacd}:null).filter(y=>y!=null),...b.custom===null||b.custom===void 0?[]:b.custom.map((y,D)=>({role:"custom"+(D+1),areacd:y.areacd}))].filter(y=>r.includes(y.areacd))),e.$$.dirty&15360&&l(7,a=w.reverse().map(y=>[...f,...o,...h].find(D=>D.label===y)))},[b,s,c,d,_,v,r,a,n,i,f,o,h,w,m,g,k]}class _o extends de{constructor(t){super(),_e(this,t,co,ho,me,{trimmedIndicators:9,latestData:1,primaryIndicators:10,secondaryIndicators:11,otherIndicators:12,selectedAreas:2,siblingAreas:3,checkboxedRoles:0,selectedArea:4,parentArea:5,selectedIndicatorsArray:13})}}function Fl(e,t,l){const r=e.slice();return r[4]=t[l],r[6]=l,r}function Rl(e){let t,l,r,n,a,i=e[4].toLowerCase()+"",s,f,o,h,c,d;return h=Sn(e[3][0]),{c(){t=K("label"),l=K("input"),r=te(),n=K("div"),a=K("p"),s=Q(i),o=te(),this.h()},l(b){t=x(b,"LABEL",{});var _=I(t);l=x(_,"INPUT",{style:!0,type:!0,name:!0}),r=le(_),n=x(_,"DIV",{class:!0,style:!0});var v=I(n);a=x(v,"P",{class:!0});var w=I(a);s=X(w,i),w.forEach(p),v.forEach(p),o=le(_),_.forEach(p),this.h()},h(){ue(l,"display","none"),u(l,"type","radio"),l.__value=e[6]+1,l.value=l.__value,u(l,"name","chosenChart"),u(a,"class","svelte-46qqxz"),u(n,"class","optionLabel svelte-46qqxz"),u(n,"style",f="background-color: "+(e[0]===e[6]+1?"white":"#d4d4d4")),h.p(l)},m(b,_){N(b,t,_),E(t,l),l.checked=l.__value===e[0],E(t,r),E(t,n),E(n,a),E(a,s),E(t,o),c||(d=Ee(l,"change",e[2]),c=!0)},p(b,_){_&3&&(l.checked=l.__value===b[0]),_&2&&i!==(i=b[4].toLowerCase()+"")&&ie(s,i),_&1&&f!==(f="background-color: "+(b[0]===b[6]+1?"white":"#d4d4d4"))&&u(n,"style",f)},d(b){b&&p(t),h.r(),c=!1,d()}}}function mo(e){let t,l,r,n,a=e[1],i=[];for(let s=0;s<a.length;s+=1)i[s]=Rl(Fl(e,a,s));return{c(){t=K("div"),l=K("p"),r=Q("Compare..."),n=te();for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){t=x(s,"DIV",{class:!0});var f=I(t);l=x(f,"P",{class:!0});var o=I(l);r=X(o,"Compare..."),o.forEach(p),n=le(f);for(let h=0;h<i.length;h+=1)i[h].l(f);f.forEach(p),this.h()},h(){u(l,"class","svelte-46qqxz"),u(t,"class","radioContainer svelte-46qqxz")},m(s,f){N(s,t,f),E(t,l),E(l,r),E(t,n);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null)},p(s,[f]){if(f&3){a=s[1];let o;for(o=0;o<a.length;o+=1){const h=Fl(s,a,o);i[o]?i[o].p(h,f):(i[o]=Rl(h),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}},i:he,o:he,d(s){s&&p(t),fe(i,s)}}}function go(e,t,l){let{optionsArray:r,chosenChart:n}=t;const a=[[]];function i(){n=this.__value,l(0,n)}return e.$$set=s=>{"optionsArray"in s&&l(1,r=s.optionsArray),"chosenChart"in s&&l(0,n=s.chosenChart)},[n,r,i,a]}class po extends de{constructor(t){super(),_e(this,t,go,mo,me,{optionsArray:1,chosenChart:0})}}function Ll(e,t,l){const r=e.slice();return r[11]=t[l],r[13]=l,r}function Nl(e){let t,l=e[4],r=[];for(let n=0;n<l.length;n+=1)r[n]=Cl(Ll(e,l,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=ge()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);t=ge()},m(n,a){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,a);N(n,t,a)},p(n,a){if(a&114){l=n[4];let i;for(i=0;i<l.length;i+=1){const s=Ll(n,l,i);r[i]?r[i].p(s,a):(r[i]=Cl(s),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(n){fe(r,n),n&&p(t)}}}function Cl(e){let t,l,r,n,a,i=e[5]+e[11].toLocaleString()+e[6]+"",s,f;return{c(){t=P("g"),l=P("line"),a=P("text"),s=Q(i),this.h()},l(o){t=z(o,"g",{class:!0});var h=I(t);l=z(h,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(p),a=z(h,"text",{"text-anchor":!0,x:!0,y:!0,stroke:!0,fill:!0,"font-size":!0});var c=I(a);s=X(c,i),c.forEach(p),h.forEach(p),this.h()},h(){u(l,"x1","0"),u(l,"x2","-8"),u(l,"y1",r=e[1](e[11])),u(l,"y2",n=e[1](e[11])),u(l,"stroke","black"),u(a,"text-anchor","end"),u(a,"x",-10),u(a,"y",f=e[1](e[11])+5),u(a,"stroke","none"),u(a,"fill","#333"),u(a,"font-size","14px"),u(t,"class","tick")},m(o,h){N(o,t,h),E(t,l),E(t,a),E(a,s)},p(o,h){h&18&&r!==(r=o[1](o[11]))&&u(l,"y1",r),h&18&&n!==(n=o[1](o[11]))&&u(l,"y2",n),h&16&&i!==(i=o[5]+o[11].toLocaleString()+o[6]+"")&&ie(s,i),h&18&&f!==(f=o[1](o[11])+5)&&u(a,"y",f)},d(o){o&&p(t)}}}function vo(e){let t,l,r,n,a,i=e[3]==0&&Nl(e);return{c(){t=P("g"),l=P("line"),i&&i.c(),this.h()},l(s){t=z(s,"g",{class:!0,transform:!0});var f=I(t);l=z(f,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0}),I(l).forEach(p),i&&i.l(f),f.forEach(p),this.h()},h(){u(l,"x1","0"),u(l,"x2","0"),u(l,"y1",r=e[1](e[0][1])),u(l,"y2",n=e[1](e[0][0])),u(l,"stroke","black"),u(t,"class","yAxis"),u(t,"transform",a="translate("+-e[2]+",0)")},m(s,f){N(s,t,f),E(t,l),i&&i.m(t,null)},p(s,[f]){f&3&&r!==(r=s[1](s[0][1]))&&u(l,"y1",r),f&3&&n!==(n=s[1](s[0][0]))&&u(l,"y2",n),s[3]==0?i?i.p(s,f):(i=Nl(s),i.c(),i.m(t,null)):i&&(i.d(1),i=null),f&4&&a!==(a="translate("+-s[2]+",0)")&&u(t,"transform",a)},i:he,o:he,d(s){s&&p(t),i&&i.d()}}}function bo(e,t,l){let r,n,a,{yDomain:i,y:s,yAxisOffset:f=0,column:o=0,indicator:h}=t,c=[],d=h.prefix===null?"":h.prefix==="pounds"?"Â£":h.prefix,b=h.suffix===null?"":h.suffix;return e.$$set=_=>{"yDomain"in _&&l(0,i=_.yDomain),"y"in _&&l(1,s=_.y),"yAxisOffset"in _&&l(2,f=_.yAxisOffset),"column"in _&&l(3,o=_.column),"indicator"in _&&l(7,h=_.indicator)},e.$$.update=()=>{if(e.$$.dirty&1&&l(10,r=Math.abs(i[1]-i[0])),e.$$.dirty&1024&&l(9,n=10**Math.floor(Math.log10(r))),e.$$.dirty&1536&&l(8,a=r/n<=1.5?n/5:r/n<=3?n/2:r/n<=6?n:n*2),e.$$.dirty&273){l(4,c=[]);for(let _=Math.ceil(i[0]);_<=Math.floor(i[1]);_++)_%a==0&&c.push(_)}},[i,s,f,o,c,d,b,h,a,n,r]}class hn extends de{constructor(t){super(),_e(this,t,bo,vo,me,{yDomain:0,y:1,yAxisOffset:2,column:3,indicator:7})}}function Vl(e,t,l){const r=e.slice();return r[8]=t[l],r[10]=l,r}function Pl(e){let t,l,r,n;return{c(){t=P("line"),this.h()},l(a){t=z(a,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0,opacity:!0}),I(t).forEach(p),this.h()},h(){u(t,"y1","0"),u(t,"y2",l=-e[3]),u(t,"x1",r=e[1](e[8])),u(t,"x2",n=e[1](e[8])),u(t,"stroke","black"),u(t,"opacity","0.1")},m(a,i){N(a,t,i)},p(a,i){i&8&&l!==(l=-a[3])&&u(t,"y2",l),i&2&&r!==(r=a[1](a[8]))&&u(t,"x1",r),i&2&&n!==(n=a[1](a[8]))&&u(t,"x2",n)},d(a){a&&p(t)}}}function zl(e){let t,l,r,n,a,i=e[8]+"",s,f,o=e[4]&&Pl(e);return{c(){t=P("g"),l=P("line"),a=P("text"),s=Q(i),o&&o.c(),this.h()},l(h){t=z(h,"g",{class:!0});var c=I(t);l=z(c,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(p),a=z(c,"text",{"text-anchor":!0,y:!0,x:!0,stroke:!0,fill:!0,"font-size":!0});var d=I(a);s=X(d,i),d.forEach(p),o&&o.l(c),c.forEach(p),this.h()},h(){u(l,"y1","0"),u(l,"y2","8"),u(l,"x1",r=e[1](e[8])),u(l,"x2",n=e[1](e[8])),u(l,"stroke","black"),u(a,"text-anchor","middle"),u(a,"y",20),u(a,"x",f=e[1](e[8])),u(a,"stroke","none"),u(a,"fill","#333"),u(a,"font-size","14px"),u(t,"class","tick")},m(h,c){N(h,t,c),E(t,l),E(t,a),E(a,s),o&&o.m(t,null)},p(h,c){c&2&&r!==(r=h[1](h[8]))&&u(l,"x1",r),c&2&&n!==(n=h[1](h[8]))&&u(l,"x2",n),c&2&&f!==(f=h[1](h[8]))&&u(a,"x",f),h[4]?o?o.p(h,c):(o=Pl(h),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(h){h&&p(t),o&&o.d()}}}function ko(e){let t,l,r,n,a,i=e[5],s=[];for(let f=0;f<i.length;f+=1)s[f]=zl(Vl(e,i,f));return{c(){t=P("g"),l=P("line");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=z(f,"g",{class:!0,transform:!0});var o=I(t);l=z(o,"line",{y1:!0,y2:!0,x1:!0,x2:!0,stroke:!0}),I(l).forEach(p);for(let h=0;h<s.length;h+=1)s[h].l(o);o.forEach(p),this.h()},h(){u(l,"y1","0"),u(l,"y2","0"),u(l,"x1",r=e[1](e[0][0])),u(l,"x2",n=e[1](e[0][1])),u(l,"stroke","black"),u(t,"class","xAxis"),u(t,"transform",a="translate(0,"+(e[2]+e[3])+")")},m(f,o){N(f,t,o),E(t,l);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(t,null)},p(f,[o]){if(o&3&&r!==(r=f[1](f[0][0]))&&u(l,"x1",r),o&3&&n!==(n=f[1](f[0][1]))&&u(l,"x2",n),o&58){i=f[5];let h;for(h=0;h<i.length;h+=1){const c=Vl(f,i,h);s[h]?s[h].p(c,o):(s[h]=zl(c),s[h].c(),s[h].m(t,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}o&12&&a!==(a="translate(0,"+(f[2]+f[3])+")")&&u(t,"transform",a)},i:he,o:he,d(f){f&&p(t),fe(s,f)}}}function yo(e,t,l){let{xDomain:r,x:n,xAxisOffset:a=0,chartHeight:i,gridlines:s=!1}=t,f=Math.abs(r[1]-r[0]),o=f>=15?5:f>=6?2:1,h=[];for(let c=Math.floor(r[0]);c<=Math.ceil(r[1]);c++)c%o==0&&h.push(c);return e.$$set=c=>{"xDomain"in c&&l(0,r=c.xDomain),"x"in c&&l(1,n=c.x),"xAxisOffset"in c&&l(2,a=c.xAxisOffset),"chartHeight"in c&&l(3,i=c.chartHeight),"gridlines"in c&&l(4,s=c.gridlines)},[r,n,a,i,s,h]}class wo extends de{constructor(t){super(),_e(this,t,yo,ko,me,{xDomain:0,x:1,xAxisOffset:2,chartHeight:3,gridlines:4})}}function He(e){return function(){return e}}const Et=Math.PI,It=2*Et,ze=1e-6,Ao=It-ze;function cn(e){this._+=e[0];for(let t=1,l=e.length;t<l;++t)this._+=arguments[t]+e[t]}function Do(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cn;const l=10**t;return function(r){this._+=r[0];for(let n=1,a=r.length;n<a;++n)this._+=Math.round(arguments[n]*l)/l+r[n]}}class Eo{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cn:Do(t)}moveTo(t,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,l){this._append`L${this._x1=+t},${this._y1=+l}`}quadraticCurveTo(t,l,r,n){this._append`Q${+t},${+l},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(t,l,r,n,a,i){this._append`C${+t},${+l},${+r},${+n},${this._x1=+a},${this._y1=+i}`}arcTo(t,l,r,n,a){if(t=+t,l=+l,r=+r,n=+n,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,f=r-t,o=n-l,h=i-t,c=s-l,d=h*h+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=l}`;else if(d>ze)if(!(Math.abs(c*f-o*h)>ze)||!a)this._append`L${this._x1=t},${this._y1=l}`;else{let b=r-i,_=n-s,v=f*f+o*o,w=b*b+_*_,m=Math.sqrt(v),g=Math.sqrt(d),k=a*Math.tan((Et-Math.acos((v+d-w)/(2*m*g)))/2),y=k/g,D=k/m;Math.abs(y-1)>ze&&this._append`L${t+y*h},${l+y*c}`,this._append`A${a},${a},0,0,${+(c*b>h*_)},${this._x1=t+D*f},${this._y1=l+D*o}`}}arc(t,l,r,n,a,i){if(t=+t,l=+l,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(n),f=r*Math.sin(n),o=t+s,h=l+f,c=1^i,d=i?n-a:a-n;this._x1===null?this._append`M${o},${h}`:(Math.abs(this._x1-o)>ze||Math.abs(this._y1-h)>ze)&&this._append`L${o},${h}`,r&&(d<0&&(d=d%It+It),d>Ao?this._append`A${r},${r},0,1,${c},${t-s},${l-f}A${r},${r},0,1,${c},${this._x1=o},${this._y1=h}`:d>ze&&this._append`A${r},${r},0,${+(d>=Et)},${c},${this._x1=t+r*Math.cos(a)},${this._y1=l+r*Math.sin(a)}`)}rect(t,l,r,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+l}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function Io(e){let t=3;return e.digits=function(l){if(!arguments.length)return t;if(l==null)t=null;else{const r=Math.floor(l);if(!(r>=0))throw new RangeError(`invalid digits: ${l}`);t=r}return e},()=>new Eo(t)}function Mo(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dn(e){this._context=e}dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function So(e){return new dn(e)}function Fo(e){return e[0]}function Ro(e){return e[1]}function Lo(e,t){var l=He(!0),r=null,n=So,a=null,i=Io(s);e=typeof e=="function"?e:e===void 0?Fo:He(e),t=typeof t=="function"?t:t===void 0?Ro:He(t);function s(f){var o,h=(f=Mo(f)).length,c,d=!1,b;for(r==null&&(a=n(b=i())),o=0;o<=h;++o)!(o<h&&l(c=f[o],o,f))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(c,o,f),+t(c,o,f));if(b)return a=null,b+""||null}return s.x=function(f){return arguments.length?(e=typeof f=="function"?f:He(+f),s):e},s.y=function(f){return arguments.length?(t=typeof f=="function"?f:He(+f),s):t},s.defined=function(f){return arguments.length?(l=typeof f=="function"?f:He(!!f),s):l},s.curve=function(f){return arguments.length?(n=f,r!=null&&(a=n(r)),s):n},s.context=function(f){return arguments.length?(f==null?r=a=null:a=n(r=f),s):r},s}function Tl(e,t,l){const r=e.slice();return r[12]=t[l],r[14]=l,r}function Bl(e){let t,l=e[2],r=[];for(let n=0;n<l.length;n+=1)r[n]=Ol(Tl(e,l,n));return{c(){t=P("g");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=z(n,"g",{class:!0});var a=I(t);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){u(t,"class","pointsContainer")},m(n,a){N(n,t,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,null)},p(n,a){if(a&125){l=n[2];let i;for(i=0;i<l.length;i+=1){const s=Tl(n,l,i);r[i]?r[i].p(s,a):(r[i]=Ol(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(n){n&&p(t),fe(r,n)}}}function No(e){let t,l;return{c(){t=P("circle"),this.h()},l(r){t=z(r,"circle",{r:!0,fill:!0,stroke:!0});var n=I(t);n.forEach(p),this.h()},h(){u(t,"r","3.5"),u(t,"fill",l=e[0]===e[3]?"#F39431":$[e[6].role]),u(t,"stroke","white")},m(r,n){N(r,t,n)},p(r,n){n&73&&l!==(l=r[0]===r[3]?"#F39431":$[r[6].role])&&u(t,"fill",l)},d(r){r&&p(t)}}}function Co(e){let t,l,r;return{c(){t=P("rect"),this.h()},l(n){t=z(n,"rect",{transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0});var a=I(t);a.forEach(p),this.h()},h(){u(t,"transform",l=["country","uk"].includes(e[6].role)?"rotate(45)":null),u(t,"x","-3"),u(t,"y","-3"),u(t,"width","6"),u(t,"height","6"),u(t,"fill",r=e[0]===e[3]?"#F39431":$[e[6].role]),u(t,"stroke","white")},m(n,a){N(n,t,a)},p(n,a){a&64&&l!==(l=["country","uk"].includes(n[6].role)?"rotate(45)":null)&&u(t,"transform",l),a&73&&r!==(r=n[0]===n[3]?"#F39431":$[n[6].role])&&u(t,"fill",r)},d(n){n&&p(t)}}}function Ol(e){let t,l,r;function n(s,f){return f&64&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[6].role)),l?Co:No}let a=n(e,-1),i=a(e);return{c(){t=P("g"),i.c(),this.h()},l(s){t=z(s,"g",{transform:!0});var f=I(t);i.l(f),f.forEach(p),this.h()},h(){u(t,"transform",r="translate("+e[4](e[12].year)+","+e[5](e[12].value)+")")},m(s,f){N(s,t,f),i.m(t,null)},p(s,f){a===(a=n(s,f))&&i?i.p(s,f):(i.d(1),i=a(s),i&&(i.c(),i.m(t,null))),f&52&&r!==(r="translate("+s[4](s[12].year)+","+s[5](s[12].value)+")")&&u(t,"transform",r)},d(s){s&&p(t),i.d()}}}function Vo(e){let t,l,r,n,a,i,s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1],f,o,h,c=s&&Bl(e);return{c(){t=P("g"),l=P("path"),c&&c.c(),this.h()},l(d){t=z(d,"g",{class:!0,opacity:!0});var b=I(t);l=z(b,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0,hoverid:!0}),I(l).forEach(p),c&&c.l(b),b.forEach(p),this.h()},h(){u(l,"d",r=e[7](e[2])),u(l,"fill","none"),u(l,"stroke",n=e[0]===e[3]?"#F39431":$[e[6].role]),u(l,"stroke-width",a=e[1]?"16px":"2px"),u(l,"opacity",i=e[1]?0:e[0]===e[3]||e[10]?1:.25),u(l,"hoverid",e[3]),u(t,"class","lineContainer"),u(t,"opacity",f=e[0]===e[3]||e[0]===null?1:.25)},m(d,b){N(d,t,b),E(t,l),c&&c.m(t,null),o||(h=[Ee(l,"mouseover",function(){mt(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)}),Ee(l,"mouseleave",function(){mt(e[1]?e[9]:null)&&(e[1]?e[9]:null).apply(this,arguments)}),Ee(l,"focus",function(){mt(e[1]?e[8]:null)&&(e[1]?e[8]:null).apply(this,arguments)})],o=!0)},p(d,[b]){e=d,b&132&&r!==(r=e[7](e[2]))&&u(l,"d",r),b&73&&n!==(n=e[0]===e[3]?"#F39431":$[e[6].role])&&u(l,"stroke",n),b&2&&a!==(a=e[1]?"16px":"2px")&&u(l,"stroke-width",a),b&11&&i!==(i=e[1]?0:e[0]===e[3]||e[10]?1:.25)&&u(l,"opacity",i),b&8&&u(l,"hoverid",e[3]),b&75&&(s=(e[0]===e[3]||e[10].includes(e[6].role))&!e[1]),s?c?c.p(e,b):(c=Bl(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),b&9&&f!==(f=e[0]===e[3]||e[0]===null?1:.25)&&u(t,"opacity",f)},i:he,o:he,d(d){d&&p(t),c&&c.d(),o=!1,ct(h)}}}function Po(e,t,l){let r,{overlay:n=!1,lineData:a,i,hoverIndex:s,x:f,y:o,xDomain:h,area:c}=t;function d(v){l(0,s=parseFloat(Ke(this).attr("hoverid")))}function b(v){l(0,s=null)}let _=["main","parent","country","uk","custom1","custom2","custom3","custom4"];return e.$$set=v=>{"overlay"in v&&l(1,n=v.overlay),"lineData"in v&&l(2,a=v.lineData),"i"in v&&l(3,i=v.i),"hoverIndex"in v&&l(0,s=v.hoverIndex),"x"in v&&l(4,f=v.x),"y"in v&&l(5,o=v.y),"xDomain"in v&&l(11,h=v.xDomain),"area"in v&&l(6,c=v.area)},e.$$.update=()=>{e.$$.dirty&48&&l(7,r=Lo().x(v=>f(v.year)).y(v=>o(v.value)))},[s,n,a,i,f,o,c,r,d,b,_,h]}class _n extends de{constructor(t){super(),_e(this,t,Po,Vo,me,{overlay:1,lineData:2,i:3,hoverIndex:0,x:4,y:5,xDomain:11,area:6})}}function Wl(e,t,l){const r=e.slice();return r[3]=t[l],r}function Hl(e){let t,l=e[3].datum.areanm+"",r,n,a,i=e[3].datum.areanm+"",s,f,o,h;return{c(){t=P("text"),r=Q(l),a=P("text"),s=Q(i),this.h()},l(c){t=z(c,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var d=I(t);r=X(d,l),d.forEach(p),a=z(c,"text",{y:!0,"font-size":!0,fill:!0,stroke:!0,"stroke-width":!0});var b=I(a);s=X(b,i),b.forEach(p),this.h()},h(){u(t,"y",n=e[3].y+8),u(t,"font-size","16px"),u(t,"fill","white"),u(t,"stroke","white"),u(t,"stroke-width","4px"),u(a,"y",f=e[3].y+8),u(a,"font-size","16px"),u(a,"fill",o=e[2]!=null?"#F39431":$[e[3].datum.role]),u(a,"stroke",h=e[2]!=null?"#F39431":$[e[3].datum.role]),u(a,"stroke-width","0.5px")},m(c,d){N(c,t,d),E(t,r),N(c,a,d),E(a,s)},p(c,d){d&2&&l!==(l=c[3].datum.areanm+"")&&ie(r,l),d&2&&n!==(n=c[3].y+8)&&u(t,"y",n),d&2&&i!==(i=c[3].datum.areanm+"")&&ie(s,i),d&2&&f!==(f=c[3].y+8)&&u(a,"y",f),d&6&&o!==(o=c[2]!=null?"#F39431":$[c[3].datum.role])&&u(a,"fill",o),d&6&&h!==(h=c[2]!=null?"#F39431":$[c[3].datum.role])&&u(a,"stroke",h)},d(c){c&&p(t),c&&p(a)}}}function zo(e){let t,l,r=e[1],n=[];for(let a=0;a<r.length;a+=1)n[a]=Hl(Wl(e,r,a));return{c(){t=P("g");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){t=z(a,"g",{class:!0,transform:!0});var i=I(t);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(p),this.h()},h(){u(t,"class","labelsContainer"),u(t,"transform",l="translate("+e[0]+",0)")},m(a,i){N(a,t,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null)},p(a,[i]){if(i&6){r=a[1];let s;for(s=0;s<r.length;s+=1){const f=Wl(a,r,s);n[s]?n[s].p(f,i):(n[s]=Hl(f),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}i&1&&l!==(l="translate("+a[0]+",0)")&&u(t,"transform",l)},i:he,o:he,d(a){a&&p(t),fe(n,a)}}}function To(e,t,l){let{x:r,labelPlacements:n,hoverIndex:a}=t;return e.$$set=i=>{"x"in i&&l(0,r=i.x),"labelPlacements"in i&&l(1,n=i.labelPlacements),"hoverIndex"in i&&l(2,a=i.hoverIndex)},[r,n,a]}class mn extends de{constructor(t){super(),_e(this,t,To,zo,me,{x:0,labelPlacements:1,hoverIndex:2})}}function gn(e,t,l,r){e=e.map(a=>({targetY:l(a),y:l(a),height:r(a),datum:a})),e.sort((a,i)=>a.targetY-i.targetY);const n=[];for(const a of e){const i={data:[a]};for(ql(i,t),n.push(i);n.length>1&&n[n.length-2].hi>n[n.length-1].lo;){const s=n.pop(),f=n[n.length-1];f.data.push(...s.data),ql(f,t)}}return n.map(a=>a.data).flat()}function ql(e,t){const l=Oo(e.data),r=Bo(e.data,l);e.lo=r-l/2,e.lo<t[0]?e.lo=t[0]:e.lo>t[1]-l&&(e.lo=t[1]-l),e.hi=e.lo+l,pn(e.data,e.lo,(n,a)=>{n.y=a})}function Bo(e,t){const l=[];return pn(e,-t/2,(r,n)=>{l.push({val:r.targetY-n,weight:1/r.height})}),Wo(l)}function pn(e,t,l){let r=t;for(const n of e)r+=n.height/2,l(n,r),r+=n.height/2}function Oo(e){let t=0;for(const l of e)t+=l.height;return t}function Wo(e){let t=0,l=0;for(const r of e)t+=r.val*r.weight,l+=r.weight;return t/l}function Yl(e,t,l){const r=e.slice();return r[22]=t[l],r[24]=l,r}function Gl(e,t,l){const r=e.slice();return r[22]=t[l],r[24]=l,r}function Kl(e){let t,l;function r(...n){return e[15](e[22],...n)}return t=new _n({props:{area:e[22],lineData:e[1].filter(r),i:e[24],hoverIndex:e[6],x:e[12],y:e[7],xDomain:e[10]}}),{c(){ne(t.$$.fragment)},l(n){oe(t.$$.fragment,n)},m(n,a){ae(t,n,a),l=!0},p(n,a){e=n;const i={};a&1&&(i.area=e[22]),a&3&&(i.lineData=e[1].filter(r)),a&64&&(i.hoverIndex=e[6]),a&4096&&(i.x=e[12]),a&128&&(i.y=e[7]),a&1024&&(i.xDomain=e[10]),t.$set(i)},i(n){l||(G(t.$$.fragment,n),l=!0)},o(n){Z(t.$$.fragment,n),l=!1},d(n){se(t,n)}}}function xl(e){let t,l,r;function n(...s){return e[16](e[22],...s)}function a(s){e[17](s)}let i={overlay:"true",area:e[22],lineData:e[1].filter(n),i:e[24],x:e[12],y:e[7],xDomain:e[10]};return e[6]!==void 0&&(i.hoverIndex=e[6]),t=new _n({props:i}),ve.push(()=>be(t,"hoverIndex",a)),{c(){ne(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,f){ae(t,s,f),r=!0},p(s,f){e=s;const o={};f&1&&(o.area=e[22]),f&3&&(o.lineData=e[1].filter(n)),f&4096&&(o.x=e[12]),f&128&&(o.y=e[7]),f&1024&&(o.xDomain=e[10]),!l&&f&64&&(l=!0,o.hoverIndex=e[6],ke(()=>l=!1)),t.$set(o)},i(s){r||(G(t.$$.fragment,s),r=!0)},o(s){Z(t.$$.fragment,s),r=!1},d(s){se(t,s)}}}function Ho(e){let t,l,r,n,a,i,s,f,o,h,c,d;a=new hn({props:{yDomain:e[8],y:e[7],indicator:e[2]}}),i=new wo({props:{chartHeight:e[4],xDomain:e[10],x:e[12]}});let b=e[0].reverse(),_=[];for(let k=0;k<b.length;k+=1)_[k]=Kl(Gl(e,b,k));const v=k=>Z(_[k],1,1,()=>{_[k]=null});let w=e[0],m=[];for(let k=0;k<w.length;k+=1)m[k]=xl(Yl(e,w,k));const g=k=>Z(m[k],1,1,()=>{m[k]=null});return o=new mn({props:{x:e[12](e[10][1])+5,labelPlacements:e[11],hoverIndex:e[6]}}),{c(){t=K("div"),l=P("svg"),r=P("g"),n=P("rect"),ne(a.$$.fragment),ne(i.$$.fragment),s=P("g");for(let k=0;k<_.length;k+=1)_[k].c();f=P("g");for(let k=0;k<m.length;k+=1)m[k].c();ne(o.$$.fragment),this.h()},l(k){t=x(k,"DIV",{class:!0});var y=I(t);l=z(y,"svg",{height:!0,width:!0});var D=I(l);r=z(D,"g",{class:!0,transform:!0});var S=I(r);n=z(S,"rect",{width:!0,height:!0,fill:!0,opacity:!0,stroke:!0}),I(n).forEach(p),oe(a.$$.fragment,S),oe(i.$$.fragment,S),s=z(S,"g",{class:!0});var R=I(s);for(let B=0;B<_.length;B+=1)_[B].l(R);R.forEach(p),f=z(S,"g",{class:!0});var H=I(f);for(let B=0;B<m.length;B+=1)m[B].l(H);H.forEach(p),oe(o.$$.fragment,S),S.forEach(p),D.forEach(p),y.forEach(p),this.h()},h(){u(n,"width",e[9]),u(n,"height",e[4]),u(n,"fill","black"),u(n,"opacity","0.02"),u(n,"stroke","none"),u(s,"class","visibleLinesGroup"),u(f,"class","overlayLinesGroup"),u(r,"class","chart-container"),u(r,"transform",h="translate("+e[5].left+","+e[5].top+")"),u(l,"height",e[13]),u(l,"width",e[3]),u(t,"class","svg-container"),ut(()=>e[18].call(t))},m(k,y){N(k,t,y),E(t,l),E(l,r),E(r,n),ae(a,r,null),ae(i,r,null),E(r,s);for(let D=0;D<_.length;D+=1)_[D]&&_[D].m(s,null);E(r,f);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(f,null);ae(o,r,null),c=ht(t,e[18].bind(t)),d=!0},p(k,[y]){(!d||y&512)&&u(n,"width",k[9]),(!d||y&16)&&u(n,"height",k[4]);const D={};y&256&&(D.yDomain=k[8]),y&128&&(D.y=k[7]),y&4&&(D.indicator=k[2]),a.$set(D);const S={};if(y&16&&(S.chartHeight=k[4]),y&1024&&(S.xDomain=k[10]),y&4096&&(S.x=k[12]),i.$set(S),y&5315){b=k[0].reverse();let H;for(H=0;H<b.length;H+=1){const B=Gl(k,b,H);_[H]?(_[H].p(B,y),G(_[H],1)):(_[H]=Kl(B),_[H].c(),G(_[H],1),_[H].m(s,null))}for(ye(),H=b.length;H<_.length;H+=1)v(H);we()}if(y&5315){w=k[0];let H;for(H=0;H<w.length;H+=1){const B=Yl(k,w,H);m[H]?(m[H].p(B,y),G(m[H],1)):(m[H]=xl(B),m[H].c(),G(m[H],1),m[H].m(f,null))}for(ye(),H=w.length;H<m.length;H+=1)g(H);we()}const R={};y&5120&&(R.x=k[12](k[10][1])+5),y&2048&&(R.labelPlacements=k[11]),y&64&&(R.hoverIndex=k[6]),o.$set(R),(!d||y&32&&h!==(h="translate("+k[5].left+","+k[5].top+")"))&&u(r,"transform",h),(!d||y&8)&&u(l,"width",k[3])},i(k){if(!d){G(a.$$.fragment,k),G(i.$$.fragment,k);for(let y=0;y<b.length;y+=1)G(_[y]);for(let y=0;y<w.length;y+=1)G(m[y]);G(o.$$.fragment,k),d=!0}},o(k){Z(a.$$.fragment,k),Z(i.$$.fragment,k),_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)Z(_[y]);m=m.filter(Boolean);for(let y=0;y<m.length;y+=1)Z(m[y]);Z(o.$$.fragment,k),d=!1},d(k){k&&p(t),se(a),se(i),fe(_,k),fe(m,k),se(o),c()}}}function qo(e,t,l){let r,n,a,i,s,f,o,h,c,d,b=Me("areas"),{plottedAreas:_,filteredData:v,indicator:w}=t,m=400,g=500,k=200,y=["main","parent","country","uk","custom1","custom2","custom3","custom4"];const D=(B,F)=>F.areacd===B.areacd,S=(B,F)=>F.areacd===B.areacd;function R(B){h=B,l(6,h)}function H(){m=this.clientWidth,l(3,m)}return e.$$set=B=>{"plottedAreas"in B&&l(0,_=B.plottedAreas),"filteredData"in B&&l(1,v=B.filteredData),"indicator"in B&&l(2,w=B.indicator)},e.$$.update=()=>{e.$$.dirty&40&&l(9,n=m-r.left-r.right),e.$$.dirty&32&&l(4,a=g-r.top-r.bottom),e.$$.dirty&2&&l(10,i=[Math.min(...v.map(B=>B.year)),Math.max(...v.map(B=>B.year))]),e.$$.dirty&1536&&l(12,s=Ve().domain(i).range([0,n])),e.$$.dirty&6&&l(8,f=[w.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...v.map(B=>B.value))),Math.ceil(Math.max(...v.map(B=>B.value)))]),e.$$.dirty&272&&l(7,o=Ve().domain(f).range([a,0])),e.$$.dirty&195&&l(14,c=_.map(B=>({...B,yPosition:o(v.find(F=>F.areacd===B.areacd&F.year===Math.max.apply(null,v.filter(M=>M.areacd===B.areacd).map(M=>M.year))).value),areanm:b.find(F=>B.areacd===F.areacd).areanm})).filter((B,F)=>h!=null?F==h:y.includes(B.role))),e.$$.dirty&16432&&l(11,d=gn(c,[-r.top,a],B=>B.yPosition,B=>B.areanm.length>20?34:17))},l(5,r={top:10,left:80,right:k+5,bottom:40}),l(6,h=null),[_,v,w,m,a,r,h,o,f,n,i,d,s,g,c,D,S,R,H]}class Yo extends de{constructor(t){super(),_e(this,t,qo,Ho,me,{plottedAreas:0,filteredData:1,indicator:2})}}function Ul(e,t,l){const r=e.slice();return r[10]=t[l],r[12]=l,r}function jl(e,t,l){const r=e.slice();return r[10]=t[l],r[12]=l,r}function Zl(e){let t,l,r,n=e[1],a=[];for(let f=0;f<n.length;f+=1)a[f]=Ql(jl(e,n,f));let i=e[1],s=[];for(let f=0;f<i.length;f+=1)s[f]=Xl(Ul(e,i,f));return{c(){t=P("g");for(let f=0;f<a.length;f+=1)a[f].c();l=te(),r=P("g");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){t=z(f,"g",{class:!0});var o=I(t);for(let c=0;c<a.length;c+=1)a[c].l(o);o.forEach(p),l=le(f),r=z(f,"g",{class:!0});var h=I(r);for(let c=0;c<s.length;c+=1)s[c].l(h);h.forEach(p),this.h()},h(){u(t,"class","overlayCirclesContainer"),u(r,"class","visibleCirclesContainer")},m(f,o){N(f,t,o);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);N(f,l,o),N(f,r,o);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(r,null)},p(f,o){if(o&14){n=f[1];let h;for(h=0;h<n.length;h+=1){const c=jl(f,n,h);a[h]?a[h].p(c,o):(a[h]=Ql(c),a[h].c(),a[h].m(t,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=n.length}if(o&3){i=f[1];let h;for(h=0;h<i.length;h+=1){const c=Ul(f,i,h);s[h]?s[h].p(c,o):(s[h]=Xl(c),s[h].c(),s[h].m(r,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}},d(f){f&&p(t),fe(a,f),f&&p(l),f&&p(r),fe(s,f)}}}function Ql(e){let t,l,r,n,a,i;return{c(){t=P("g"),l=P("circle"),this.h()},l(s){t=z(s,"g",{transform:!0});var f=I(t);l=z(f,"circle",{hoverid:!0,r:!0,stroke:!0,fill:!0}),I(l).forEach(p),f.forEach(p),this.h()},h(){u(l,"hoverid",e[12]),u(l,"r",r=1.5*e[10].datum.radius),u(l,"stroke","none"),u(l,"fill","white"),u(t,"transform",n="translate("+e[10].y+","+e[10].x+")")},m(s,f){N(s,t,f),E(t,l),a||(i=[Ee(l,"mouseover",e[2]),Ee(l,"mouseleave",e[3]),Ee(l,"focus",e[2])],a=!0)},p(s,f){f&2&&r!==(r=1.5*s[10].datum.radius)&&u(l,"r",r),f&2&&n!==(n="translate("+s[10].y+","+s[10].x+")")&&u(t,"transform",n)},d(s){s&&p(t),a=!1,ct(i)}}}function Go(e){let t,l,r,n;return{c(){t=P("circle"),this.h()},l(a){t=z(a,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,opacity:!0});var i=I(t);i.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"r",l=e[0]===e[12]?e[10].datum.radius+3:e[10].datum.radius),u(t,"fill",r=e[0]===e[12]?"#F39431":$[e[10].datum.role]),u(t,"stroke","white"),u(t,"opacity",n=e[0]===e[12]||e[0]===null?1:.2)},m(a,i){N(a,t,i)},p(a,i){i&3&&l!==(l=a[0]===a[12]?a[10].datum.radius+3:a[10].datum.radius)&&u(t,"r",l),i&3&&r!==(r=a[0]===a[12]?"#F39431":$[a[10].datum.role])&&u(t,"fill",r),i&1&&n!==(n=a[0]===a[12]||a[0]===null?1:.2)&&u(t,"opacity",n)},d(a){a&&p(t)}}}function Ko(e){let t,l,r,n,a,i,s,f;return{c(){t=P("rect"),this.h()},l(o){t=z(o,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,opacity:!0});var h=I(t);h.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"transform",l=["country","uk"].includes(e[10].datum.role)?"rotate(45)":null),u(t,"x",r=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),u(t,"y",n=e[0]===e[12]?-.75*e[10].datum.radius-3:-.75*e[10].datum.radius),u(t,"width",a=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),u(t,"height",i=e[0]===e[12]?e[10].datum.radius*1.5+6:e[10].datum.radius*1.5),u(t,"fill",s=e[0]===e[12]?"#F39431":$[e[10].datum.role]),u(t,"stroke","white"),u(t,"opacity",f=e[0]===e[12]||e[0]===null?1:.2)},m(o,h){N(o,t,h)},p(o,h){h&2&&l!==(l=["country","uk"].includes(o[10].datum.role)?"rotate(45)":null)&&u(t,"transform",l),h&3&&r!==(r=o[0]===o[12]?-.75*o[10].datum.radius-3:-.75*o[10].datum.radius)&&u(t,"x",r),h&3&&n!==(n=o[0]===o[12]?-.75*o[10].datum.radius-3:-.75*o[10].datum.radius)&&u(t,"y",n),h&3&&a!==(a=o[0]===o[12]?o[10].datum.radius*1.5+6:o[10].datum.radius*1.5)&&u(t,"width",a),h&3&&i!==(i=o[0]===o[12]?o[10].datum.radius*1.5+6:o[10].datum.radius*1.5)&&u(t,"height",i),h&3&&s!==(s=o[0]===o[12]?"#F39431":$[o[10].datum.role])&&u(t,"fill",s),h&1&&f!==(f=o[0]===o[12]||o[0]===null?1:.2)&&u(t,"opacity",f)},d(o){o&&p(t)}}}function Xl(e){let t,l,r;function n(s,f){return f&2&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(s[10].datum.role)),l?Ko:Go}let a=n(e,-1),i=a(e);return{c(){t=P("g"),i.c(),this.h()},l(s){t=z(s,"g",{transform:!0});var f=I(t);i.l(f),f.forEach(p),this.h()},h(){u(t,"transform",r="translate("+e[10].y+","+e[10].x+")")},m(s,f){N(s,t,f),i.m(t,null)},p(s,f){a===(a=n(s,f))&&i?i.p(s,f):(i.d(1),i=a(s),i&&(i.c(),i.m(t,null))),f&2&&r!==(r="translate("+s[10].y+","+s[10].x+")")&&u(t,"transform",r)},d(s){s&&p(t),i.d()}}}function xo(e){let t,l=e[1].length>0&&Zl(e);return{c(){l&&l.c(),t=ge()},l(r){l&&l.l(r),t=ge()},m(r,n){l&&l.m(r,n),N(r,t,n)},p(r,[n]){r[1].length>0?l?l.p(r,n):(l=Zl(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:he,o:he,d(r){l&&l.d(r),r&&p(t)}}}let Jl=1,$l=1,Uo=0;function jo(e,t,l){let r,{circleData:n,plottedAreas:a,y:i,hoverIndex:s,lineData:f}=t;class o{constructor(_,v,w){this.items=_,this.radiusFun=v,this.xFun=w,this.tieBreakFn=this._sfc32(2654435769,608135816,3084996962,Jl),this.maxR=Math.max(..._.map(m=>v(m))),this.rng=this._sfc32(1,2,3,Jl)}calculateYPositions(){let _=this.items.map((m,g)=>({datum:m,originalIndex:g,x:this.xFun(m),y:null,placed:!1})).sort((m,g)=>m.x-g.x);_.forEach(function(m,g){m.index=g});let v=this.tieBreakFn;_.forEach(function(m){m.tieBreaker=v(m.x)});let w=[..._].sort((m,g)=>{let k=this.radiusFun(m.datum)+m.tieBreaker*$l;return this.radiusFun(g.datum)+g.tieBreaker*$l-k});for(let m of w)m.placed=!0,m.y=this._getBestYPosition(m,_);return _.sort((m,g)=>m.originalIndex-g.originalIndex),_.map(m=>({datum:m.datum,x:m.x,y:m.y}))}_sfc32(_,v,w,m){let g=function(){_>>>=0,v>>>=0,w>>>=0,m>>>=0;var k=_+v|0;return _=v^v>>>9,v=w+(w<<3)|0,w=w<<21|w>>>11,m=m+1|0,k=k+m|0,w=w+k|0,(k>>>0)/4294967296};for(let k=0;k<10;k++)g();return g}_getBestYPosition(_,v){let w=[];for(let g of[-1,1]){let k,y=this.radiusFun(_.datum);for(let D=_.index+g;D>=0&&D<v.length&&(k=Math.abs(_.x-v[D].x))<y+this.maxR;D+=g){let S=v[D];if(!S.placed)continue;let R=y+this.radiusFun(S.datum);if(k>=y+this.radiusFun(S.datum))continue;let H=Math.sqrt(R*R-k*k),B=[S.y-H,S.y+H];w.push(B)}}if(w.length==0)return this.radiusFun(_.datum)*(this.rng()-.5)*Uo;let m=w.flat();m.push(0),m.sort((g,k)=>{let y=Math.abs(g),D=Math.abs(k);return y<D?-1:y>D?1:g-k});for(let g=0;g<m.length;g++){let k=m[g];if(w.every(y=>k<=y[0]||k>=y[1]))return k}}}let h=["main","parent","country","uk","custom1","custom2","custom3","custom4"];function c(b){l(0,s=parseFloat(Ke(this).attr("hoverid")))}function d(b){l(0,s=null)}return e.$$set=b=>{"circleData"in b&&l(5,n=b.circleData),"plottedAreas"in b&&l(6,a=b.plottedAreas),"y"in b&&l(7,i=b.y),"hoverIndex"in b&&l(0,s=b.hoverIndex),"lineData"in b&&l(4,f=b.lineData)},e.$$.update=()=>{e.$$.dirty&224&&l(1,r=new o(a,b=>"radius"in b?b.radius*1.1:5,b=>i(n.find(_=>_.areacd===b.areacd).value)).calculateYPositions()),e.$$.dirty&3&&l(4,f=s===null?r.filter(b=>h.includes(b.datum.role)):[r[s]])},[s,r,c,d,f,n,a,i]}class Zo extends de{constructor(t){super(),_e(this,t,jo,xo,me,{circleData:5,plottedAreas:6,y:7,hoverIndex:0,lineData:4})}}function er(e,t,l){const r=e.slice();return r[10]=t[l],r}function tr(e){let t,l=e[0][0].map(rr),r=[];for(let n=0;n<l.length;n+=1)r[n]=lr(er(e,l,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();t=ge()},l(n){for(let a=0;a<r.length;a+=1)r[a].l(n);t=ge()},m(n,a){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(n,a);N(n,t,a)},p(n,a){if(a&15){l=n[0][0].map(rr);let i;for(i=0;i<l.length;i+=1){const s=er(n,l,i);r[i]?r[i].p(s,a):(r[i]=lr(s),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(n){fe(r,n),n&&p(t)}}}function lr(e){let t,l,r,n,a,i;function s(...d){return e[4](e[10],...d)}function f(...d){return e[5](e[10],...d)}function o(...d){return e[6](e[10],...d)}function h(...d){return e[7](e[10],...d)}function c(...d){return e[8](e[10],...d)}return{c(){t=P("line"),this.h()},l(d){t=z(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),I(t).forEach(p),this.h()},h(){u(t,"x1",l=e[0][0].find(s).y+e[1]),u(t,"x2",r=e[0][1].find(f).y+e[2]),u(t,"y1",n=e[0][0].find(o).x),u(t,"y2",a=e[0][1].find(h).x),u(t,"stroke-width","3px"),u(t,"stroke",i=e[3]!=null?"#F39431":$[e[0][0].find(c).datum.role])},m(d,b){N(d,t,b)},p(d,b){e=d,b&3&&l!==(l=e[0][0].find(s).y+e[1])&&u(t,"x1",l),b&5&&r!==(r=e[0][1].find(f).y+e[2])&&u(t,"x2",r),b&1&&n!==(n=e[0][0].find(o).x)&&u(t,"y1",n),b&1&&a!==(a=e[0][1].find(h).x)&&u(t,"y2",a),b&9&&i!==(i=e[3]!=null?"#F39431":$[e[0][0].find(c).datum.role])&&u(t,"stroke",i)},d(d){d&&p(t)}}}function Qo(e){let t,l=e[0][0].length===e[0][1].length&&tr(e);return{c(){t=P("g"),l&&l.c(),this.h()},l(r){t=z(r,"g",{class:!0});var n=I(t);l&&l.l(n),n.forEach(p),this.h()},h(){u(t,"class","slopeLinesContainer")},m(r,n){N(r,t,n),l&&l.m(t,null)},p(r,[n]){r[0][0].length===r[0][1].length?l?l.p(r,n):(l=tr(r),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:he,o:he,d(r){r&&p(t),l&&l.d()}}}const rr=e=>e.datum.areacd;function Xo(e,t,l){let{lineDataArray:r,x1:n,x2:a,hoverIndex:i}=t;const s=(d,b)=>b.datum.areacd==d,f=(d,b)=>b.datum.areacd==d,o=(d,b)=>b.datum.areacd==d,h=(d,b)=>b.datum.areacd==d,c=(d,b)=>b.datum.areacd==d;return e.$$set=d=>{"lineDataArray"in d&&l(0,r=d.lineDataArray),"x1"in d&&l(1,n=d.x1),"x2"in d&&l(2,a=d.x2),"hoverIndex"in d&&l(3,i=d.hoverIndex)},[r,n,a,i,s,f,o,h,c]}class Jo extends de{constructor(t){super(),_e(this,t,Xo,Qo,me,{lineDataArray:0,x1:1,x2:2,hoverIndex:3})}}function nr(e,t,l){const r=e.slice();return r[25]=t[l],r[26]=t,r[27]=l,r}function ar(e){let t,l;return t=new Jo({props:{lineDataArray:e[11],x1:e[13](e[7][0]),x2:e[13](e[7][1]),hoverIndex:e[6]}}),{c(){ne(t.$$.fragment)},l(r){oe(t.$$.fragment,r)},m(r,n){ae(t,r,n),l=!0},p(r,n){const a={};n&2048&&(a.lineDataArray=r[11]),n&8320&&(a.x1=r[13](r[7][0])),n&8320&&(a.x2=r[13](r[7][1])),n&64&&(a.hoverIndex=r[6]),t.$set(a)},i(r){l||(G(t.$$.fragment,r),l=!0)},o(r){Z(t.$$.fragment,r),l=!1},d(r){se(t,r)}}}function ir(e){let t,l,r,n,a,i=e[25]+"",s,f,o,h,c,d;function b(...m){return e[18](e[25],...m)}function _(m){e[19](m)}function v(m){e[20](m,e[27])}let w={plottedAreas:e[0],circleData:e[1].filter(b),y:e[8]};return e[6]!==void 0&&(w.hoverIndex=e[6]),e[11][e[27]]!==void 0&&(w.lineData=e[11][e[27]]),f=new Zo({props:w}),ve.push(()=>be(f,"hoverIndex",_)),ve.push(()=>be(f,"lineData",v)),{c(){t=P("g"),l=P("line"),a=P("text"),s=Q(i),ne(f.$$.fragment),this.h()},l(m){t=z(m,"g",{transform:!0});var g=I(t);l=z(g,"line",{y1:!0,y2:!0,"stroke-width":!0,stroke:!0}),I(l).forEach(p),a=z(g,"text",{y:!0,"text-anchor":!0,"font-size":!0,fill:!0});var k=I(a);s=X(k,i),k.forEach(p),oe(f.$$.fragment,g),g.forEach(p),this.h()},h(){u(l,"y1",r=e[8](e[9][0])),u(l,"y2",n=e[8](e[9][1])-20),u(l,"stroke-width","1px"),u(l,"stroke","black"),u(a,"y","-30"),u(a,"text-anchor","middle"),u(a,"font-size","14px"),u(a,"fill","black"),u(t,"transform",c="translate("+e[13](e[25])+",0)")},m(m,g){N(m,t,g),E(t,l),E(t,a),E(a,s),ae(f,t,null),d=!0},p(m,g){e=m,(!d||g&768&&r!==(r=e[8](e[9][0])))&&u(l,"y1",r),(!d||g&768&&n!==(n=e[8](e[9][1])-20))&&u(l,"y2",n),(!d||g&128)&&i!==(i=e[25]+"")&&ie(s,i);const k={};g&1&&(k.plottedAreas=e[0]),g&130&&(k.circleData=e[1].filter(b)),g&256&&(k.y=e[8]),!o&&g&64&&(o=!0,k.hoverIndex=e[6],ke(()=>o=!1)),!h&&g&2048&&(h=!0,k.lineData=e[11][e[27]],ke(()=>h=!1)),f.$set(k),(!d||g&8320&&c!==(c="translate("+e[13](e[25])+",0)"))&&u(t,"transform",c)},i(m){d||(G(f.$$.fragment,m),d=!0)},o(m){Z(f.$$.fragment,m),d=!1},d(m){m&&p(t),se(f)}}}function $o(e){let t,l,r,n,a,i,s,f,o,h,c,d,b;a=new hn({props:{yDomain:e[9],y:e[8],indicator:e[2]}});let _=e[7][1]!=e[7][0]&&ar(e),v=e[7][0]===e[7][1]?[e[7][0]]:e[7],w=[];for(let g=0;g<v.length;g+=1)w[g]=ir(nr(e,v,g));const m=g=>Z(w[g],1,1,()=>{w[g]=null});return h=new mn({props:{x:e[13](e[7][1])+35+(e[11][1].length>0?Math.max(...e[11][1].map(sr)):0),labelPlacements:e[12],hoverIndex:e[6]}}),{c(){t=K("div"),l=P("svg"),r=P("g"),n=P("g"),ne(a.$$.fragment),i=P("rect"),_&&_.c(),f=ge();for(let g=0;g<w.length;g+=1)w[g].c();o=ge(),ne(h.$$.fragment),this.h()},l(g){t=x(g,"DIV",{class:!0});var k=I(t);l=z(k,"svg",{height:!0,width:!0});var y=I(l);r=z(y,"g",{class:!0,transform:!0});var D=I(r);n=z(D,"g",{transform:!0});var S=I(n);oe(a.$$.fragment,S),S.forEach(p),i=z(D,"rect",{x:!0,width:!0,height:!0,stroke:!0,fill:!0,opacity:!0}),I(i).forEach(p),_&&_.l(D),f=ge();for(let R=0;R<w.length;R+=1)w[R].l(D);o=ge(),oe(h.$$.fragment,D),D.forEach(p),y.forEach(p),k.forEach(p),this.h()},h(){u(n,"transform","translate("+-e[15]+",0)"),u(i,"x",-e[15]/2),u(i,"width",s=e[10]+e[15]),u(i,"height",e[4]),u(i,"stroke","none"),u(i,"fill","black"),u(i,"opacity","0.02"),u(r,"class","chart-container"),u(r,"transform",c="translate("+e[5].left+","+e[5].top+")"),u(l,"height",e[14]),u(l,"width",e[3]),u(t,"class","svg-container"),ut(()=>e[21].call(t))},m(g,k){N(g,t,k),E(t,l),E(l,r),E(r,n),ae(a,n,null),E(r,i),_&&_.m(r,null),E(r,f);for(let y=0;y<w.length;y+=1)w[y]&&w[y].m(r,null);E(r,o),ae(h,r,null),d=ht(t,e[21].bind(t)),b=!0},p(g,[k]){const y={};if(k&512&&(y.yDomain=g[9]),k&256&&(y.y=g[8]),k&4&&(y.indicator=g[2]),a.$set(y),(!b||k&1024&&s!==(s=g[10]+g[15]))&&u(i,"width",s),(!b||k&16)&&u(i,"height",g[4]),g[7][1]!=g[7][0]?_?(_.p(g,k),k&128&&G(_,1)):(_=ar(g),_.c(),G(_,1),_.m(r,f)):_&&(ye(),Z(_,1,1,()=>{_=null}),we()),k&11203){v=g[7][0]===g[7][1]?[g[7][0]]:g[7];let S;for(S=0;S<v.length;S+=1){const R=nr(g,v,S);w[S]?(w[S].p(R,k),G(w[S],1)):(w[S]=ir(R),w[S].c(),G(w[S],1),w[S].m(r,o))}for(ye(),S=v.length;S<w.length;S+=1)m(S);we()}const D={};k&10368&&(D.x=g[13](g[7][1])+35+(g[11][1].length>0?Math.max(...g[11][1].map(sr)):0)),k&4096&&(D.labelPlacements=g[12]),k&64&&(D.hoverIndex=g[6]),h.$set(D),(!b||k&32&&c!==(c="translate("+g[5].left+","+g[5].top+")"))&&u(r,"transform",c),(!b||k&8)&&u(l,"width",g[3])},i(g){if(!b){G(a.$$.fragment,g),G(_);for(let k=0;k<v.length;k+=1)G(w[k]);G(h.$$.fragment,g),b=!0}},o(g){Z(a.$$.fragment,g),Z(_),w=w.filter(Boolean);for(let k=0;k<w.length;k+=1)Z(w[k]);Z(h.$$.fragment,g),b=!1},d(g){g&&p(t),se(a),_&&_.d(),fe(w,g),se(h),d()}}}const sr=e=>e.y;function ef(e,t,l){let r,n,a,i,s,f,o,h,c,d,b=Me("areas"),{plottedAreas:_,filteredData:v,indicator:w,selectedAreas:m}=t,g=400,k=470,y=200,D=120,S=["main","parent","country","uk","custom1","custom2","custom3","custom4"],R=[[],[]];const H=(Y,O)=>O.year==Y;function B(Y){h=Y,l(6,h)}function F(Y,O){e.$$.not_equal(R[O],Y)&&(R[O]=Y,l(11,R))}function M(){g=this.clientWidth,l(3,g)}return e.$$set=Y=>{"plottedAreas"in Y&&l(0,_=Y.plottedAreas),"filteredData"in Y&&l(1,v=Y.filteredData),"indicator"in Y&&l(2,w=Y.indicator),"selectedAreas"in Y&&l(16,m=Y.selectedAreas)},e.$$.update=()=>{e.$$.dirty&40&&l(10,n=g-r.left-r.right),e.$$.dirty&32&&l(4,a=k-r.top-r.bottom),e.$$.dirty&2&&l(7,i=[Math.min(...v.map(Y=>Y.year)),Math.max(...v.map(Y=>Y.year))]),e.$$.dirty&1152&&l(13,s=Ve().domain(i).range([0,n])),e.$$.dirty&6&&l(9,f=[w.zeroBaseline==="TRUE"?0:Math.floor(.95*Math.min(...v.map(Y=>Y.value))),Math.ceil(Math.max(...v.map(Y=>Y.value)))]),e.$$.dirty&528&&l(8,o=Ve().domain(f).range([a,0])),e.$$.dirty&1&&l(0,_=_.map(Y=>({...Y,radius:S.includes(Y.role)?10:5}))),e.$$.dirty&451&&l(17,c=_.map(Y=>({...Y,yPosition:o(v.find(O=>O.areacd===Y.areacd&O.year===i[1]).value),areanm:b.find(O=>Y.areacd===O.areacd).areanm})).filter((Y,O)=>h!=null?O==h:S.includes(Y.role))),e.$$.dirty&131120&&l(12,d=gn(c,[-r.top,a],Y=>Y.yPosition,Y=>Y.areanm.length>20?34:17))},l(5,r={top:40,left:200,right:y+5,bottom:40}),l(6,h=null),[_,v,w,g,a,r,h,i,o,f,n,R,d,s,k,D,m,c,H,B,F,M]}class tf extends de{constructor(t){super(),_e(this,t,ef,$o,me,{plottedAreas:0,filteredData:1,indicator:2,selectedAreas:16})}}function or(e){let t,l=e[1].unit+"",r;return{c(){t=K("p"),r=Q(l),this.h()},l(n){t=x(n,"P",{class:!0});var a=I(t);r=X(a,l),a.forEach(p),this.h()},h(){u(t,"class","svelte-awo2mx")},m(n,a){N(n,t,a),E(t,r)},p(n,a){a&2&&l!==(l=n[1].unit+"")&&ie(r,l)},d(n){n&&p(t)}}}function lf(e){let t,l;return t=new Nn({props:{selectedAreas:e[5],filteredData:e[11]}}),{c(){ne(t.$$.fragment)},l(r){oe(t.$$.fragment,r)},m(r,n){ae(t,r,n),l=!0},p(r,n){const a={};n&32&&(a.selectedAreas=r[5]),n&2048&&(a.filteredData=r[11]),t.$set(a)},i(r){l||(G(t.$$.fragment,r),l=!0)},o(r){Z(t.$$.fragment,r),l=!1},d(r){se(t,r)}}}function rf(e){let t,l;return t=new tf({props:{selectedAreas:e[5],plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){ne(t.$$.fragment)},l(r){oe(t.$$.fragment,r)},m(r,n){ae(t,r,n),l=!0},p(r,n){const a={};n&32&&(a.selectedAreas=r[5]),n&512&&(a.plottedAreas=r[9]),n&2048&&(a.filteredData=r[11]),n&2&&(a.indicator=r[1]),t.$set(a)},i(r){l||(G(t.$$.fragment,r),l=!0)},o(r){Z(t.$$.fragment,r),l=!1},d(r){se(t,r)}}}function nf(e){let t,l;return t=new Yo({props:{plottedAreas:e[9],filteredData:e[11],indicator:e[1]}}),{c(){ne(t.$$.fragment)},l(r){oe(t.$$.fragment,r)},m(r,n){ae(t,r,n),l=!0},p(r,n){const a={};n&512&&(a.plottedAreas=r[9]),n&2048&&(a.filteredData=r[11]),n&2&&(a.indicator=r[1]),t.$set(a)},i(r){l||(G(t.$$.fragment,r),l=!0)},o(r){Z(t.$$.fragment,r),l=!1},d(r){se(t,r)}}}function af(e){let t,l,r,n,a,i,s=e[1].label+"",f,o,h,c,d,b,_,v,w,m,g,k,y,D,S;function R(q){e[15](q)}let H={optionsArray:e[12]};e[8]!==void 0&&(H.chosenChart=e[8]),l=new po({props:H}),ve.push(()=>be(l,"chosenChart",R));let B=e[1].unit!=null&&or(e);function F(q){e[17](q)}let M={selectedAreas:e[5].filter(e[16]),areasWithData:e[10],selectedArea:e[6],parentArea:e[7]};e[0]!==void 0&&(M.checkboxedRoles=e[0]),c=new dt({props:M}),ve.push(()=>be(c,"checkboxedRoles",F));const Y=[nf,rf,lf],O=[];function J(q,L){return q[12][q[8]-1]==="Over time"?0:q[12][q[8]-1]==="To other areas"?1:q[12][q[8]-1]==="Geographically"?2:-1}return~(_=J(e))&&(v=O[_]=Y[_](e)),{c(){t=K("div"),ne(l.$$.fragment),n=te(),a=K("div"),i=K("h3"),f=Q(s),o=te(),B&&B.c(),h=te(),ne(c.$$.fragment),b=te(),v&&v.c(),w=te(),m=K("p"),g=Q("Source: Office for National Statistics"),k=te(),y=K("img"),this.h()},l(q){t=x(q,"DIV",{class:!0});var L=I(t);oe(l.$$.fragment,L),n=le(L),a=x(L,"DIV",{class:!0});var W=I(a);i=x(W,"H3",{class:!0});var U=I(i);f=X(U,s),U.forEach(p),o=le(W),B&&B.l(W),h=le(W),oe(c.$$.fragment,W),b=le(W),v&&v.l(W),w=le(W),m=x(W,"P",{class:!0});var A=I(m);g=X(A,"Source: Office for National Statistics"),A.forEach(p),W.forEach(p),k=le(L),y=x(L,"IMG",{style:!0,width:!0,src:!0,alt:!0}),L.forEach(p),this.h()},h(){u(i,"class","svelte-awo2mx"),u(m,"class","svelte-awo2mx"),u(a,"class","chartOutlineGroup svelte-awo2mx"),ue(y,"padding-top","10px"),u(y,"width","75%"),Mt(y.src,D=`${Oe}/img/image1.png`)||u(y,"src",D),u(y,"alt","download buttons"),u(t,"class","mainChartContainer")},m(q,L){N(q,t,L),ae(l,t,null),E(t,n),E(t,a),E(a,i),E(i,f),E(a,o),B&&B.m(a,null),E(a,h),ae(c,a,null),E(a,b),~_&&O[_].m(a,null),E(a,w),E(a,m),E(m,g),E(t,k),E(t,y),S=!0},p(q,[L]){const W={};!r&&L&256&&(r=!0,W.chosenChart=q[8],ke(()=>r=!1)),l.$set(W),(!S||L&2)&&s!==(s=q[1].label+"")&&ie(f,s),q[1].unit!=null?B?B.p(q,L):(B=or(q),B.c(),B.m(a,h)):B&&(B.d(1),B=null);const U={};L&60&&(U.selectedAreas=q[5].filter(q[16])),L&1024&&(U.areasWithData=q[10]),L&64&&(U.selectedArea=q[6]),L&128&&(U.parentArea=q[7]),!d&&L&1&&(d=!0,U.checkboxedRoles=q[0],ke(()=>d=!1)),c.$set(U);let A=_;_=J(q),_===A?~_&&O[_].p(q,L):(v&&(ye(),Z(O[A],1,1,()=>{O[A]=null}),we()),~_?(v=O[_],v?v.p(q,L):(v=O[_]=Y[_](q),v.c()),G(v,1),v.m(a,w)):v=null)},i(q){S||(G(l.$$.fragment,q),G(c.$$.fragment,q),G(v),S=!0)},o(q){Z(l.$$.fragment,q),Z(c.$$.fragment,q),Z(v),S=!1},d(q){q&&p(t),se(l),B&&B.d(),se(c),~_&&O[_].d()}}}function sf(e,t,l){let r,n,a,i,{indicator:s,latestData:f,otherData:o,initialData:h,selectedAreas:c,checkboxedRoles:d,siblingAreas:b,selectedArea:_,parentArea:v}=t,w=1,m=[...o,...h].filter(D=>D.areacd===c.find(S=>S.role==="main").data.areacd).length>0?["Over time","To other areas","Geographically"]:["To other areas","Geographically"];function g(D){w=D,l(8,w)}const k=D=>[...f,...o,...h].filter(S=>D.data.areacd===S.areacd).length>0&D.role!=="main";function y(D){d=D,l(0,d)}return e.$$set=D=>{"indicator"in D&&l(1,s=D.indicator),"latestData"in D&&l(2,f=D.latestData),"otherData"in D&&l(3,o=D.otherData),"initialData"in D&&l(4,h=D.initialData),"selectedAreas"in D&&l(5,c=D.selectedAreas),"checkboxedRoles"in D&&l(0,d=D.checkboxedRoles),"siblingAreas"in D&&l(13,b=D.siblingAreas),"selectedArea"in D&&l(6,_=D.selectedArea),"parentArea"in D&&l(7,v=D.parentArea)},e.$$.update=()=>{e.$$.dirty&284&&l(14,r=(m[w-1]==="Over time"?[...f,...h,...o]:m[w-1]==="To other areas"?[...f,...h]:f).sort((D,S)=>D.year-S.year)),e.$$.dirty&16384&&l(10,n=[...new Set(r.map(D=>D.areacd))]),e.$$.dirty&9249&&l(9,a=[...c.map(D=>D.role==="main"||d[D.role]?{role:D.role,areacd:D.data.areacd}:null).filter(D=>D!=null),...d.custom===null||d.custom===void 0?[]:d.custom.map((D,S)=>({role:"custom"+(S+1),areacd:D.areacd})),...d.neighbour?b.neighbours.map(D=>({role:"neighbour",areacd:D})):[],...d.cluster?b.similar.map(D=>({role:"cluster",areacd:D})):[]].filter(D=>n.includes(D.areacd))),e.$$.dirty&16896&&l(11,i=r.filter(D=>a.map(S=>S.areacd).includes(D.areacd)))},[d,s,f,o,h,c,_,v,w,a,n,i,m,b,r,g,k,y]}class of extends de{constructor(t){super(),_e(this,t,sf,af,me,{indicator:1,latestData:2,otherData:3,initialData:4,selectedAreas:5,checkboxedRoles:0,siblingAreas:13,selectedArea:6,parentArea:7})}}function fr(e,t,l){const r=e.slice();return r[10]=t[l],r[12]=l,r}function ur(e,t,l){const r=e.slice();return r[13]=t[l],r[15]=l,r}function hr(e,t,l){const r=e.slice();return r[16]=t[l],r}function cr(e,t,l){const r=e.slice();return r[19]=t[l],r[12]=l,r}function dr(e){let t,l=e[19]+"",r;return{c(){t=K("th"),r=Q(l),this.h()},l(n){t=x(n,"TH",{id:!0,class:!0});var a=I(t);r=X(a,l),a.forEach(p),this.h()},h(){u(t,"id","col"+(e[12]+1)),u(t,"class","svelte-16b6sh9")},m(n,a){N(n,t,a),E(t,r)},p:he,d(n){n&&p(t)}}}function _r(e){let t,l=e[16]+"",r,n,a,i;return{c(){t=K("p"),r=Q(l),this.h()},l(s){t=x(s,"P",{class:!0});var f=I(t);r=X(f,l),f.forEach(p),this.h()},h(){u(t,"class",n=De(e[0].includes(e[16])?"selected":"unselected")+" svelte-16b6sh9")},m(s,f){N(s,t,f),E(t,r),a||(i=Ee(t,"click",e[4]),a=!0)},p(s,f){f&1&&n!==(n=De(s[0].includes(s[16])?"selected":"unselected")+" svelte-16b6sh9")&&u(t,"class",n)},d(s){s&&p(t),a=!1,i()}}}function mr(e){let t,l=e[13],r=[];for(let n=0;n<l.length;n+=1)r[n]=_r(hr(e,l,n));return{c(){t=K("th");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=x(n,"TH",{id:!0,class:!0});var a=I(t);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){u(t,"id","col"+(e[12]+1)),u(t,"class","svelte-16b6sh9")},m(n,a){N(n,t,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,null)},p(n,a){if(a&19){l=n[13];let i;for(i=0;i<l.length;i+=1){const s=hr(n,l,i);r[i]?r[i].p(s,a):(r[i]=_r(s),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=l.length}},d(n){n&&p(t),fe(r,n)}}}function gr(e){let t,l,r=e[3][e[12]]+"",n,a,i,s=e[10],f=[];for(let o=0;o<s.length;o+=1)f[o]=mr(ur(e,s,o));return{c(){t=K("tr"),l=K("th"),n=Q(r),a=te();for(let o=0;o<f.length;o+=1)f[o].c();i=te(),this.h()},l(o){t=x(o,"TR",{});var h=I(t);l=x(h,"TH",{id:!0,class:!0});var c=I(l);n=X(c,r),c.forEach(p),a=le(h);for(let d=0;d<f.length;d+=1)f[d].l(h);i=le(h),h.forEach(p),this.h()},h(){u(l,"id","col0"),u(l,"class","svelte-16b6sh9")},m(o,h){N(o,t,h),E(t,l),E(l,n),E(t,a);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(t,null);E(t,i)},p(o,h){if(h&19){s=o[10];let c;for(c=0;c<s.length;c+=1){const d=ur(o,s,c);f[c]?f[c].p(d,h):(f[c]=mr(d),f[c].c(),f[c].m(t,i))}for(;c<f.length;c+=1)f[c].d(1);f.length=s.length}},d(o){o&&p(t),fe(f,o)}}}function ff(e){let t,l,r,n,a,i,s,f,o,h=e[2],c=[];for(let _=0;_<h.length;_+=1)c[_]=dr(cr(e,h,_));let d=e[1],b=[];for(let _=0;_<d.length;_+=1)b[_]=gr(fr(e,d,_));return{c(){t=K("div"),l=K("table"),r=K("tr"),n=K("th"),a=te();for(let _=0;_<c.length;_+=1)c[_].c();i=te();for(let _=0;_<b.length;_+=1)b[_].c();s=te(),f=K("p"),o=Q("Click on an indicator to add it to the chart below."),this.h()},l(_){t=x(_,"DIV",{class:!0});var v=I(t);l=x(v,"TABLE",{class:!0});var w=I(l);r=x(w,"TR",{class:!0});var m=I(r);n=x(m,"TH",{id:!0,class:!0}),I(n).forEach(p),a=le(m);for(let k=0;k<c.length;k+=1)c[k].l(m);m.forEach(p),i=le(w);for(let k=0;k<b.length;k+=1)b[k].l(w);w.forEach(p),s=le(v),f=x(v,"P",{style:!0,class:!0});var g=I(f);o=X(g,"Click on an indicator to add it to the chart below."),g.forEach(p),v.forEach(p),this.h()},h(){u(n,"id","col0"),u(n,"class","svelte-16b6sh9"),u(r,"class","tableHeaders svelte-16b6sh9"),u(l,"class","svelte-16b6sh9"),ue(f,"padding-top","15px"),ue(f,"padding-left","120px"),u(f,"class","svelte-16b6sh9"),u(t,"class","gridContainer svelte-16b6sh9")},m(_,v){N(_,t,v),E(t,l),E(l,r),E(r,n),E(r,a);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(r,null);E(l,i);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(l,null);E(t,s),E(t,f),E(f,o)},p(_,[v]){if(v&4){h=_[2];let w;for(w=0;w<h.length;w+=1){const m=cr(_,h,w);c[w]?c[w].p(m,v):(c[w]=dr(m),c[w].c(),c[w].m(r,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=h.length}if(v&27){d=_[1];let w;for(w=0;w<d.length;w+=1){const m=fr(_,d,w);b[w]?b[w].p(m,v):(b[w]=gr(m),b[w].c(),b[w].m(l,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=d.length}},i:he,o:he,d(_){_&&p(t),fe(c,_),fe(b,_)}}}function uf(e,t,l){let{indicators:r,latestData:n,initialData:a,selectedAreas:i,selectedIndicatorsArray:s}=t;Me("areas");let f=[[[],[],[]],[[],[],[]],[[],[],[]]];r.forEach(d=>{Math.pow(10,d.roundingFactor);let b=n.filter(w=>w.codeId===d.id),_=i.find(w=>w.role==="main").data.areacd,v=b.filter(w=>w.areacd===_);if(v=v.length>0?v[0].value:void 0,v!=null){let w=b.filter(Y=>Y.areacd===i.find(O=>O.role==="country").data.areacd),m=b.filter(Y=>Y.areacd===i.find(O=>O.role==="uk").data.areacd),g=b.filter(Y=>Y.areacd===i.find(O=>O.role==="parent").data.areacd),k=w.length>0?w[0]:m.length>0?m[0]:g.length>0?g[0]:void 0,y=k!=null?k.value:void 0,S=(d.code in a?a[d.code]:[]).filter(Y=>Y.areacd===_);S=S.length>0?S[0].value:void 0;let R=d.code in Ge?Ge[d.code]:St,B=(v===void 0||y===void 0?!0:Math.abs(v-y)/y<R[0]/100)?1:v<y?0:2,M=(v===void 0||S===void 0?!0:Math.abs(v-S)/S<R[0]/100)?1:v<S?d.highEqualsGood==="F"?2:0:d.highEqualsGood==="F"?0:2;f[M][[B]].push(d.label)}});let o=["Worse than average","Close to average","Better than average"],h=["Worsening","Little change","Improving"];function c(d){let b=Ke(this).text();s.includes(b)?l(0,s=s.filter(_=>_!=b)):l(0,s=[...s,b])}return e.$$set=d=>{"indicators"in d&&l(5,r=d.indicators),"latestData"in d&&l(6,n=d.latestData),"initialData"in d&&l(7,a=d.initialData),"selectedAreas"in d&&l(8,i=d.selectedAreas),"selectedIndicatorsArray"in d&&l(0,s=d.selectedIndicatorsArray)},[s,f,o,h,c,r,n,a,i]}class hf extends de{constructor(t){super(),_e(this,t,uf,ff,me,{indicators:5,latestData:6,initialData:7,selectedAreas:8,selectedIndicatorsArray:0})}}function pr(e,t,l){const r=e.slice();return r[37]=t[l],r[39]=l,r}function vr(e,t,l){const r=e.slice();return r[37]=t[l],r[39]=l,r}function br(e,t,l){const r=e.slice();return r[37]=t[l],r[39]=l,r}function kr(e,t,l){const r=e.slice();return r[42]=t[l],r[39]=l,r}function yr(e,t,l){const r=e.slice();return r[44]=t[l],r[46]=l,r}function wr(e){let t,l,r=e[0].unit+" in "+e[0].latestYear,n,a;return{c(){t=K("p"),l=K("span"),n=Q(r),a=K("p"),this.h()},l(i){t=x(i,"P",{class:!0});var s=I(t);l=x(s,"SPAN",{style:!0});var f=I(l);n=X(f,r),f.forEach(p),s.forEach(p),a=x(i,"P",{class:!0});var o=I(a);o.forEach(p),this.h()},h(){ue(l,"padding-left","0px"),ue(l,"font-size","14px"),ue(l,"font-style","italic"),u(t,"class","svelte-tveaae"),u(a,"class","svelte-tveaae")},m(i,s){N(i,t,s),E(t,l),E(l,n),N(i,a,s)},p(i,s){s[0]&1&&r!==(r=i[0].unit+" in "+i[0].latestYear)&&ie(n,r)},d(i){i&&p(t),i&&p(a)}}}function Ar(e){let t,l=[e[6],e[5]],r=[];for(let n=0;n<2;n+=1)r[n]=Er(kr(e,l,n));return{c(){t=P("g");for(let n=0;n<2;n+=1)r[n].c();this.h()},l(n){t=z(n,"g",{class:!0});var a=I(t);for(let i=0;i<2;i+=1)r[i].l(a);a.forEach(p),this.h()},h(){u(t,"class","keyContainer")},m(n,a){N(n,t,a);for(let i=0;i<2;i+=1)r[i]&&r[i].m(t,null)},p(n,a){if(a[0]&19552){l=[n[6],n[5]];let i;for(i=0;i<2;i+=1){const s=kr(n,l,i);r[i]?r[i].p(s,a):(r[i]=Er(s),r[i].c(),r[i].m(t,null))}for(;i<2;i+=1)r[i].d(1)}},d(n){n&&p(t),fe(r,n)}}}function Dr(e){let t,l=e[44]+"",r;return{c(){t=P("text"),r=Q(l),this.h()},l(n){t=z(n,"text",{"text-anchor":!0,x:!0,y:!0,"font-size":!0});var a=I(t);r=X(a,l),a.forEach(p),this.h()},h(){u(t,"text-anchor",["start","end"][e[39]]),u(t,"x",[12,-12][e[39]]),u(t,"y",55+e[46]*12),u(t,"font-size","12px")},m(n,a){N(n,t,a),E(t,r)},p(n,a){a[0]&3072&&l!==(l=n[44]+"")&&ie(r,l)},d(n){n&&p(t)}}}function Er(e){let t,l,r,n,a=Nr([e[11],e[10]][e[39]],2),i=[];for(let s=0;s<a.length;s+=1)i[s]=Dr(yr(e,a,s));return{c(){t=P("g"),l=P("path"),r=P("path");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){t=z(s,"g",{class:!0,transform:!0});var f=I(t);l=z(f,"path",{d:!0,fill:!0,stroke:!0}),I(l).forEach(p),r=z(f,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),I(r).forEach(p);for(let o=0;o<i.length;o+=1)i[o].l(f);f.forEach(p),this.h()},h(){u(l,"d","M0 0 l-4 4 l8 0 z"),u(l,"fill","black"),u(l,"stroke","black"),u(r,"d","M0 6 l 0 45 l"+[10,-10][e[39]]+" 0"),u(r,"fill","none"),u(r,"stroke","black"),u(r,"stroke-width","1px"),u(t,"class",De(["min","max"][e[39]]+"Element")+" svelte-tveaae"),u(t,"transform",n="translate("+e[42].x+","+(e[14](e[42].y)+20)+")")},m(s,f){N(s,t,f),E(t,l),E(t,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null)},p(s,f){if(f[0]&3072){a=Nr([s[11],s[10]][s[39]],2);let o;for(o=0;o<a.length;o+=1){const h=yr(s,a,o);i[o]?i[o].p(h,f):(i[o]=Dr(h),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}f[0]&16480&&n!==(n="translate("+s[42].x+","+(s[14](s[42].y)+20)+")")&&u(t,"transform",n)},d(s){s&&p(t),fe(i,s)}}}function Ir(e){let t,l,r,n,a;return{c(){t=P("g"),l=P("circle"),this.h()},l(i){t=z(i,"g",{transform:!0});var s=I(t);l=z(s,"circle",{r:!0,stroke:!0,fill:!0,opacity:!0,hoverid:!0}),I(l).forEach(p),s.forEach(p),this.h()},h(){u(l,"r","5"),u(l,"stroke","none"),u(l,"fill","black"),u(l,"opacity","0.1"),u(l,"hoverid",e[39]),u(t,"transform",r="translate("+e[37].x+","+e[14](e[37].y)+")")},m(i,s){N(i,t,s),E(t,l),n||(a=[Ee(l,"mouseover",e[19]),Ee(l,"mouseleave",e[20]),Ee(l,"focus",e[19])],n=!0)},p(i,s){s[0]&16400&&r!==(r="translate("+i[37].x+","+i[14](i[37].y)+")")&&u(t,"transform",r)},d(i){i&&p(t),n=!1,ct(a)}}}function Mr(e){let t,l,r,n=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",a,i,s,f,o=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",h,c,d,b,_=e[15].find(H).areanm+"",v,w,m,g,k=e[15].find(B).areanm+"",y,D,S,R;function H(...F){return e[34](e[37],...F)}function B(...F){return e[35](e[37],...F)}return{c(){t=P("g"),l=P("circle"),r=P("text"),a=Q(n),f=P("text"),h=Q(o),b=P("text"),v=Q(_),g=P("text"),y=Q(k),this.h()},l(F){t=z(F,"g",{transform:!0});var M=I(t);l=z(M,"circle",{"pointer-events":!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),I(l).forEach(p),r=z(M,"text",{"text-anchor":!0,x:!0,y:!0,"stroke-width":!0,fill:!0,stroke:!0});var Y=I(r);a=X(Y,n),Y.forEach(p),f=z(M,"text",{"text-anchor":!0,x:!0,y:!0,fill:!0,stroke:!0});var O=I(f);h=X(O,o),O.forEach(p),b=z(M,"text",{"text-anchor":!0,x:!0,y:!0,"stroke-width":!0,fill:!0,stroke:!0});var J=I(b);v=X(J,_),J.forEach(p),g=z(M,"text",{"text-anchor":!0,x:!0,y:!0,fill:!0,stroke:!0});var q=I(g);y=X(q,k),q.forEach(p),M.forEach(p),this.h()},h(){u(l,"pointer-events","none"),u(l,"r","8"),u(l,"stroke","white"),u(l,"stroke-width","1.5px"),u(l,"fill","#F39431"),u(l,"opacity","1"),u(r,"text-anchor",i=e[37].x<e[8]/2?"start":"end"),u(r,"x",s=e[37].x<e[8]/2?10:-10),u(r,"y","-30"),u(r,"stroke-width","3px"),u(r,"fill","whtie"),u(r,"stroke","white"),u(f,"text-anchor",c=e[37].x<e[8]/2?"start":"end"),u(f,"x",d=e[37].x<e[8]/2?10:-10),u(f,"y","-30"),u(f,"fill","#F39431"),u(f,"stroke","#F39431"),u(b,"text-anchor",w=e[37].x<e[8]/2?"start":"end"),u(b,"x",m=e[37].x<e[8]/2?10:-10),u(b,"y","-10"),u(b,"stroke-width","3px"),u(b,"fill","whtie"),u(b,"stroke","white"),u(g,"text-anchor",D=e[37].x<e[8]/2?"start":"end"),u(g,"x",S=e[37].x<e[8]/2?10:-10),u(g,"y","-10"),u(g,"fill","#F39431"),u(g,"stroke","#F39431"),u(t,"transform",R="translate("+e[37].x+","+e[14](e[37].y)+")")},m(F,M){N(F,t,M),E(t,l),E(t,r),E(r,a),E(t,f),E(f,h),E(t,b),E(b,v),E(t,g),E(g,y)},p(F,M){e=F,M[0]&17&&n!==(n=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"")&&ie(a,n),M[0]&272&&i!==(i=e[37].x<e[8]/2?"start":"end")&&u(r,"text-anchor",i),M[0]&272&&s!==(s=e[37].x<e[8]/2?10:-10)&&u(r,"x",s),M[0]&17&&o!==(o=e[17]+e[37].datum.value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"")&&ie(h,o),M[0]&272&&c!==(c=e[37].x<e[8]/2?"start":"end")&&u(f,"text-anchor",c),M[0]&272&&d!==(d=e[37].x<e[8]/2?10:-10)&&u(f,"x",d),M[0]&16&&_!==(_=e[15].find(H).areanm+"")&&ie(v,_),M[0]&272&&w!==(w=e[37].x<e[8]/2?"start":"end")&&u(b,"text-anchor",w),M[0]&272&&m!==(m=e[37].x<e[8]/2?10:-10)&&u(b,"x",m),M[0]&16&&k!==(k=e[15].find(B).areanm+"")&&ie(y,k),M[0]&272&&D!==(D=e[37].x<e[8]/2?"start":"end")&&u(g,"text-anchor",D),M[0]&272&&S!==(S=e[37].x<e[8]/2?10:-10)&&u(g,"x",S),M[0]&16400&&R!==(R="translate("+e[37].x+","+e[14](e[37].y)+")")&&u(t,"transform",R)},d(F){F&&p(t)}}}function Sr(e){let t,l=e[12]===e[39]&&Mr(e);return{c(){l&&l.c(),t=ge()},l(r){l&&l.l(r),t=ge()},m(r,n){l&&l.m(r,n),N(r,t,n)},p(r,n){r[12]===r[39]?l?l.p(r,n):(l=Mr(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(r){l&&l.d(r),r&&p(t)}}}function Fr(e){let t,l=Math.round(e[3].datum.value).toLocaleString()+"",r,n,a,i=Math.round(e[3].datum.value).toLocaleString()+"",s,f,o,h,c,d,b,_,v,w,m,g,k,y,D,S,R,H,B,F,M,Y,O,J,q,L,W,U;return{c(){t=P("text"),r=Q(l),a=P("text"),s=Q(i),o=P("text"),h=Q("Half of areas have a value"),d=P("text"),b=Q("higher/lower than this line"),v=P("path"),m=P("path"),k=P("text"),y=Q("worse than"),S=P("text"),R=Q("average"),B=P("path"),M=P("path"),O=P("text"),J=Q("better than"),L=P("text"),W=Q("average"),this.h()},l(A){t=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,stroke:!0,"stroke-width":!0,"font-size":!0});var T=I(t);r=X(T,l),T.forEach(p),a=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var V=I(a);s=X(V,i),V.forEach(p),o=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var re=I(o);h=X(re,"Half of areas have a value"),re.forEach(p),d=z(A,"text",{x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var ce=I(d);b=X(ce,"higher/lower than this line"),ce.forEach(p),v=z(A,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0}),I(v).forEach(p),m=z(A,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(m).forEach(p),k=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var C=I(k);y=X(C,"worse than"),C.forEach(p),S=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var ee=I(S);R=X(ee,"average"),ee.forEach(p),B=z(A,"path",{transform:!0,d:!0,"stroke-width":!0,stroke:!0}),I(B).forEach(p),M=z(A,"path",{transform:!0,d:!0,stroke:!0,fill:!0}),I(M).forEach(p),O=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var Ie=I(O);J=X(Ie,"better than"),Ie.forEach(p),L=z(A,"text",{transform:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,"font-size":!0});var Ae=I(L);W=X(Ae,"average"),Ae.forEach(p),this.h()},h(){u(t,"x",n=e[3].x),u(t,"y","80"),u(t,"text-anchor","middle"),u(t,"fill","white"),u(t,"stroke","white"),u(t,"stroke-width","8px"),u(t,"font-size","14px"),u(a,"x",f=e[3].x),u(a,"y","80"),u(a,"text-anchor","middle"),u(a,"fill","#871A5B"),u(a,"font-size","14px"),u(o,"x",c=e[3].x),u(o,"y","120"),u(o,"text-anchor","middle"),u(o,"fill","#871A5B"),u(o,"font-size","12px"),u(d,"x",_=e[3].x),u(d,"y","132"),u(d,"text-anchor","middle"),u(d,"fill","#871A5B"),u(d,"font-size","12px"),u(v,"transform",w="translate("+e[3].x+",120)"),u(v,"d","M -80 0 l-60 0"),u(v,"stroke-width","1px"),u(v,"stroke","black"),u(m,"transform",g="translate("+e[3].x+",120)"),u(m,"d","M -148 0 l6 -6 l0 12 z"),u(m,"stroke","none"),u(m,"fill","black"),u(k,"transform",D="translate("+e[3].x+",120)"),u(k,"x","-150"),u(k,"y","20"),u(k,"text-anchor","middle"),u(k,"fill","black"),u(k,"font-size","12px"),u(S,"transform",H="translate("+e[3].x+",120)"),u(S,"x","-150"),u(S,"y","32"),u(S,"text-anchor","middle"),u(S,"fill","black"),u(S,"font-size","12px"),u(B,"transform",F="translate("+e[3].x+",120)"),u(B,"d","M 80 0 l60 0"),u(B,"stroke-width","1px"),u(B,"stroke","black"),u(M,"transform",Y="translate("+e[3].x+",120)"),u(M,"d","M 148 0 l-6 -6 l0 12 z"),u(M,"stroke","none"),u(M,"fill","black"),u(O,"transform",q="translate("+e[3].x+",120)"),u(O,"x","150"),u(O,"y","20"),u(O,"text-anchor","middle"),u(O,"fill","black"),u(O,"font-size","12px"),u(L,"transform",U="translate("+e[3].x+",120)"),u(L,"x","150"),u(L,"y","32"),u(L,"text-anchor","middle"),u(L,"fill","black"),u(L,"font-size","12px")},m(A,T){N(A,t,T),E(t,r),N(A,a,T),E(a,s),N(A,o,T),E(o,h),N(A,d,T),E(d,b),N(A,v,T),N(A,m,T),N(A,k,T),E(k,y),N(A,S,T),E(S,R),N(A,B,T),N(A,M,T),N(A,O,T),E(O,J),N(A,L,T),E(L,W)},p(A,T){T[0]&8&&l!==(l=Math.round(A[3].datum.value).toLocaleString()+"")&&ie(r,l),T[0]&8&&n!==(n=A[3].x)&&u(t,"x",n),T[0]&8&&i!==(i=Math.round(A[3].datum.value).toLocaleString()+"")&&ie(s,i),T[0]&8&&f!==(f=A[3].x)&&u(a,"x",f),T[0]&8&&c!==(c=A[3].x)&&u(o,"x",c),T[0]&8&&_!==(_=A[3].x)&&u(d,"x",_),T[0]&8&&w!==(w="translate("+A[3].x+",120)")&&u(v,"transform",w),T[0]&8&&g!==(g="translate("+A[3].x+",120)")&&u(m,"transform",g),T[0]&8&&D!==(D="translate("+A[3].x+",120)")&&u(k,"transform",D),T[0]&8&&H!==(H="translate("+A[3].x+",120)")&&u(S,"transform",H),T[0]&8&&F!==(F="translate("+A[3].x+",120)")&&u(B,"transform",F),T[0]&8&&Y!==(Y="translate("+A[3].x+",120)")&&u(M,"transform",Y),T[0]&8&&q!==(q="translate("+A[3].x+",120)")&&u(O,"transform",q),T[0]&8&&U!==(U="translate("+A[3].x+",120)")&&u(L,"transform",U)},d(A){A&&p(t),A&&p(a),A&&p(o),A&&p(d),A&&p(v),A&&p(m),A&&p(k),A&&p(S),A&&p(B),A&&p(M),A&&p(O),A&&p(L)}}}function cf(e){let t,l,r;return{c(){t=P("circle"),this.h()},l(n){t=z(n,"circle",{"pointer-events":!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var a=I(t);a.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"r",8),u(t,"fill",l=$[e[37].datum.role]),u(t,"stroke","white"),u(t,"stroke-width","1.5px"),u(t,"opacity",r=e[12]===null?1:.2)},m(n,a){N(n,t,a)},p(n,a){a[0]&8192&&l!==(l=$[n[37].datum.role])&&u(t,"fill",l),a[0]&4096&&r!==(r=n[12]===null?1:.2)&&u(t,"opacity",r)},d(n){n&&p(t)}}}function df(e){let t,l,r,n;return{c(){t=P("rect"),this.h()},l(a){t=z(a,"rect",{"pointer-events":!0,transform:!0,x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,"stroke-width":!0,opacity:!0});var i=I(t);i.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"transform",l=["country","uk"].includes(e[37].datum.role)?"rotate(45)":null),u(t,"x",-6),u(t,"y",-6),u(t,"width",12),u(t,"height",12),u(t,"fill",r=$[e[37].datum.role]),u(t,"stroke","white"),u(t,"stroke-width","1.5px"),u(t,"opacity",n=e[12]===null?1:.2)},m(a,i){N(a,t,i)},p(a,i){i[0]&8192&&l!==(l=["country","uk"].includes(a[37].datum.role)?"rotate(45)":null)&&u(t,"transform",l),i[0]&8192&&r!==(r=$[a[37].datum.role])&&u(t,"fill",r),i[0]&4096&&n!==(n=a[12]===null?1:.2)&&u(t,"opacity",n)},d(a){a&&p(t)}}}function Rr(e){let t,l,r,n;function a(f,o){return o[0]&8192&&(l=null),o[0]&8192&&(r=null),o[0]&8192&&(n=null),l==null&&(l=f[37].x===Math.min(...f[13].map(kf))),l?pf:(r==null&&(r=f[37].x===Math.max(...f[13].map(yf))),r?gf:(n==null&&(n=f[37].y===Math.max(...f[13].filter(f[33]).map(wf))),n?mf:_f))}let i=a(e,[-1,-1]),s=i(e);return{c(){t=P("g"),s.c(),this.h()},l(f){t=z(f,"g",{class:!0});var o=I(t);s.l(o),o.forEach(p),this.h()},h(){u(t,"class","labelGroup")},m(f,o){N(f,t,o),s.m(t,null)},p(f,o){i===(i=a(f,o))&&s?s.p(f,o):(s.d(1),s=i(f),s&&(s.c(),s.m(t,null)))},d(f){f&&p(t),s.d()}}}function _f(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","0"),u(t,"y","25"),u(t,"text-anchor","middle"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","0"),u(n,"y","25"),u(n,"text-anchor","middle"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function mf(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","0"),u(t,"y","-15"),u(t,"text-anchor","middle"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","0"),u(n,"y","-15"),u(n,"text-anchor","middle"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function gf(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","10"),u(t,"y","0"),u(t,"text-anchor","start"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","10"),u(n,"y","0"),u(n,"text-anchor","start"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function pf(e){let t,l=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",r,n,a=e[17]+e[37].datum.yValue[0].value.toFixed(e[0].toFixed).toLocaleString()+e[18]+"",i,s,f;return{c(){t=P("text"),r=Q(l),n=P("text"),i=Q(a),this.h()},l(o){t=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0,"stroke-width":!0});var h=I(t);r=X(h,l),h.forEach(p),n=z(o,"text",{"pointer-events":!0,x:!0,y:!0,"text-anchor":!0,stroke:!0,fill:!0});var c=I(n);i=X(c,a),c.forEach(p),this.h()},h(){u(t,"pointer-events","none"),u(t,"x","-10"),u(t,"y","0"),u(t,"text-anchor","end"),u(t,"stroke","white"),u(t,"fill","white"),u(t,"stroke-width","3px"),u(n,"pointer-events","none"),u(n,"x","-10"),u(n,"y","0"),u(n,"text-anchor","end"),u(n,"stroke",s=$[e[37].datum.role]),u(n,"fill",f=$[e[37].datum.role])},m(o,h){N(o,t,h),E(t,r),N(o,n,h),E(n,i)},p(o,h){h[0]&8193&&l!==(l=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(r,l),h[0]&8193&&a!==(a=o[17]+o[37].datum.yValue[0].value.toFixed(o[0].toFixed).toLocaleString()+o[18]+"")&&ie(i,a),h[0]&8192&&s!==(s=$[o[37].datum.role])&&u(n,"stroke",s),h[0]&8192&&f!==(f=$[o[37].datum.role])&&u(n,"fill",f)},d(o){o&&p(t),o&&p(n)}}}function Lr(e){let t,l,r,n;function a(o,h){return h[0]&8192&&(l=null),l==null&&(l=!!["parent","country","uk"].includes(o[37].datum.role)),l?df:cf}let i=a(e,[-1,-1]),s=i(e),f=e[13].length<=3&&Rr(e);return{c(){t=P("g"),s.c(),r=ge(),f&&f.c(),this.h()},l(o){t=z(o,"g",{transform:!0});var h=I(t);s.l(h),r=ge(),f&&f.l(h),h.forEach(p),this.h()},h(){u(t,"transform",n="translate("+e[37].x+","+-e[37].y+")")},m(o,h){N(o,t,h),s.m(t,null),E(t,r),f&&f.m(t,null)},p(o,h){i===(i=a(o,h))&&s?s.p(o,h):(s.d(1),s=i(o),s&&(s.c(),s.m(t,r))),o[13].length<=3?f?f.p(o,h):(f=Rr(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null),h[0]&8192&&n!==(n="translate("+o[37].x+","+-o[37].y+")")&&u(t,"transform",n)},d(o){o&&p(t),s.d(),f&&f.d()}}}function vf(e){let t,l,r,n,a=e[0].label+"",i,s,f,o,h,c,d,b,_,v,w,m,g,k,y,D,S,R,H,B,F=e[0].unit!=null&&wr(e),M=e[1]&&Ar(e),Y=e[4],O=[];for(let A=0;A<Y.length;A+=1)O[A]=Ir(br(e,Y,A));let J=e[4],q=[];for(let A=0;A<J.length;A+=1)q[A]=Sr(vr(e,J,A));let L=e[1]&&Fr(e),W=e[13],U=[];for(let A=0;A<W.length;A+=1)U[A]=Lr(pr(e,W,A));return{c(){t=K("div"),l=K("div"),r=K("p"),n=K("span"),i=Q(a),s=te(),F&&F.c(),f=te(),o=P("svg"),h=P("rect"),c=P("g"),M&&M.c(),d=P("g");for(let A=0;A<O.length;A+=1)O[A].c();b=P("g");for(let A=0;A<q.length;A+=1)q[A].c();_=P("g"),v=P("line"),L&&L.c(),y=P("g");for(let A=0;A<U.length;A+=1)U[A].c();this.h()},l(A){t=x(A,"DIV",{class:!0});var T=I(t);l=x(T,"DIV",{class:!0});var V=I(l);r=x(V,"P",{style:!0,class:!0});var re=I(r);n=x(re,"SPAN",{style:!0});var ce=I(n);i=X(ce,a),ce.forEach(p),re.forEach(p),s=le(V),F&&F.l(V),f=le(V),o=z(V,"svg",{height:!0,width:!0,class:!0});var C=I(o);h=z(C,"rect",{width:!0,height:!0,fill:!0,opacity:!0}),I(h).forEach(p),c=z(C,"g",{class:!0,transform:!0});var ee=I(c);M&&M.l(ee),d=z(ee,"g",{class:!0});var Ie=I(d);for(let pe=0;pe<O.length;pe+=1)O[pe].l(Ie);Ie.forEach(p),b=z(ee,"g",{class:!0});var Ae=I(b);for(let pe=0;pe<q.length;pe+=1)q[pe].l(Ae);Ae.forEach(p),_=z(ee,"g",{class:!0,transform:!0});var Ce=I(_);v=z(Ce,"line",{x1:!0,x2:!0,y1:!0,y2:!0,fill:!0,stroke:!0,"stroke-width":!0}),I(v).forEach(p),L&&L.l(Ce),Ce.forEach(p),y=z(ee,"g",{class:!0,transform:!0,opacity:!0});var Pe=I(y);for(let pe=0;pe<U.length;pe+=1)U[pe].l(Pe);Pe.forEach(p),ee.forEach(p),C.forEach(p),V.forEach(p),T.forEach(p),this.h()},h(){ue(n,"font-weight","bold"),ue(r,"padding-top","10px"),u(r,"class","svelte-tveaae"),u(h,"width",e[2]),u(h,"height",e[16]),u(h,"fill","grey"),u(h,"opacity","0"),u(d,"class","backgroundElements"),u(b,"class","hoverElements"),u(v,"x1",w=e[3].x),u(v,"x2",m=e[3].x),u(v,"y1","-40"),u(v,"y2",g=e[1]?110:40),u(v,"fill","none"),u(v,"stroke","#871A5B"),u(v,"stroke-width","2px"),u(_,"class","medianLine"),u(_,"transform",k="translate(0,"+e[7]/2+")"),u(y,"class","primaryElements"),u(y,"transform",D="translate(0,"+e[7]/2+")"),u(y,"opacity",S=e[12]===null?1:.1),u(c,"class","chart-container"),u(c,"transform",R="translate("+e[9].left+","+e[9].top+")"),u(o,"height",H=e[16]+(e[1]?110:0)),u(o,"width",e[2]),u(o,"class","svelte-tveaae"),u(l,"class","svg-container"),ut(()=>e[36].call(l)),u(t,"class","rowContainer svelte-tveaae")},m(A,T){N(A,t,T),E(t,l),E(l,r),E(r,n),E(n,i),E(l,s),F&&F.m(l,null),E(l,f),E(l,o),E(o,h),E(o,c),M&&M.m(c,null),E(c,d);for(let V=0;V<O.length;V+=1)O[V]&&O[V].m(d,null);E(c,b);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(b,null);E(c,_),E(_,v),L&&L.m(_,null),E(c,y);for(let V=0;V<U.length;V+=1)U[V]&&U[V].m(y,null);B=ht(l,e[36].bind(l))},p(A,T){if(T[0]&1&&a!==(a=A[0].label+"")&&ie(i,a),A[0].unit!=null?F?F.p(A,T):(F=wr(A),F.c(),F.m(l,f)):F&&(F.d(1),F=null),T[0]&4&&u(h,"width",A[2]),A[1]?M?M.p(A,T):(M=Ar(A),M.c(),M.m(c,d)):M&&(M.d(1),M=null),T[0]&1589264){Y=A[4];let V;for(V=0;V<Y.length;V+=1){const re=br(A,Y,V);O[V]?O[V].p(re,T):(O[V]=Ir(re),O[V].c(),O[V].m(d,null))}for(;V<O.length;V+=1)O[V].d(1);O.length=Y.length}if(T[0]&446737){J=A[4];let V;for(V=0;V<J.length;V+=1){const re=vr(A,J,V);q[V]?q[V].p(re,T):(q[V]=Sr(re),q[V].c(),q[V].m(b,null))}for(;V<q.length;V+=1)q[V].d(1);q.length=J.length}if(T[0]&8&&w!==(w=A[3].x)&&u(v,"x1",w),T[0]&8&&m!==(m=A[3].x)&&u(v,"x2",m),T[0]&2&&g!==(g=A[1]?110:40)&&u(v,"y2",g),A[1]?L?L.p(A,T):(L=Fr(A),L.c(),L.m(_,null)):L&&(L.d(1),L=null),T[0]&128&&k!==(k="translate(0,"+A[7]/2+")")&&u(_,"transform",k),T[0]&405505){W=A[13];let V;for(V=0;V<W.length;V+=1){const re=pr(A,W,V);U[V]?U[V].p(re,T):(U[V]=Lr(re),U[V].c(),U[V].m(y,null))}for(;V<U.length;V+=1)U[V].d(1);U.length=W.length}T[0]&128&&D!==(D="translate(0,"+A[7]/2+")")&&u(y,"transform",D),T[0]&4096&&S!==(S=A[12]===null?1:.1)&&u(y,"opacity",S),T[0]&512&&R!==(R="translate("+A[9].left+","+A[9].top+")")&&u(c,"transform",R),T[0]&2&&H!==(H=A[16]+(A[1]?110:0))&&u(o,"height",H),T[0]&4&&u(o,"width",A[2])},i:he,o:he,d(A){A&&p(t),F&&F.d(),M&&M.d(),fe(O,A),fe(q,A),L&&L.d(),fe(U,A),B()}}}function Nr(e,t){const l=e.split(" "),r=Math.ceil(l.length/t),n=[];let a=[];return l.forEach(i=>{a.length<r?a.push(i):(n.push(a.join(" ")),a=[i])}),a.length>0&&n.push(a.join(" ")),n}function bf(e){e.sort((l,r)=>l.x-r.x);const t=Math.floor(e.length/2);return e[t]}const kf=e=>e.x,yf=e=>e.x,wf=e=>e.y;function Af(e,t,l){let r,n,a,i,s,f,o,h,c,d,b,_,v,w,m,g,k,y,D=Me("areas"),{filteredData:S,indicator:R,checkboxedRoles:H,siblingAreas:B,selectedAreas:F,areasWithData:M,plottedAreas:Y,key:O=!1}=t,J=400,q=100,L=R.prefix===null?"":R.prefix==="pounds"?"Â£":R.prefix,W=R.suffix===null?"":R.suffix;function U(C){l(12,v=parseFloat(Ke(this).attr("hoverid")))}function A(C){l(12,v=null)}const T=C=>C.x!=Math.max(..._.map(ee=>ee.x))&C.x!=Math.min(..._.map(ee=>ee.x)),V=(C,ee)=>ee.areacd===C.datum.areacd,re=(C,ee)=>ee.areacd===C.datum.areacd;function ce(){J=this.clientWidth,l(2,J)}return e.$$set=C=>{"filteredData"in C&&l(21,S=C.filteredData),"indicator"in C&&l(0,R=C.indicator),"checkboxedRoles"in C&&l(22,H=C.checkboxedRoles),"siblingAreas"in C&&l(23,B=C.siblingAreas),"selectedAreas"in C&&l(24,F=C.selectedAreas),"areasWithData"in C&&l(25,M=C.areasWithData),"plottedAreas"in C&&l(26,Y=C.plottedAreas),"key"in C&&l(1,O=C.key)},e.$$.update=()=>{e.$$.dirty[0]&516&&l(8,n=J-r.left-r.right),e.$$.dirty[0]&512&&l(7,a=q-r.top-r.bottom),e.$$.dirty[0]&27262976&&l(32,i=S.filter(C=>B.siblings.includes(C.areacd)||C.areacd===F.find(ee=>ee.role==="main").data.areacd)),e.$$.dirty[1]&2&&l(28,s=[Math.min(...i.map(C=>C.value)),Math.max(...i.map(C=>C.value))]),e.$$.dirty[0]&268435456|e.$$.dirty[1]&2&&l(30,f=i.map(C=>({...C,calcYValue:(C.value-s[0])/(s[1]-s[0])}))),e.$$.dirty[0]&69206016&&l(29,o=Y.map(C=>({...C,yValue:S.filter(ee=>ee.areacd===C.areacd)})).filter(C=>C.yValue.length>0)),e.$$.dirty[0]&1&&l(31,h=R.highEqualsGood==="F"?[1,0]:[0,1]),e.$$.dirty[0]&256|e.$$.dirty[1]&1&&l(27,c=Ve().domain(h).range([0,n])),e.$$.dirty[0]&1207959553&&l(4,d=new nt(f,5,C=>c(Math.pow(C.calcYValue,R.beeswarmPower))).calculateYPositions()),e.$$.dirty[0]&144&&l(14,b=Ve().domain([Math.min(...d.map(C=>C.y)),Math.max(...d.map(C=>C.y))]).range([0,a])),e.$$.dirty[0]&939524097&&l(13,_=new nt(o.map((C,ee)=>({...C,calcYValue:(C.yValue[0].value-s[0])/(s[1]-s[0])})),8,C=>c(Math.pow(C.calcYValue,R.beeswarmPower))).calculateYPositions()),e.$$.dirty[0]&16&&l(6,w=d.reduce((C,ee)=>C.x<ee.x?C:ee)),e.$$.dirty[0]&16&&l(5,m=d.reduce((C,ee)=>C.x>ee.x?C:ee)),e.$$.dirty[0]&65&&l(11,g=D.find(C=>C.areacd===w.datum.areacd).areanm+" has the "+(R.highEqualsGood==="F"?"higher ":"lowest ")+R.shortDesc.toLowerCase()),e.$$.dirty[0]&33&&l(10,k=D.find(C=>C.areacd===m.datum.areacd).areanm+" has the "+(R.highEqualsGood==="F"?"lowest ":"highest ")+R.shortDesc.toLowerCase()),e.$$.dirty[0]&16&&l(3,y=bf(d)),e.$$.dirty[0]&8&&console.log(y)},l(9,r={top:10,left:20,right:30,bottom:10}),l(12,v=null),[R,O,J,y,d,m,w,a,n,r,k,g,v,_,b,D,q,L,W,U,A,S,H,B,F,M,Y,c,s,o,f,h,i,T,V,re,ce]}class Df extends de{constructor(t){super(),_e(this,t,Af,vf,me,{filteredData:21,indicator:0,checkboxedRoles:22,siblingAreas:23,selectedAreas:24,areasWithData:25,plottedAreas:26,key:1},null,[-1,-1])}}function Cr(e,t,l){const r=e.slice();return r[15]=t[l],r[17]=l,r}function Ef(e){let t,l;function r(...n){return e[14](e[15],...n)}return t=new Df({props:{indicator:e[15],filteredData:e[0].filter(r),checkboxedRoles:e[3],siblingAreas:e[2],selectedAreas:e[1],areasWithData:e[5],plottedAreas:e[6]}}),{c(){ne(t.$$.fragment)},l(n){oe(t.$$.fragment,n)},m(n,a){ae(t,n,a),l=!0},p(n,a){e=n;const i={};a&16&&(i.indicator=e[15]),a&17&&(i.filteredData=e[0].filter(r)),a&8&&(i.checkboxedRoles=e[3]),a&4&&(i.siblingAreas=e[2]),a&2&&(i.selectedAreas=e[1]),a&32&&(i.areasWithData=e[5]),a&64&&(i.plottedAreas=e[6]),t.$set(i)},i(n){l||(G(t.$$.fragment,n),l=!0)},o(n){Z(t.$$.fragment,n),l=!1},d(n){se(t,n)}}}function Vr(e){let t,l,r=Ef(e);return{c(){r&&r.c(),t=ge()},l(n){r&&r.l(n),t=ge()},m(n,a){r&&r.m(n,a),N(n,t,a),l=!0},p(n,a){r.p(n,a)},i(n){l||(G(r),l=!0)},o(n){Z(r),l=!1},d(n){r&&r.d(n),n&&p(t)}}}function If(e){let t,l,r=e[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=Vr(Cr(e,r,i));const a=i=>Z(n[i],1,1,()=>{n[i]=null});return{c(){t=K("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){t=x(i,"DIV",{class:!0});var s=I(t);for(let f=0;f<n.length;f+=1)n[f].l(s);s.forEach(p),this.h()},h(){u(t,"class","beeswarmRowsContainer svelte-dbf9y5")},m(i,s){N(i,t,s);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);l=!0},p(i,[s]){if(s&127){r=i[4];let f;for(f=0;f<r.length;f+=1){const o=Cr(i,r,f);n[f]?(n[f].p(o,s),G(n[f],1)):(n[f]=Vr(o),n[f].c(),G(n[f],1),n[f].m(t,null))}for(ye(),f=r.length;f<n.length;f+=1)a(f);we()}},i(i){if(!l){for(let s=0;s<r.length;s+=1)G(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)Z(n[s]);l=!1},d(i){i&&p(t),fe(n,i)}}}function Mf(e,t,l){let r,n,a,{trimmedIndicators:i,latestData:s,primaryIndicators:f,secondaryIndicators:o,otherIndicators:h,selectedAreas:c,siblingAreas:d,checkboxedRoles:b,selectedArea:_,parentArea:v,selectedIndicatorsArray:w}=t;const m=(g,k)=>k.codeId===g.id;return e.$$set=g=>{"trimmedIndicators"in g&&l(7,i=g.trimmedIndicators),"latestData"in g&&l(0,s=g.latestData),"primaryIndicators"in g&&l(8,f=g.primaryIndicators),"secondaryIndicators"in g&&l(9,o=g.secondaryIndicators),"otherIndicators"in g&&l(10,h=g.otherIndicators),"selectedAreas"in g&&l(1,c=g.selectedAreas),"siblingAreas"in g&&l(2,d=g.siblingAreas),"checkboxedRoles"in g&&l(3,b=g.checkboxedRoles),"selectedArea"in g&&l(11,_=g.selectedArea),"parentArea"in g&&l(12,v=g.parentArea),"selectedIndicatorsArray"in g&&l(13,w=g.selectedIndicatorsArray)},e.$$.update=()=>{e.$$.dirty&1&&l(5,r=[...new Set(s.map(g=>g.areacd))]),e.$$.dirty&42&&l(6,n=[...c.map(g=>g.role==="main"||b[g.role]?{role:g.role,areacd:g.data.areacd}:null).filter(g=>g!=null),...b.custom===null||b.custom===void 0?[]:b.custom.map((g,k)=>({role:"custom"+(k+1),areacd:g.areacd}))].filter(g=>r.includes(g.areacd))),e.$$.dirty&9984&&l(4,a=w.reverse().map(g=>[...f,...o,...h].find(k=>k.label===g))),e.$$.dirty&8208&&console.log(w,a)},[s,c,d,b,a,r,n,i,f,o,h,_,v,w,m]}class Sf extends de{constructor(t){super(),_e(this,t,Mf,If,me,{trimmedIndicators:7,latestData:0,primaryIndicators:8,secondaryIndicators:9,otherIndicators:10,selectedAreas:1,siblingAreas:2,checkboxedRoles:3,selectedArea:11,parentArea:12,selectedIndicatorsArray:13})}}function Pr(e,t,l){const r=e.slice();return r[23]=t[l],r[25]=l,r}function Ff(e){let t,l,r;function n(i){e[19](i)}let a={trimmedIndicators:e[3],latestData:e[1],primaryIndicators:e[4],secondaryIndicators:e[5],otherIndicators:e[6],selectedAreas:e[2],siblingAreas:e[7],selectedArea:e[8],parentArea:e[9],selectedIndicatorsArray:[e[23].indicator.label]};return e[0]!==void 0&&(a.checkboxedRoles=e[0]),t=new Sf({props:a}),ve.push(()=>be(t,"checkboxedRoles",n)),{c(){ne(t.$$.fragment)},l(i){oe(t.$$.fragment,i)},m(i,s){ae(t,i,s),r=!0},p(i,s){const f={};s&8&&(f.trimmedIndicators=i[3]),s&2&&(f.latestData=i[1]),s&16&&(f.primaryIndicators=i[4]),s&32&&(f.secondaryIndicators=i[5]),s&64&&(f.otherIndicators=i[6]),s&4&&(f.selectedAreas=i[2]),s&128&&(f.siblingAreas=i[7]),s&256&&(f.selectedArea=i[8]),s&512&&(f.parentArea=i[9]),!l&&s&1&&(l=!0,f.checkboxedRoles=i[0],ke(()=>l=!1)),t.$set(f)},i(i){r||(G(t.$$.fragment,i),r=!0)},o(i){Z(t.$$.fragment,i),r=!1},d(i){se(t,i)}}}function Rf(e){let t,l,r,n,a,i=e[23].indicator.label+"",s,f,o,h,c=e[23].comparison+"",d,b,_,v,w=e[23].change+"",m,g,k;return{c(){t=K("div"),l=P("svg"),r=P("path"),n=te(),a=K("p"),s=Q(i),f=te(),o=K("div"),h=K("p"),d=Q(c),b=te(),_=K("div"),v=K("p"),m=Q(w),this.h()},l(y){t=x(y,"DIV",{class:!0});var D=I(t);l=z(D,"svg",{style:!0,width:!0,height:!0});var S=I(l);r=z(S,"path",{transform:!0,d:!0,stroke:!0,fill:!0,"stroke-width":!0}),I(r).forEach(p),S.forEach(p),D.forEach(p),n=le(y),a=x(y,"P",{class:!0});var R=I(a);s=X(R,i),R.forEach(p),f=le(y),o=x(y,"DIV",{class:!0});var H=I(o);h=x(H,"P",{class:!0});var B=I(h);d=X(B,c),B.forEach(p),H.forEach(p),b=le(y),_=x(y,"DIV",{class:!0});var F=I(_);v=x(F,"P",{class:!0});var M=I(v);m=X(M,w),M.forEach(p),F.forEach(p),this.h()},h(){u(r,"transform","translate(10,-5)"),u(r,"d","M5.74,14.28l-.57-.56a.5.5,0,0,1,0-.71h0l5-5-5-5a.5.5,0,0,1,0-.71h0l.57-.56a.5.5,0,0,1,.71,0h0l5.93,5.93a.5.5,0,0,1,0,.7L6.45,14.28a.5.5,0,0,1-.71,0Z"),u(r,"stroke","black"),u(r,"fill","none"),u(r,"stroke-width","2px"),ue(l,"overflow","visible"),u(l,"width","20"),u(l,"height","20"),u(t,"class","twisty"),u(a,"class","col1 svelte-zdlkz6"),u(h,"class","col2 svelte-zdlkz6"),u(o,"class",De("headlineLabel "+(["Above average","Below average"].includes(e[23].comparison)?null:e[23].comparison==="Similar to average"?"headlineLabelOkay":e[23].comparison==="Worse than average"?"headlineLabelBad":"headlineLabelGood"))+" svelte-zdlkz6"),u(v,"class","col3 svelte-zdlkz6"),u(_,"class",De("headlineLabel "+(["Increasing","Falling"].includes(e[23].change)?null:e[23].change==="Little change"?"headlineLabelOkay":e[23].change==="Worsening"?"headlineLabelBad":"headlineLabelGood"))+" svelte-zdlkz6")},m(y,D){N(y,t,D),E(t,l),E(l,r),N(y,n,D),N(y,a,D),E(a,s),N(y,f,D),N(y,o,D),E(o,h),E(h,d),N(y,b,D),N(y,_,D),E(_,v),E(v,m),g||(k=Ee(a,"click",e[14]),g=!0)},p:he,i:he,o:he,d(y){y&&p(t),y&&p(n),y&&p(a),y&&p(f),y&&p(o),y&&p(b),y&&p(_),g=!1,k()}}}function zr(e){let t,l,r,n,a,i;const s=[Rf,Ff],f=[];function o(h,c){return c&2048&&(l=null),l==null&&(l=!h[11].includes(h[23].indicator.label)),l?0:1}return r=o(e,-1),n=f[r]=s[r](e),{c(){t=K("div"),n.c(),a=te(),this.h()},l(h){t=x(h,"DIV",{class:!0});var c=I(t);n.l(c),a=le(c),c.forEach(p),this.h()},h(){u(t,"class","flexContainer svelte-zdlkz6")},m(h,c){N(h,t,c),f[r].m(t,null),E(t,a),i=!0},p(h,c){let d=r;r=o(h,c),r===d?f[r].p(h,c):(ye(),Z(f[d],1,1,()=>{f[d]=null}),we(),n=f[r],n?n.p(h,c):(n=f[r]=s[r](h),n.c()),G(n,1),n.m(t,a))},i(h){i||(G(n),i=!0)},o(h){Z(n),i=!1},d(h){h&&p(t),f[r].d()}}}function Lf(e){let t,l,r,n,a,i,s;function f(b){e[18](b)}let o={selectedAreas:e[2].filter(e[17]),areasWithData:e[10],includeSiblings:!1,selectedArea:e[8],parentArea:e[9]};e[0]!==void 0&&(o.checkboxedRoles=e[0]),l=new dt({props:o}),ve.push(()=>be(l,"checkboxedRoles",f)),a=new Vt({props:{plottedAreas:e[12]}});let h=e[13],c=[];for(let b=0;b<h.length;b+=1)c[b]=zr(Pr(e,h,b));const d=b=>Z(c[b],1,1,()=>{c[b]=null});return{c(){t=K("div"),ne(l.$$.fragment),n=te(),ne(a.$$.fragment),i=te();for(let b=0;b<c.length;b+=1)c[b].c();this.h()},l(b){t=x(b,"DIV",{class:!0});var _=I(t);oe(l.$$.fragment,_),n=le(_),oe(a.$$.fragment,_),i=le(_);for(let v=0;v<c.length;v+=1)c[v].l(_);_.forEach(p),this.h()},h(){u(t,"class","gridContainer svelte-zdlkz6")},m(b,_){N(b,t,_),ae(l,t,null),E(t,n),ae(a,t,null),E(t,i);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(t,null);s=!0},p(b,[_]){const v={};_&6&&(v.selectedAreas=b[2].filter(b[17])),_&1024&&(v.areasWithData=b[10]),_&256&&(v.selectedArea=b[8]),_&512&&(v.parentArea=b[9]),!r&&_&1&&(r=!0,v.checkboxedRoles=b[0],ke(()=>r=!1)),l.$set(v);const w={};if(_&4096&&(w.plottedAreas=b[12]),a.$set(w),_&27647){h=b[13];let m;for(m=0;m<h.length;m+=1){const g=Pr(b,h,m);c[m]?(c[m].p(g,_),G(c[m],1)):(c[m]=zr(g),c[m].c(),G(c[m],1),c[m].m(t,null))}for(ye(),m=h.length;m<c.length;m+=1)d(m);we()}},i(b){if(!s){G(l.$$.fragment,b),G(a.$$.fragment,b);for(let _=0;_<h.length;_+=1)G(c[_]);s=!0}},o(b){Z(l.$$.fragment,b),Z(a.$$.fragment,b),c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)Z(c[_]);s=!1},d(b){b&&p(t),se(l),se(a),fe(c,b)}}}function Nf(e,t,l){let r,n,{indicators:a,latestData:i,initialData:s,selectedAreas:f,trimmedIndicators:o,primaryIndicators:h,secondaryIndicators:c,otherIndicators:d,siblingAreas:b,checkboxedRoles:_,selectedArea:v,parentArea:w}=t;Me("areas");let m=[];a.forEach(R=>{Math.pow(10,R.roundingFactor);let H=i.filter(M=>M.codeId===R.id),B=f.find(M=>M.role==="main").data.areacd,F=H.filter(M=>M.areacd===B);if(F=F.length>0?F[0].value:void 0,F!=null){let M=H.filter(ce=>ce.areacd===f.find(C=>C.role==="country").data.areacd),Y=H.filter(ce=>ce.areacd===f.find(C=>C.role==="uk").data.areacd),O=H.filter(ce=>ce.areacd===f.find(C=>C.role==="parent").data.areacd),J=M.length>0?M[0]:Y.length>0?Y[0]:O.length>0?O[0]:void 0,q=J!=null?J.value:void 0,W=(R.code in s?s[R.code]:[]).filter(ce=>ce.areacd===B);W=W.length>0?W[0].value:void 0;let U=R.code in Ge?Ge[R.code]:St,T=(F===void 0||q===void 0?!0:Math.abs(F-q)/q<U[0]/100)?"Close to average":F<q?R.highEqualsGood==="F"?"Better than average":"Worse than average":R.highEqualsGood==="F"?"Worse than average":"Better than average",re=(F===void 0||W===void 0?!0:Math.abs(F-W)/W<U[0]/100)?"Little change":F<W?R.highEqualsGood==="F"?"Improving":"Worsening":R.highEqualsGood==="F"?"Worsening":"Improving";m.push({indicator:R,comparison:T,change:re})}});let g=[];function k(R){let H=Ke(this).text();g.includes(H)?l(11,g=g.filter(B=>B!=H)):l(11,g=[...g,H])}const y=R=>i.filter(H=>R.data.areacd===H.areacd).length>0&R.role!=="main";function D(R){_=R,l(0,_)}function S(R){_=R,l(0,_)}return e.$$set=R=>{"indicators"in R&&l(15,a=R.indicators),"latestData"in R&&l(1,i=R.latestData),"initialData"in R&&l(16,s=R.initialData),"selectedAreas"in R&&l(2,f=R.selectedAreas),"trimmedIndicators"in R&&l(3,o=R.trimmedIndicators),"primaryIndicators"in R&&l(4,h=R.primaryIndicators),"secondaryIndicators"in R&&l(5,c=R.secondaryIndicators),"otherIndicators"in R&&l(6,d=R.otherIndicators),"siblingAreas"in R&&l(7,b=R.siblingAreas),"checkboxedRoles"in R&&l(0,_=R.checkboxedRoles),"selectedArea"in R&&l(8,v=R.selectedArea),"parentArea"in R&&l(9,w=R.parentArea)},e.$$.update=()=>{e.$$.dirty&2&&l(10,r=[...new Set(i.map(R=>R.areacd))]),e.$$.dirty&1029&&l(12,n=[...f.map(R=>R.role==="main"||_[R.role]?{role:R.role,areacd:R.data.areacd}:null).filter(R=>R!=null),..._.custom===null||_.custom===void 0?[]:_.custom.map((R,H)=>({role:"custom"+(H+1),areacd:R.areacd}))].filter(R=>r.includes(R.areacd)))},[_,i,f,o,h,c,d,b,v,w,r,g,n,m,k,a,s,y,D,S]}class Cf extends de{constructor(t){super(),_e(this,t,Nf,Lf,me,{indicators:15,latestData:1,initialData:16,selectedAreas:2,trimmedIndicators:3,primaryIndicators:4,secondaryIndicators:5,otherIndicators:6,siblingAreas:7,checkboxedRoles:0,selectedArea:8,parentArea:9})}}function Tr(e,t,l){const r=e.slice();return r[23]=t[l],r}function Br(e){let t,l,r;function n(...s){return e[21](e[23],...s)}function a(s){e[22](s)}let i={indicator:e[23],latestData:e[1].filter(n),otherData:e[23].code in e[4]?e[4][e[23].code]:[],initialData:e[23].code in e[5]?e[5][e[23].code]:[],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[12],parentArea:e[13]};return e[2]!==void 0&&(i.checkboxedRoles=e[2]),t=new of({props:i}),ve.push(()=>be(t,"checkboxedRoles",a)),{c(){ne(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,f){ae(t,s,f),r=!0},p(s,f){e=s;const o={};f&2&&(o.latestData=e[1].filter(n)),f&16&&(o.otherData=e[23].code in e[4]?e[4][e[23].code]:[]),f&32&&(o.initialData=e[23].code in e[5]?e[5][e[23].code]:[]),f&8&&(o.selectedAreas=e[3]),f&64&&(o.siblingAreas=e[6]),!l&&f&4&&(l=!0,o.checkboxedRoles=e[2],ke(()=>l=!1)),t.$set(o)},i(s){r||(G(t.$$.fragment,s),r=!0)},o(s){Z(t.$$.fragment,s),r=!1},d(s){se(t,s)}}}function Vf(e){let t,l,r,n,a,i=(e[0]in e[14]?e[14][e[0]]:"")+"",s,f,o,h,c,d,b,_,v,w,m,g,k,y;function D(L){e[17](L)}let S={indicators:[...e[9],...e[10],...e[11]],latestData:e[1],initialData:e[5],selectedAreas:e[3]};e[7]!==void 0&&(S.selectedIndicatorsArray=e[7]),f=new hf({props:S}),ve.push(()=>be(f,"selectedIndicatorsArray",D));function R(L){e[18](L)}let H={trimmedIndicators:e[8],latestData:e[1],primaryIndicators:e[9],secondaryIndicators:e[10],otherIndicators:e[11],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[12],parentArea:e[13],selectedIndicatorsArray:e[7]};e[2]!==void 0&&(H.checkboxedRoles=e[2]),c=new _o({props:H}),ve.push(()=>be(c,"checkboxedRoles",R));function B(L){e[19](L)}let F={indicators:[...e[9],...e[10],...e[11]],latestData:e[1],initialData:e[5],selectedAreas:e[3],trimmedIndicators:e[8],primaryIndicators:e[9],secondaryIndicators:e[10],otherIndicators:e[11],siblingAreas:e[6],selectedArea:e[12],parentArea:e[13]};e[2]!==void 0&&(F.checkboxedRoles=e[2]),_=new Cf({props:F}),ve.push(()=>be(_,"checkboxedRoles",B));function M(L){e[20](L)}let Y={trimmedIndicators:e[8],latestData:e[1],primaryIndicators:e[9],secondaryIndicators:e[10],otherIndicators:e[11],selectedAreas:e[3],siblingAreas:e[6],selectedArea:e[12],parentArea:e[13]};e[2]!==void 0&&(Y.checkboxedRoles=e[2]),m=new fo({props:Y}),ve.push(()=>be(m,"checkboxedRoles",M));let O=e[9],J=[];for(let L=0;L<O.length;L+=1)J[L]=Br(Tr(e,O,L));const q=L=>Z(J[L],1,1,()=>{J[L]=null});return{c(){t=K("section"),l=K("h1"),r=Q(e[0]),n=te(),a=K("p"),s=te(),ne(f.$$.fragment),h=te(),ne(c.$$.fragment),b=te(),ne(_.$$.fragment),w=te(),ne(m.$$.fragment),k=te();for(let L=0;L<J.length;L+=1)J[L].c();this.h()},l(L){t=x(L,"SECTION",{title:!0,class:!0});var W=I(t);l=x(W,"H1",{});var U=I(l);r=X(U,e[0]),U.forEach(p),n=le(W),a=x(W,"P",{});var A=I(a);A.forEach(p),s=le(W),oe(f.$$.fragment,W),h=le(W),oe(c.$$.fragment,W),b=le(W),oe(_.$$.fragment,W),w=le(W),oe(m.$$.fragment,W),k=le(W);for(let T=0;T<J.length;T+=1)J[T].l(W);W.forEach(p),this.h()},h(){u(t,"title",e[0]),u(t,"class","svelte-v10b0q")},m(L,W){N(L,t,W),E(t,l),E(l,r),E(t,n),E(t,a),a.innerHTML=i,E(t,s),ae(f,t,null),E(t,h),ae(c,t,null),E(t,b),ae(_,t,null),E(t,w),ae(m,t,null),E(t,k);for(let U=0;U<J.length;U+=1)J[U]&&J[U].m(t,null);y=!0},p(L,[W]){(!y||W&1)&&ie(r,L[0]),(!y||W&1)&&i!==(i=(L[0]in L[14]?L[14][L[0]]:"")+"")&&(a.innerHTML=i);const U={};W&2&&(U.latestData=L[1]),W&32&&(U.initialData=L[5]),W&8&&(U.selectedAreas=L[3]),!o&&W&128&&(o=!0,U.selectedIndicatorsArray=L[7],ke(()=>o=!1)),f.$set(U);const A={};W&2&&(A.latestData=L[1]),W&8&&(A.selectedAreas=L[3]),W&64&&(A.siblingAreas=L[6]),W&128&&(A.selectedIndicatorsArray=L[7]),!d&&W&4&&(d=!0,A.checkboxedRoles=L[2],ke(()=>d=!1)),c.$set(A);const T={};W&2&&(T.latestData=L[1]),W&32&&(T.initialData=L[5]),W&8&&(T.selectedAreas=L[3]),W&64&&(T.siblingAreas=L[6]),!v&&W&4&&(v=!0,T.checkboxedRoles=L[2],ke(()=>v=!1)),_.$set(T);const V={};if(W&2&&(V.latestData=L[1]),W&8&&(V.selectedAreas=L[3]),W&64&&(V.siblingAreas=L[6]),!g&&W&4&&(g=!0,V.checkboxedRoles=L[2],ke(()=>g=!1)),m.$set(V),W&12926){O=L[9];let re;for(re=0;re<O.length;re+=1){const ce=Tr(L,O,re);J[re]?(J[re].p(ce,W),G(J[re],1)):(J[re]=Br(ce),J[re].c(),G(J[re],1),J[re].m(t,null))}for(ye(),re=O.length;re<J.length;re+=1)q(re);we()}(!y||W&1)&&u(t,"title",L[0])},i(L){if(!y){G(f.$$.fragment,L),G(c.$$.fragment,L),G(_.$$.fragment,L),G(m.$$.fragment,L);for(let W=0;W<O.length;W+=1)G(J[W]);y=!0}},o(L){Z(f.$$.fragment,L),Z(c.$$.fragment,L),Z(_.$$.fragment,L),Z(m.$$.fragment,L),J=J.filter(Boolean);for(let W=0;W<J.length;W+=1)Z(J[W]);y=!1},d(L){L&&p(t),se(f),se(c),se(_),se(m),fe(J,L)}}}function Pf(e,t,l){let r,{sectionName:n,sectionIndicators:a,indicators:i,selectedAreas:s,latestData:f,otherData:o,initialData:h,checkboxedRoles:c,siblingAreas:d}=t;n=n[0].toUpperCase()+n.substring(1),f=f.filter(F=>a.map(M=>M.id).includes(F.codeId));const b=i.filter(F=>a.map(M=>M.id).includes(F.id)),_=b.filter(F=>a.filter(M=>M.priority==="p").map(M=>M.id).includes(F.id)),v=b.filter(F=>a.filter(M=>M.priority==="s").map(M=>M.id).includes(F.id)),w=b.filter(F=>![..._.map(M=>M.id),...v.map(M=>M.id)].includes(F.id));let m=s.find(F=>F.role==="main").data.areanm,g=s.find(F=>F.role==="parent").data.areanm,k={Demographics:"[Dummy text] "+m+" is a rural area in "+g+". It is a popular retirement destination.",Economy:"[Dummy text] "+m+" has above average employment. Its primary industry is retail.",Health:"[Dummy text] "+m+" is an ageing area with above average level of deprivation.",Connectivity:"[Dummy text] "+m+" is a rural area in "+g+".",Skills:"[Dummy text] "+m+" has an above average level of deprivation.",Education:"[Dummy text] "+m+" has a low student population. The area has an above average number of people who do not hold qualifications.",Wellbeing:"[Dummy text] "+m+" has an above average level of deprivation and above average employment."};function y(F){r=F,l(7,r)}function D(F){c=F,l(2,c)}function S(F){c=F,l(2,c)}function R(F){c=F,l(2,c)}const H=(F,M)=>M.codeId===F.id;function B(F){c=F,l(2,c)}return e.$$set=F=>{"sectionName"in F&&l(0,n=F.sectionName),"sectionIndicators"in F&&l(15,a=F.sectionIndicators),"indicators"in F&&l(16,i=F.indicators),"selectedAreas"in F&&l(3,s=F.selectedAreas),"latestData"in F&&l(1,f=F.latestData),"otherData"in F&&l(4,o=F.otherData),"initialData"in F&&l(5,h=F.initialData),"checkboxedRoles"in F&&l(2,c=F.checkboxedRoles),"siblingAreas"in F&&l(6,d=F.siblingAreas)},e.$$.update=()=>{e.$$.dirty&128&&console.log(r)},l(7,r=[]),[n,f,c,s,o,h,d,r,b,_,v,w,m,g,k,a,i,y,D,S,R,H,B]}class zf extends de{constructor(t){super(),_e(this,t,Pf,Vf,me,{sectionName:0,sectionIndicators:15,indicators:16,selectedAreas:3,latestData:1,otherData:4,initialData:5,checkboxedRoles:2,siblingAreas:6})}}function Or(e,t,l){const r=e.slice();return r[18]=t[l],r}function Tf(e){let t=e[5].find(Yf).data.areanm+"",l;return{c(){l=Q(t)},l(r){l=X(r,t)},m(r,n){N(r,l,n)},p:he,d(r){r&&p(l)}}}function Bf(e){let t,l=e[5].find(Gf).data.areanm+"",r;return{c(){t=Q("Get localised data, insights and trends for "),r=Q(l)},l(n){t=X(n,"Get localised data, insights and trends for "),r=X(n,l)},m(n,a){N(n,t,a),N(n,r,a)},p:he,d(n){n&&p(t),n&&p(r)}}}function Of(e){let t,l,r,n;return t=new Rn({props:{$$slots:{default:[Tf]},$$scope:{ctx:e}}}),r=new Ln({props:{$$slots:{default:[Bf]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),l=te(),ne(r.$$.fragment)},l(a){oe(t.$$.fragment,a),l=le(a),oe(r.$$.fragment,a)},m(a,i){ae(t,a,i),N(a,l,i),ae(r,a,i),n=!0},p(a,i){const s={};i&2097152&&(s.$$scope={dirty:i,ctx:a}),t.$set(s);const f={};i&2097152&&(f.$$scope={dirty:i,ctx:a}),r.$set(f)},i(a){n||(G(t.$$.fragment,a),G(r.$$.fragment,a),n=!0)},o(a){Z(t.$$.fragment,a),Z(r.$$.fragment,a),n=!1},d(a){se(t,a),a&&p(l),se(r,a)}}}function Wr(e){let t,l,r;function n(...s){return e[8](e[18],...s)}function a(s){e[9](s)}let i={sectionName:e[18],sectionIndicators:e[0].configData.areaSections.filter(n),indicators:e[4],selectedAreas:e[5],latestData:e[3],initialData:e[0].preloadedData.initialData,otherData:e[0].preloadedData.otherData,siblingAreas:e[1]};return e[2]!==void 0&&(i.checkboxedRoles=e[2]),t=new zf({props:i}),ve.push(()=>be(t,"checkboxedRoles",a)),{c(){ne(t.$$.fragment)},l(s){oe(t.$$.fragment,s)},m(s,f){ae(t,s,f),r=!0},p(s,f){e=s;const o={};f&1&&(o.sectionName=e[18]),f&1&&(o.sectionIndicators=e[0].configData.areaSections.filter(n)),f&1&&(o.initialData=e[0].preloadedData.initialData),f&1&&(o.otherData=e[0].preloadedData.otherData),f&2&&(o.siblingAreas=e[1]),!l&&f&4&&(l=!0,o.checkboxedRoles=e[2],ke(()=>l=!1)),t.$set(o)},i(s){r||(G(t.$$.fragment,s),r=!0)},o(s){Z(t.$$.fragment,s),r=!1},d(s){se(t,s)}}}function Wf(e){let t;return{c(){t=Q("Find parent, child and neighbouring areas")},l(l){t=X(l,"Find parent, child and neighbouring areas")},m(l,r){N(l,t,r)},d(l){l&&p(t)}}}function Hf(e){let t,l,r,n,a,i,s,f,o,h,c,d,b;t=new ea({props:{areaKeyIndicators:e[0].configData.areaKeyIndicators,latestData:e[3].filter(e[6]),initialData:e[0].preloadedData.initialData,trimmedIndicators:e[4].filter(e[7]),selectedAreas:e[5]}});let _=[...new Set(e[0].configData.areaSections.map(Hr))],v=[];for(let m=0;m<_.length;m+=1)v[m]=Wr(Or(e,_,m));const w=m=>Z(v[m],1,1,()=>{v[m]=null});return a=new Yn({props:{$$slots:{default:[Wf]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),l=te();for(let m=0;m<v.length;m+=1)v[m].c();r=te(),n=K("section"),ne(a.$$.fragment),i=te(),s=K("section"),f=K("h2"),o=Q("Get the data"),h=te(),c=K("p"),d=Q("Here, you can find information and links to the data."),this.h()},l(m){oe(t.$$.fragment,m),l=le(m);for(let S=0;S<v.length;S+=1)v[S].l(m);r=le(m),n=x(m,"SECTION",{title:!0,class:!0});var g=I(n);oe(a.$$.fragment,g),g.forEach(p),i=le(m),s=x(m,"SECTION",{title:!0,class:!0});var k=I(s);f=x(k,"H2",{class:!0});var y=I(f);o=X(y,"Get the data"),y.forEach(p),h=le(k),c=x(k,"P",{});var D=I(c);d=X(D,"Here, you can find information and links to the data."),D.forEach(p),k.forEach(p),this.h()},h(){u(n,"title","Related areas"),u(n,"class","svelte-r2srs5"),u(f,"class","ons-u-mt-xl"),u(s,"title","Get the data"),u(s,"class","svelte-r2srs5")},m(m,g){ae(t,m,g),N(m,l,g);for(let k=0;k<v.length;k+=1)v[k]&&v[k].m(m,g);N(m,r,g),N(m,n,g),ae(a,n,null),N(m,i,g),N(m,s,g),E(s,f),E(f,o),E(s,h),E(s,c),E(c,d),b=!0},p(m,g){const k={};if(g&1&&(k.areaKeyIndicators=m[0].configData.areaKeyIndicators),g&1&&(k.latestData=m[3].filter(m[6])),g&1&&(k.initialData=m[0].preloadedData.initialData),g&1&&(k.trimmedIndicators=m[4].filter(m[7])),t.$set(k),g&63){_=[...new Set(m[0].configData.areaSections.map(Hr))];let D;for(D=0;D<_.length;D+=1){const S=Or(m,_,D);v[D]?(v[D].p(S,g),G(v[D],1)):(v[D]=Wr(S),v[D].c(),G(v[D],1),v[D].m(r.parentNode,r))}for(ye(),D=_.length;D<v.length;D+=1)w(D);we()}const y={};g&2097152&&(y.$$scope={dirty:g,ctx:m}),a.$set(y)},i(m){if(!b){G(t.$$.fragment,m);for(let g=0;g<_.length;g+=1)G(v[g]);G(a.$$.fragment,m),b=!0}},o(m){Z(t.$$.fragment,m),v=v.filter(Boolean);for(let g=0;g<v.length;g+=1)Z(v[g]);Z(a.$$.fragment,m),b=!1},d(m){se(t,m),m&&p(l),fe(v,m),m&&p(r),m&&p(n),se(a),m&&p(i),m&&p(s)}}}function qf(e){let t,l,r,n;return t=new Fn({props:{breadcrumb:[{label:"Home",url:"/"},{label:"Explore subnational statistics",url:`${Oe}/`},{label:"Find a local area",url:`${Oe}/areas`},{label:e[5].find(Kf).data.areanm}],$$slots:{default:[Of]},$$scope:{ctx:e}}}),r=new Cn({props:{contentsLabel:"Explore this area",$$slots:{default:[Hf]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),l=te(),ne(r.$$.fragment)},l(a){oe(t.$$.fragment,a),l=le(a),oe(r.$$.fragment,a)},m(a,i){ae(t,a,i),N(a,l,i),ae(r,a,i),n=!0},p(a,[i]){const s={};i&2097152&&(s.$$scope={dirty:i,ctx:a}),t.$set(s);const f={};i&2097159&&(f.$$scope={dirty:i,ctx:a}),r.$set(f)},i(a){n||(G(t.$$.fragment,a),G(r.$$.fragment,a),n=!0)},o(a){Z(t.$$.fragment,a),Z(r.$$.fragment,a),n=!1},d(a){se(t,a),a&&p(l),se(r,a)}}}const Yf=e=>e.role==="main",Gf=e=>e.role==="main",Kf=e=>e.role==="main",Hr=e=>e.section;function xf(e,t,l){let r,{data:n}=t;console.log(n);let a=Me("latestData"),i=Me("areas"),s=Me("areasParentsLookup"),f=Me("areasGeogLevel"),o=Me("indicators"),h=Me("areasGeogInfo"),c=s.find(D=>D.areacd===n.areaCode),d=[];d.push({data:i.find(D=>D.areacd===n.areaCode),role:"main"}),d.push({data:i.find(D=>D.areacd===c.parentcd),role:"parent"}),c.countrycd!==null&c.parentcd!==c.countrycd&&d.push({data:i.find(D=>D.areacd===c.countrycd),role:"country"}),c.parentcd!=="K02000001"&&d.push({data:i.find(D=>D.areacd==="K02000001"),role:"uk"});let b=f.find(D=>D.areacd===n.areaCode).level,_=f.filter(D=>["uk","country"].includes(b)?D.level===b:b==="region"?["region","country"].includes(D.level):b==="both"?["both","lower"].includes(D.level):["both",b].includes(D.level)),v=h.find(D=>D.areacd===n.areaCode).headline,w={};w.neighbours=s.filter(D=>D.areacd!=n.areaCode&D.parentcd===c.parentcd&_.map(S=>S.areacd).includes(D.areacd)).map(D=>D.areacd),w.similar=v===null?[]:h.filter(D=>D.areacd!=n.areaCode&D.headline===v&_.map(S=>S.areacd).includes(D.areacd)).map(D=>D.areacd),w.siblings=s.filter(D=>D.areacd!=n.areaCode&_.map(S=>S.areacd).includes(D.areacd)).map(D=>D.areacd);const m=D=>n.configData.areaKeyIndicators.map(S=>S.id).includes(D.codeId),g=D=>n.configData.areaKeyIndicators.map(S=>S.id).includes(D.id),k=(D,S)=>S.section===D;function y(D){r=D,l(2,r)}return e.$$set=D=>{"data"in D&&l(0,n=D.data)},l(2,r={parent:!0,country:!0,uk:!0,neighbour:!1,cluster:!1,custom:null}),console.log(d),[n,w,r,a,o,d,m,g,k,y]}class lu extends de{constructor(t){super(),_e(this,t,xf,qf,me,{data:0})}}export{lu as component};
