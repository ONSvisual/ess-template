import{S as _e,i as be,s as pe,k as R,l as V,m as J,h as b,p as q,H as B,q as k,b as O,g as S,w as Se,d as C,f as Ce,W as He,x as v,X as W,z as y,A as F,B as E,Y as z,C as K,Z as le,T as Qe,a as X,c as G,e as ue,Q as we,r as Ie,u as ke,D as Oe,n as Xe}from"./index.9d99f0a2.js";import{b as ne}from"./paths.5cfec888.js";import{S as Ge,T as Je,a as Ue,g as xe}from"./Spacer.92ed8ebd.js";import{g as $e,f as et,h as tt,j as lt}from"./config.1134aefb.js";import{C as nt,a as at}from"./Cards.8fe82919.js";import{C as it}from"./Card.e59e5ed7.js";function ce(t){let e,i,n,a,r,f,c,s;function o(u){t[38](u)}function g(u){t[39](u)}function d(u){t[40](u)}function w(u){t[41](u)}function M(u){t[42](u)}function L(u){t[43](u)}let I={id:t[3],container:t[5],items:t[4],placeholder:t[2],isMulti:t[9],isSearchable:t[6],groupBy:t[22],loadOptions:t[12],getSelectionLabel:t[13],getOptionLabel:t[21],itemFilter:t[19],ariaValues:t[25],ariaListOpen:t[26],ariaFocused:t[27],noOptionsMessage:t[20],indicatorSvg:t[23],containerStyles:t[24],optionIdentifier:t[8],showIndicator:!0,isClearable:t[7]?!t[9]:!1};return t[16]!==void 0&&(I.isFocused=t[16]),t[0]!==void 0&&(I.value=t[0]),t[17]!==void 0&&(I.listOpen=t[17]),t[1]!==void 0&&(I.filterText=t[1]),t[14]!==void 0&&(I.isWaiting=t[14]),t[18]!==void 0&&(I.handleClear=t[18]),e=new Ge({props:I}),v.push(()=>W(e,"isFocused",o)),v.push(()=>W(e,"value",g)),v.push(()=>W(e,"listOpen",d)),v.push(()=>W(e,"filterText",w)),v.push(()=>W(e,"isWaiting",M)),v.push(()=>W(e,"handleClear",L)),e.$on("select",t[28]),e.$on("clear",t[44]),e.$on("loaded",t[45]),e.$on("error",t[46]),{c(){y(e.$$.fragment)},l(u){F(e.$$.fragment,u)},m(u,h){E(e,u,h),s=!0},p(u,h){const m={};h[0]&8&&(m.id=u[3]),h[0]&32&&(m.container=u[5]),h[0]&16&&(m.items=u[4]),h[0]&4&&(m.placeholder=u[2]),h[0]&512&&(m.isMulti=u[9]),h[0]&64&&(m.isSearchable=u[6]),h[0]&8192&&(m.getSelectionLabel=u[13]),h[0]&524288&&(m.itemFilter=u[19]),h[0]&1048576&&(m.noOptionsMessage=u[20]),h[0]&256&&(m.optionIdentifier=u[8]),h[0]&640&&(m.isClearable=u[7]?!u[9]:!1),!i&&h[0]&65536&&(i=!0,m.isFocused=u[16],z(()=>i=!1)),!n&&h[0]&1&&(n=!0,m.value=u[0],z(()=>n=!1)),!a&&h[0]&131072&&(a=!0,m.listOpen=u[17],z(()=>a=!1)),!r&&h[0]&2&&(r=!0,m.filterText=u[1],z(()=>r=!1)),!f&&h[0]&16384&&(f=!0,m.isWaiting=u[14],z(()=>f=!1)),!c&&h[0]&262144&&(c=!0,m.handleClear=u[18],z(()=>c=!1)),e.$set(m)},i(u){s||(S(e.$$.fragment,u),s=!0)},o(u){C(e.$$.fragment,u),s=!1},d(u){K(e,u)}}}function st(t){let e,i,n=t[4]&&ce(t);return{c(){e=R("div"),n&&n.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var r=J(e);n&&n.l(r),r.forEach(b),this.h()},h(){q(e,"class","selectbox svelte-1e3l8fq"),B(e,"multi-selected",t[0]&&t[9]),B(e,"focused",t[16]),B(e,"selected",t[0]&&!t[17]&&!t[9]),k(e,"--firstItem",t[10][0%t[10].length]),k(e,"--secondItem",t[10][1%t[10].length]),k(e,"--thirdItem",t[10][2%t[10].length]),k(e,"--fourthItem",t[10][3%t[10].length]),k(e,"--borderColor",t[11])},m(a,r){O(a,e,r),n&&n.m(e,null),t[47](e),i=!0},p(a,r){a[4]?n?(n.p(a,r),r[0]&16&&S(n,1)):(n=ce(a),n.c(),S(n,1),n.m(e,null)):n&&(Se(),C(n,1,1,()=>{n=null}),Ce()),(!i||r[0]&513)&&B(e,"multi-selected",a[0]&&a[9]),(!i||r[0]&65536)&&B(e,"focused",a[16]),(!i||r[0]&131585)&&B(e,"selected",a[0]&&!a[17]&&!a[9]),r[0]&1024&&k(e,"--firstItem",a[10][0%a[10].length]),r[0]&1024&&k(e,"--secondItem",a[10][1%a[10].length]),r[0]&1024&&k(e,"--thirdItem",a[10][2%a[10].length]),r[0]&1024&&k(e,"--fourthItem",a[10][3%a[10].length]),r[0]&2048&&k(e,"--borderColor",a[11])},i(a){i||(S(n),i=!0)},o(a){C(n),i=!1},d(a){a&&b(e),n&&n.d(),t[47](null)}}}function rt(t,e,i){let n,a;const r='<svg viewBox="0 0 20 20" fill-rule="evenodd"><path d="M0,8a8,8,0,1,0,16,0a8,8,0,1,0,-16,0ZM3,8a5,5,0,1,0,10,0a5,5,0,1,0,-10,0Z"/><path d="M18,20L20,18L14,12L12,14Z"/></svg>',f='<svg viewBox="0 0 20 20"><path d="M1,6L19,6L10,15Z"/></svg>',c=He();let{id:s=""}=e,{items:o}=e,{container:g=void 0}=e,{mode:d="default"}=e,{placeholder:w="Type an area name or postcode"}=e,{value:M=null}=e,{filterText:L=""}=e,{isSearchable:I=!0}=e,{isClearable:u=!0}=e,{autoClear:h=!1}=e,{idKey:m="areacd"}=e,{labelKey:j="areanm"}=e,{groupKey:A=null}=e,{groupItems:P=!1}=e,{fontSize:N="1em"}=e,{height:U=42}=e,{isMulti:ae=!1}=e,{maxSelected:x=4}=e,{colors:ie=["#206095","#a8bd3a","#871a5b","#27a0cc"]}=e,{darkMode:$=!1}=e,{borderColor:se=$?"white":"#206095"}=e;async function Le(l){return l.length>2&&/\d/.test(l)?(await(await fetch(`https://api.postcodes.io/postcodes/${l}/autocomplete`)).json()).result.map(D=>({areacd:D,areanm:D,group:"",postcode:!0})):l.length>2?o.filter(_=>_.areanm.match(new RegExp(`\\b${l}`,"i"))):[]}async function Me(l){if(l.detail.postcode){let p=await(await fetch(`https://api.postcodes.io/postcodes/${l.detail.areacd}`)).json();if(p.result){let D=[];$e.filter(T=>T.pcio).forEach(T=>{let Q=p.result[T.pcio];if(Q&&!Q.includes("unparished")){let Ye=p.result.codes[T.pcio]?p.result.codes[T.pcio]:et[Q];D.push({areacd:Ye,areanm:Q,typenm:T.label.split("/")[0]})}});let fe=o.find(T=>T.areacd==p.result.codes.admin_district);fe?(i(2,w="Type a place name or postcode"),c("select",{type:"postcode",areacd:fe.areacd,postcd:p.result.postcode,areas:D})):i(2,w="Postcode must be in England or Wales")}}else{let _=l.detail[m],p=l.detail[j];c("select",{type:"area",areacd:_,areanm:p}),i(2,w="Type a place name or postcode")}}const re=A&&!P?l=>`${l[j]} <span class="group">${l[A]}</span>`:l=>l[j];let{getSelectionLabel:oe=l=>l?re(l):null}=e;const Te=P&&A?l=>l[A]:void 0,ve=d=="search"?r:f,ye=`--inputFontSize: ${N}; --groupTitleFontSize: ${N}; --height: ${U}px; font-size: ${N};`,Fe=l=>`${l}, selected.`,Ee=(l,_)=>`You are currently focused on ${l}. There are ${_} results available.`,Ke=()=>"Select is focused, type to refine list, press down to open the menu.";let Y,ee,te,H,Z;const Ae=l=>new Promise(_=>setTimeout(_,l));async function Be(l){if(Me(l),h)Z();else if(u){await Ae(10);let _=Y.getElementsByClassName("clearSelect")[0];_&&(_.tabIndex=0,_.onkeypress=p=>{p.key=="Enter"&&Z()},_.removeAttribute("aria-hidden"),_.setAttribute("aria-label","Clear selection"))}}function We(l){ee=l,i(16,ee)}function ze(l){M=l,i(0,M)}function je(l){te=l,i(17,te)}function Ne(l){L=l,i(1,L)}function Ze(l){H=l,i(14,H)}function De(l){Z=l,i(18,Z)}function Re(l){le.call(this,t,l)}function Ve(l){le.call(this,t,l)}function qe(l){le.call(this,t,l)}function Pe(l){v[l?"unshift":"push"](()=>{Y=l,i(15,Y)})}return t.$$set=l=>{"id"in l&&i(3,s=l.id),"items"in l&&i(4,o=l.items),"container"in l&&i(5,g=l.container),"mode"in l&&i(29,d=l.mode),"placeholder"in l&&i(2,w=l.placeholder),"value"in l&&i(0,M=l.value),"filterText"in l&&i(1,L=l.filterText),"isSearchable"in l&&i(6,I=l.isSearchable),"isClearable"in l&&i(7,u=l.isClearable),"autoClear"in l&&i(30,h=l.autoClear),"idKey"in l&&i(8,m=l.idKey),"labelKey"in l&&i(31,j=l.labelKey),"groupKey"in l&&i(32,A=l.groupKey),"groupItems"in l&&i(33,P=l.groupItems),"fontSize"in l&&i(34,N=l.fontSize),"height"in l&&i(35,U=l.height),"isMulti"in l&&i(9,ae=l.isMulti),"maxSelected"in l&&i(36,x=l.maxSelected),"colors"in l&&i(10,ie=l.colors),"darkMode"in l&&i(37,$=l.darkMode),"borderColor"in l&&i(11,se=l.borderColor),"getSelectionLabel"in l&&i(13,oe=l.getSelectionLabel)},t.$$.update=()=>{t.$$.dirty[0]&536887298&&i(20,n=H?"Loading...":d=="search"&&L.length<3?"Enter 3 or more characters for suggestions":`No results match ${L}`),t.$$.dirty[0]&536870915|t.$$.dirty[1]&32&&i(19,a=Array.isArray(M)&&M.length>=x||d=="search"&&L.length<3?(l,_,p)=>!1:(l,_,p)=>`${l}`.split("<")[0].match(new RegExp(`\\b${_}`,"i")))},[M,L,w,s,o,g,I,u,m,ae,ie,se,Le,oe,H,Y,ee,te,Z,a,n,re,Te,ve,ye,Fe,Ee,Ke,Be,d,h,j,A,P,N,U,x,$,We,ze,je,Ne,Ze,De,Re,Ve,qe,Pe]}class ot extends _e{constructor(e){super(),be(this,e,rt,st,pe,{id:3,items:4,container:5,mode:29,placeholder:2,value:0,filterText:1,isSearchable:6,isClearable:7,autoClear:30,idKey:8,labelKey:31,groupKey:32,groupItems:33,fontSize:34,height:35,isMulti:9,maxSelected:36,colors:10,darkMode:37,borderColor:11,loadOptions:12,getSelectionLabel:13},null,[-1,-1])}get loadOptions(){return this.$$.ctx[12]}}function de(t,e,i){const n=t.slice();return n[5]=e[i],n}function he(t,e,i){const n=t.slice();return n[8]=e[i],n}function me(t){let e,i=t[8].areanm+"",n,a;return{c(){e=R("a"),n=Ie(i),a=R("br"),this.h()},l(r){e=V(r,"A",{href:!0});var f=J(e);n=ke(f,i),f.forEach(b),a=V(r,"BR",{}),this.h()},h(){q(e,"href",ne+"/areas/"+t[8].areacd)},m(r,f){O(r,e,f),Oe(e,n),O(r,a,f)},p:Xe,d(r){r&&b(e),r&&b(a)}}}function ft(t){let e,i=t[5].name+"",n,a,r;function f(...o){return t[4](t[5],...o)}let c=t[1].filter(f),s=[];for(let o=0;o<c.length;o+=1)s[o]=me(he(t,c,o));return{c(){e=R("a"),n=Ie(i),a=X();for(let o=0;o<s.length;o+=1)s[o].c();r=X(),this.h()},l(o){e=V(o,"A",{href:!0,class:!0});var g=J(e);n=ke(g,i),g.forEach(b),a=G(o);for(let d=0;d<s.length;d+=1)s[d].l(o);r=G(o),this.h()},h(){q(e,"href",ne+"/areas/"+t[5].code),q(e,"class","parent-link")},m(o,g){O(o,e,g),Oe(e,n),O(o,a,g);for(let d=0;d<s.length;d+=1)s[d].m(o,g);O(o,r,g)},p(o,g){if(t=o,g&6){c=t[1].filter(f);let d;for(d=0;d<c.length;d+=1){const w=he(t,c,d);s[d]?s[d].p(w,g):(s[d]=me(w),s[d].c(),s[d].m(r.parentNode,r))}for(;d<s.length;d+=1)s[d].d(1);s.length=c.length}},d(o){o&&b(e),o&&b(a),we(s,o),o&&b(r)}}}function ge(t){let e,i;return e=new it({props:{blank:!0,$$slots:{default:[ft]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,a){E(e,n,a),i=!0},p(n,a){const r={};a&2048&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){i||(S(e.$$.fragment,n),i=!0)},o(n){C(e.$$.fragment,n),i=!1},d(n){K(e,n)}}}function ut(t){let e,i,n=t[2],a=[];for(let f=0;f<n.length;f+=1)a[f]=ge(de(t,n,f));const r=f=>C(a[f],1,1,()=>{a[f]=null});return{c(){for(let f=0;f<a.length;f+=1)a[f].c();e=ue()},l(f){for(let c=0;c<a.length;c+=1)a[c].l(f);e=ue()},m(f,c){for(let s=0;s<a.length;s+=1)a[s].m(f,c);O(f,e,c),i=!0},p(f,c){if(c&6){n=f[2];let s;for(s=0;s<n.length;s+=1){const o=de(f,n,s);a[s]?(a[s].p(o,c),S(a[s],1)):(a[s]=ge(o),a[s].c(),S(a[s],1),a[s].m(e.parentNode,e))}for(Se(),s=n.length;s<a.length;s+=1)r(s);Ce()}},i(f){if(!i){for(let c=0;c<n.length;c+=1)S(a[c]);i=!0}},o(f){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)C(a[c]);i=!1},d(f){we(a,f),f&&b(e)}}}function ct(t){let e,i;return e=new at({props:{colwidth:"narrow",$$slots:{default:[ut]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,a){E(e,n,a),i=!0},p(n,a){const r={};a&2048&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){i||(S(e.$$.fragment,n),i=!0)},o(n){C(e.$$.fragment,n),i=!1},d(n){K(e,n)}}}function dt(t){let e,i,n,a,r,f,c;return i=new ot({props:{items:t[1],mode:"search",placeholder:"Find an area name or postcode",autoClear:!0}}),i.$on("select",t[3]),a=new Je({props:{label:"Browse areas",open:t[0],$$slots:{default:[ct]},$$scope:{ctx:t}}}),f=new Ue({}),{c(){e=R("div"),y(i.$$.fragment),n=X(),y(a.$$.fragment),r=X(),y(f.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var o=J(e);F(i.$$.fragment,o),o.forEach(b),n=G(s),F(a.$$.fragment,s),r=G(s),F(f.$$.fragment,s),this.h()},h(){q(e,"class","select-container")},m(s,o){O(s,e,o),E(i,e,null),O(s,n,o),E(a,s,o),O(s,r,o),E(f,s,o),c=!0},p(s,o){const g={};o&1&&(g.open=s[0]),o&2048&&(g.$$scope={dirty:o,ctx:s}),a.$set(g)},i(s){c||(S(i.$$.fragment,s),S(a.$$.fragment,s),S(f.$$.fragment,s),c=!0)},o(s){C(i.$$.fragment,s),C(a.$$.fragment,s),C(f.$$.fragment,s),c=!1},d(s){s&&b(e),K(i),s&&b(n),K(a,s),s&&b(r),K(f,s)}}}function ht(t){let e,i;return e=new nt({props:{$$slots:{default:[dt]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,a){E(e,n,a),i=!0},p(n,[a]){const r={};a&2049&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){i||(S(e.$$.fragment,n),i=!0)},o(n){C(e.$$.fragment,n),i=!1},d(n){K(e,n)}}}function mt(t,e,i){let{open:n=!1}=e;const a=Qe("areas"),r=[...tt,...lt.slice(1)];function f(s){xe(`${ne}/areas/${s.detail.areacd}`)}const c=(s,o)=>o.parentcd===s.code;return t.$$set=s=>{"open"in s&&i(0,n=s.open)},[n,a,r,f,c]}class wt extends _e{constructor(e){super(),be(this,e,mt,ht,pe,{open:0})}}export{wt as A};
