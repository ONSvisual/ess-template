listOfYears <- as.numeric(unlist(colnames(inputDataFrame)[-1]))
dataRange <- list(min(listOfYears), max(listOfYears))
writeToJSONFile(inputDataFrame, paste0("./json/indicator-raw/all-years/", str_replace(file, ".csv", ""), ".json"), "xyz")
for (year in listOfYears) {
dir.create(paste0("./json/indicator-raw/", year), showWarnings = FALSE)
singleYearDataFrame <- subset(inputDataFrame, select = c("areacd", year))
eval(parse(text=paste0('singleYearJSON <- toJSON(setNames(as.list(singleYearDataFrame$`', year,'`), singleYearDataFrame$areacd),  auto_unbox = TRUE)')))
write(singleYearJSON, paste0("./json/indicator-raw/", year,"/", str_replace(file, ".csv", ""), ".json"))
}
dir.create(paste0("./json/area/", str_replace(file, ".csv", "")), showWarnings = FALSE)
for (i in seq(nrow(inputDataFrame))) {
write(toJSON(unbox(inputDataFrame[i,])), paste0("./json/area/", str_replace(file, ".csv", ""),"/",inputDataFrame[i, "areacd"],".json"))
}
rankDataFrame <- merge(x = inputDataFrame, y = areasLookup, by = "areacd", all.x = TRUE)
for (geoLevel in colnames(areasLookup)[-1:-2]) {
eval(parse(text=paste0("rankDataFrameFiltered <- filter(rankDataFrame, !is.na(",geoLevel,") && ",geoLevel," != 'N')")))
for (year in listOfYears) {
eval(parse(text=paste0("rankDataFrameFiltered <- rankDataFrameFiltered %>% group_by(",geoLevel,") %>% mutate(rank_",geoLevel,"_",year,"=(",geoLevel,"!='N')*min_rank(`",year,"`))")))
eval(parse(text=paste0("rankDataFrameFiltered$`",year,"` <- NULL")))
}
rankDataFrameFiltered$areanm <- NULL
for (geoLevelAgain in colnames(areasLookup)[-1:-2]) {
eval(parse(text=paste0("rankDataFrameFiltered$",geoLevelAgain," <- NULL")))
}
if (nrow(rankDataFrameFiltered) > 0) {
#writeToJSONFile(rankDataFrameFiltered, paste0("./json/indicator-rank/", geoLevel, "/", str_replace(file, "-.csv", ""), ".json"), paste0("rank_", geoLevel, "_"))
}
}
}
library(tidyverse)
library(readxl)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
for (row in 1:nrow(config_indicators)) {
indicator_data <- read_csv(paste0("./csv-preprocess/", config_indicators[row, "code"] ,".csv"))
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
primary_years <- c(max(list_of_years))
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
if (default_initial_year %in% list_of_years) {
primary_years <- append(primary_years, default_initial_year)
}
print(primary_years)
}
config_indicators[row, "primaryYears"] <- primary_years
View(config_indicators)
View(indicator_data)
flattened_indicator_data <- indicator_data |>
pivot_longer(!areacd , names_to = "year", values_to = "value")
View(indicator_data)
View(indicator_data)
flattened_indicator_data <- indicator_data |>
pivot_longer(names_to = "year", values_to = "value")
View(indicator_data)
View(indicator_data)
View(config_indicators)
for (row in 1:nrow(config_indicators)) {
indicator_code <- config_indicators[row, "code"]
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
#flattened_indicator_data <- indicator_data |>
#pivot_longer(!areacd , names_to = "year", values_to = "value")
#indicator_latest_year_data <- indicator_data |>
#filter(year == latest_year) |>
#mutate(code = indicator_code) |>
}
View(indicator_data)
flattened_indicator_data <- indicator_data |>
pivot_longer(!areacd , names_to = "year", values_to = "value")
flattened_indicator_data <- indicator_data |>
pivot_longer(names_to = "year", values_to = "value")
library(tidyverse)
library(readxl)
flattened_indicator_data <- indicator_data |>
pivot_longer(names_to = "year", values_to = "value")
flattened_indicator_data <- indicator_data |>
pivot_longer(names_to = "year", values_to = "value")
flattened_indicator_data <- indicator_data |>
pivot_longer(!areacd , names_to = "year", values_to = "value")
flattened_indicator_data <- indicator_data |>
pivot_longer(-c(areacd) , names_to = "year", values_to = "value")
View(indicator_data)
indicator_data_test <- indicator_data |>
mutate(`2019` = `2020` )
View(config_indicators)
View(indicator_data)
indicator_data_test <- indicator_data |>
mutate(`2019` = 2000)
indicator_data_test <- indicator_data |>
mutate(hello = 2000)
indicator_data_test <- indicator_data
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value")
View(flattened_indicator_data)
indicator_latest_year_data <- indicator_data %>%
filter(year == latest_year) %>%
mutate(code = indicator_code)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = indicator_code)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(`code` = indicator_code)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate("code" = indicator_code)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = indicator_code)
View(indicator_latest_year_data)
library(tidyverse)
library(jsonlite)
library(stringr)
library(data.table)
library(tidyverse)
library(readxl)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
indicator_code <- config_indicators[row, "code"]
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value")
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = indicator_code)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
indicator_other_year_data <- flattened_indicator_data %>%
filter(year %in% c(latest_year, default_initial_year))
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
write.csv(latest_year_data, paste0("./csv/latest-year/data.csv"), row.names = FALSE)
View(latest_year_data)
write.csv(latest_year_data, paste0("./csv/latest-year/data.csv"), row.names = FALSE)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = indicator_code)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = 100)
View(indicator_latest_year_data)
View(config_indicators)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = config_indicators[row, "id"])
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(code = config_indicators[row, "id"]$id)
View(indicator_latest_year_data)
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeID = config_indicators[row, "id"]$id)
library(tidyverse)
library(jsonlite)
library(stringr)
library(data.table)
library(tidyverse)
library(readxl)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
indicator_code <- config_indicators[row, "code"]
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value")
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeID = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, paste0("./csv/latest-year/data.csv"), row.names = FALSE)
library(tidyverse)
library(jsonlite)
library(stringr)
library(data.table)
library(tidyverse)
library(readxl)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
indicator_code <- config_indicators[row, "code"]
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value")
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeID = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(!year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, paste0("./csv/latest-year/data.csv"), row.names = FALSE)
print(is.numeric(NA))
library(tidyverse)
library(readxl)
library(stringr)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
created_files_log <- data.frame(code=character(),
type=character(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
if (is.na(config_indicators[row, "label"]$label)) {
config_indicators[row, "label"] <- str_to_sentence(str_replace_all(config_indicators[row, "code"], "_", " "))
}
indicator_code <- config_indicators[row, "code"]$code
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
indicator_data <- indicator_data %>%
filter(areacd %in% areas$areacd)
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value") %>%
filter(is.numeric(value))
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeId = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="initial")
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(!year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="other")
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, "./csv/latest-year/data.csv", row.names = FALSE)
#write.csv(config_indicators, "./config-data/config-indicators.csv", row.names = FALSE, na="")
write.csv(created_files_log, "./config-data/datasets-log.csv", row.names = FALSE)
library(tidyverse)
library(readxl)
library(stringr)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
created_files_log <- data.frame(code=character(),
type=character(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
if (is.na(config_indicators[row, "label"]$label)) {
config_indicators[row, "label"] <- str_to_sentence(str_replace_all(config_indicators[row, "code"], "_", " "))
}
indicator_code <- config_indicators[row, "code"]$code
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
indicator_data <- indicator_data %>%
filter(areacd %in% areas$areacd)
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value") %>%
filter(is.numeric(value)) %>%
filter(!is.na(value))
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeId = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="initial")
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(!year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="other")
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, "./csv/latest-year/data.csv", row.names = FALSE)
#write.csv(config_indicators, "./config-data/config-indicators.csv", row.names = FALSE, na="")
write.csv(created_files_log, "./config-data/datasets-log.csv", row.names = FALSE)
View(config_indicators)
View(latest_year_data)
library(tidyverse)
library(readxl)
library(stringr)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
created_files_log <- data.frame(code=character(),
type=character(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
if (is.na(config_indicators[row, "label"]$label)) {
config_indicators[row, "label"] <- str_to_sentence(str_replace_all(config_indicators[row, "code"], "_", " "))
}
indicator_code <- config_indicators[row, "code"]$code
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
indicator_data <- indicator_data %>%
filter(areacd %in% areas$areacd)
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value") %>%
filter(is.numeric(as.numeric(value))) %>%
filter(!is.na(value))
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeId = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="initial")
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(!year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="other")
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, "./csv/latest-year/data.csv", row.names = FALSE)
#write.csv(config_indicators, "./config-data/config-indicators.csv", row.names = FALSE, na="")
write.csv(created_files_log, "./config-data/datasets-log.csv", row.names = FALSE)
View(latest_year_data)
library(tidyverse)
library(readxl)
library(stringr)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
created_files_log <- data.frame(code=character(),
type=character(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
if (is.na(config_indicators[row, "label"]$label)) {
config_indicators[row, "label"] <- str_to_sentence(str_replace_all(config_indicators[row, "code"], "_", " "))
}
indicator_code <- config_indicators[row, "code"]$code
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
indicator_data <- indicator_data %>%
filter(areacd %in% areas$areacd)
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value") %>%
filter(is.numeric(as.numeric(value))) %>%
filter(value != "na") %>%
filter(!is.na(value))
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeId = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="initial")
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(!year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="other")
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, "./csv/latest-year/data.csv", row.names = FALSE)
#write.csv(config_indicators, "./config-data/config-indicators.csv", row.names = FALSE, na="")
write.csv(created_files_log, "./config-data/datasets-log.csv", row.names = FALSE)
View(latest_year_data)
library(tidyverse)
library(readxl)
library(stringr)
config_indicators <- read_csv("./config-data/config-indicators.csv")
areas <- read_csv("./config-data/areas.csv")
latest_year_data <- data.frame(areacd=character(),
code=character(),
year=double(),
value=double(),
stringsAsFactors=FALSE)
created_files_log <- data.frame(code=character(),
type=character(),
stringsAsFactors=FALSE)
for (row in 1:nrow(config_indicators)) {
if (is.na(config_indicators[row, "label"]$label)) {
config_indicators[row, "label"] <- str_to_sentence(str_replace_all(config_indicators[row, "code"], "_", " "))
}
indicator_code <- config_indicators[row, "code"]$code
indicator_data <- read_csv(paste0("./csv-preprocess/", indicator_code ,".csv"))
indicator_data <- indicator_data %>%
filter(areacd %in% areas$areacd)
list_of_years <- as.numeric(unlist(colnames(indicator_data)[-1]))
latest_year <- max(list_of_years)
config_indicators[row, "latestYear"] <- latest_year
default_initial_year <- as.numeric(config_indicators[row, "defaultInitialYear"])
flattened_indicator_data <- indicator_data %>%
pivot_longer(!areacd , names_to = "year", values_to = "value") %>%
filter(is.numeric(as.numeric(value))) %>%
filter(value != "na") %>%
filter(!is.na(value))
indicator_latest_year_data <- flattened_indicator_data %>%
filter(year == latest_year) %>%
mutate(codeId = config_indicators[row, "id"]$id)
latest_year_data <- rbind(latest_year_data, indicator_latest_year_data)
indicator_initial_year_data <- flattened_indicator_data %>%
filter(year == default_initial_year)
if (nrow(indicator_initial_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="initial")
write.csv(indicator_initial_year_data, paste0("./csv/initial-year/",indicator_code,".csv"), row.names = FALSE)
}
indicator_other_year_data <- flattened_indicator_data %>%
filter(!year %in% c(latest_year, default_initial_year))
if (nrow(indicator_other_year_data) > 0) {
created_files_log <- created_files_log %>%
add_row(code=indicator_code, type="other")
write.csv(indicator_other_year_data, paste0("./csv/other-years/",indicator_code,".csv"), row.names = FALSE)
}
}
write.csv(latest_year_data, "./csv/latest-year/data.csv", row.names = FALSE)
#write.csv(config_indicators, "./config-data/config-indicators.csv", row.names = FALSE, na="")
write.csv(created_files_log, "./config-data/datasets-log.csv", row.names = FALSE)
